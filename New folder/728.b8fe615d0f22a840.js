(self.webpackChunkng_turbo_games=self.webpackChunkng_turbo_games||[]).push([[728],{7728:(Ut,Wt,D)=>{"use strict";D.r(Wt),D.d(Wt,{CoreModule:()=>Ai});var N=D(9808),j=D(9039),lt=D(6352),o=D(7587);let yt=(()=>{class _{}return _.\u0275fac=function(p){return new(p||_)},_.\u0275mod=o.oAB({type:_}),_.\u0275inj=o.cJS({imports:[[N.ez,j.aE]]}),_})();var W=D(8248),K=D(4364);let dt=(()=>{class _{}return _.\u0275fac=function(p){return new(p||_)},_.\u0275mod=o.oAB({type:_}),_.\u0275inj=o.cJS({imports:[[N.ez,W._J,lt.y4,K.D]]}),_})(),ft=(()=>{class _{}return _.\u0275fac=function(p){return new(p||_)},_.\u0275mod=o.oAB({type:_}),_.\u0275inj=o.cJS({imports:[[N.ez,lt.y4]]}),_})();var ut=D(3075),Ot=D(8721);let Yt=(()=>{class _{}return _.\u0275fac=function(p){return new(p||_)},_.\u0275mod=o.oAB({type:_}),_.\u0275inj=o.cJS({imports:[[N.ez,Ot.F,ut.u5,lt.y4]]}),_})(),xt=(()=>{class _{}return _.\u0275fac=function(p){return new(p||_)},_.\u0275mod=o.oAB({type:_}),_.\u0275inj=o.cJS({imports:[[N.ez,Yt,ut.u5,j.XC,lt.y4,K.D]]}),_})(),at=(()=>{class _{}return _.\u0275fac=function(p){return new(p||_)},_.\u0275mod=o.oAB({type:_}),_.\u0275inj=o.cJS({imports:[[N.ez,Ot.F,ut.u5,lt.y4]]}),_})(),jt=(()=>{class _{}return _.\u0275fac=function(p){return new(p||_)},_.\u0275mod=o.oAB({type:_}),_.\u0275inj=o.cJS({imports:[[N.ez,j.IJ,ut.UX,at,lt.y4]]}),_})(),bt=(()=>{class _{}return _.\u0275fac=function(p){return new(p||_)},_.\u0275mod=o.oAB({type:_}),_.\u0275inj=o.cJS({imports:[[N.ez,jt,W._J,lt.y4,K.D]]}),_})(),Z=(()=>{class _{}return _.\u0275fac=function(p){return new(p||_)},_.\u0275mod=o.oAB({type:_}),_.\u0275inj=o.cJS({imports:[[N.ez,xt,bt,dt,ft]]}),_})(),tt=(()=>{class _{}return _.\u0275fac=function(p){return new(p||_)},_.\u0275mod=o.oAB({type:_}),_.\u0275inj=o.cJS({imports:[[N.ez]]}),_})();var rt=D(7303);let ht=(()=>{class _{}return _.\u0275fac=function(p){return new(p||_)},_.\u0275mod=o.oAB({type:_}),_.\u0275inj=o.cJS({imports:[[N.ez]]}),_})(),wt=(()=>{class _{}return _.\u0275fac=function(p){return new(p||_)},_.\u0275mod=o.oAB({type:_}),_.\u0275inj=o.cJS({imports:[[N.ez]]}),_})();var V=D(4996),U=D(7582),st=D(4987),H=D(9749),Kt=D(9892),Vt=D(2805),te=D(9300),Zt=D(6069),Mt=D(1361);const I=Object.freeze({mines:{name:"mines",url:"./resources/dist/mines/mines.json"},"mines@2x":{name:"mines",url:"./resources/dist/mines/mines@2x.json"},goal:{name:"goal",url:"./resources/dist/goal/goal.json"},"goal@2x":{name:"goal",url:"./resources/dist/goal/goal@2x.json"},plinko:{name:"plinko",url:"./resources/dist/plinko/plinko.json"},"plinko@2x":{name:"plinko",url:"./resources/dist/plinko/plinko.json"},hotline:{name:"hotline",url:"./resources/dist/hotline/hotline.json"},"hotline@2x":{name:"hotline",url:"./resources/dist/hotline/hotline.json"},hilo:{name:"hilo",url:"./resources/dist/hilo/hilo.json"},"hilo@2x":{name:"hilo",url:"./resources/dist/hilo/hilo@2x.json"},"mini-roulette":{name:"mini-roulette",url:"./resources/dist/mini-roulette/mini-roulette.json"},"mini-roulette@2x":{name:"mini-roulette",url:"./resources/dist/mini-roulette/mini-roulette@2x.json"},chips:{name:"chips",url:"./resources/dist/chips/chips.json"},"chips@2x":{name:"chips",url:"./resources/dist/chips/chips@2x.json"},cards:{name:"cards",url:"./resources/dist/cards/cards.json"},"cards@2x":{name:"cards",url:"./resources/dist/cards/cards.json"}});var E=(()=>{return(_=E||(E={}))[_.JSON=1]="JSON",E;var _})(),k=D(6652),G=D(614),Y=D(8044),it=D(4946),ct=D(9082),St=D(7437),gt=D(8351),Dt=D(7832),It=D(2821),Xt=D(2313),Jt=D(8784),Qt=D(9578),ee=D(9150),ce=D(8112),fe=D(3411),ne=D(710),re=D(6064),me=D(9798),yr=D(1135),fr=(()=>{return(_=fr||(fr={})).Sound="SOUND",_.Music="MUSIC",fr;var _})(),Ye=D(7111),or=(()=>{return(_=or||(or={})).volumeSound="vlS",_.volumeMusic="vlM",or;var _})();let Er=(()=>{class _{constructor(p,w,J,zt,Ee){this.storage=p,this.coreService=w,this.connectorService=J,this.soundService=zt,this.ifcApiService=Ee,this.isUseSettingSound=!1,this.isUseSettingMusic=!1}init(){this.settings.hasOwnProperty("sound")&&(this.isUseSettingSound=!0),this.settings.hasOwnProperty("music")&&(this.isUseSettingMusic=!0),this._volumeSoundSubject=new yr.X(this.volumeSound),this._volumeMusicSubject=new yr.X(this.volumeMusic),this.soundService.muteMusic=this.volumeMusic,this.soundService.muteSound=this.volumeSound}get volumeSound(){return this.isUseSettingSound?this.settings.sound:this.getSetting(or.volumeSound)}set volumeSound(p){this.isUseSettingSound?this.connectorService.request(Y.T.SetPlayerSetting,{name:fr.Sound,value:p}):this.setSetting(or.volumeSound,p),this.soundService.muteSound=p,this._volumeSoundSubject.next(p),this.ifcApiService.emitEvent(ct.g.Sound,{value:p})}get volumeMusic(){return this.isUseSettingMusic?this.settings.music:this.getSetting(or.volumeMusic)}set volumeMusic(p){this.isUseSettingMusic?this.connectorService.request(Y.T.SetPlayerSetting,{name:fr.Music,value:p}):this.setSetting(or.volumeMusic,p),this.soundService.muteMusic=p,this._volumeMusicSubject.next(p),this.ifcApiService.emitEvent(ct.g.Music,{value:p})}get volumeSound$(){return this._volumeSoundSubject.asObservable()}get volumeMusic$(){return this._volumeMusicSubject.asObservable()}get settings(){return this.coreService.user.settings}getSetting(p){const w=this.storage.local.getItem("__stgs"+p);return w&&"true"===w}setSetting(p,w){this.storage.local.setItem("__stgs"+p,w)}}return _.\u0275fac=function(p){return new(p||_)(o.LFG(fe.V),o.LFG(It.p),o.LFG(Qt.v),o.LFG(Ye.y),o.LFG(ne.h))},_.\u0275prov=o.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();var ln=D(1911),qe=D(7258),Be=D(4750),ie=(()=>{return(_=ie||(ie={})).Aviator="aviator",_.Dice="dice",_.Goal="goal",_.Plinko="plinko",_.Mines="mines",_.HiLo="hi-lo",_.Keno="keno",_.MiniRoulette="mini-roulette",_.Hotline="hotline",_.Poker="poker",_.Multikeno="multikeno",_.Balloon="balloon",ie;var _})();const br={[ie.Aviator]:{name:"Aviator",providerKey:"spribe_aviator",gameId:ie.Aviator},[ie.Dice]:{name:"Dice",providerKey:"spribe_crypto",gameId:ie.Dice},[ie.Goal]:{name:"Goal",providerKey:"spribe_crypto",gameId:ie.Goal},[ie.Plinko]:{name:"Plinko",providerKey:"spribe_crypto",gameId:ie.Plinko},[ie.Mines]:{name:"Mines",providerKey:"spribe_crypto",gameId:ie.Mines},[ie.HiLo]:{name:"Hi Lo",providerKey:"spribe_crypto",gameId:ie.HiLo},[ie.Keno]:{name:"Keno",providerKey:"spribe_crypto",gameId:ie.Keno},[ie.MiniRoulette]:{name:"Mini Roulette",providerKey:"spribe_crypto",gameId:ie.MiniRoulette},[ie.Hotline]:{name:"Hotline",providerKey:"spribe_crypto",gameId:ie.Hotline},[ie.Balloon]:{name:"Balloon",providerKey:"spribe_crypto",gameId:ie.Balloon},[ie.Poker]:{name:"Poker",providerKey:"spribe_poker",gameId:ie.Poker},[ie.Multikeno]:{name:"Keno 80",providerKey:"spribe_keno",gameId:ie.Multikeno}},wn={[Mt.R.Dice]:ie.Dice,[Mt.R.Goal]:ie.Goal,[Mt.R.Plinko]:ie.Plinko,[Mt.R.Mines]:ie.Mines,[Mt.R.Hilo]:ie.HiLo,[Mt.R.Keno]:ie.Keno,[Mt.R.MiniRoulette]:ie.MiniRoulette,[Mt.R.Hotline]:ie.Hotline,[Mt.R.Balloon]:ie.Balloon},Jr=_=>{const C=Math.floor(_/6e4%60),p=Math.floor(_/36e5);return(p<10?`0${p}:`:`${p}:`)+(C<10?`0${C}`:`${C}`)};let Kn=(()=>{class _{}return _.\u0275fac=function(p){return new(p||_)},_.\u0275prov=o.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();const pr=["time"];let Sn=(()=>{class _{constructor(p,w){this.zone=p,this.loginTimer=w,this.interval=100}ngOnInit(){this.zone.runOutsideAngular(()=>{this.timer(),this.intervalRef=window.setInterval(()=>this.timer(),this.interval)})}timer(){const p=Math.floor(Date.now());this.loginTimer.startTime||(this.loginTimer.startTime=p,this.loginTimer.previousTimeStamp=p,this.timeRef.nativeElement.textContent=Jr(0)),p-this.loginTimer.previousTimeStamp>=1e3&&(this.timeRef.nativeElement.textContent=Jr(p-this.loginTimer.startTime),this.loginTimer.previousTimeStamp=p)}ngOnDestroy(){clearInterval(this.intervalRef),this.intervalRef=null}}return _.\u0275fac=function(p){return new(p||_)(o.Y36(o.R0b),o.Y36(Kn))},_.\u0275cmp=o.Xpm({type:_,selectors:[["app-login-timer"]],viewQuery:function(p,w){if(1&p&&o.Gf(pr,7),2&p){let J;o.iGM(J=o.CRH())&&(w.timeRef=J.first)}},decls:4,vars:0,consts:[[1,"login-timer"],[1,"timer-icon"],[1,"time"],["time",""]],template:function(p,w){1&p&&(o.TgZ(0,"div",0),o._UZ(1,"div",1)(2,"span",2,3),o.qZA())},styles:[".login-timer[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;color:#929294}.login-timer[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:12px;font-weight:400;color:#ffffff80}.login-timer[_ngcontent-%COMP%]   .timer-icon[_ngcontent-%COMP%]{height:16px;width:16px;margin-right:4px;margin-bottom:2px;background:url(icon-clock.b3d0dbe42b304ddb.svg) no-repeat center center/contain}"],changeDetection:0}),_})();const Ke=["time"];let L=(()=>{class _{constructor(p){this.zone=p,this.interval=1e3}ngOnInit(){this.timeRef.nativeElement.textContent=this.getTime(new Date),this.zone.runOutsideAngular(()=>{this.intervalRef=window.setInterval(()=>{this.timeRef.nativeElement.textContent=this.getTime(new Date)},this.interval)})}getTime(p){const w=p.getHours(),J=p.getMinutes();return`${w<10?`0${w}`:`${w}`}:${J<10?`0${J}`:`${J}`}`}ngOnDestroy(){clearInterval(this.intervalRef),this.intervalRef=null}}return _.\u0275fac=function(p){return new(p||_)(o.Y36(o.R0b))},_.\u0275cmp=o.Xpm({type:_,selectors:[["app-clock"]],viewQuery:function(p,w){if(1&p&&o.Gf(Ke,7),2&p){let J;o.iGM(J=o.CRH())&&(w.timeRef=J.first)}},decls:4,vars:0,consts:[[1,"clock-timer"],[1,"clock-icon"],[1,"time"],["time",""]],template:function(p,w){1&p&&(o.TgZ(0,"div",0),o._UZ(1,"div",1)(2,"span",2,3),o.qZA())},styles:[".clock-timer[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;color:#929294}.clock-timer[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:12px;font-weight:400;color:#ffffff80}.clock-timer[_ngcontent-%COMP%]   .clock-icon[_ngcontent-%COMP%]{height:16px;width:16px;margin-right:4px;margin-bottom:2px;background:url(icon-clock.b3d0dbe42b304ddb.svg) no-repeat center center/contain}"],changeDetection:0}),_})();var nt=D(3031),ve=(()=>{return(_=ve||(ve={})).Navigate="navigate",_.IfcEvent="ifcEvent",ve;var _})(),_e=(()=>{return(_=_e||(_e={})).Navigate="navigate",_.IfcEvent="ifcEvent",_.NewTab="newTab",_e;var _})(),xe=D(8419);function ue(_,C){if(1&_){const p=o.EpF();o.TgZ(0,"div",5)(1,"div",6)(2,"div",2),o._UZ(3,"i",29),o.TgZ(4,"span",8),o._uU(5),o.qZA()(),o.TgZ(6,"div",9)(7,"input",30),o.NdJ("change",function(J){return o.CHM(p),o.oxw(2).toggleVolumeMusic(J)}),o.ALo(8,"async"),o.qZA(),o.TgZ(9,"label",31),o._uU(10," \xa0 "),o.qZA()()()()}if(2&_){const p=o.oxw().$implicit,w=o.oxw();o.xp6(5),o.Oqu(p("shared.Music")),o.xp6(2),o.Q6J("checked",o.lcZ(8,2,w.settings.volumeMusic$))}}function Tr(_,C){if(1&_&&(o.TgZ(0,"span",35),o._uU(1),o.qZA()),2&_){const p=o.oxw(3);o.xp6(1),o.hij(" ",p.freeBets.count," ")}}const xr=function(_){return{disabled:_}};function Ue(_,C){if(1&_){const p=o.EpF();o.TgZ(0,"div",32),o.NdJ("click",function(){o.CHM(p);const J=o.oxw(2);return J.onOpen(J.ModalKey.FreeBets)}),o.TgZ(1,"div",15),o._UZ(2,"i",33),o.TgZ(3,"span",8),o._uU(4),o.YNc(5,Tr,2,1,"span",34),o.qZA()()()}if(2&_){const p=o.oxw().$implicit,w=o.oxw();o.Q6J("ngClass",o.VKq(3,xr,w.isBetSet)),o.xp6(4),o.hij(" ",p("shared.Free-Bets")," "),o.xp6(1),o.Q6J("ngIf",w.freeBets.count>0)}}function ar(_,C){if(1&_){const p=o.EpF();o.TgZ(0,"div",36)(1,"div",37)(2,"a",38),o.NdJ("click",function(){return o.CHM(p),o.oxw(2).backToHome()}),o.TgZ(3,"span",39),o._UZ(4,"i",40),o.TgZ(5,"span",8),o._uU(6),o.qZA()()()(),o._UZ(7,"hr"),o.qZA()}if(2&_){const p=o.oxw().$implicit;o.xp6(6),o.hij(" ",p("shared.Back-to-Home")," ")}}function Pn(_,C){if(1&_){const p=o.EpF();o.ynx(0),o.TgZ(1,"div",1)(2,"div",2)(3,"span",3),o._uU(4),o.qZA()(),o.TgZ(5,"div")(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",2),o._UZ(10,"i",7),o.TgZ(11,"span",8),o._uU(12),o.qZA()(),o.TgZ(13,"div",9)(14,"input",10),o.NdJ("change",function(J){return o.CHM(p),o.oxw().toggleVolumeSound(J)}),o.ALo(15,"async"),o.qZA(),o.TgZ(16,"label",11),o._uU(17," \xa0 "),o.qZA()()()(),o.YNc(18,ue,11,4,"div",12),o.qZA()(),o.TgZ(19,"div")(20,"div",4),o.YNc(21,Ue,6,5,"div",13),o.TgZ(22,"div",14),o.NdJ("click",function(){return o.CHM(p),o.oxw().onMyBetsHistoryOpen()}),o.TgZ(23,"div",15),o._UZ(24,"i",16),o.TgZ(25,"span",8),o._uU(26),o.qZA()()(),o.TgZ(27,"div",14),o.NdJ("click",function(){o.CHM(p);const J=o.oxw();return J.onOpen(J.ModalKey.GameLimits)}),o.TgZ(28,"div",15),o._UZ(29,"i",17),o.TgZ(30,"span",8),o._uU(31),o.qZA()()(),o.TgZ(32,"div",14),o.NdJ("click",function(){o.CHM(p);const J=o.oxw();return J.onOpen(J.ModalKey.HowToPlay)}),o.TgZ(33,"div",15),o._UZ(34,"svg-icon",18),o.TgZ(35,"span",8),o._uU(36),o.qZA()()(),o.TgZ(37,"div",14),o.NdJ("click",function(){o.CHM(p);const J=o.oxw();return J.onOpen(J.ModalKey.GameRules)}),o.TgZ(38,"div",15),o._UZ(39,"i",19),o.TgZ(40,"span",8),o._uU(41),o.qZA()()(),o.TgZ(42,"div",20),o.NdJ("click",function(){o.CHM(p);const J=o.oxw();return J.onOpen(J.ModalKey.ProvablyFairSettings)}),o.TgZ(43,"div",15),o._UZ(44,"i",21),o.TgZ(45,"span",8),o._uU(46),o.qZA()()()()(),o.YNc(47,ar,8,1,"div",22),o.TgZ(48,"div",23)(49,"div",24),o.NdJ("click",function(){o.CHM(p);const J=o.oxw();return J.onOpen(J.ModalKey.ProvablyFairInfo)}),o._UZ(50,"i",25),o.TgZ(51,"span",26),o._uU(52),o.qZA()(),o.TgZ(53,"div",2)(54,"span"),o._uU(55,"\xa9"),o.qZA(),o.TgZ(56,"a",27),o._UZ(57,"i",28),o.qZA()()()(),o.BQk()}if(2&_){const p=C.$implicit,w=o.oxw();o.xp6(4),o.Oqu(w.user.username),o.xp6(8),o.Oqu(p("shared.Sound")),o.xp6(2),o.Q6J("checked",o.lcZ(15,14,w.settings.volumeSound$)),o.xp6(4),o.Q6J("ngIf",w.isViewToggleMusic),o.xp6(3),o.Q6J("ngIf",w.isHideFreeBets()),o.xp6(5),o.hij(" ",p("shared.Bet History")," "),o.xp6(5),o.hij(" ",p("shared.Game-Limits")," "),o.xp6(5),o.hij(" ",p("shared.How-to-Play")," "),o.xp6(5),o.hij(" ",p("shared.Game-Rules")," "),o.xp6(1),o.Q6J("ngClass",o.VKq(16,xr,w.isBetSet)),o.xp6(4),o.hij(" ",p("shared.Provably-Fair-Settings")," "),o.xp6(1),o.Q6J("ngIf",w.initialUrlParams.returnUrl),o.xp6(5),o.hij(" ",p("shared.Provably-Fair-Game")," "),o.xp6(4),o.Q6J("href","https://spribe.co",o.LSH)}}let We=class{constructor(C,p,w,J,zt){this.modal=C,this.core=p,this.settingsService=w,this.appService=J,this.ifcApiService=zt,this.ModalKey=k.$}get isBetSet(){return this.core.isBetSet}ngOnInit(){this.ifcApiService.command(ct._.SetSound).pipe((0,st.t)(this)).subscribe(C=>{this.settings.volumeSound=C.value}),this.ifcApiService.command(ct._.SetMusic).pipe((0,st.t)(this)).subscribe(C=>{this.settings.volumeMusic=C.value}),this.ifcApiService.command(ct._.OpenHelp).pipe((0,st.t)(this)).subscribe(()=>{this.onOpen(k.$.HowToPlay)})}userAvatarPath(C){return xe.N.avatarPath+C}onOpen(C){this.modal.open(this.core.activeGame===Mt.R.Balloon&&C===k.$.HowToPlay?k.$.BalloonHowToPlay:C)}isHideFreeBets(){return this.core.activeGame!==Mt.R.MiniRoulette&&!this.core.config.isHideFreeBetsInUserMenu}get user(){return this.core.user}get freeBets(){return this.core.freeBets}get settings(){return this.settingsService}get initialUrlParams(){return this.appService.initialUrlParams}get isViewToggleMusic(){return this.core.activeGame===Mt.R.Balloon}onMyBetsHistoryOpen(){this.core.config.accountHistoryActionType===_e.IfcEvent?this.ifcApiService.emitEvent(ct.g.AccountHistory,{accountHistoryUrl:this.appService.initialUrlParams.accountHistoryUrl}):this.core.config.accountHistoryActionType===_e.NewTab&&this.appService.initialUrlParams.accountHistoryUrl?window.open(this.appService.initialUrlParams.accountHistoryUrl,"_blank"):this.appService.initialUrlParams.accountHistoryUrl?window.open(this.appService.initialUrlParams.accountHistoryUrl,"_top"):this.onOpen(k.$.BetsHistory)}backToHome(){this.core.config.backToHomeActionType!==ve.IfcEvent?window.open(this.initialUrlParams.returnUrl,"_top"):this.ifcApiService.emitEvent(ct.g.BackToHome,{returnUrl:this.initialUrlParams.returnUrl})}toggleVolumeSound(C){this.settings.volumeSound=C.target.checked}toggleVolumeMusic(C){this.settings.volumeMusic=C.target.checked}};We.\u0275fac=function(C){return new(C||We)(o.Y36(ee.Z),o.Y36(It.p),o.Y36(Er),o.Y36(ce.z),o.Y36(ne.h))},We.\u0275cmp=o.Xpm({type:We,selectors:[["app-user-menu"]],decls:1,vars:0,consts:[[4,"transloco"],[1,"user-menu","px-2"],[1,"d-flex","align-items-center"],[1,"text-truncate","username"],[1,"mt-2","list-group","list-group-flush"],[1,"list-group-item","list-group-item-bg","gui-text","rounded"],[1,"d-flex","w-100","align-items-center","justify-content-between"],[1,"ml-3","icon","volume"],[1,"ml-2"],[1,"custom-control","custom-switch","d-flex","align-items-center"],["type","checkbox","name","volumeSound","id","switch-sound",1,"custom-control-input",3,"checked","change"],["for","switch-sound",1,"custom-control-label"],["class","list-group-item list-group-item-bg gui-text rounded",4,"ngIf"],["class","list-group-item list-group-item-action rounded-top gui-text dropdown-item",3,"ngClass","click",4,"ngIf"],[1,"list-group-item","list-group-item-action","gui-text","dropdown-item",3,"click"],[1,"d-flex","w-100","align-items-center"],[1,"ml-3","icon","history"],[1,"ml-3","icon","limits"],["src","assets/icons/icon-question.svg",1,"ml-3"],[1,"ml-3","icon","rules"],[1,"list-group-item","list-group-item-action","rounded-bottom","gui-text","dropdown-item",3,"ngClass","click"],[1,"ml-3","icon","scales"],["class","mt-2",4,"ngIf"],[1,"mt-2","d-flex","justify-content-between","align-items-center"],[1,"d-flex","align-items-center","provably-fair-wrapper","dropdown-item",3,"click"],[1,"icon","provably-fair"],[1,"ml-1"],["target","_blank",1,"dropdown-item",3,"href"],[1,"ml-1","d-block","icon","logo"],[1,"ml-3","icon","music"],["type","checkbox","name","volumeMusic","id","switch-music",1,"custom-control-input",3,"checked","change"],["for","switch-music",1,"custom-control-label"],[1,"list-group-item","list-group-item-action","rounded-top","gui-text","dropdown-item",3,"ngClass","click"],[1,"ml-3","icon","star"],["class","badge badge-pill badge-danger",4,"ngIf"],[1,"badge","badge-pill","badge-danger"],[1,"mt-2"],[1,"d-flex","align-items-center","justify-content-center"],["href","javascript:void(0)",3,"click"],[1,"d-flex","align-items-center","back-to-home","gui-text"],[1,"icon","home"]],template:function(C,p){1&C&&o.YNc(0,Pn,58,18,"ng-container",0)},directives:[lt.KI,N.O5,N.mk,W.bk],pipes:[N.Ov],styles:[".user-menu[_ngcontent-%COMP%]{width:298px;font-size:13px}.user-menu[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:40px;height:40px}.user-menu[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{color:#fff}.user-menu[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{display:flex;align-items:center;height:34px;padding:0;border-color:#ffffff1a}.user-menu[_ngcontent-%COMP%]   .list-group-item.disabled[_ngcontent-%COMP%]{opacity:.6;pointer-events:none}.user-menu[_ngcontent-%COMP%]   .list-group-item.rounded-top[_ngcontent-%COMP%]{border-top-left-radius:8px!important;border-top-right-radius:8px!important}.user-menu[_ngcontent-%COMP%]   .list-group-item.rounded-bottom[_ngcontent-%COMP%]{border-bottom-left-radius:8px!important;border-bottom-right-radius:8px!important}.user-menu[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]   .custom-switch[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer}.user-menu[_ngcontent-%COMP%]   .list-group-item-bg[_ngcontent-%COMP%], .user-menu[_ngcontent-%COMP%]   .list-group-item-action[_ngcontent-%COMP%]{background-color:#0003}.user-menu[_ngcontent-%COMP%]   .list-group-item-action[_ngcontent-%COMP%]{cursor:pointer}.user-menu[_ngcontent-%COMP%]   .list-group-item-action[_ngcontent-%COMP%]:hover, .user-menu[_ngcontent-%COMP%]   .list-group-item-action[_ngcontent-%COMP%]:focus{background-color:#0000004d!important}.user-menu[_ngcontent-%COMP%]   .list-group-item-action[_ngcontent-%COMP%]:active{background-color:#0006}.user-menu[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:16px;height:16px;background:no-repeat center center/contain}.user-menu[_ngcontent-%COMP%]   .icon.scales[_ngcontent-%COMP%]{height:15px;background-image:url(icon-scales.e5f683a0b77fd0f1.svg)}.user-menu[_ngcontent-%COMP%]   .icon.history[_ngcontent-%COMP%]{background-image:url(icon-history.1160649dfd98e356.svg)}.user-menu[_ngcontent-%COMP%]   .icon.star[_ngcontent-%COMP%]{background-image:url(icon-star.a48e3d708fd7461a.svg)}.user-menu[_ngcontent-%COMP%]   .icon.rules[_ngcontent-%COMP%]{height:18px;background-image:url(icon-rules.99256ac755bf5a7a.svg)}.user-menu[_ngcontent-%COMP%]   .icon.limits[_ngcontent-%COMP%]{height:10px;background-image:url(icon-limits.aecaaf432c75a1ec.svg)}.user-menu[_ngcontent-%COMP%]   .icon.volume[_ngcontent-%COMP%]{width:18px;height:15px;margin-top:1px;background-image:url(icon-volume.51f0459605884b08.svg)}.user-menu[_ngcontent-%COMP%]   .icon.animation[_ngcontent-%COMP%]{width:18px;height:13px;margin-top:1px;background-image:url(icon-animation.edd6594a340c9484.svg)}.user-menu[_ngcontent-%COMP%]   .icon.provably-fair[_ngcontent-%COMP%]{width:14px;background-image:url(icon-provaby-fair.4f566a4692338648.svg)}.user-menu[_ngcontent-%COMP%]   .icon.logo[_ngcontent-%COMP%]{width:33px;height:14px;background-image:url(icon-logo.07e2fb9b2553a082.svg)}.user-menu[_ngcontent-%COMP%]   .icon.home[_ngcontent-%COMP%]{background-image:url(icon-home.f34eb6cc9d4c0927.svg)}.user-menu[_ngcontent-%COMP%]   .icon.music[_ngcontent-%COMP%]{background-image:url(icon-music.7b3cff2355a813db.svg)}.user-menu[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin:10px 0;background-color:#ffffff1a}.user-menu[_ngcontent-%COMP%]   .provably-fair-wrapper[_ngcontent-%COMP%]{cursor:pointer;font-size:12px}a[_ngcontent-%COMP%]:focus, a[_ngcontent-%COMP%]:active, a[_ngcontent-%COMP%]:hover{text-decoration:none}.dropdown-item[_ngcontent-%COMP%]{color:inherit;padding:inherit}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:inherit!important}"]}),We=(0,U.gn)([(0,st.c)()],We);var Je=D(8855),Hn=D(1820);const Fr=["gameMenu"];function Hr(_,C){if(1&_&&(o.TgZ(0,"div",15),o._uU(1),o.qZA()),2&_){const p=o.oxw(3);o.xp6(1),o.hij(" ",p.gameKeyToTitle(p.activeGame)," ")}}const Or=function(_){return["/",_]};function $r(_,C){if(1&_){const p=o.EpF();o.TgZ(0,"a",22),o.NdJ("click",function(){const zt=o.CHM(p).$implicit;return o.oxw(4).sendSwitchGame(zt)}),o._UZ(1,"svg-icon",23),o.TgZ(2,"span",24),o._uU(3),o.qZA()()}if(2&_){const p=C.$implicit,w=o.oxw(4);o.Q6J("routerLink",o.VKq(3,Or,p)),o.xp6(1),o.MGl("src","assets/icons/icon-",p,".svg"),o.xp6(2),o.Oqu(w.gameKeyToTitle(p))}}function un(_,C){if(1&_&&(o.TgZ(0,"div",16)(1,"button",17)(2,"span",18),o._uU(3),o.qZA()(),o.TgZ(4,"div",19)(5,"div",20),o.YNc(6,$r,4,5,"a",21),o.qZA()()()),2&_){const p=o.oxw(3);o.xp6(1),o.ekj("dropdown-toggle-disable",p.isOnlyOneGameEnable),o.Q6J("disabled",p.isBetSet),o.xp6(2),o.hij(" ",p.gameKeyToTitle(p.activeGame)," "),o.xp6(3),o.Q6J("ngForOf",p.games)}}function vr(_,C){1&_&&(o.TgZ(0,"div",25),o._UZ(1,"app-login-timer"),o.qZA())}function En(_,C){1&_&&(o.TgZ(0,"div",25),o._UZ(1,"app-clock"),o.qZA())}function Xn(_,C){if(1&_&&(o.TgZ(0,"span",26),o._uU(1),o.ALo(2,"decimalCurrency"),o.qZA()),2&_){const p=o.oxw(3);o.ekj("badge_hide",!p.isViewWin),o.Q6J("ngClass",p.getClassIsWin()),o.xp6(1),o.AsE(" +",o.lcZ(2,5,p.winAmount)," ",p.config.currency," ")}}function ti(_,C){1&_&&o.GkF(0)}function hn(_,C){if(1&_){const p=o.EpF();o.TgZ(0,"div",4),o.YNc(1,Hr,2,1,"div",5),o.YNc(2,un,7,5,"div",6),o.TgZ(3,"button",7),o.NdJ("click",function(){o.CHM(p);const J=o.oxw(2);return J.onOpen(J.modalKey.HowToPlay)}),o._UZ(4,"svg-icon",8),o.TgZ(5,"span"),o._uU(6),o.qZA()(),o.YNc(7,vr,2,0,"div",9),o.YNc(8,En,2,0,"div",9),o.TgZ(9,"div",10),o._UZ(10,"app-max-win",11),o.YNc(11,Xn,3,7,"span",12),o._uU(12),o.ALo(13,"decimalCurrency"),o.TgZ(14,"span",13),o._uU(15),o.ALo(16,"hideCurrency"),o.qZA()(),o.YNc(17,ti,1,0,"ng-container",14),o.qZA()}if(2&_){const p=o.oxw().$implicit,w=o.MAs(4),J=o.oxw();o.xp6(1),o.Q6J("ngIf",!J.isHideSwitchGameBtn()),o.xp6(1),o.Q6J("ngIf",J.isHideSwitchGameBtn()),o.xp6(1),o.Q6J("disabled",J.disabled),o.xp6(3),o.hij("",p("shared.How-to-Play"),"?"),o.xp6(1),o.Q6J("ngIf",J.config.isLoginTimer),o.xp6(1),o.Q6J("ngIf",J.config.isClockVisible),o.xp6(3),o.Q6J("ngIf",+J.winAmount>0),o.xp6(1),o.hij(" ",o.lcZ(13,10,J.userBalance)," "),o.xp6(3),o.Oqu(o.lcZ(16,12,J.config.currency)),o.xp6(2),o.Q6J("ngTemplateOutlet",w)}}function ei(_,C){1&_&&o.GkF(0)}function jn(_,C){if(1&_&&(o.TgZ(0,"div",27),o.YNc(1,ei,1,0,"ng-container",14),o.qZA()),2&_){o.oxw();const p=o.MAs(4);o.xp6(1),o.Q6J("ngTemplateOutlet",p)}}function Xr(_,C){if(1&_&&(o.TgZ(0,"div",28,29),o._UZ(2,"button",30),o.TgZ(3,"div",31),o._UZ(4,"app-user-menu"),o.qZA()()),2&_){const p=o.oxw(2);o.ekj("btn-user-menu--notification",!p.appService.initialUrlParams.aviaport&&p.hasFreeBets),o.xp6(2),o.Q6J("disabled",p.disabled)}}function ri(_,C){if(1&_&&(o.ynx(0),o.YNc(1,hn,18,14,"div",1),o.YNc(2,jn,2,1,"div",2),o.YNc(3,Xr,5,3,"ng-template",null,3,o.W1O),o.BQk()),2&_){const p=o.oxw();o.xp6(1),o.Q6J("ngIf",!p.appService.initialUrlParams.aviaport),o.xp6(1),o.Q6J("ngIf",p.appService.initialUrlParams.aviaport)}}let Ar=class{constructor(C,p,w,J){this.core=C,this.modalService=p,this.ifcApiService=w,this.appService=J,this.winAmount="0",this.isWin=!0,this.isViewWin=!1,this.oldBalance="0"}ngOnInit(){this.subscribeUpdateBalance(),this.ifcApiService.command(ct._.SetBalance).pipe((0,st.t)(this)).subscribe(C=>{this.core.user.updateBalance({balance:C.value})}),this.config.isShowWinAmountUntilNextRound&&this.core.startRound$.pipe((0,st.t)(this)).subscribe(()=>{this.isViewWin=!1}),this.ifcApiService.command(ct._.AviaportToggleGameMenu).pipe((0,st.t)(this)).subscribe(()=>{this.onToggleGameMenu()})}get games(){return this.core.config.gameList}get isOnlyOneGameEnable(){return 1===this.core.config.gameList.length}gameKeyToTitle(C){return(0,gt.LF)(C)}getWinAmount(C){return this.core.user.formatAmount(C)}isHideSwitchGameBtn(){return this.core.config.isGameNavigationEnabled}getClassIsWin(){return this.isWin?"badge-success":"badge-secondary"}get activeGame(){return this.core.activeGame}get config(){return this.core.config}get userBalance(){return this.core.user.formattedBalance}get modalKey(){return k.$}get hasFreeBets(){return this.core.freeBets.count>0}onOpen(C){this.modalService.open(this.activeGame===Mt.R.Balloon?k.$.BalloonHowToPlay:C)}sendSwitchGame(C){C!==this.activeGame&&this.ifcApiService.emitEvent(ct.g.SwitchGame,br[wn[C]])}onToggleGameMenu(){this.gameMenu.isOpen()?this.gameMenu.close():this.gameMenu.open()}subscribeUpdateBalance(){this.core.user.updateBalance$.pipe((0,st.t)(this)).subscribe(C=>(0,U.mG)(this,void 0,void 0,function*(){this.ifcApiService.emitEvent(ct.g.UpdateBalance,{amount:new qe.t(this.userBalance).toNumber()}),C&&(this.isWin=this.core.activeGame===Mt.R.Balloon&&C.hasOwnProperty("betAmount")?C.betAmount<C.winAmount:C.win,this.winAmount=this.getWinAmount(C.winAmount),!(+this.winAmount<=0)&&(this.isViewWin=!0,this.config.isShowWinAmountUntilNextRound||(yield(0,Be.V)(1500),this.isViewWin=!1)))}))}};function Ze(_,C){1&_&&o._UZ(0,"i",4)}function Nr(_,C){1&_&&o._UZ(0,"i",5)}Ar.\u0275fac=function(C){return new(C||Ar)(o.Y36(It.p),o.Y36(ee.Z),o.Y36(ne.h),o.Y36(ce.z))},Ar.\u0275cmp=o.Xpm({type:Ar,selectors:[["app-header"]],viewQuery:function(C,p){if(1&C&&o.Gf(Fr,5),2&C){let w;o.iGM(w=o.CRH())&&(p.gameMenu=w.first)}},inputs:{disabled:"disabled",isBetSet:"isBetSet"},decls:1,vars:0,consts:[[4,"transloco"],["class","d-flex align-items-center h-100 c-header",4,"ngIf"],["class","hidden-header",4,"ngIf"],["userMenu",""],[1,"d-flex","align-items-center","h-100","c-header"],["class","btn btn-game name-game",4,"ngIf"],["ngbDropdown","","placement","bottom-left top-left","class","btn-game-dd",4,"ngIf"],["type","button",1,"btn","how",3,"disabled","click"],["src","assets/icons/icon-question.svg"],["class","timer-wrapper",4,"ngIf"],[1,"balance","text-white","mr-2","d-flex","align-items-center","ml-auto"],[1,"max-win","mr-2"],["class","badge badge-pill py-1 px-2 mr-1",3,"ngClass","badge_hide",4,"ngIf"],[1,"text-white-50","ml-1"],[4,"ngTemplateOutlet"],[1,"btn","btn-game","name-game"],["ngbDropdown","","placement","bottom-left top-left",1,"btn-game-dd"],["ngbDropdownToggle","",1,"btn","btn-game","w-100","h-100",3,"disabled"],[1,"centered-xy"],["ngbDropdownMenu","",1,"shadow","game-navigation"],[1,"dropdown-items-wrapper"],["routerLinkActive","active","class","mt-3 gui-text d-flex flex-column align-items-center","ngbDropdownItem","","queryParamsHandling","preserve",3,"routerLink","click",4,"ngFor","ngForOf"],["routerLinkActive","active","ngbDropdownItem","","queryParamsHandling","preserve",1,"mt-3","gui-text","d-flex","flex-column","align-items-center",3,"routerLink","click"],[1,"icon",3,"src"],[1,"mt-1"],[1,"timer-wrapper"],[1,"badge","badge-pill","py-1","px-2","mr-1",3,"ngClass"],[1,"hidden-header"],["ngbDropdown","","placement","bottom-right top-right",1,"btn-user-menu"],["gameMenu","ngbDropdown"],["ngbDropdownToggle","",1,"btn","btn-game","user-menu",3,"disabled"],["ngbDropdownMenu","",1,"shadow"]],template:function(C,p){1&C&&o.YNc(0,ri,5,2,"ng-container",0)},directives:[lt.KI,N.O5,j.jt,j.iD,j.Vi,N.sg,V.yS,V.Od,j.TH,W.bk,Sn,L,nt.y,N.mk,N.tP,We],pipes:[Je.P,Hn.t],styles:['@media (max-width: 767.98px){.max-win[_ngcontent-%COMP%]{display:none}}.c-header[_ngcontent-%COMP%]{padding-left:3px;padding-right:3px}@media (max-width: 767.98px){.c-header[_ngcontent-%COMP%]{padding:0}}.btn-game-dd[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%], .btn-user-menu[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{border-color:#1b1b1b;background-color:#212226}.btn-game-dd[_ngcontent-%COMP%]{position:relative;flex:0 0 130px;max-width:130px;height:24px;font-size:12px}@media (max-width: 767.98px){.btn-game-dd[_ngcontent-%COMP%]{height:26px}}.btn-game-dd[_ngcontent-%COMP%]   .icon-bubble[_ngcontent-%COMP%]{top:50%;left:4px;width:14px;height:14px;background:url(icon-bubble.11178e625191607d.svg) no-repeat center center/contain;transform:translateY(-50%)}.btn-game-dd[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{text-transform:uppercase;padding-right:15px}.btn-game-dd[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:after{position:absolute;right:10px;top:8px}.btn-game-dd[_ngcontent-%COMP%]   .dropdown-toggle-disable[_ngcontent-%COMP%]{cursor:default;pointer-events:none;padding-right:0}.btn-game-dd[_ngcontent-%COMP%]   .dropdown-toggle-disable[_ngcontent-%COMP%]:after{content:none}.btn-game-dd[_ngcontent-%COMP%]   .game-navigation[_ngcontent-%COMP%]{font-size:10px;padding:0 8px 8px;min-width:auto}.btn-game-dd[_ngcontent-%COMP%]   .game-navigation[_ngcontent-%COMP%]   .dropdown-items-wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);grid-gap:0}.btn-game-dd[_ngcontent-%COMP%]   .game-navigation[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{width:70px;height:auto;word-break:break-word;padding:0}.btn-game-dd[_ngcontent-%COMP%]   .game-navigation[_ngcontent-%COMP%]   .dropdown-item.active[_ngcontent-%COMP%], .btn-game-dd[_ngcontent-%COMP%]   .game-navigation[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:focus, .btn-game-dd[_ngcontent-%COMP%]   .game-navigation[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:active, .btn-game-dd[_ngcontent-%COMP%]   .game-navigation[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{color:#fff!important;background-color:#0000}.btn-game-dd[_ngcontent-%COMP%]   .game-navigation[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:34px;height:34px}.timer-wrapper[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}@media screen and (max-width: 374px){.timer-wrapper[_ngcontent-%COMP%]{left:53.5%}}.balance[_ngcontent-%COMP%]{position:relative;font-size:12px;z-index:1}@media (max-width: 767.98px){.balance[_ngcontent-%COMP%]{font-size:14px}}.balance[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{position:absolute;top:50%;left:0;transform:translate(-100%,-50%)}.btn-user-menu[_ngcontent-%COMP%]{flex:0 0 24px;display:flex;height:24px}@media (max-width: 767.98px){.btn-user-menu[_ngcontent-%COMP%]{flex-basis:26px;height:26px}}.btn-user-menu--notification[_ngcontent-%COMP%]:before{content:"";pointer-events:none;z-index:1;position:absolute;top:1px;right:1px;width:6px;height:6px;border-radius:50%;background-color:#d71730}.btn-user-menu[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:after{display:none!important}.btn-user-menu[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]{width:100%;height:100%;background-image:url(icon-burger-menu.d11de584b7113bad.svg);background-repeat:no-repeat;background-position:center center}.badge[_ngcontent-%COMP%]{visibility:visible;opacity:1;transition:visibility .2s ease-in-out,opacity .2s ease-in-out}.badge_hide[_ngcontent-%COMP%]{visibility:hidden;opacity:0;transition:visibility .2s ease-in-out,opacity .2s ease-in-out}.how[_ngcontent-%COMP%]{overflow:hidden;position:relative;display:flex;align-items:center;width:150px;height:22px;color:#3c0606;font-size:12px;border-radius:17px;padding:0;margin-left:15px;background-image:linear-gradient(to bottom,#f9a119,#f38410);box-shadow:none}@media (max-width: 767.98px){.how[_ngcontent-%COMP%]{width:22px;margin-left:5px}}.how[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:1px;display:flex;transform:translateY(-50%)}.how[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.how[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#3c0606}.how[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;left:20px;display:block;width:calc(100% - 20px);text-align:center}@media (max-width: 767.98px){.how[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}.name-game[_ngcontent-%COMP%]{cursor:default!important;display:flex;justify-content:center;align-items:center;text-align:center;width:122px;height:24px;font-size:12px;text-transform:uppercase;color:#fff;border-radius:15px}.hidden-header[_ngcontent-%COMP%]{width:100%}.hidden-header[_ngcontent-%COMP%]   .btn-user-menu[_ngcontent-%COMP%]{height:0;width:0;margin-left:auto;margin-right:5px}.hidden-header[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]{width:0;height:0}']}),Ar=(0,U.gn)([(0,st.c)()],Ar);let Ur=(()=>{class _{constructor(p){this.translocoService=p,this.status=G.o.None,this.ConnectorState=G.o}getBadgeClass(){switch(this.status){case G.o.Disconnected:case G.o.Reconnecting:return"badge-danger";case G.o.SlowConnection:return"badge-warning"}}translateStatus(){return this.translocoService.translate(`connector-state.${this.status}`)}}return _.\u0275fac=function(p){return new(p||_)(o.Y36(lt.Vn))},_.\u0275cmp=o.Xpm({type:_,selectors:[["app-connector-status-bar"]],inputs:{status:"status"},decls:5,vars:4,consts:[[1,"badge","badge-pill","px-3",3,"ngClass"],["class","icon-no-internet",4,"ngIf"],["class","icon-low-connection",4,"ngIf"],[1,"ml-1","d-none","d-lg-inline"],[1,"icon-no-internet"],[1,"icon-low-connection"]],template:function(p,w){1&p&&(o.TgZ(0,"span",0),o.YNc(1,Ze,1,0,"i",1),o.YNc(2,Nr,1,0,"i",2),o.TgZ(3,"span",3),o._uU(4),o.qZA()()),2&p&&(o.Q6J("ngClass",w.getBadgeClass()),o.xp6(1),o.Q6J("ngIf",w.status!==w.ConnectorState.SlowConnection),o.xp6(1),o.Q6J("ngIf",w.status===w.ConnectorState.SlowConnection),o.xp6(2),o.Oqu(w.translateStatus()))},directives:[N.mk,N.O5],styles:["[_nghost-%COMP%]{position:absolute;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.2);-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px);top:0;left:0;border-radius:inherit}.icon-no-internet[_ngcontent-%COMP%]{width:18px;height:16px;display:inline-block;background:url(\"data:image/svg+xml,%3Csvg width='18' height='16' viewBox='0 0 18 16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5.47 6.214A8.887 8.887 0 0 0 2.66 8.117a.56.56 0 0 1-.794 0 .561.561 0 0 1 0-.793 10.005 10.005 0 0 1 3.166-2.142.561.561 0 0 1 .44 1.032zm-1.527-2.58a.561.561 0 0 0-.758-.237 12.46 12.46 0 0 0-3.02 2.226.561.561 0 1 0 .793.793 11.339 11.339 0 0 1 2.749-2.025.561.561 0 0 0 .236-.758zM7.68 7.44a.56.56 0 0 0-.687-.397 7.65 7.65 0 0 0-3.427 1.98.561.561 0 1 0 .793.794 6.527 6.527 0 0 1 2.924-1.69c.3-.08.477-.388.397-.687zm10.111-1.818a12.425 12.425 0 0 0-6.076-3.348 12.502 12.502 0 0 0-6.464.266L2.874.164a.561.561 0 1 0-.794.794L15.473 14.35a.56.56 0 0 0 .794 0 .561.561 0 0 0 0-.794l-5.362-5.361a6.518 6.518 0 0 1 2.691 1.622.56.56 0 0 0 .794 0 .561.561 0 0 0 0-.794 7.638 7.638 0 0 0-4.878-2.222L8.239 5.53a8.915 8.915 0 0 1 7.058 2.587.56.56 0 0 0 .794 0 .561.561 0 0 0 0-.793 10.038 10.038 0 0 0-8.853-2.795l-1.08-1.08a11.273 11.273 0 0 1 10.84 2.967.56.56 0 0 0 .793 0 .561.561 0 0 0 0-.793zm-8.29 4.122a.561.561 0 0 0-.566-.557 5.218 5.218 0 0 0-3.668 1.537.561.561 0 1 0 .793.794c.77-.77 1.795-1.2 2.884-1.209a.561.561 0 0 0 .556-.565zm1.004 2.57c.407.408.632.95.632 1.527s-.225 1.119-.632 1.527c-.421.42-.974.631-1.527.631-.553 0-1.106-.21-1.527-.631a2.145 2.145 0 0 1-.632-1.527c0-.577.224-1.119.632-1.527a2.162 2.162 0 0 1 3.054 0zm-.49 1.527a1.034 1.034 0 0 0-1.037-1.036 1.034 1.034 0 0 0-1.037 1.036 1.038 1.038 0 0 0 2.074 0z' fill='%23FFF' fill-rule='evenodd'/%3E%3C/svg%3E%0A\") center center/contain no-repeat}.icon-low-connection[_ngcontent-%COMP%]{width:10px;height:13px;display:inline-block;background:url(\"data:image/svg+xml,%3Csvg width='10' height='13' viewBox='0 0 10 13' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23FFF' fill-rule='evenodd'%3E%3Crect opacity='.5' x='8' width='1.5' height='13' rx='.75'/%3E%3Crect opacity='.5' x='4' y='3' width='1.5' height='10' rx='.75'/%3E%3Crect y='6' width='1.5' height='7' rx='.75'/%3E%3C/g%3E%3C/svg%3E%0A\") center center/contain no-repeat}.badge[_ngcontent-%COMP%]{position:absolute;top:3px}"]}),_})();var jr=D(9874),tr=D(4477),Ji=D(4530);function pi(_,C){if(1&_&&(o.TgZ(0,"div",9)(1,"span",10),o._uU(2),o.qZA(),o._UZ(3,"span",null,11),o.TgZ(5,"span"),o._uU(6,"$"),o.qZA()()),2&_){const p=o.oxw().$implicit;o.xp6(2),o.hij("",p("shared.Approx"),".")}}function $i(_,C){if(1&_){const p=o.EpF();o.ynx(0),o.TgZ(1,"app-spinner",1),o.NdJ("ngModelChange",function(J){return o.CHM(p),o.oxw().value=J})("isActiveChange",function(J){return o.CHM(p),o.oxw().isActive=J}),o.TgZ(2,"div",2)(3,"span",3),o._uU(4),o.qZA(),o.TgZ(5,"div",4,5),o._UZ(7,"div",6,7),o.YNc(9,pi,7,1,"div",8),o.qZA()()(),o.BQk()}if(2&_){const p=C.$implicit,w=o.oxw();o.xp6(1),o.Q6J("ngModel",w.value)("isActive",w.isActive)("step",w.step)("min",w.min)("max",w.max)("balance",w.balance)("disabled",w.disabled)("formatPrecision",w.formatPrecision)("exchangeRate",w.exchangeRate)("exchangeRatePrecision",w.exchangeRatePrecision),o.xp6(3),o.AsE(" ",p("shared.Bet")," ",w.currency," "),o.xp6(1),o.ekj("active",w.isActive),o.xp6(4),o.Q6J("ngIf",w.exchangeRate)}}let Lo=(()=>{class _{constructor(p){this.ifcApiService=p,this.isActiveChange=new o.vpe,this.step=1,this.min=0,this.decimalSeparator=".",this.thousandSeparator=",",this.formatPrecision=0,this.exchangeRatePrecision=0,this.currency="USD",this.onChange=()=>{},this.onTouched=()=>{}}get isActive(){return this._isActive}set isActive(p){this._isActive=p,this.isActiveChange.emit(this._isActive)}get value(){return this._value}set value(p){this._value!==p&&null!==p&&this.ifcApiService.emitEvent(ct.g.UpdateStake,{id:1,amount:p}),this._value=p,this.onChange(this.value)}registerOnChange(p){this.onChange=p}registerOnTouched(p){this.onTouched=p}writeValue(p){this.value=p}setDisabledState(p){this.disabled=p}}return _.\u0275fac=function(p){return new(p||_)(o.Y36(ne.h))},_.\u0275cmp=o.Xpm({type:_,selectors:[["app-bet-spinner"]],inputs:{isActive:"isActive",step:"step",min:"min",max:"max",balance:"balance",disabled:"disabled",decimalSeparator:"decimalSeparator",thousandSeparator:"thousandSeparator",formatInput:"formatInput",formatPrecision:"formatPrecision",exchangeRate:"exchangeRate",exchangeRatePrecision:"exchangeRatePrecision",currency:"currency"},outputs:{isActiveChange:"isActiveChange"},features:[o._Bn([{provide:ut.JU,useExisting:(0,o.Gpc)(()=>_),multi:!0}])],decls:1,vars:0,consts:[[4,"transloco"],[3,"ngModel","isActive","step","min","max","balance","disabled","formatPrecision","exchangeRate","exchangeRatePrecision","ngModelChange","isActiveChange"],[1,"bet-spinner"],[1,"note"],[1,"input-wrapper","d-flex","flex-column","justify-content-center","align-items-center"],["inputFieldTrigger",""],[1,"input","roboto-font-b"],["inputField",""],["class","approx",4,"ngIf"],[1,"approx"],[1,"text"],["exchangeField",""]],template:function(p,w){1&p&&o.YNc(0,$i,10,15,"ng-container",0)},directives:[lt.KI,Ji.O,ut.JJ,ut.On,N.O5],styles:[".bet-spinner[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:40px;width:150px;font-size:14px;line-height:1;color:#fff}.bet-spinner[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{width:142px;height:22px;border-radius:11px;border:solid 1px rgba(0,0,0,.6);background-color:#0000004d}.bet-spinner[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{width:calc(100% - 1rem);margin:0 .5rem;font-weight:700}@media (max-width: 767.98px){.bet-spinner[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{font-size:16px}}.bet-spinner[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .approx[_ngcontent-%COMP%]{height:11px;font-size:10px}.bet-spinner[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .approx[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{color:#a2a2a4}.bet-spinner[_ngcontent-%COMP%]   .input-wrapper.active[_ngcontent-%COMP%]{border-color:#fff}.bet-spinner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:26px;height:26px;border-radius:50%;border:none;background:transparent;margin:0;position:relative}.bet-spinner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}.bet-spinner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;display:inline-block;background:url(icon-plus.feaff32a610ebd64.svg);width:9px;height:9px;transform:translate(-50%,-50%)}.bet-spinner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .minus[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;display:inline-block;background:url(icon-minus.496f2e671ff32d15.svg);width:9px;height:1px;transform:translate(-50%,-50%)}.note[_ngcontent-%COMP%]{font-size:12px;margin-bottom:1px}@media (max-width: 767.98px){.note[_ngcontent-%COMP%]{font-size:14px}}"]}),_})();function wr(_,C){if(1&_){const p=o.EpF();o.TgZ(0,"div",13),o.NdJ("click",function(){const zt=o.CHM(p).$implicit;return o.oxw(2).setFastBet(zt)}),o.TgZ(1,"button",14),o._uU(2),o.ALo(3,"decimalCurrency"),o.qZA()()}if(2&_){const p=C.$implicit,w=o.oxw(2);o.xp6(1),o.Q6J("ngClass",w.addClassSeclectBtn(p)),o.xp6(1),o.hij(" ",o.lcZ(3,2,p)," ")}}function vi(_,C){if(1&_){const p=o.EpF();o.ynx(0),o.TgZ(1,"div",1)(2,"div",2)(3,"app-bet-spinner",3),o.NdJ("ngModelChange",function(J){return o.CHM(p),o.oxw().betAmount=J})("isActiveChange",function(J){return o.CHM(p),o.oxw().isActive=J}),o.qZA()(),o.TgZ(4,"div",4)(5,"button",5),o.NdJ("click",function(){return o.CHM(p),o.oxw().changeFastBet(!1)}),o.qZA(),o.TgZ(6,"div",6),o._UZ(7,"button",7),o.TgZ(8,"div",8)(9,"span",9),o._uU(10),o.qZA(),o.TgZ(11,"div",10),o.YNc(12,wr,4,4,"div",11),o.qZA()()(),o.TgZ(13,"button",12),o.NdJ("click",function(){return o.CHM(p),o.oxw().changeFastBet(!0)}),o.qZA()()(),o.BQk()}if(2&_){const p=C.$implicit,w=o.oxw();o.xp6(3),o.Q6J("disabled",w.disabledIsBetInput)("ngModel",w.betAmount)("isActive",w.isActive)("formatPrecision",w.config.betPrecision)("exchangeRate",0)("step",.1)("min",w.config.minBet)("max",w.config.maxBet)("balance",w.user.balance)("currency",w.config.currency),o.xp6(2),o.Q6J("disabled",w.disabledIsBetInput),o.xp6(1),o.Q6J("placement","top"),o.xp6(1),o.Q6J("disabled",w.disabledIsBetInput),o.xp6(3),o.AsE(" ",p("shared.Bet")," ",w.config.currency," "),o.xp6(2),o.Q6J("ngForOf",w.fastBets),o.xp6(1),o.Q6J("disabled",w.disabledIsBetInput)}}let Qi=(()=>{class _{constructor(p,w,J){this.betControls=p,this.core=w,this.disableBtnBetService=J,this.isFiat=!1}ngOnInit(){this.fastBets=this.core.config.fastBets,this.fastBetIndex=this.fastBets.indexOf(this.betControls.betAmount)}setFastBet(p){this.betControls.betAmount=p,this.emitUpdateBet(p)}addClassSeclectBtn(p){return p===this.betControls.betAmount?"gui-bg":"gui-bg-100"}changeFastBet(p=!0){const w=this.betControls.betAmount;let J=!1;if(p){for(let zt=0;zt<this.fastBets.length;zt++)if(w<this.fastBets[zt]){J=!0,this.fastBetIndex=zt;break}}else for(let zt=this.fastBets.length;zt>=0;zt--)if(w>this.fastBets[zt]){J=!0,this.fastBetIndex=zt;break}!J||(this.betControls.betAmount=this.fastBets[this.fastBetIndex],this.emitUpdateBet(this.fastBets[this.fastBetIndex]))}get disabledIsBetInput(){return this.betControls.state.betInput.disabled||this.disableBtnBetService.getDisabledBtn}emitUpdateBet(p){const w=this.betControls.state.betInput;w.setData({bet:p}),this.betControls.clickHandler(w)}get config(){return this.core.config}get user(){return this.core.user}get betAmount(){return this.betControls.betAmount}set betAmount(p){this.betControls.betAmount=p,this.betControls.updateBetAmount()}}return _.\u0275fac=function(p){return new(p||_)(o.Y36(Jt.l),o.Y36(It.p),o.Y36(re.i))},_.\u0275cmp=o.Xpm({type:_,selectors:[["app-bet-input"]],decls:1,vars:0,consts:[[4,"transloco"],[1,"bet-input","ml-auto","gui-bg"],[1,"input-wrapper"],[3,"disabled","ngModel","isActive","formatPrecision","exchangeRate","step","min","max","balance","currency","ngModelChange","isActiveChange"],[1,"input-change","d-flex","justify-content-center","align-items-center"],[1,"btn","btn-game","m-0","prev",3,"disabled","click"],["ngbDropdown","",1,"mx-1",3,"placement"],["ngbDropdownToggle","",1,"btn","btn-game","m-0","all",3,"disabled"],["ngbDropdownMenu","",1,"fast-bets-menu","px-2"],[1,"mx-auto"],[1,"row","no-gutters","w-100"],["class","col-6 p-1",3,"click",4,"ngFor","ngForOf"],[1,"btn","btn-game","m-0","next",3,"disabled","click"],[1,"col-6","p-1",3,"click"],[1,"btn","btn-game",3,"ngClass"]],template:function(p,w){1&p&&o.YNc(0,vi,14,17,"ng-container",0)},directives:[lt.KI,Lo,ut.JJ,ut.On,j.jt,j.iD,j.Vi,N.sg,N.mk],pipes:[Je.P],styles:['.bet-input[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.53);box-shadow:inset 1px 1px #fff1cd33;border-radius:30px;max-width:300px;min-width:300px;height:50px;display:flex;align-items:center}.bet-input[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{margin-left:10px}.bet-input[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{background:rgba(0,0,0,.4);border:1px solid rgba(255,255,255,.2);box-shadow:inset 0 1px #00000080;border-radius:15px;width:100%;height:28px;display:flex;align-items:center;color:#fff;justify-content:center;flex-direction:column;cursor:text;font-weight:700}.bet-input[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input.crypto[_ngcontent-%COMP%]   span.value[_ngcontent-%COMP%]{font-size:12px;line-height:12px}.bet-input[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input.crypto[_ngcontent-%COMP%]   span.label[_ngcontent-%COMP%]{font-size:10px;line-height:10px;font-weight:400;color:#ffffff80}.bet-input[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .btn-wrapper[_ngcontent-%COMP%]{flex:0 0 24px;max-width:24px;height:20px}.bet-input[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .btn-wrapper[_ngcontent-%COMP%]   .btn-input[_ngcontent-%COMP%]{height:100%;cursor:pointer;background-position:center center;background-repeat:no-repeat}.bet-input[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .btn-wrapper[_ngcontent-%COMP%]   .btn-input.btn-minus[_ngcontent-%COMP%]{background-image:url(icon-minus.496f2e671ff32d15.svg);margin-left:4px}.bet-input[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .btn-wrapper[_ngcontent-%COMP%]   .btn-input.btn-plus[_ngcontent-%COMP%]{background-image:url(icon-plus.feaff32a610ebd64.svg);margin-right:4px}.bet-input[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .btn-wrapper[_ngcontent-%COMP%]   .btn-input[_ngcontent-%COMP%]:hover{opacity:.9}.bet-input[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .btn-wrapper[_ngcontent-%COMP%]   .btn-input[_ngcontent-%COMP%]:active{transform:translateY(1px)}.bet-input[_ngcontent-%COMP%]   .input-change[_ngcontent-%COMP%]{width:100%}.bet-input[_ngcontent-%COMP%]   .input-change[_ngcontent-%COMP%]   .btn-game[_ngcontent-%COMP%]{font-size:14px}.bet-input[_ngcontent-%COMP%]   .input-change[_ngcontent-%COMP%]   .btn-game.prev[_ngcontent-%COMP%], .bet-input[_ngcontent-%COMP%]   .input-change[_ngcontent-%COMP%]   .btn-game.next[_ngcontent-%COMP%]{width:36px;height:32px;position:relative}.bet-input[_ngcontent-%COMP%]   .input-change[_ngcontent-%COMP%]   .btn-game.prev[_ngcontent-%COMP%]:after, .bet-input[_ngcontent-%COMP%]   .input-change[_ngcontent-%COMP%]   .btn-game.next[_ngcontent-%COMP%]:after{content:" ";position:absolute;width:100%;height:100%;top:0;left:0}.bet-input[_ngcontent-%COMP%]   .input-change[_ngcontent-%COMP%]   .btn-game.prev[_ngcontent-%COMP%]:after{background:url(icon-minus.496f2e671ff32d15.svg) no-repeat center center}.bet-input[_ngcontent-%COMP%]   .input-change[_ngcontent-%COMP%]   .btn-game.next[_ngcontent-%COMP%]:after{background:url(icon-plus.feaff32a610ebd64.svg) no-repeat center center}.bet-input[_ngcontent-%COMP%]   .input-change[_ngcontent-%COMP%]   .btn-game.all[_ngcontent-%COMP%]{width:38px;height:36px;background:url(icon-coin.35e2c2ac0b9fe1fa.svg) no-repeat center center}.bet-input[_ngcontent-%COMP%]   .input-change[_ngcontent-%COMP%]   .btn-game.all[_ngcontent-%COMP%]:after{background:none}.bet-input[_ngcontent-%COMP%]   .input-change[_ngcontent-%COMP%]   .fast-bets-menu.show[_ngcontent-%COMP%]{width:300px;top:-7px!important;left:-80px!important;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}.bet-input[_ngcontent-%COMP%]   .input-change[_ngcontent-%COMP%]   .fast-bets-menu.show[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:14px}.bet-input[_ngcontent-%COMP%]   .input-change[_ngcontent-%COMP%]   .fast-bets-menu.show[_ngcontent-%COMP%]   .btn-game[_ngcontent-%COMP%]{width:100%;height:26px;font-size:12px;box-shadow:none}.bet-input[_ngcontent-%COMP%]   .input-change[_ngcontent-%COMP%]   .fast-bets-menu.show[_ngcontent-%COMP%]   .btn-game[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:2px;color:#d2d2d2}']}),_})();function qi(_,C){if(1&_&&(o.ynx(0),o.TgZ(1,"div",7)(2,"span",8),o._uU(3),o.qZA(),o.TgZ(4,"span",9),o._uU(5),o.ALo(6,"decimalCurrency"),o.qZA()(),o.TgZ(7,"div",7)(8,"span",8),o._uU(9),o.qZA(),o.TgZ(10,"span",9),o._uU(11),o.qZA()(),o.BQk()),2&_){const p=o.oxw().$implicit,w=o.oxw();o.xp6(3),o.AsE(" ",p("shared.FreeBet")," ",w.config.currency," "),o.xp6(2),o.hij(" ",o.lcZ(6,5,w.freeBets.activeFreeBet.betAmount)," "),o.xp6(4),o.hij("",p("shared.Qnt"),"."),o.xp6(2),o.hij(" ",w.freeBets.activeFreeBet.leftBets," ")}}function _i(_,C){if(1&_){const p=o.EpF();o.TgZ(0,"div",10)(1,"span",11),o._uU(2),o.qZA(),o.TgZ(3,"span",12),o._uU(4),o.ALo(5,"decimalCurrency"),o.TgZ(6,"button",13),o.NdJ("click",function(){return o.CHM(p),o.oxw(2).onClaimClick()}),o.TgZ(7,"span",14),o._uU(8),o.qZA()()()()}if(2&_){const p=o.oxw().$implicit,w=o.oxw();o.xp6(2),o.hij(" ",p("components.active-free-bet.text")," "),o.xp6(1),o.ekj("win",!!w.freeBets.activeFreeBet.totalWin),o.xp6(1),o.AsE(" ",o.lcZ(5,7,w.freeBets.activeFreeBet.totalWin)," ",w.config.currency," "),o.xp6(2),o.Q6J("disabled",w.isDisabledClaim),o.xp6(2),o.hij(" ",p("shared.Claim")," ")}}function Ki(_,C){if(1&_&&(o.TgZ(0,"div",7)(1,"span",8),o._uU(2),o.qZA(),o.TgZ(3,"span",9),o._uU(4),o.ALo(5,"decimalCurrency"),o.qZA()()),2&_){const p=o.oxw().$implicit,w=o.oxw();o.xp6(2),o.AsE(" ",p("shared.Win")," ",w.config.currency," "),o.xp6(1),o.ekj("win",!!w.freeBets.activeFreeBet.totalWin),o.xp6(1),o.hij(" ",o.lcZ(5,5,w.freeBets.activeFreeBet.totalWin)," ")}}function to(_,C){if(1&_){const p=o.EpF();o.ynx(0),o.TgZ(1,"div",1),o.YNc(2,qi,12,7,"ng-container",2),o.YNc(3,_i,9,9,"div",3),o.YNc(4,Ki,6,7,"div",4),o.TgZ(5,"button",5),o.NdJ("click",function(){return o.CHM(p),o.oxw().onManageClick()}),o._UZ(6,"svg-icon",6),o.qZA()(),o.BQk()}if(2&_){const p=o.oxw();o.xp6(2),o.Q6J("ngIf",!p.isEnded),o.xp6(1),o.Q6J("ngIf",p.isEnded),o.xp6(1),o.Q6J("ngIf",!p.isEnded),o.xp6(1),o.Q6J("disabled",p.disabledIsActiveFreeBet||p.isEnded)}}let cn=class{constructor(C,p,w,J,zt,Ee,Lr){this.core=C,this.connector=p,this.modal=w,this.betControlsService=J,this.disableBtnBetService=zt,this.appService=Ee,this.ifcApiService=Lr,this.isDisabledClaim=!1}ngOnInit(){this.connector.response(it.E.CashoutFreeBet,200).pipe((0,st.t)(this)).subscribe(C=>{this.appService.initialUrlParams.aviaport&&this.ifcApiService.emitEvent(ct.g.AviaPortClaimFreeBet,{freeBetId:this.core.freeBets.activeFreeBet.id}),this.core.freeBets.remove(this.core.freeBets.activeFreeBet),C.hasOwnProperty("balance")&&this.core.user.updateBalance({balance:C.balance,winAmount:C.winAmount,win:!0}),this.betControlsService.claim(),this.disableBtnBetService.setDisabledBtn=!1,this.isDisabledClaim=!1})}get config(){return this.core.config}get isEnded(){return 0===this.core.freeBets.activeFreeBet.leftBets}get disabledIsActiveFreeBet(){return this.betControlsService.state.activeFreeBet.disabled}get freeBets(){return this.core.freeBets}onManageClick(){this.modal.open(k.$.FreeBets)}onClaimClick(){this.isDisabledClaim=!0,this.connector.request(Y.T.CashoutFreeBet,{freeBetId:this.core.freeBets.activeFreeBet.id})}};cn.\u0275fac=function(C){return new(C||cn)(o.Y36(It.p),o.Y36(Qt.v),o.Y36(ee.Z),o.Y36(Jt.l),o.Y36(re.i),o.Y36(ce.z),o.Y36(ne.h))},cn.\u0275cmp=o.Xpm({type:cn,selectors:[["app-active-free-bet"]],decls:1,vars:0,consts:[[4,"transloco"],[1,"free-bet","ml-auto","px-2"],[4,"ngIf"],["class","d-flex justify-content-center flex-column w-100 mr-2",4,"ngIf"],["class","d-flex justify-content-center align-items-center flex-column",4,"ngIf"],[1,"btn","btn-game","btn-manage",3,"disabled","click"],["src","assets/icons/icon-settings.svg"],[1,"d-flex","justify-content-center","align-items-center","flex-column"],[1,"label"],[1,"badge","badge-dark","d-block","px-3","w-100"],[1,"d-flex","justify-content-center","flex-column","w-100","mr-2"],[1,"label","text-center"],[1,"badge","badge-dark","d-inline-flex","justify-content-center","align-items-center","px-3","w-100"],[1,"btn","btn-game","text-white","px-3","ml-2",3,"disabled","click"],[1,"centered-xy"]],template:function(C,p){1&C&&o.YNc(0,to,7,4,"ng-container",0)},directives:[lt.KI,N.O5,W.bk],pipes:[Je.P],styles:['.free-bet[_ngcontent-%COMP%]{position:relative;border-radius:30px;max-width:300px;min-width:300px;height:50px;display:flex;align-items:center;justify-content:space-around;background-color:#212226;border:solid 1px rgba(0,0,0,.53)}.free-bet[_ngcontent-%COMP%]:after{content:"";pointer-events:none;position:absolute;width:53px;height:50px;background:url(star-bg.f1a24524165b7187.svg) no-repeat;top:50%;right:0;transform:translateY(-50%)}.free-bet[_ngcontent-%COMP%]   span.label[_ngcontent-%COMP%]{color:#fff;font-size:12px}.free-bet[_ngcontent-%COMP%]   .btn-manage[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;align-items:center;width:22px;height:22px;border-radius:17px;box-shadow:inset 1px 1px #fff1cd33;border:solid 1px rgba(0,0,0,.53);background-color:#373e48}.free-bet[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{color:#fff}.free-bet[_ngcontent-%COMP%]   .badge.win[_ngcontent-%COMP%]{color:#7ed321}.free-bet[_ngcontent-%COMP%]   .btn-game[_ngcontent-%COMP%]{background-color:#61a503}.free-bet[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-right:2px}.free-bet[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(:first-child){padding-left:2px}.free-bet[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{line-height:1.2;text-align:center}']}),cn=(0,U.gn)([(0,st.c)()],cn);const Go=["countdown"],Ho=["loader"],eo=["counter"];function Xo(_,C){if(1&_&&(o.ynx(0),o.TgZ(1,"div",1,2)(3,"p",3),o._uU(4),o.TgZ(5,"span",null,4),o._uU(7),o.qZA()(),o.TgZ(8,"div",5),o._UZ(9,"div",6,7),o.qZA()(),o.BQk()),2&_){const p=C.$implicit,w=o.oxw();o.xp6(4),o.hij(" ",p("shared.Auto-cashout-in:")," "),o.xp6(3),o.hij(" ",w.coreService.config.displayedAutoCashOutTimer," ")}}let fn=class{constructor(C,p){this.coreService=C,this.autoCashoutService=p,this.autoCashoutCountdownTL=H.p8.timeline()}ngAfterViewInit(){H.p8.set(this.countdown.nativeElement,{display:"none"}),this.createAnim(),this.autoCashoutService.isActive$.pipe((0,st.t)(this)).subscribe(C=>{C?this.autoCashoutCountdownTL.play(0):(H.p8.set(this.countdown.nativeElement,{display:"none"}),this.autoCashoutCountdownTL.pause(0))})}createAnim(){this.autoCashoutCountdownTL.call(()=>{H.p8.set(this.countdown.nativeElement,{display:"none"})},void 0,0).call(()=>{H.p8.set(this.countdown.nativeElement,{display:""})},void 0,this.autoCashoutService.backgroundAutoCashOutTimer).to(this.loader.nativeElement,{x:0,duration:this.coreService.config.displayedAutoCashOutTimer,ease:"none"},this.autoCashoutService.backgroundAutoCashOutTimer).to(this.counter.nativeElement,{innerHTML:0,duration:this.coreService.config.displayedAutoCashOutTimer,ease:"none",snap:{innerHTML:1}},this.autoCashoutService.backgroundAutoCashOutTimer).call(()=>{H.p8.set(this.countdown.nativeElement,{display:"none"})},void 0,this.coreService.config.overallAutoCashOutTimer).pause(0)}ngOnDestroy(){this.autoCashoutCountdownTL.kill()}};fn.\u0275fac=function(C){return new(C||fn)(o.Y36(It.p),o.Y36(ln.W))},fn.\u0275cmp=o.Xpm({type:fn,selectors:[["app-auto-cashout-countdown"]],viewQuery:function(C,p){if(1&C&&(o.Gf(Go,5),o.Gf(Ho,5),o.Gf(eo,5)),2&C){let w;o.iGM(w=o.CRH())&&(p.countdown=w.first),o.iGM(w=o.CRH())&&(p.loader=w.first),o.iGM(w=o.CRH())&&(p.counter=w.first)}},decls:1,vars:0,consts:[[4,"transloco"],[1,"auto-cashout-countdown","gui-bg"],["countdown",""],[1,"auto-cashout-countdown__label"],["counter",""],[1,"auto-cashout-countdown__wrap-loader"],[1,"auto-cashout-countdown__loader"],["loader",""]],template:function(C,p){1&C&&o.YNc(0,Xo,11,2,"ng-container",0)},directives:[lt.KI],styles:["[_nghost-%COMP%]{display:contents}.auto-cashout-countdown[_ngcontent-%COMP%]{position:absolute;top:0;left:0;display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%;border:1px solid rgba(0,0,0,.53);box-shadow:inset 1px 1px #fff1cd33;border-radius:30px;padding:9px 20px 10px}@media (max-width: 767.98px){.auto-cashout-countdown[_ngcontent-%COMP%]{padding:8px 17px}}.auto-cashout-countdown__label[_ngcontent-%COMP%]{text-align:center;color:#fff;font-size:12px;line-height:normal;font-weight:400;margin-bottom:5px}.auto-cashout-countdown__wrap-loader[_ngcontent-%COMP%]{position:relative;overflow:hidden;width:100%;height:12px;border-radius:7px;border:1px solid rgba(0,0,0,.6);background-color:#0000004d}.auto-cashout-countdown__loader[_ngcontent-%COMP%]{position:absolute;display:block;width:100%;height:100%;border-radius:7px;background-image:linear-gradient(180deg,#569b02 0%,#377e01 100%);transform:translate(-100%)}"],changeDetection:0}),fn=(0,U.gn)([(0,st.c)()],fn);var er=D(189),ro=D(2398),Se=(()=>{return(_=Se||(Se={})).numberOfRounds="numberOfRounds",_.stopIfCashDecrease="stopIfCashDecrease",_.stopIfSingleWinExceeds="stopIfSingleWinExceeds",_.stopIfCashIncreases="stopIfCashIncreases",_.onWinChangeBet="onWinChangeBet",_.onLoseChangeBet="onLoseChangeBet",Se;var _})(),_r=(()=>{return(_=_r||(_r={})).init="init",_.increase="increase",_.decrease="decrease",_r;var _})(),Te=(()=>{return(_=Te||(Te={})).increaseValue="increaseValue",_.decreaseValue="decreaseValue",Te;var _})(),Yn=D(2983);function On(_,C){1&_&&(o.TgZ(0,"div",15),o._uU(1,"%"),o.qZA())}function no(_,C){if(1&_&&(o.TgZ(0,"div",16)(1,"span",17),o._uU(2),o.qZA(),o._UZ(3,"span",null,18),o.TgZ(5,"span"),o._uU(6,"$"),o.qZA()()),2&_){const p=o.oxw().$implicit;o.xp6(2),o.hij("",p("shared.Approx"),".")}}function io(_,C){if(1&_){const p=o.EpF();o.ynx(0),o.TgZ(1,"app-spinner",1),o.NdJ("ngModelChange",function(J){return o.CHM(p),o.oxw().value=J})("isActiveChange",function(J){return o.CHM(p),o.oxw().isActive=J}),o.TgZ(2,"div",2)(3,"button",3,4),o._UZ(5,"span",5),o.qZA(),o.TgZ(6,"div",6,7)(8,"div",8)(9,"div",9,10),o.YNc(11,On,2,0,"div",11),o.qZA()(),o.YNc(12,no,7,1,"div",12),o.qZA(),o.TgZ(13,"button",3,13),o._UZ(15,"span",14),o.qZA()()(),o.BQk()}if(2&_){const p=o.oxw();o.xp6(1),o.Q6J("ngModel",p.value)("isActive",p.isActive)("step",p.step)("min",p.min)("max",p.max)("balance",p.balance)("disabled",p.disabled)("formatPrecision",p.formatPrecision)("exchangeRate",p.exchangeRate)("exchangeRatePrecision",p.exchangeRatePrecision)("placement",p.placement),o.xp6(5),o.ekj("active",p.isActive),o.xp6(5),o.Q6J("ngIf",p.isPercentageSignShown),o.xp6(1),o.Q6J("ngIf",p.exchangeRate)}}const Ae={provide:ut.JU,useExisting:(0,o.Gpc)(()=>An),multi:!0};let An=(()=>{class _{constructor(){this.isActiveChange=new o.vpe,this.placement="auto",this.step=1,this.min=0,this.decimalSeparator=".",this.thousandSeparator=",",this.formatPrecision=0,this.exchangeRatePrecision=0,this.isPercentageSignShown=!1,this.onChange=()=>{},this.onTouched=()=>{}}get isActive(){return this._isActive}set isActive(p){this._isActive=p,this.isActiveChange.emit(this._isActive)}get value(){return this._value}set value(p){this._value=p,this.onChange(this.value)}registerOnChange(p){this.onChange=p}registerOnTouched(p){this.onTouched=p}writeValue(p){this.value=p}setDisabledState(p){this.disabled=p}}return _.\u0275fac=function(p){return new(p||_)},_.\u0275cmp=o.Xpm({type:_,selectors:[["app-options-spinner"]],inputs:{isActive:"isActive",placement:"placement",step:"step",min:"min",max:"max",balance:"balance",disabled:"disabled",decimalSeparator:"decimalSeparator",thousandSeparator:"thousandSeparator",formatPrecision:"formatPrecision",exchangeRate:"exchangeRate",exchangeRatePrecision:"exchangeRatePrecision",isPercentageSignShown:"isPercentageSignShown"},outputs:{isActiveChange:"isActiveChange"},features:[o._Bn([Ae])],decls:1,vars:0,consts:[[4,"transloco"],[3,"ngModel","isActive","step","min","max","balance","disabled","formatPrecision","exchangeRate","exchangeRatePrecision","placement","ngModelChange","isActiveChange"],[1,"options-spinner","d-flex","justify-content-between","align-items-center"],["type","button",1,"gui-bg","btn"],["buttonMinus",""],[1,"minus"],[1,"input-wrapper","d-flex","flex-column","justify-content-center","align-items-center"],["inputFieldTrigger",""],[1,"d-flex","w-100"],[1,"input","roboto-font-b"],["inputField",""],["class","d-inline-block align-top",4,"ngIf"],["class","approx",4,"ngIf"],["buttonPlus",""],[1,"plus"],[1,"d-inline-block","align-top"],[1,"approx"],[1,"text"],["exchangeField",""]],template:function(p,w){1&p&&o.YNc(0,io,16,15,"ng-container",0)},directives:[lt.KI,Ji.O,ut.JJ,ut.On,N.O5],styles:[".options-spinner[_ngcontent-%COMP%]{height:28px;width:100%;border-radius:17px;border:solid 1px rgba(255,255,255,.2);background-color:#0006;box-shadow:inset 0 1px #00000080;font-size:14px;line-height:1;color:#fff}.options-spinner[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{min-width:0;width:100%;height:100%}.options-spinner[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{width:calc(100% - .4rem);margin:0 .2rem;font-weight:700}.options-spinner[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .approx[_ngcontent-%COMP%]{height:11px;font-size:10px}.options-spinner[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .approx[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{color:#a2a2a4}.options-spinner[_ngcontent-%COMP%]   .input-wrapper.active[_ngcontent-%COMP%]{border-color:#fff}.options-spinner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:22px;max-width:22px;height:22px;border-radius:50%;border:none;background:transparent;margin:0 2px;position:relative}.options-spinner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}.options-spinner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;display:inline-block;background:url(icon-plus.feaff32a610ebd64.svg);width:9px;height:9px;transform:translate(-50%,-50%)}.options-spinner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .minus[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;display:inline-block;background:url(icon-minus.496f2e671ff32d15.svg);width:9px;height:1px;transform:translate(-50%,-50%)}"]}),_})();function gi(_,C){if(1&_&&(o.TgZ(0,"div",35)(1,"div",11),o._uU(2),o.qZA(),o.TgZ(3,"div",26),o._UZ(4,"app-options-spinner",36),o.qZA()()),2&_){const p=o.oxw().$implicit,w=o.oxw();o.xp6(2),o.hij(" ",p("shared.Target")," "),o.xp6(2),o.Q6J("formatPrecision",2)("step",1)("min",w.balloonMinTarget)("max",w.balloonMaxTarget)}}const Mn=function(_,C){return{"bg-grey":_,"bg-grey-half":C}};function oo(_,C){if(1&_){const p=o.EpF();o.TgZ(0,"div",12)(1,"label",38)(2,"div",39)(3,"input",40),o.NdJ("click",function(){return o.CHM(p),o.oxw(3).playClickSound()}),o.qZA(),o.TgZ(4,"label",41)(5,"span"),o._uU(6),o.qZA(),o.TgZ(7,"span",42),o._uU(8),o.qZA()()()(),o.TgZ(9,"label",43)(10,"div",39)(11,"input",44),o.NdJ("click",function(){return o.CHM(p),o.oxw(3).playClickSound()}),o.qZA(),o.TgZ(12,"label",45)(13,"span"),o._uU(14),o.qZA(),o.TgZ(15,"span",42),o._uU(16),o.qZA()()()()()}if(2&_){const p=o.oxw(2).$implicit,w=o.oxw();o.xp6(2),o.Q6J("ngClass",o.WLB(6,Mn,"under"===w.form.get("diceType").value,"under"!==w.form.get("diceType").value)),o.xp6(4),o.hij("",p("shared.Under"),":"),o.xp6(2),o.Oqu(w.state.diceUnder.data),o.xp6(2),o.Q6J("ngClass",o.WLB(9,Mn,"over"===w.form.get("diceType").value,"over"!==w.form.get("diceType").value)),o.xp6(4),o.hij("",p("shared.Over"),":"),o.xp6(2),o.Oqu(w.state.diceOver.data)}}function ao(_,C){if(1&_&&(o.TgZ(0,"div",35)(1,"div",11),o._uU(2),o.qZA(),o.YNc(3,oo,17,12,"div",37),o.qZA()),2&_){const p=o.oxw().$implicit,w=o.oxw();o.xp6(2),o.hij(" ",p("shared.Direction")," "),o.xp6(1),o.Q6J("ngIf",w.form.get("diceType"))}}function Qr(_,C){if(1&_){const p=o.EpF();o.TgZ(0,"label",49)(1,"div",50)(2,"input",51),o.NdJ("click",function(){return o.CHM(p),o.oxw(3).playClickSound()}),o.qZA(),o.TgZ(3,"label",52)(4,"span",53),o._uU(5),o.ALo(6,"titlecase"),o.qZA(),o.TgZ(7,"span",54),o._uU(8),o.qZA(),o._UZ(9,"span"),o.qZA()()()}if(2&_){const p=C.$implicit,w=C.index,J=o.oxw(3);o.ekj("wide",w===J.betColorsHotline.length-1),o.MGl("for","hotline-bet-",p,""),o.xp6(1),o.Q6J("ngClass",o.WLB(14,Mn,p===J.form.get("hotlineType").value,p!==J.form.get("hotlineType").value)),o.xp6(1),o.MGl("id","hotline-bet-",p,""),o.Q6J("value",p),o.xp6(1),o.MGl("for","hotline-bet-",p,""),o.xp6(2),o.hij(" ",o.lcZ(6,12,J.colorBet(p))," "),o.xp6(3),o.hij("X",J.state["hotline"+p].data,""),o.xp6(1),o.Gre("ml-1 color-figure ",p,"")}}function jo(_,C){if(1&_&&(o.TgZ(0,"div",46)(1,"div",47),o._uU(2),o.qZA(),o.TgZ(3,"div",12),o.YNc(4,Qr,10,17,"label",48),o.qZA()()),2&_){const p=o.oxw().$implicit,w=o.oxw();o.xp6(2),o.Oqu(p("shared.Bet-color")),o.xp6(2),o.Q6J("ngForOf",w.betColorsHotline)}}function so(_,C){if(1&_){const p=o.EpF();o.TgZ(0,"label",57)(1,"span",50)(2,"input",58),o.NdJ("click",function(){return o.CHM(p),o.oxw(3).playClickSound()}),o.qZA(),o.TgZ(3,"label",52),o._UZ(4,"span"),o.TgZ(5,"span",53),o._uU(6),o.ALo(7,"titlecase"),o.qZA()()()()}if(2&_){const p=C.$implicit,w=o.oxw(3);o.MGl("for","plinko-bet-",p,""),o.xp6(1),o.Q6J("ngClass",o.WLB(12,Mn,p===w.form.controls.plinkoType.value[p].value,p!==w.form.controls.plinkoType.value[p].value)),o.xp6(1),o.MGl("id","plinko-bet-",p,""),o.Q6J("formControlName",p)("value",p),o.xp6(1),o.MGl("for","plinko-bet-",p,""),o.xp6(1),o.Gre("mr-1 color-figure ",p,""),o.xp6(2),o.hij(" ",o.lcZ(7,10,w.colorBet(p))," ")}}function Zn(_,C){if(1&_&&(o.TgZ(0,"div",55)(1,"div",47),o._uU(2),o.qZA(),o.TgZ(3,"div",12),o.YNc(4,so,8,15,"label",56),o.qZA()()),2&_){const p=o.oxw().$implicit,w=o.oxw();o.ekj("bd-error",w.form.controls.plinkoType.invalid&&w.isDisabledBtnSubmit),o.xp6(2),o.Oqu(p("shared.Bet-color")),o.xp6(2),o.Q6J("ngForOf",w.betColorsPlinko)}}function Cr(_,C){if(1&_){const p=o.EpF();o.TgZ(0,"label",59)(1,"div",39)(2,"input",60),o.NdJ("click",function(){return o.CHM(p),o.oxw(2).playClickSound()}),o.qZA(),o.TgZ(3,"label",61),o._uU(4),o.qZA()()()}if(2&_){const p=C.$implicit,w=o.oxw(2);o.MGl("for","number-of-rounds-",p,""),o.xp6(1),o.Q6J("ngClass",o.WLB(6,Mn,p===w.form.get("numberOfRounds").value,p!==w.form.get("numberOfRounds").value)),o.xp6(1),o.MGl("id","number-of-rounds-",p,""),o.Q6J("value",p),o.xp6(1),o.MGl("for","number-of-rounds-",p,""),o.xp6(1),o.hij(" ",p," ")}}const Yr=function(_,C,p){return{"bg-grey":_,"bg-grey-half":C,"bd-error":p}};function be(_,C){if(1&_){const p=o.EpF();o.TgZ(0,"div",62)(1,"div",22)(2,"div",23)(3,"input",24),o.NdJ("click",function(){return o.CHM(p),o.oxw(2).playClickSound()}),o.qZA(),o.TgZ(4,"label",25),o._uU(5),o.qZA()()(),o.TgZ(6,"div",22)(7,"div",26),o._UZ(8,"app-options-spinner",27),o.qZA()()()}if(2&_){const p=C.$implicit,w=o.oxw(2);o.Q6J("formGroupName",p.formGroupName)("ngClass",o.kEZ(9,Yr,w.form.get(p.formGroupName+".checked").value,!w.form.get(p.formGroupName+".checked").value,w.form.controls[p.formGroupName].invalid&&w.isDisabledBtnSubmit)),o.xp6(3),o.s9C("id",p.formGroupName+"Checked"),o.xp6(1),o.s9C("for",p.formGroupName+"Checked"),o.xp6(1),o.hij(" ",p.label," "),o.xp6(3),o.Q6J("formatPrecision",w.config.betPrecision)("step",1)("min",0)("max",p.max)}}function Yo(_,C){if(1&_&&(o.TgZ(0,"div",69)(1,"div",26),o._UZ(2,"app-options-spinner",70),o.qZA()()),2&_){const p=o.oxw().$implicit,w=o.oxw(2);o.xp6(2),o.Q6J("formControlName",p.type===w.formGroupChangeBetTypes.increase?w.formGroupChangeBetValues.increaseValue:w.formGroupChangeBetValues.decreaseValue)("isPercentageSignShown",!0)("step",1)("min",0)("max",100)}}const lo=function(_,C){return{"col-12":_,"col-6":C}};function Zo(_,C){if(1&_){const p=o.EpF();o.TgZ(0,"label",63)(1,"div",64)(2,"input",65),o.NdJ("click",function(){return o.CHM(p),o.oxw(2).playClickSound()}),o.qZA(),o._UZ(3,"label",66),o.TgZ(4,"div",67)(5,"span"),o._uU(6),o.qZA(),o.YNc(7,Yo,3,5,"div",68),o.qZA()()()}if(2&_){const p=C.$implicit,w=o.oxw(2);o.Q6J("ngClass",o.WLB(8,lo,p.type===w.formGroupChangeBetTypes.init,p.type!==w.formGroupChangeBetTypes.init))("for",p.formGroupName+"Type"+p.type),o.xp6(1),o.Q6J("ngClass",o.kEZ(11,Yr,p.type===w.form.get(p.formGroupName+".type").value,p.type!==w.form.get(p.formGroupName+".type").value,w.isValidBetValues(p.formGroupName,p.type))),o.xp6(1),o.Q6J("value",p.type)("id",p.formGroupName+"Type"+p.type),o.xp6(1),o.Q6J("for",p.formGroupName+"Type"+p.type),o.xp6(3),o.Oqu(p.label),o.xp6(1),o.Q6J("ngIf",p.type!==w.formGroupChangeBetTypes.init)}}function zo(_,C){if(1&_&&(o.TgZ(0,"div",69)(1,"div",26),o._UZ(2,"app-options-spinner",70),o.qZA()()),2&_){const p=o.oxw().$implicit,w=o.oxw(2);o.xp6(2),o.Q6J("formControlName",p.type===w.formGroupChangeBetTypes.increase?w.formGroupChangeBetValues.increaseValue:w.formGroupChangeBetValues.decreaseValue)("isPercentageSignShown",!0)("step",1)("min",0)("max",100)}}function Vo(_,C){if(1&_){const p=o.EpF();o.TgZ(0,"label",63)(1,"div",64)(2,"input",65),o.NdJ("click",function(){return o.CHM(p),o.oxw(2).playClickSound()}),o.qZA(),o._UZ(3,"label",66),o.TgZ(4,"div",67)(5,"span"),o._uU(6),o.qZA(),o.YNc(7,zo,3,5,"div",68),o.qZA()()()}if(2&_){const p=C.$implicit,w=o.oxw(2);o.Q6J("ngClass",o.WLB(8,lo,p.type===w.formGroupChangeBetTypes.init,p.type!==w.formGroupChangeBetTypes.init))("for",p.formGroupName+"Type"+p.type),o.xp6(1),o.Q6J("ngClass",o.kEZ(11,Yr,p.type===w.form.get(p.formGroupName+".type").value,p.type!==w.form.get(p.formGroupName+".type").value,w.isValidBetValues(p.formGroupName,p.type))),o.xp6(1),o.Q6J("value",p.type)("id",p.formGroupName+"Type"+p.type),o.xp6(1),o.Q6J("for",p.formGroupName+"Type"+p.type),o.xp6(3),o.Oqu(p.label),o.xp6(1),o.Q6J("ngIf",p.type!==w.formGroupChangeBetTypes.init)}}function uo(_,C){if(1&_){const p=o.EpF();o.ynx(0),o.TgZ(1,"div",1)(2,"h5",2),o._uU(3),o.qZA(),o.TgZ(4,"button",3),o.NdJ("click",function(){return o.CHM(p),o.oxw().closeModal()}),o.TgZ(5,"span",4),o._uU(6,"\xd7"),o.qZA()()(),o.TgZ(7,"div",5)(8,"form",6),o.NdJ("ngSubmit",function(){return o.CHM(p),o.oxw().onSubmit()}),o.YNc(9,gi,5,5,"div",7),o.YNc(10,ao,4,2,"div",7),o.YNc(11,jo,5,2,"div",8),o.YNc(12,Zn,5,4,"div",9),o.TgZ(13,"div",10)(14,"div",11),o._uU(15),o.qZA(),o.TgZ(16,"div",12),o.YNc(17,Cr,5,9,"label",13),o.qZA()(),o.YNc(18,be,9,13,"div",14),o.TgZ(19,"div",15)(20,"div",16),o.NdJ("click",function(){return o.CHM(p),o.oxw().toggleMoreOptions()}),o.TgZ(21,"span",17),o._uU(22),o.qZA(),o._UZ(23,"div",18),o.qZA()(),o.TgZ(24,"div",19)(25,"div",20)(26,"div",21)(27,"div",22)(28,"div",23)(29,"input",24),o.NdJ("click",function(){return o.CHM(p),o.oxw().playClickSound()}),o.qZA(),o.TgZ(30,"label",25),o._uU(31),o.qZA()()(),o.TgZ(32,"div",22)(33,"div",26),o._UZ(34,"app-options-spinner",27),o.qZA()()(),o.TgZ(35,"div",28)(36,"div",11),o._uU(37),o.qZA(),o.TgZ(38,"div",29),o.YNc(39,Zo,8,15,"label",30),o.qZA()(),o.TgZ(40,"div",31)(41,"div",11),o._uU(42),o.qZA(),o.TgZ(43,"div",29),o.YNc(44,Vo,8,15,"label",30),o.qZA()()()(),o._UZ(45,"hr",32),o.TgZ(46,"div",33)(47,"button",34)(48,"span"),o._uU(49),o.qZA()()()()(),o.BQk()}if(2&_){const p=C.$implicit,w=o.oxw();o.xp6(3),o.Oqu(p("shared.AUTO-PLAY")),o.xp6(5),o.Q6J("formGroup",w.form),o.xp6(1),o.Q6J("ngIf",w.activeGame===w.gameKey.Balloon),o.xp6(1),o.Q6J("ngIf",w.activeGame===w.gameKey.Dice),o.xp6(1),o.Q6J("ngIf",w.activeGame===w.gameKey.Hotline),o.xp6(1),o.Q6J("ngIf",w.activeGame===w.gameKey.Plinko),o.xp6(3),o.hij(" ",p("shared.Number-of-rounds")," "),o.xp6(2),o.Q6J("ngForOf",w.numbersOfRounds),o.xp6(1),o.Q6J("ngForOf",w.stopIfOptions),o.xp6(2),o.uIk("aria-expanded",!w.isMoreOptionsCollapsed),o.xp6(2),o.hij(" ",p("shared.More-options")," "),o.xp6(3),o.Q6J("ngbCollapse",w.isMoreOptionsCollapsed),o.xp6(1),o.Q6J("formGroupName",w.formGroupNames.stopIfCashIncreases)("ngClass",o.kEZ(30,Yr,w.form.get(w.formGroupNames.stopIfCashIncreases+".checked").value,!w.form.get(w.formGroupNames.stopIfCashIncreases+".checked").value,w.form.controls[w.formGroupNames.stopIfCashIncreases].invalid&&w.isDisabledBtnSubmit)),o.xp6(3),o.s9C("id",w.formGroupNames.stopIfCashIncreases+"Checked"),o.xp6(1),o.s9C("for",w.formGroupNames.stopIfCashIncreases+"Checked"),o.xp6(1),o.hij(" ",p("shared.Stop-if-cash-increases-by")," "),o.xp6(3),o.Q6J("formatPrecision",w.config.betPrecision)("step",1)("min",0)("max",w.config.maxUserWin),o.xp6(3),o.hij(" ",p("shared.If-I-lost")," "),o.xp6(1),o.Q6J("formGroupName",w.formGroupNames.onLoseChangeBet),o.xp6(1),o.Q6J("ngForOf",w.onLoseChangeBetOptions),o.xp6(3),o.hij(" ",p("shared.If-I-win")," "),o.xp6(1),o.Q6J("formGroupName",w.formGroupNames.onWinChangeBet),o.xp6(1),o.Q6J("ngForOf",w.onWinChangeBetOptions),o.xp6(3),o.ekj("translucent",w.form.invalid),o.xp6(2),o.Oqu(p("shared.START-AUTO"))}}let qr=class{constructor(C,p,w,J,zt,Ee,Lr,rn){this.bc=C,this.activeModal=p,this.fb=w,this.core=J,this.renderer=zt,this.sound=Ee,this.ifcSeenderService=Lr,this.translocoService=rn,this.isDisabledBtnSubmit=!1,this.formGroupNames=Se,this.formGroupChangeBetTypes=_r,this.formGroupChangeBetValues=Te,this.formGroupsChecked=[Se.stopIfCashDecrease,Se.stopIfSingleWinExceeds,Se.stopIfCashIncreases],this.formGroupsChangeBet=[Se.onLoseChangeBet,Se.onWinChangeBet],this.betColorsPlinko=["Green","Yellow","Red"],this.betColorsHotline=["Red","Black","Hot"],this.numbersOfRounds=this.core.config.autoBetNumberOfRoundsList,this.isMoreOptionsCollapsed=!0,this.stopIfOptions=[{label:this.translocoService.translate("shared.Stop-if-cash-decreases-by"),formGroupName:Se.stopIfCashDecrease,max:this.core.config.maxUserWin},{label:this.translocoService.translate("shared.Stop-if-single-win-exceeds"),formGroupName:Se.stopIfSingleWinExceeds,max:this.core.config.maxUserWin}],this.onLoseChangeBetOptions=[{label:this.translocoService.translate("shared.Return-to-initial-bet"),formGroupName:Se.onLoseChangeBet,type:_r.init},{label:this.translocoService.translate("shared.Increase-bet-by"),formGroupName:Se.onLoseChangeBet,type:_r.increase,increaseValue:0},{label:this.translocoService.translate("shared.Decrease-bet-by"),formGroupName:Se.onLoseChangeBet,type:_r.decrease,increaseValue:0}],this.onWinChangeBetOptions=[{label:this.translocoService.translate("shared.Return-to-initial-bet"),formGroupName:Se.onWinChangeBet,type:_r.init},{label:this.translocoService.translate("shared.Increase-bet-by"),formGroupName:Se.onWinChangeBet,type:_r.increase,decreaseValue:0},{label:this.translocoService.translate("shared.Decrease-bet-by"),formGroupName:Se.onWinChangeBet,type:_r.decrease,decreaseValue:0}],this.defaultColorNumpad="default-color-numpad"}ngOnInit(){this.renderer.addClass(document.body,this.defaultColorNumpad);const C={checked:[!1,ut.kI.required],value:[{value:null,disabled:!0},J=>+J.value?null:{forbiddenValue:{value:J.value}}]},p={type:[_r.init,ut.kI.required],increaseValue:[{value:null,disabled:!0},J=>+J.value?null:{forbiddenValue:{value:J.value}}],decreaseValue:[{value:null,disabled:!0},J=>+J.value?null:{forbiddenValue:{value:J.value}}]},w={[Se.numberOfRounds]:[this.numbersOfRounds[0],ut.kI.required],[Se.stopIfCashDecrease]:this.fb.group(C),[Se.stopIfSingleWinExceeds]:this.fb.group(C),[Se.stopIfCashIncreases]:this.fb.group(C),[Se.onWinChangeBet]:this.fb.group(p),[Se.onLoseChangeBet]:this.fb.group(p)};switch(this.core.activeGame){case Mt.R.Dice:w.diceType=["under",ut.kI.required];break;case Mt.R.Hotline:w.hotlineType=["Red",ut.kI.required];break;case Mt.R.Plinko:w.plinkoType=new ut.cw({Green:new ut.NI(!0),Yellow:new ut.NI(!0),Red:new ut.NI(!0)},this.requireCheckboxesToBeCheckedValidator());break;case Mt.R.Balloon:w.balloonTarget=new ut.NI(this.gameConfig.target.default)}this.form=this.fb.group(w),this.subscribeToFormGroupsChecked(),this.subscribeToFormGroupsChangeBet()}requireCheckboxesToBeCheckedValidator(C=1){return function(w){let J=0;return Object.keys(w.controls).forEach(zt=>{!0===w.controls[zt].value&&J++}),J<C?{requireOneCheckboxToBeChecked:!0}:null}}subscribeToFormGroupsChecked(){this.formGroupsChecked.forEach(C=>{this.form.get(`${C}.checked`).valueChanges.pipe((0,st.t)(this)).subscribe(p=>{p?this.form.get(`${C}.value`).enable():(this.form.get(`${C}.value`).disable(),this.form.get(`${C}.value`).setValue(null))})})}subscribeToFormGroupsChangeBet(){this.formGroupsChangeBet.forEach(C=>{this.form.get(`${C}.type`).valueChanges.pipe((0,st.t)(this)).subscribe(p=>{p===_r.decrease?(this.form.get(`${C}.${Te.decreaseValue}`).enable(),this.form.get(`${C}.${Te.increaseValue}`).disable()):p===_r.increase?(this.form.get(`${C}.${Te.increaseValue}`).enable(),this.form.get(`${C}.${Te.decreaseValue}`).disable()):(this.form.get(`${C}.${Te.decreaseValue}`).disable(),this.form.get(`${C}.${Te.increaseValue}`).disable())})})}isValidBetValues(C,p){return"init"!==p&&this.form.get(`${C}.${p=`${p}Value`}`).invalid&&this.isDisabledBtnSubmit}playClickSound(){this.sound.playSound(St.JR.ButtonClick)}onSubmit(){if(this.isDisabledBtnSubmit=this.form.invalid,this.form.invalid)return;const C=Object.assign({},this.form.getRawValue());for(const w in C)if(Object.prototype.hasOwnProperty.call(C,w)){const J=C[w];w===Se.onWinChangeBet&&("DISABLED"===this.form.get(`${Se.onWinChangeBet}.${Te.increaseValue}`).status&&(J[Te.increaseValue]=null),"DISABLED"===this.form.get(`${Se.onWinChangeBet}.${Te.decreaseValue}`).status&&(J[Te.decreaseValue]=null)),w===Se.onLoseChangeBet&&("DISABLED"===this.form.get(`${Se.onLoseChangeBet}.${Te.increaseValue}`).status&&(J[Te.increaseValue]=null),"DISABLED"===this.form.get(`${Se.onLoseChangeBet}.${Te.decreaseValue}`).status&&(J[Te.decreaseValue]=null))}console.log("options",C);let p={};for(const w in C)C[w]instanceof Object?"plinkoType"!==w?p[w]=C[w].value||C[w].increaseValue||C[w].decreaseValue&&-Math.abs(C[w].decreaseValue)||null:(p.plinkoTypeRed=C[w].Red,p.plinkoTypeYellow=C[w].Yellow,p.plinkoTypeGreen=C[w].Green):p[w]=C[w];this.ifcSeenderService.startAutoplay(!0),this.activeModal.close(p)}closeModal(){this.playClickSound(),this.activeModal.dismiss()}toggleMoreOptions(){this.playClickSound(),this.isMoreOptionsCollapsed=!this.isMoreOptionsCollapsed}colorBet(C){return this.translocoService.translate(`shared.${C.toUpperCase()}`)}get activeGame(){return this.core.activeGame}get state(){return this.bc.state}get config(){return this.core.config}get gameKey(){return Mt.R}get gameConfig(){return this.core.gameConfig}get balloonMinTarget(){return this.gameConfig.target.min}get balloonMaxTarget(){return this.gameConfig.target.max}ngOnDestroy(){this.renderer.removeClass(document.body,this.defaultColorNumpad)}};qr.\u0275fac=function(C){return new(C||qr)(o.Y36(Jt.l),o.Y36(j.Kz),o.Y36(ut.qu),o.Y36(It.p),o.Y36(o.Qsj),o.Y36(Ye.y),o.Y36(Yn.S),o.Y36(lt.Vn))},qr.\u0275cmp=o.Xpm({type:qr,selectors:[["app-autoplay"]],decls:1,vars:0,consts:[[4,"transloco"],[1,"modal-header","bottom-gap-lg"],[1,"modal-title"],["type","button",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup","ngSubmit"],["class","block dark bottom-gap-lg direction full-width pt-1 px-1 pb-1",4,"ngIf"],["class","block dark bottom-gap-lg direction full-width p-1",4,"ngIf"],["class","block dark bottom-gap-lg direction full-width p-1","formGroupName","plinkoType",3,"bd-error",4,"ngIf"],[1,"block","dark","bottom-gap-lg","p-1"],[1,"text-center","text-white"],[1,"d-flex","justify-content-center","flex-wrap"],["class","mb-0 label-checkbox text-center p-1",3,"for",4,"ngFor","ngForOf"],["class","block stop-if row no-gutters align-items-center bottom-gap-md",3,"formGroupName","ngClass",4,"ngFor","ngForOf"],[1,"w-100","d-flex","justify-content-center","mb-1"],[1,"px-3","d-flex","justify-content-center","align-items-center","bg-grey-half","more-options",3,"click"],[1,"text-white"],[1,"caret","ml-2"],[1,"d-flex","flex-column","win-loss-strategy-wrapper"],[3,"ngbCollapse"],[1,"block","stop-if","row","no-gutters","align-items-center","mt-3","bottom-gap-lg",3,"formGroupName","ngClass"],[1,"col-6"],[1,"custom-control","custom-switch","d-flex","align-items-center"],["type","checkbox","formControlName","checked",1,"custom-control-input",3,"id","click"],[1,"custom-control-label","text-white",3,"for"],[1,"spinner-wrapper"],["formControlName","value",3,"formatPrecision","step","min","max"],[1,"block","dark","bottom-gap-md","p-1"],[1,"row","no-gutters",3,"formGroupName"],["class","block win-lost p-1 mb-0 text-white",3,"ngClass","for",4,"ngFor","ngForOf"],[1,"block","dark","p-1"],[1,"position-relative"],[1,"w-100"],["type","submit",1,"btn","btn-control","btn-bet","btn-green","w-100"],[1,"block","dark","bottom-gap-lg","direction","full-width","pt-1","px-1","pb-1"],["formControlName","balloonTarget","placement","bottom",3,"formatPrecision","step","min","max"],["class","d-flex justify-content-center flex-wrap",4,"ngIf"],["for","dice-under",1,"mb-0","label-checkbox","wide","text-center","p-1"],[1,"custom-control","custom-radio","bg-grey-half","rounded-lg","d-flex","align-items-center",3,"ngClass"],["type","radio","formControlName","diceType","value","under","id","dice-under",1,"custom-control-input",3,"click"],["for","dice-under",1,"custom-control-label","w-100"],[1,"font-lg"],["for","dice-over",1,"mb-0","label-checkbox","wide","text-center","p-1"],["type","radio","formControlName","diceType","value","over","id","dice-over",1,"custom-control-input",3,"click"],["for","dice-over",1,"custom-control-label","w-100"],[1,"block","dark","bottom-gap-lg","direction","full-width","p-1"],[1,"text-center"],["class","mb-0 label-checkbox hotline p-1",3,"wide","for",4,"ngFor","ngForOf"],[1,"mb-0","label-checkbox","hotline","p-1",3,"for"],[1,"d-flex","align-items-center","justify-content-center","custom-control","custom-radio","bg-grey-half","rounded-lg",3,"ngClass"],["type","radio","formControlName","hotlineType",1,"custom-control-input",3,"id","value","click"],[1,"custom-control-label","font-lg","d-flex","align-items-center",3,"for"],[1,"font-md"],[1,"ml-1"],["formGroupName","plinkoType",1,"block","dark","bottom-gap-lg","direction","full-width","p-1"],["class","mb-0 label-checkbox plinko p-1",3,"for",4,"ngFor","ngForOf"],[1,"mb-0","label-checkbox","plinko","p-1",3,"for"],["type","checkbox",1,"custom-control-input",3,"formControlName","id","value","click"],[1,"mb-0","label-checkbox","text-center","p-1",3,"for"],["type","radio","formControlName","numberOfRounds",1,"custom-control-input",3,"id","value","click"],[1,"custom-control-label","w-100","font-lg",3,"for"],[1,"block","stop-if","row","no-gutters","align-items-center","bottom-gap-md",3,"formGroupName","ngClass"],[1,"block","win-lost","p-1","mb-0","text-white",3,"ngClass","for"],[1,"custom-control","custom-radio","py-2","bg-grey-half","rounded-lg","h-100","d-flex","align-items-center","justify-content-center",3,"ngClass"],["type","radio","formControlName","type",1,"custom-control-input",3,"value","id","click"],[1,"custom-control-label","pr-2","text-center",3,"for"],[1,"d-flex","flex-column","align-items-center","justify-content-center","text-center"],["class","d-flex align-items-center",4,"ngIf"],[1,"d-flex","align-items-center"],[3,"formControlName","isPercentageSignShown","step","min","max"]],template:function(C,p){1&C&&o.YNc(0,uo,50,34,"ng-container",0)},directives:[lt.KI,ut._Y,ut.JL,ut.sg,N.O5,An,ut.JJ,ut.u,N.mk,ut._,ut.Fj,N.sg,ut.x0,ut.Wl,j._D],pipes:[N.rS],styles:[".modal-body[_ngcontent-%COMP%]{font-size:12px;padding:0 10px 10px}.modal-body[_ngcontent-%COMP%]   .label-checkbox[_ngcontent-%COMP%]{width:50%;color:#fff;position:relative}.modal-body[_ngcontent-%COMP%]   .label-checkbox[_ngcontent-%COMP%]   .custom-control[_ngcontent-%COMP%]{height:34px}.modal-body[_ngcontent-%COMP%]   .label-checkbox.wide[_ngcontent-%COMP%]{width:100%}.modal-body[_ngcontent-%COMP%]   .label-checkbox.hotline[_ngcontent-%COMP%]   .color-figure[_ngcontent-%COMP%]{width:10px;height:14px;border-radius:2px}.modal-body[_ngcontent-%COMP%]   .label-checkbox.hotline[_ngcontent-%COMP%]   .color-figure.Red[_ngcontent-%COMP%]{background-image:linear-gradient(205deg,#f22143 96%,#ea145c 6%)}.modal-body[_ngcontent-%COMP%]   .label-checkbox.hotline[_ngcontent-%COMP%]   .color-figure.Hot[_ngcontent-%COMP%]{background-image:linear-gradient(187deg,#f87a06 97%,#f76212 4%)}.modal-body[_ngcontent-%COMP%]   .label-checkbox.hotline[_ngcontent-%COMP%]   .color-figure.Black[_ngcontent-%COMP%]{background-image:linear-gradient(205deg,#042238 96%,#000000 4%)}.modal-body[_ngcontent-%COMP%]   .label-checkbox.plinko[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:before{border-radius:2px}.modal-body[_ngcontent-%COMP%]   .label-checkbox.plinko[_ngcontent-%COMP%]   .color-figure[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%}.modal-body[_ngcontent-%COMP%]   .label-checkbox.plinko[_ngcontent-%COMP%]   .color-figure.Random[_ngcontent-%COMP%]{background-color:#0000}.modal-body[_ngcontent-%COMP%]   .label-checkbox.plinko[_ngcontent-%COMP%]   .color-figure.Green[_ngcontent-%COMP%]{background-image:linear-gradient(205deg,#3c8301 91%,#62b308 8%)}.modal-body[_ngcontent-%COMP%]   .label-checkbox.plinko[_ngcontent-%COMP%]   .color-figure.Yellow[_ngcontent-%COMP%]{background-image:linear-gradient(205deg,#c07000 91%,#df9a00 8%)}.modal-body[_ngcontent-%COMP%]   .label-checkbox.plinko[_ngcontent-%COMP%]   .color-figure.Red[_ngcontent-%COMP%]{background-image:linear-gradient(205deg,#c50000 91%,#fc0e0e 8%)}.modal-body[_ngcontent-%COMP%]   .block[_ngcontent-%COMP%]{border-radius:8px}.modal-body[_ngcontent-%COMP%]   .block.dark[_ngcontent-%COMP%]{background-color:#0003}.modal-body[_ngcontent-%COMP%]   .block.full-width[_ngcontent-%COMP%]{width:100%}.modal-body[_ngcontent-%COMP%]   .block.stop-if[_ngcontent-%COMP%]{padding:6px 10px}.modal-body[_ngcontent-%COMP%]   .block.win-lost[_ngcontent-%COMP%]{position:relative}.modal-body[_ngcontent-%COMP%]   .block.win-lost[_ngcontent-%COMP%]   .spinner-wrapper[_ngcontent-%COMP%]{width:100px}.modal-body[_ngcontent-%COMP%]   .block[_ngcontent-%COMP%]   .font-md[_ngcontent-%COMP%]{font-size:12px}.modal-body[_ngcontent-%COMP%]   .block[_ngcontent-%COMP%]   .font-lg[_ngcontent-%COMP%]{font-size:14px}.modal-body[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:calc(100% + 20px);left:-10px}.modal-body[_ngcontent-%COMP%]   .more-options[_ngcontent-%COMP%]{margin-top:10px;height:30px;border-radius:12px;cursor:pointer}.modal-body[_ngcontent-%COMP%]   .more-options[_ngcontent-%COMP%]   .caret[_ngcontent-%COMP%]{border-top:.3em solid;border-right:.3em solid transparent;border-bottom:0;border-left:.3em solid transparent}.modal-body[_ngcontent-%COMP%]   .more-options[aria-expanded=true][_ngcontent-%COMP%]   .caret[_ngcontent-%COMP%]{border-top:0;border-right:.3em solid transparent;border-bottom:.3em solid;border-left:.3em solid transparent}.modal-body[_ngcontent-%COMP%]   .icon-reset[_ngcontent-%COMP%]{width:10px;height:10px;background:url(icon-reset.28bb3380c4328ce7.svg) no-repeat center center/contain}.modal-body[_ngcontent-%COMP%]   .custom-radio[_ngcontent-%COMP%]{padding-left:.5rem;position:static}.modal-body[_ngcontent-%COMP%]   .custom-radio[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]{position:static}.modal-body[_ngcontent-%COMP%]   .custom-radio[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:before{left:.7rem}.bottom-gap-lg[_ngcontent-%COMP%]{margin-bottom:20px}.bottom-gap-md[_ngcontent-%COMP%]{margin-bottom:10px}.bg-grey[_ngcontent-%COMP%]{background-color:#555961}.bg-grey-half[_ngcontent-%COMP%]{background-color:#393b3f}.bd-error[_ngcontent-%COMP%]{box-shadow:inset 0 0 0 1px #d71730}.translucent[_ngcontent-%COMP%]{opacity:.5}"]}),qr=(0,U.gn)([(0,st.c)()],qr);var dn=D(1420);function pn(_,C){if(1&_){const p=o.EpF();o.TgZ(0,"div",4),o.NdJ("click",function(){const zt=o.CHM(p).$implicit;return o.oxw().onClickChip(zt)}),o.qZA()}if(2&_){const p=C.$implicit;o.Udp("background-image","url("+p.dataUrl+")"),o.ekj("current",p.current)}}let ho=(()=>{class _{constructor(p){this.core=p,this.disabled=!1,this.onChange=new o.vpe,this.gameConfig=null,this.chips=[]}ngOnInit(){this.gameConfig=this.core.gameConfig,this.renderer=new Kt.Thl,this.gameConfig.chipsCost.forEach((p,w)=>{let J=new dn.A(p,this.gameConfig.chipsCost,(0,Zt.x)());const zt={value:p,index:w,current:0===w,dataUrl:this.renderer.plugins.extract.base64(J)};J.destroy(),J=null,this.chips.push(zt)}),this.renderer.destroy(),this.renderer=null,this.chips[0].current=!0}get config(){return this.core.config}onClickChip(p){p.current||this.disabled||(this.chips.map(w=>w.current=!1),p.current=!0,this.onChange.emit(p.index))}ngOnDestroy(){this.renderer&&(this.renderer.destroy(),this.renderer=null)}}return _.\u0275fac=function(p){return new(p||_)(o.Y36(It.p))},_.\u0275cmp=o.Xpm({type:_,selectors:[["app-roulette-chips"]],inputs:{disabled:"disabled"},outputs:{onChange:"onChange"},decls:8,vars:7,consts:[[1,"roulette-chips","d-flex","flex-column","justify-content-end","align-items-center","h-100"],[1,"chips","d-flex","align-items-end"],["class","chip ml-1",3,"current","backgroundImage","click",4,"ngFor","ngForOf"],[1,"equals-label","my-1","text-center"],[1,"chip","ml-1",3,"click"]],template:function(p,w){1&p&&(o.TgZ(0,"div",0)(1,"div",1),o.YNc(2,pn,1,4,"div",2),o.qZA(),o.TgZ(3,"div",3)(4,"span"),o._uU(5,"1 ="),o.qZA(),o._uU(6),o.ALo(7,"decimalCurrency"),o.qZA()()),2&p&&(o.ekj("disabled",w.disabled),o.xp6(2),o.Q6J("ngForOf",w.chips),o.xp6(4),o.AsE(" ",o.lcZ(7,5,w.gameConfig.chipEquals)," ",w.config.currency," "))},directives:[N.sg],pipes:[Je.P],styles:[".roulette-chips.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.roulette-chips[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]{height:63px;max-width:212px;overflow-x:auto}@media (max-width: 767.98px){.roulette-chips[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]{max-width:222px}}@media (min-width: 768px){.roulette-chips[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]{height:74px}}.roulette-chips[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]{min-width:36px;max-width:36px;height:36px;border-radius:50%;background-image:linear-gradient(-45deg,#0e41cf 0%,#197adb 79%,#1b89de 100%);background-size:contain;background-repeat:no-repeat;cursor:pointer}.roulette-chips[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]:first-child{margin-left:0!important}.roulette-chips[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]   .chip.current[_ngcontent-%COMP%]{min-width:46px;max-width:46px;height:46px;transform:translateY(-10px);cursor:default}@media (min-width: 768px){.roulette-chips[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]{max-width:unset;height:36px;overflow-x:unset}}.roulette-chips[_ngcontent-%COMP%]   .equals-label[_ngcontent-%COMP%]{color:#87b993;font-size:12px;line-height:1}"]}),_})();function mi(_,C){if(1&_&&(o.TgZ(0,"span"),o._uU(1),o.qZA()),2&_){const p=o.oxw(3);o.xp6(1),o.hij(" ",p.betControlsService.autoplay.numberOfRounds," ")}}function yi(_,C){if(1&_){const p=o.EpF();o.TgZ(0,"button",11),o.NdJ("click",function(){return o.CHM(p),o.oxw(2).onClickAutoplay()}),o.TgZ(1,"i"),o.YNc(2,mi,2,1,"span",12),o.qZA()()}if(2&_){const p=o.oxw(2);o.ekj("btn-blue",!p.betControlsService.autoplay.isActive)("btn-red",p.betControlsService.autoplay.isActive)("btn-auto-stop",p.betControlsService.autoplay.isActive),o.Q6J("disabled",p.betControlsService.state.autoplay.disabled||p.isActiveFreeBet()||p.disableBtnBetService.getDisabledBtn&&!p.betControlsService.autoplay.isActive),o.xp6(2),o.Q6J("ngIf",p.betControlsService.autoplay.isActive)}}function co(_,C){if(1&_){const p=o.EpF();o.TgZ(0,"button",13),o.NdJ("click",function(){o.CHM(p);const J=o.oxw(2);return J.betControlsService.clickHandler(J.betControlsService.state.bet)}),o._UZ(1,"i"),o._uU(2),o.qZA()}if(2&_){const p=o.oxw().$implicit,w=o.oxw();o.Q6J("disabled",w.betControlsService.state.bet.disabled||w.disableBtnBetService.getDisabledBtn),o.xp6(2),o.hij(" ",p("shared.Bet")," ")}}function zn(_,C){if(1&_){const p=o.EpF();o.TgZ(0,"button",14),o.NdJ("click",function(){o.CHM(p);const J=o.oxw(2);return J.betControlsService.clickHandler(J.betControlsService.state.cashout)}),o.TgZ(1,"span",15)(2,"span",16),o._uU(3),o.qZA(),o.TgZ(4,"span",17),o._uU(5),o.ALo(6,"decimalCurrency"),o.qZA()()()}if(2&_){const p=o.oxw().$implicit,w=o.oxw();o.Q6J("disabled",w.betControlsService.state.cashout.disabled),o.xp6(3),o.Oqu(p("shared.Cash-out")),o.xp6(2),o.AsE(" ",o.lcZ(6,4,w.betControlsService.state.cashout.data)," ",w.currency," ")}}function ur(_,C){if(1&_){const p=o.EpF();o.TgZ(0,"button",18),o.NdJ("click",function(){o.CHM(p);const J=o.oxw(2);return J.betControlsService.clickHandler(J.betControlsService.state.diceUnder)}),o.TgZ(1,"span",15),o._UZ(2,"svg-icon",19),o.TgZ(3,"span",17),o._uU(4),o.qZA()()()}if(2&_){const p=o.oxw(2);o.Q6J("disabled",p.betControlsService.state.diceUnder.disabled||p.disableBtnBetService.getDisabledBtn),o.xp6(4),o.hij(" ",p.betControlsService.state.diceUnder.data," ")}}function Wo(_,C){if(1&_){const p=o.EpF();o.TgZ(0,"button",20),o.NdJ("click",function(){o.CHM(p);const J=o.oxw(2);return J.betControlsService.clickHandler(J.betControlsService.state.diceOver)}),o.TgZ(1,"span",15),o._UZ(2,"svg-icon",21),o.TgZ(3,"span",17),o._uU(4),o.qZA()()()}if(2&_){const p=o.oxw(2);o.Q6J("disabled",p.betControlsService.state.diceOver.disabled||p.disableBtnBetService.getDisabledBtn),o.xp6(4),o.hij(" ",p.betControlsService.state.diceOver.data," ")}}function bi(_,C){if(1&_&&(o.ynx(0),o._UZ(1,"img",27),o.TgZ(2,"div",28)(3,"span"),o._uU(4),o.qZA()(),o.BQk()),2&_){const p=o.oxw(4);o.xp6(4),o.Oqu(p.betControlsService.state.balloonHeat.data.text)}}function Jo(_,C){if(1&_&&(o.ynx(0),o._UZ(1,"img",29),o.TgZ(2,"div",28)(3,"span"),o._uU(4),o.qZA()(),o.BQk()),2&_){const p=o.oxw(4);o.xp6(4),o.Oqu(p.betControlsService.state.balloonHeat.data.text)}}function fo(_,C){if(1&_&&(o.ynx(0),o._UZ(1,"img",27),o.TgZ(2,"div",28)(3,"span"),o._uU(4),o.qZA(),o._UZ(5,"div",30),o.TgZ(6,"span",31),o._uU(7),o.qZA()(),o.BQk()),2&_){const p=o.oxw(3).$implicit,w=o.oxw();o.xp6(4),o.Oqu(p("shared.Keep holding!")),o.xp6(1),o.vpz("\n              --infoHeatDelayLineKeep: ",w.balloonDelayKeep,";\n              --infoHeatDelayLineAutoCashout: ",w.balloonDelayAutoCashout,";\n            "),o.Q6J("ngClass",w.classBalloonInfoHeatLoader),o.xp6(2),o.hij(" ",w.betControlsService.state.balloonHeat.data.text," ")}}function Kr(_,C){if(1&_&&(o.TgZ(0,"div",26),o.YNc(1,bi,5,1,"ng-container",12),o.YNc(2,Jo,5,1,"ng-container",12),o.YNc(3,fo,8,7,"ng-container",12),o.qZA()),2&_){const p=o.oxw(3);o.Q6J("ngClass",p.classBalloonInfoHeat),o.xp6(1),o.Q6J("ngIf",!p.betControlsService.state.balloonHeat.data.startAnim),o.xp6(1),o.Q6J("ngIf","keep"===p.betControlsService.state.balloonHeat.data.startAnim),o.xp6(1),o.Q6J("ngIf","autoCashout"===p.betControlsService.state.balloonHeat.data.startAnim)}}function xi(_,C){if(1&_){const p=o.EpF();o.TgZ(0,"div",22),o.YNc(1,Kr,4,4,"div",23),o.TgZ(2,"button",24),o.NdJ("mousedown",function(){return o.CHM(p),o.oxw(2).balloonHeatDown()})("mouseup",function(){return o.CHM(p),o.oxw(2).balloonHeatUp()})("mouseout",function(){return o.CHM(p),o.oxw(2).balloonHeatOut()})("touchstart",function(){return o.CHM(p),o.oxw(2).balloonHeatDown()})("touchend",function(){return o.CHM(p),o.oxw(2).balloonHeatUp()}),o._UZ(3,"svg-icon",25),o.TgZ(4,"span",15)(5,"span"),o._uU(6),o.qZA()()()()}if(2&_){const p=o.oxw().$implicit,w=o.oxw();o.xp6(1),o.Q6J("ngIf",w.balloonInfoHeatIsView),o.xp6(1),o.Q6J("ngClass",w.classBtnBalloonHeat)("disabled",w.isDisabledballoonHeat),o.xp6(4),o.Oqu(p("shared.HEAT"))}}function Ci(_,C){if(1&_){const p=o.EpF();o.TgZ(0,"button",32),o.NdJ("click",function(){o.CHM(p);const J=o.oxw(2);return J.betControlsService.clickHandler(J.betControlsService.state.balloonTake)}),o.TgZ(1,"span",15)(2,"span"),o._uU(3),o.qZA(),o.TgZ(4,"span"),o._uU(5),o.qZA()()()}if(2&_){const p=o.oxw().$implicit,w=o.oxw();o.Q6J("disabled",w.betControlsService.state.balloonTake.disabled),o.xp6(3),o.Oqu(p("shared.TAKE")),o.xp6(2),o.hij(" ",w.betControlsService.state.balloonTake.data," ")}}function $o(_,C){if(1&_){const p=o.EpF();o.TgZ(0,"button",37),o.NdJ("click",function(){o.CHM(p);const J=o.oxw(3);return J.betControlsService.clickHandler(J.betControlsService.state.plinkoGreen)}),o._uU(1),o.qZA()}if(2&_){const p=o.oxw(2).$implicit,w=o.oxw();o.Q6J("disabled",w.betControlsService.state.plinkoGreen.disabled||w.disableBtnBetService.getDisabledBtn),o.xp6(1),o.hij(" ",p("shared.GREEN")," ")}}function Qo(_,C){if(1&_){const p=o.EpF();o.TgZ(0,"button",38),o.NdJ("click",function(){o.CHM(p);const J=o.oxw(3);return J.betControlsService.clickHandler(J.betControlsService.state.plinkoYellow)}),o._uU(1),o.qZA()}if(2&_){const p=o.oxw(2).$implicit,w=o.oxw();o.Q6J("disabled",w.betControlsService.state.plinkoYellow.disabled||w.disableBtnBetService.getDisabledBtn),o.xp6(1),o.hij(" ",p("shared.YELLOW")," ")}}function qo(_,C){if(1&_){const p=o.EpF();o.TgZ(0,"button",39),o.NdJ("click",function(){o.CHM(p);const J=o.oxw(3);return J.betControlsService.clickHandler(J.betControlsService.state.plinkoRed)}),o._uU(1),o.qZA()}if(2&_){const p=o.oxw(2).$implicit,w=o.oxw();o.Q6J("disabled",w.betControlsService.state.plinkoRed.disabled||w.disableBtnBetService.getDisabledBtn),o.xp6(1),o.hij(" ",p("shared.RED")," ")}}function Vn(_,C){if(1&_&&(o.TgZ(0,"div",33),o.YNc(1,$o,2,2,"button",34),o.YNc(2,Qo,2,2,"button",35),o.YNc(3,qo,2,2,"button",36),o.qZA()),2&_){const p=o.oxw(2);o.xp6(1),o.Q6J("ngIf",p.betControlsService.state.plinkoGreen.show),o.xp6(1),o.Q6J("ngIf",p.betControlsService.state.plinkoYellow.show),o.xp6(1),o.Q6J("ngIf",p.betControlsService.state.plinkoRed.show)}}function po(_,C){if(1&_){const p=o.EpF();o.TgZ(0,"button",43),o.NdJ("click",function(){o.CHM(p);const J=o.oxw(3);return J.betControlsService.clickHandler(J.betControlsService.state.hotlineRed)}),o.TgZ(1,"span",15)(2,"span"),o._uU(3),o.qZA(),o.TgZ(4,"span",44),o._uU(5),o.qZA()()()}if(2&_){const p=o.oxw(2).$implicit,w=o.oxw();o.Q6J("disabled",w.betControlsService.state.hotlineRed.disabled||w.disableBtnBetService.getDisabledBtn),o.xp6(3),o.hij(" ",p("shared.RED")," "),o.xp6(2),o.hij("X",w.betControlsService.state.hotlineRed.data,"")}}function vo(_,C){if(1&_){const p=o.EpF();o.TgZ(0,"button",45),o.NdJ("click",function(){o.CHM(p);const J=o.oxw(3);return J.betControlsService.clickHandler(J.betControlsService.state.hotlineHot)}),o.TgZ(1,"span",15)(2,"span"),o._UZ(3,"img",46),o.qZA(),o.TgZ(4,"span",44),o._uU(5),o.qZA()()()}if(2&_){const p=o.oxw(3);o.Q6J("disabled",p.betControlsService.state.hotlineHot.disabled||p.disableBtnBetService.getDisabledBtn),o.xp6(5),o.hij("X",p.betControlsService.state.hotlineHot.data,"")}}function He(_,C){if(1&_){const p=o.EpF();o.TgZ(0,"button",47),o.NdJ("click",function(){o.CHM(p);const J=o.oxw(3);return J.betControlsService.clickHandler(J.betControlsService.state.hotlineBlack)}),o.TgZ(1,"span",15)(2,"span"),o._uU(3),o.qZA(),o.TgZ(4,"span",44),o._uU(5),o.qZA()()()}if(2&_){const p=o.oxw(2).$implicit,w=o.oxw();o.Q6J("disabled",w.betControlsService.state.hotlineBlack.disabled||w.disableBtnBetService.getDisabledBtn),o.xp6(3),o.hij(" ",p("shared.BLACK")," "),o.xp6(2),o.hij("X",w.betControlsService.state.hotlineBlack.data,"")}}function Ti(_,C){if(1&_&&(o.TgZ(0,"div",33),o.YNc(1,po,6,3,"button",40),o.YNc(2,vo,6,2,"button",41),o.YNc(3,He,6,3,"button",42),o.qZA()),2&_){const p=o.oxw(2);o.xp6(1),o.Q6J("ngIf",p.betControlsService.state.hotlineRed.show),o.xp6(1),o.Q6J("ngIf",p.betControlsService.state.hotlineHot.show),o.xp6(1),o.Q6J("ngIf",p.betControlsService.state.hotlineBlack.show)}}function _o(_,C){if(1&_){const p=o.EpF();o.TgZ(0,"app-roulette-chips",51),o.NdJ("onChange",function(J){o.CHM(p);const zt=o.oxw(3);return zt.onChangeRouletteChipCost(J,zt.betControlsService.state.rouletteChips)}),o.qZA()}if(2&_){const p=o.oxw(3);o.Q6J("disabled",p.betControlsService.state.rouletteChips.disabled)}}function Ko(_,C){if(1&_){const p=o.EpF();o.TgZ(0,"button",52),o.NdJ("click",function(){o.CHM(p);const J=o.oxw(3);return J.betControlsService.clickHandler(J.betControlsService.state.rouletteSpin)}),o.TgZ(1,"span",53),o._UZ(2,"span",54),o.qZA()()}if(2&_){const p=o.oxw(3);o.Q6J("disabled",p.betControlsService.state.rouletteSpin.disabled||p.disableBtnBetService.getDisabledBtn)}}function ta(_,C){if(1&_&&(o.TgZ(0,"div",48),o.YNc(1,_o,1,1,"app-roulette-chips",49),o.YNc(2,Ko,3,1,"button",50),o.qZA()),2&_){const p=o.oxw(2);o.xp6(1),o.Q6J("ngIf",p.betControlsService.state.rouletteChips.show),o.xp6(1),o.Q6J("ngIf",p.betControlsService.state.rouletteSpin.show)}}function wi(_,C){if(1&_&&(o.ynx(0),o.TgZ(1,"div",1),o.YNc(2,yi,3,8,"button",2),o.YNc(3,co,3,2,"button",3),o.YNc(4,zn,7,6,"button",4),o.YNc(5,ur,5,2,"button",5),o.YNc(6,Wo,5,2,"button",6),o.YNc(7,xi,7,4,"div",7),o.YNc(8,Ci,6,3,"button",8),o.YNc(9,Vn,4,3,"div",9),o.YNc(10,Ti,4,3,"div",9),o.YNc(11,ta,3,2,"div",10),o.qZA(),o.BQk()),2&_){const p=o.oxw();o.xp6(2),o.Q6J("ngIf",p.betControlsService.state.autoplay.show&&p.isShowAutoPlay()),o.xp6(1),o.Q6J("ngIf",p.betControlsService.state.bet.show),o.xp6(1),o.Q6J("ngIf",p.betControlsService.state.cashout.show),o.xp6(1),o.Q6J("ngIf",p.betControlsService.state.diceUnder.show),o.xp6(1),o.Q6J("ngIf",p.betControlsService.state.diceOver.show),o.xp6(1),o.Q6J("ngIf",p.betControlsService.state.balloonHeat.show),o.xp6(1),o.Q6J("ngIf",p.betControlsService.state.balloonTake.show),o.xp6(1),o.Q6J("ngIf",p.betControlsService.isShowPlinkoControls),o.xp6(1),o.Q6J("ngIf",p.betControlsService.isShowHotlineControls),o.xp6(1),o.Q6J("ngIf",p.betControlsService.isShowRouletteControls)}}let tn=class{constructor(C,p,w,J,zt,Ee){this.modal=C,this.betControlsService=p,this.disableBtnBetService=w,this.sound=J,this.coreService=zt,this.ifcApiService=Ee,this.isMouseDownBalloonHeat=!1}ngOnInit(){this.betControlsService.autoplay.setBetPrecision=this.coreService.config.betPrecision,this.betControlsService.autoplay.setMaxBet=this.coreService.config.maxBet,this.betControlsService.autoplay.setMinBet=this.coreService.config.minBet,this.ifcApiService.command(ct._.StopAutoplay).pipe((0,st.t)(this)).subscribe(()=>{this.betControlsService.autoplay.isActive&&this.betControlsService.autoplayHandler(null)})}onClickAutoplay(){this.betControlsService.autoplay.isActive?this.betControlsService.autoplayHandler(null):(this.sound.playSound(St.JR.ButtonClick),this.modal.open(qr,{windowClass:"auto-play"}).result.then(p=>this.betControlsService.autoplayHandler(p),()=>{}))}onChangeRouletteChipCost(C,p){this.betControlsService.updateControlData(ro.w.RouletteChips,C),this.betControlsService.clickHandler(p)}get isDisabledballoonHeat(){return this.betControlsService.state.balloonHeat.disabled||this.betControlsService.state.balloonHeat.data.status===er.Sv.EndGame&&this.disableBtnBetService.getDisabledBtn}isActiveFreeBet(){return!!this.coreService.freeBets.activeFreeBet}isShowAutoPlay(){return this.coreService.config.isAutoBetFeatureEnabled}get balloonDelayKeep(){return er.L3.delay.startGameMouseDown/1e3}get balloonInfoHeatIsView(){return(this.betControlsService.state.balloonHeat.data.status===er.Sv.Init||this.betControlsService.state.balloonHeat.data.status===er.Sv.StartGame||this.betControlsService.state.balloonHeat.data.status===er.Sv.EndGame||this.betControlsService.state.balloonHeat.data.status===er.Sv.PauseGame||this.betControlsService.state.balloonHeat.data.status===er.Sv.ProgressGame&&"afterKeep"===this.betControlsService.state.balloonHeat.data.startAnim)&&!this.isDisabledballoonHeat}get balloonDelayAutoCashout(){return er.L3.delay.autoCashout}get classBtnBalloonHeat(){return{"btn-heat-box-shadow":this.betControlsService.state.balloonHeat.data.status===er.Sv.Init||this.betControlsService.state.balloonHeat.data.status===er.Sv.EndGame,"btn-heat-pressed":this.betControlsService.state.balloonHeat.data.status===er.Sv.StartGame}}get classBalloonInfoHeat(){return this.betControlsService.state.balloonHeat.data.status===er.Sv.Init||this.betControlsService.state.balloonHeat.data.status===er.Sv.EndGame?"info-heat_bounce":""}get classBalloonInfoHeatLoader(){switch(this.betControlsService.state.balloonHeat.data.startAnim){case"keep":return"info-heat__loader_move-line-keep";case"autoCashout":return"info-heat__loader_move-line-auto-cashout";case"afterKeep":return"info-heat__loader_full"}}balloonHeatDown(){this.isMouseDownBalloonHeat=!0,this.betControlsService.mouseDownHandler(this.betControlsService.state.balloonHeat)}balloonHeatUp(){this.isMouseDownBalloonHeat&&(this.isMouseDownBalloonHeat=!1,this.betControlsService.mouseUpHandler(this.betControlsService.state.balloonHeat))}balloonHeatOut(){this.isMouseDownBalloonHeat&&(this.isMouseDownBalloonHeat=!1,this.betControlsService.mouseUpHandler(this.betControlsService.state.balloonHeat))}};function ea(_,C){1&_&&o._UZ(0,"app-bet-input")}function go(_,C){1&_&&o._UZ(0,"app-active-free-bet")}function Si(_,C){1&_&&o._UZ(0,"app-auto-cashout-countdown")}function ra(_,C){if(1&_&&(o.TgZ(0,"div",4),o.YNc(1,ea,1,0,"app-bet-input",5),o.YNc(2,go,1,0,"app-active-free-bet",5),o.YNc(3,Si,1,0,"app-auto-cashout-countdown",5),o.qZA()),2&_){const p=o.oxw();o.xp6(1),o.Q6J("ngIf",!p.core.freeBets.activeFreeBet),o.xp6(1),o.Q6J("ngIf",p.core.freeBets.activeFreeBet),o.xp6(1),o.Q6J("ngIf",p.autoCashoutService.hasConfig)}}tn.\u0275fac=function(C){return new(C||tn)(o.Y36(j.FF),o.Y36(Jt.l),o.Y36(re.i),o.Y36(Ye.y),o.Y36(It.p),o.Y36(ne.h))},tn.\u0275cmp=o.Xpm({type:tn,selectors:[["app-controls"]],inputs:{currency:"currency"},decls:1,vars:0,consts:[[4,"transloco"],[1,"btn-wrapper","d-flex"],["class","btn btn-control btn-auto",3,"btn-blue","btn-red","btn-auto-stop","disabled","click",4,"ngIf"],["class","btn btn-control btn-bet btn-green w-100 ml-2 text-uppercase",3,"disabled","click",4,"ngIf"],["class","btn btn-control btn-cashout btn-yellow w-100 ml-2",3,"disabled","click",4,"ngIf"],["class","btn btn-control btn-dice-under w-50 ml-1",3,"disabled","click",4,"ngIf"],["class","btn btn-control btn-dice-over w-50 ml-1",3,"disabled","click",4,"ngIf"],["class","wrap-heat",4,"ngIf"],["class","btn btn-control btn-yellow btn-balloon-take ml-1",3,"disabled","click",4,"ngIf"],["class","w-100 ml-2 d-flex justify-content-between",4,"ngIf"],["class","roulette-controls w-100 ml-2 d-flex justify-content-between align-items-center position-relative",4,"ngIf"],[1,"btn","btn-control","btn-auto",3,"disabled","click"],[4,"ngIf"],[1,"btn","btn-control","btn-bet","btn-green","w-100","ml-2","text-uppercase",3,"disabled","click"],[1,"btn","btn-control","btn-cashout","btn-yellow","w-100","ml-2",3,"disabled","click"],[1,"label"],[1,"text-uppercase"],[1,"btn-control-value"],[1,"btn","btn-control","btn-dice-under","w-50","ml-1",3,"disabled","click"],["src","assets/icons/icon-dice-down.svg",1,"mb-1"],[1,"btn","btn-control","btn-dice-over","w-50","ml-1",3,"disabled","click"],["src","assets/icons/icon-dice-down.svg",1,"mb-1","rotate-180"],[1,"wrap-heat"],["class","info-heat",3,"ngClass",4,"ngIf"],[1,"btn","btn-control","btn-green","btn-balloon-heat","ml-1",3,"ngClass","disabled","mousedown","mouseup","mouseout","touchstart","touchend"],["src","assets/icons/icon-balloon-fire.svg"],[1,"info-heat",3,"ngClass"],["src","assets/img/balloon/hand.png","alt","","srcset","assets/img/balloon/hand.png, assets/img/balloon/hand@2x.png 2x, assets/img/balloon/hand@3x.png 3x",1,"info-heat__img"],[1,"info-heat__wrap-text"],["src","assets/img/balloon/heat.png","alt","","srcset","assets/img/balloon/heat.png, assets/img/balloon/heat@2x.png 2x, assets/img/balloon/heat@3x.png 3x",1,"info-heat__img"],[1,"info-heat__loader",3,"ngClass"],[1,"info-heat__small-text"],[1,"btn","btn-control","btn-yellow","btn-balloon-take","ml-1",3,"disabled","click"],[1,"w-100","ml-2","d-flex","justify-content-between"],["class","btn btn-control btn-green btn-plinko",3,"disabled","click",4,"ngIf"],["class","btn btn-control btn-yellow btn-plinko",3,"disabled","click",4,"ngIf"],["class","btn btn-control btn-red btn-plinko",3,"disabled","click",4,"ngIf"],[1,"btn","btn-control","btn-green","btn-plinko",3,"disabled","click"],[1,"btn","btn-control","btn-yellow","btn-plinko",3,"disabled","click"],[1,"btn","btn-control","btn-red","btn-plinko",3,"disabled","click"],["class","btn btn-control btn-red btn-hotline",3,"disabled","click",4,"ngIf"],["class","btn btn-control btn-yellow btn-hotline btn-hotline_hot mx-1 w-100",3,"disabled","click",4,"ngIf"],["class","btn btn-control btn-black btn-hotline",3,"disabled","click",4,"ngIf"],[1,"btn","btn-control","btn-red","btn-hotline",3,"disabled","click"],[1,""],[1,"btn","btn-control","btn-yellow","btn-hotline","btn-hotline_hot","mx-1","w-100",3,"disabled","click"],["src","assets/icons/icon-hot.svg","alt",""],[1,"btn","btn-control","btn-black","btn-hotline",3,"disabled","click"],[1,"roulette-controls","w-100","ml-2","d-flex","justify-content-between","align-items-center","position-relative"],[3,"disabled","onChange",4,"ngIf"],["class","btn btn-control btn-green spin ml-2",3,"disabled","click",4,"ngIf"],[3,"disabled","onChange"],[1,"btn","btn-control","btn-green","spin","ml-2",3,"disabled","click"],[1,"centered-xy"],[1,"d-inline-block","icon-spin"]],template:function(C,p){1&C&&o.YNc(0,wi,12,10,"ng-container",0)},directives:[lt.KI,N.O5,W.bk,N.mk,ho],pipes:[Je.P],styles:['.btn-wrapper[_ngcontent-%COMP%]{width:300px}@media (max-width: 767.98px){.btn-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between}}.btn-wrapper[_ngcontent-%COMP%]   .spin[_ngcontent-%COMP%]{min-width:68px;max-width:68px;height:68px;border-radius:50%}.btn-wrapper[_ngcontent-%COMP%]   .spin[_ngcontent-%COMP%]   .icon-spin[_ngcontent-%COMP%]{width:32px;height:35px;background:url(icon-spin.3c9626f893829348.svg) no-repeat center center/contain}@media (min-width: 768px){.btn-wrapper[_ngcontent-%COMP%]   .spin[_ngcontent-%COMP%]{transform:translateY(-24px)}}@media (max-width: 767.98px){.roulette-controls[_ngcontent-%COMP%]{width:100%!important;margin-left:0!important}}.wrap-heat[_ngcontent-%COMP%]{position:relative}.info-heat[_ngcontent-%COMP%]{position:absolute;pointer-events:none;top:0;left:50%;width:192px;display:flex;align-items:center;padding:10px;border-radius:8px;background-image:linear-gradient(117deg,#f3a031 0%,#ee8829 100.39%);box-shadow:inset 0 0 0 1px #0000004d;transform:translate(var(--infoHeatTransformTranslateX),calc(-100% - 13px));--infoHeatTransformTranslateX:calc(-50% + .25rem)}@media (max-width: 767.98px){.info-heat[_ngcontent-%COMP%]{--infoHeatTransformTranslateX:calc(-80% + .25rem)}}.info-heat_bounce[_ngcontent-%COMP%]{animation-duration:1s;animation-direction:alternate;animation-timing-function:linear;animation-iteration-count:infinite;animation-name:moveInfoHeat}.info-heat[_ngcontent-%COMP%]:before{content:"";position:absolute;top:100%;left:50%;width:21px;height:9px;background-image:url(/assets/img/balloon/hint-triangle.png);background-image:-webkit-image-set(url(/assets/img/balloon/hint-triangle.png) 1x,url(/assets/img/balloon/hint-triangle@2x.png) 2x,url(/assets/img/balloon/hint-triangle@3x.png) 3x);background-image:image-set("/assets/img/balloon/hint-triangle.png" 1x,"/assets/img/balloon/hint-triangle@2x.png" 2x,"/assets/img/balloon/hint-triangle@3x.png" 3x);background-repeat:no-repeat;transform:translate(-50%,-2px)}@media (max-width: 767.98px){.info-heat[_ngcontent-%COMP%]:before{left:80%}}.info-heat__img[_ngcontent-%COMP%]{flex-shrink:0;width:48px;height:48px;margin-right:6px}.info-heat__wrap-text[_ngcontent-%COMP%]{flex-grow:1;text-align:center;color:#000;text-shadow:0px 0px 2px rgba(0,0,0,.25);line-height:1.25}.info-heat__small-text[_ngcontent-%COMP%]{font-size:12px}.info-heat__loader[_ngcontent-%COMP%]{max-width:110px;width:100%;height:6px;border-radius:6px;margin:8px auto;background:linear-gradient(0deg,rgba(0,0,0,.25) 0%,rgba(0,0,0,.25) 100%),#ef8a2a;box-shadow:inset 0 0 2px #00000040}.info-heat__loader[_ngcontent-%COMP%]:before{content:"";position:relative;top:1px;display:block;min-width:4px;width:0%;margin-left:1px;height:calc(100% - 2px);border-radius:4px;background-image:linear-gradient(180deg,#70be23 0%,#66ac20 100%)}.info-heat__loader_move-line-keep[_ngcontent-%COMP%]:before{animation-duration:calc(var(--infoHeatDelayLineKeep) * 1s);animation-timing-function:linear;animation-fill-mode:forwards;animation-name:moveLineKeepLoader}.info-heat__loader_move-line-auto-cashout[_ngcontent-%COMP%]:before{animation-duration:calc(var(--infoHeatDelayLineAutoCashout) * 1s);animation-timing-function:linear;animation-name:moveLineAutoCashoutLoader}.info-heat__loader_full[_ngcontent-%COMP%]:before{width:100%}@keyframes moveLineKeepLoader{0%{width:0%}to{width:100%}}@keyframes moveLineAutoCashoutLoader{0%{width:calc(100% - 2px)}to{width:0%}}@keyframes moveInfoHeat{0%{transform:translate(var(--infoHeatTransformTranslateX),calc(-100% - 13px))}to{transform:translate(var(--infoHeatTransformTranslateX),calc(-100% - 7px))}}.btn-heat-box-shadow[_ngcontent-%COMP%]{box-shadow:3px 3px 6px #021a0880,0 0 30px #f79415,inset 1px 1px #fff1cd33,inset -1px -1px #00000052}.btn-heat-pressed[_ngcontent-%COMP%]{box-shadow:inset -1px -1px #00000052,inset 1px 1px #fff1cd33;transform:translateY(1px)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}']}),tn=(0,U.gn)([(0,st.c)()],tn);let vn=class{constructor(C,p,w,J,zt,Ee){this.betControls=C,this.core=p,this.connectorService=w,this.toast=J,this.transloco=zt,this.autoCashoutService=Ee}ngOnInit(){this.connectorService.response(it.E.CreateFreeBet).pipe((0,st.t)(this)).subscribe(C=>{this.core.freeBets.setList(C.freeBets,!1);const p=this.transloco.translate("toast.You've got a Free Bet!");this.toast.show(p,jr.u.Success)}),this.connectorService.response(it.E.CancelFreeBet).pipe((0,st.t)(this)).subscribe(C=>{C.freeBets.forEach(w=>{var J;(null===(J=this.core.freeBets.activeFreeBet)||void 0===J?void 0:J.id)===w&&this.autoCashoutService.stop(),this.core.freeBets.remove(w,!1)});const p=this.transloco.translate("toast.Your freebet was canceled by the administrator.");this.toast.show(p,jr.u.Danger)})}};function na(_,C){1&_&&o.GkF(0)}function mo(_,C){if(1&_&&(o.ynx(0),o.YNc(1,na,1,0,"ng-container",4),o.BQk()),2&_){o.oxw(2);const p=o.MAs(2);o.xp6(1),o.Q6J("ngTemplateOutlet",p)}}function gr(_,C){1&_&&o.GkF(0)}function _n(_,C){if(1&_&&(o.ynx(0),o.YNc(1,gr,1,0,"ng-container",4),o.BQk()),2&_){o.oxw(2);const p=o.MAs(2);o.xp6(1),o.Q6J("ngTemplateOutlet",p)}}function ni(_,C){if(1&_&&(o.ynx(0)(1,2),o.YNc(2,mo,2,1,"ng-container",3),o.YNc(3,_n,2,1,"ng-container",3),o.BQk()()),2&_){const p=o.oxw();o.xp6(1),o.Q6J("ngSwitch",null==p.coreService.config?null:p.coreService.config.activeGame),o.xp6(1),o.Q6J("ngSwitchCase",p.gameKey.Mines),o.xp6(1),o.Q6J("ngSwitchCase",p.gameKey.Goal)}}function ia(_,C){1&_&&o._UZ(0,"div",5)}vn.\u0275fac=function(C){return new(C||vn)(o.Y36(Jt.l),o.Y36(It.p),o.Y36(Qt.v),o.Y36(tr.k),o.Y36(lt.Vn),o.Y36(ln.W))},vn.\u0275cmp=o.Xpm({type:vn,selectors:[["app-bet-controls"]],decls:4,vars:4,consts:[[1,"bet-controls"],["class","bet-input",4,"ngIf"],[1,"controls"],[3,"currency"],[1,"bet-input"],[4,"ngIf"]],template:function(C,p){1&C&&(o.TgZ(0,"div",0),o.YNc(1,ra,4,3,"div",1),o.TgZ(2,"div",2),o._UZ(3,"app-controls",3),o.qZA()()),2&C&&(o.xp6(1),o.Q6J("ngIf",p.betControls.state.betInput.show),o.xp6(1),o.ekj("m-0",!p.betControls.state.betInput.show),o.xp6(1),o.Q6J("currency",p.core.config.currency))},directives:[N.O5,Qi,cn,fn,tn],styles:[".bet-controls[_ngcontent-%COMP%]{display:flex;height:100%;justify-content:center;align-items:center}.bet-controls[_ngcontent-%COMP%] > .bet-input[_ngcontent-%COMP%]{position:relative}.bet-controls[_ngcontent-%COMP%]   .bet-input[_ngcontent-%COMP%]{margin-right:4px}.bet-controls[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{margin-left:4px}@media (max-width: 767.98px){.bet-controls[_ngcontent-%COMP%]{flex-direction:column-reverse}.bet-controls[_ngcontent-%COMP%]   .bet-input[_ngcontent-%COMP%]{margin-right:0;margin-top:7px}.bet-controls[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{margin-left:0;margin-bottom:7px}}"]}),vn=(0,U.gn)([(0,st.c)()],vn);let yo=(()=>{class _{constructor(p,w){this.appService=p,this.coreService=w,this.gameKey=Mt.R}}return _.\u0275fac=function(p){return new(p||_)(o.Y36(ce.z),o.Y36(It.p))},_.\u0275cmp=o.Xpm({type:_,selectors:[["app-fun-mode"]],decls:3,vars:1,consts:[[4,"ngIf"],["funMode",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngTemplateOutlet"],[1,"fun-mode"]],template:function(p,w){1&p&&(o.YNc(0,ni,4,3,"ng-container",0),o.YNc(1,ia,1,0,"ng-template",null,1,o.W1O)),2&p&&o.Q6J("ngIf",w.appService.isFunMode)},directives:[N.O5,N.RF,N.n9,N.tP],styles:['.fun-mode[_ngcontent-%COMP%]{pointer-events:none;position:absolute;top:0;left:0;width:100%;height:100%;border-radius:12px;border:var(--widthBorder) solid #fb9c23;--widthBorder: 2px}@media (max-width: 767.98px){.fun-mode[_ngcontent-%COMP%]{border-color:transparent}}.fun-mode[_ngcontent-%COMP%]:before{content:"FUN MODE";position:absolute;top:50%;right:0;color:#fff;font-size:12px;font-weight:700;line-height:normal;padding:4px 36px;border-radius:0 0 12px 12px;background-color:#fb9c23;transform-origin:50% 0;transform:translate(calc(50% + var(--widthBorder)),-50%) rotate(90deg)}@media (max-width: 767.98px){.fun-mode[_ngcontent-%COMP%]:before{top:45px;right:auto;left:50%;border-radius:12px;padding-left:16px;padding-right:16px;transform-origin:0;transform:translate(-50%)}}']}),_})(),oa=(()=>{class _{constructor(p){this.translocoService=p}translateError(){var p;return this.translocoService.translate(`disconnect-reason.${null!==(p=this.error)&&void 0!==p?p:G.W.Network}`)}}return _.\u0275fac=function(p){return new(p||_)(o.Y36(lt.Vn))},_.\u0275cmp=o.Xpm({type:_,selectors:[["app-connector-error"]],inputs:{error:"error"},decls:3,vars:1,consts:[["role","alert",1,"alert","alert-danger"]],template:function(p,w){1&p&&(o.TgZ(0,"div",0)(1,"span"),o._uU(2),o.qZA()()),2&p&&(o.xp6(2),o.Oqu(w.translateError()))},styles:["[_nghost-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center}"]}),_})();function Pi(_,C){if(1&_){const p=o.EpF();o.TgZ(0,"ngb-toast",1),o.NdJ("mouseenter",function(){return o.CHM(p).$implicit.options.autohide=!1})("mouseleave",function(){return o.CHM(p).$implicit.options.autohide=!0})("hide",function(){const zt=o.CHM(p).$implicit;return o.oxw().toastService.remove(zt)}),o.qZA()}if(2&_){const p=C.$implicit;o.Tol(p.context),o.Q6J("header",p.message)("autohide",!1!==p.options.autohide)("delay",p.options.delay||5e3)}}let Ei=(()=>{class _{constructor(p){this.toastService=p}}return _.\u0275fac=function(p){return new(p||_)(o.Y36(tr.k))},_.\u0275cmp=o.Xpm({type:_,selectors:[["app-toasts"]],decls:1,vars:1,consts:[[3,"class","header","autohide","delay","mouseenter","mouseleave","hide",4,"ngFor","ngForOf"],[3,"header","autohide","delay","mouseenter","mouseleave","hide"]],template:function(p,w){1&p&&o.YNc(0,Pi,1,5,"ngb-toast",0),2&p&&o.Q6J("ngForOf",w.toastService.toasts)},directives:[N.sg,j.Iv],styles:["[_nghost-%COMP%]{width:100%;padding:.5rem;position:fixed;top:0;left:0;z-index:1200}[_nghost-%COMP%]     .toast{overflow:hidden}[_nghost-%COMP%]     .toast-body{display:none}[_nghost-%COMP%]     .toast-header{border-bottom:none!important}"]}),_})();var bo=D(4968),aa=D(3601);let ii=(()=>{class _{constructor(p){this.zone=p,this.AUDIT_TIME=100,this.resizeSubject=new yr.X(this.size),this.resize$=this.resizeSubject.asObservable(),this.zone.runOutsideAngular(()=>{(0,bo.R)(window,"resize").pipe((0,aa.e)(this.AUDIT_TIME)).subscribe(()=>this.zone.run(()=>{this.resizeSubject.next({width:this.size.width,height:this.size.height})}))})}get size(){return{width:window.innerWidth,height:window.innerHeight}}get isMobileScreenSize(){return this.size.width<768}}return _.\u0275fac=function(p){return new(p||_)(o.LFG(o.R0b))},_.\u0275prov=o.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();const sa=["screenTooSmall"],la=function(_,C){return{minWidth:_,minHeight:C}};function Oi(_,C){if(1&_&&(o.ynx(0),o.TgZ(1,"div",3),o._UZ(2,"svg-icon",4),o.TgZ(3,"h3"),o._uU(4),o.qZA(),o.TgZ(5,"p"),o._uU(6),o._UZ(7,"br")(8,"br"),o._uU(9),o.qZA()(),o.BQk()),2&_){const p=C.$implicit,w=o.oxw();o.xp6(4),o.Oqu(p("modals.screen-too-small.title")),o.xp6(2),o.hij(" ",p("modals.screen-too-small.text1",o.WLB(3,la,w.minWidth,w.minHeight))," "),o.xp6(3),o.hij(" ",p("modals.screen-too-small.text2")," ")}}let Xe=class{constructor(C,p,w){this.coreService=C,this.windowService=p,this.renderer=w}ngAfterViewInit(){this.windowService.resize$.pipe((0,st.t)(this)).subscribe(C=>{this.check(C)})}get minWidth(){return this.windowService.isMobileScreenSize?360:950}get minHeight(){return this.windowService.isMobileScreenSize?640:530}check(C){var p;!(null===(p=this.coreService.config)||void 0===p?void 0:p.smallScreenWarning)||(C.width<this.minWidth||C.height<this.minHeight?this.renderer.addClass(this.screenTooSmall.nativeElement,"screen-too-small--view"):this.renderer.removeClass(this.screenTooSmall.nativeElement,"screen-too-small--view"))}};function ka(_,C){if(1&_&&(o.ynx(0),o.TgZ(1,"div",1),o._UZ(2,"svg-icon",2),o.TgZ(3,"span",3),o._uU(4),o.qZA()(),o.BQk()),2&_){const p=C.$implicit;o.xp6(4),o.hij(" ",p("shared.Please-rotate-your-device")," ")}}Xe.\u0275fac=function(C){return new(C||Xe)(o.Y36(It.p),o.Y36(ii),o.Y36(o.Qsj))},Xe.\u0275cmp=o.Xpm({type:Xe,selectors:[["app-screen-too-small"]],viewQuery:function(C,p){if(1&C&&o.Gf(sa,5),2&C){let w;o.iGM(w=o.CRH())&&(p.screenTooSmall=w.first)}},decls:3,vars:0,consts:[[1,"screen-too-small"],["screenTooSmall",""],[4,"transloco"],[1,"screen-too-small__wrap-text"],["src","assets/icons/screen-too-small.svg"]],template:function(C,p){1&C&&(o.TgZ(0,"div",0,1),o.YNc(2,Oi,10,6,"ng-container",2),o.qZA())},directives:[lt.KI,W.bk],styles:[".screen-too-small[_ngcontent-%COMP%]{z-index:10000;position:absolute;top:0;left:0;display:none;flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%;background-color:#212226}.screen-too-small--view[_ngcontent-%COMP%]{display:flex}.screen-too-small__wrap-text[_ngcontent-%COMP%]{max-width:296px;text-align:center}.screen-too-small__wrap-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#ccc;font-size:20px;line-height:normal;letter-spacing:-.2px;margin-bottom:4px}.screen-too-small__wrap-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7a7a7a;font-size:14px;font-weight:500;line-height:1.21429;letter-spacing:-.14px;margin-bottom:0}"]}),Xe=(0,U.gn)([(0,st.c)()],Xe);let La=(()=>{class _{}return _.\u0275fac=function(p){return new(p||_)},_.\u0275cmp=o.Xpm({type:_,selectors:[["app-rotate-phone"]],decls:1,vars:0,consts:[[4,"transloco"],[1,"rotate-phone"],["src","assets/icons/icon-rotate.svg",1,"rotate-phone__icon"],[1,"rotate-phone__text"]],template:function(p,w){1&p&&o.YNc(0,ka,5,1,"ng-container",0)},directives:[lt.KI,W.bk],styles:[".rotate-phone[_ngcontent-%COMP%]{z-index:10000;position:absolute;top:0;left:0;display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%;background-color:#212226}@media (orientation: portrait){.rotate-phone[_ngcontent-%COMP%]{display:none}}.rotate-phone__icon[_ngcontent-%COMP%]{margin-bottom:12px}.rotate-phone__text[_ngcontent-%COMP%]{font-size:14px}"]}),_})();const Ga=["viewPortRef"],Ha=["lockUIRef"];function Xa(_,C){if(1&_&&o._UZ(0,"app-connector-status-bar",15),2&_){const p=o.oxw(2);o.Q6J("status",p.connectorStatus)}}function ja(_,C){if(1&_&&(o.ynx(0),o.TgZ(1,"div",8)(2,"div",9),o._UZ(3,"app-header",10),o.YNc(4,Xa,1,1,"app-connector-status-bar",11),o.qZA()(),o.TgZ(5,"div",12),o._UZ(6,"router-outlet"),o.qZA(),o.TgZ(7,"div",13)(8,"div",14),o._UZ(9,"app-bet-controls"),o.qZA()(),o.BQk()),2&_){const p=o.oxw();o.xp6(3),o.Q6J("disabled",p.disabled)("isBetSet",p.isBetSet),o.xp6(1),o.Q6J("ngIf",p.connectorStatus===p.ConnectorState.SlowConnection||p.connectorStatus===p.ConnectorState.Reconnecting)}}function Ya(_,C){1&_&&(o.ynx(0),o._uU(1),o.ALo(2,"transloco"),o.BQk()),2&_&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"shared.load-assets"),"... "))}function Za(_,C){1&_&&(o.ynx(0),o._uU(1),o.ALo(2,"transloco"),o.BQk()),2&_&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"shared.connecting"),"... "))}function za(_,C){if(1&_&&(o.ynx(0),o.TgZ(1,"div",16),o.YNc(2,Ya,3,3,"ng-container",4),o.YNc(3,Za,3,3,"ng-container",4),o.qZA(),o.BQk()),2&_){const p=o.oxw();o.xp6(2),o.Q6J("ngIf",p.loading===p.LoadingStatus.Assets),o.xp6(1),o.Q6J("ngIf",p.loading===p.LoadingStatus.Connection)}}function Va(_,C){if(1&_&&o._UZ(0,"app-connector-error",17),2&_){const p=o.oxw();o.Q6J("error",p.connectorError)}}function Wa(_,C){1&_&&o._UZ(0,"app-rotate-phone")}var kr=(()=>{return(_=kr||(kr={}))[_.InProgress=0]="InProgress",_[_.Assets=1]="Assets",_[_.Connection=2]="Connection",_[_.Complete=3]="Complete",kr;var _})();let Rn=class{constructor(C,p,w,J,zt,Ee,Lr,rn,xo,Mi,ha,ca,Gr,Zr,Ri,Ii,fa,Co){this.router=C,this.core=p,this.titleService=w,this.renderer=J,this.cd=zt,this.betControls=Ee,this.ngbModalConfig=Lr,this.connector=rn,this.modalService=xo,this.appService=Mi,this.storage=ha,this.ifcApiService=ca,this.disableBtnBetService=Gr,this.maxWinService=Zr,this.settingsService=Ri,this.ngbModal=Ii,this.soundService=fa,this.autoCashoutService=Co,this.loading=kr.InProgress,this.connectorStatus=G.o.None,this.connectorError=null,this.LoadingStatus=kr,this.GameKey=Mt.R,this.ConnectorState=G.o}ngOnInit(){this.tickGSAPWhileHidden(),this.ifcApiService.setup(),this.onInit(this.appService.initialUrlParams.lang.toLowerCase()),this.connector.response(it.E.NewBalance).pipe((0,st.t)(this)).subscribe(C=>{this.core.user.updateBalance(C)})}get isMobile(){return"mobile"===this.appService.deviceInfo.deviceType}onInit(C){this.appService.initialUrlParams.lang=C,this.router.events.pipe((0,te.h)(p=>p instanceof V.m2),(0,st.t)(this)).subscribe(()=>this.activateGame()),this.activateGame(),this.connector.response(it.E.Init).pipe((0,st.t)(this)).subscribe(p=>this.onStart(p)),this.connector.state$.pipe((0,st.t)(this)).subscribe(({state:p,data:w})=>this.onConnectorStateUpdate(p,null==w?void 0:w.reason)),Kt.P6Y.skipHello(),this.ngbModalConfig.container=this.viewPortRef.nativeElement,this.ngbModalConfig.centered=!0}get activeGame(){return this.core.activeGame}get disabled(){return this.core.disabled||this.disableBtnBetService.getDisabledBtn}get isBetSet(){return this.core.isBetSet}onStart(C){if(this.loading===kr.Complete&&(this.betControls.reset(),this.maxWinService.profit=0,this.loading=kr.InProgress,this.cd.detectChanges()),200!==C.code)return this.connectorStatus=G.o.Disconnected,void(this.connectorError=C.errorMessage?C.errorMessage:G.W.Network);this.autoCashoutService.stop(),this.core.init(C),this.connector.startLagMonitoring(C.config.pingIntervalMs),this.settingsService.init(),this.betControls.betAmount=this.core.config.defaultBetValue,this.ifcApiService.emitInitEvent({additionalOperatorData:null==C?void 0:C.additionalOperatorData,user:{balance:this.core.user.balance,settings:{sound:this.settingsService.volumeSound,music:Object.keys(St.sy).find(p=>St.sy[p]===this.core.activeGame)?this.settingsService.volumeMusic:void 0}},config:{currency:C.config.currency,precision:C.config.betPrecision}}),this.loading=kr.Complete,this.startInactivityTimeForDisconnect(),this.subscribeRealityCheckResponse(),this.hideHeader(),this.ifcApiService.command(ct._.LockUI).pipe((0,st.t)(this)).subscribe(p=>this.lockUIHandler(p.value)),this.ifcApiService.command(ct._.UpdateBalance).pipe((0,st.t)(this)).subscribe(()=>this.refreshBalance())}startInactivityTimeForDisconnect(){var C;null===(C=this.inactivityTimeForDisconnect$)||void 0===C||C.unsubscribe();const p=this.core.config.inactivityTimeForDisconnect;p&&(this.inactivityTimeForDisconnect$=(0,Vt.H)(60*p*1e3).subscribe(()=>{var J;this.betControls.disableAll(),this.connector.reconnection.maxReconnect=-1,this.connector.disconnect(),this.connector.setState(G.o.Disconnected,{reason:G.W.Inactivity}),null===(J=this.inactivityTimeForDisconnect$)||void 0===J||J.unsubscribe()}))}lockUIHandler(C){C?(this.renderer.addClass(document.body,"pointer-events-none"),this.renderer.removeClass(this.lockUIRef.nativeElement,"d-none"),this.betControls.autoplay.isActive&&this.betControls.autoplayHandler(null)):(this.renderer.removeClass(document.body,"pointer-events-none"),this.renderer.addClass(this.lockUIRef.nativeElement,"d-none"))}refreshBalance(){this.connector.request(Y.T.UpdateBalance,null)}isViewModalHowToPlay(){const C=JSON.parse(this.storage.local.getItem("howToPlay"));if(Array.isArray(C)){if(C.includes(this.core.activeGame))return;this.viewModalHowToPlay(),C.push(this.core.activeGame),this.storage.local.setItem("howToPlay",JSON.stringify(C))}else this.viewModalHowToPlay(),this.storage.local.setItem("howToPlay",JSON.stringify([`${this.core.activeGame}`]))}subscribeRealityCheckResponse(){this.connector.response(it.E.RealityCheck).pipe((0,st.t)(this)).subscribe(C=>{C.hasOwnProperty("message")&&(this.ifcApiService.emitEvent(ct.g.InternalRealityCheck,{code:C.code,errorMessage:C.errorMessage,message:C.message}),this.modalService.open(k.$.RealityCheck,{text:C.message}))})}hideHeader(){this.appService.initialUrlParams.aviaport&&document.documentElement.style.setProperty("--headerHeight","0px")}viewModalHowToPlay(){this.modalService.open(k.$.HowToPlay,{isManualShow:!1})}activateGame(){this.loading=kr.InProgress,Object.values(Mt.R).forEach(C=>this.renderer.removeClass(document.body,C)),this.betControls.reset(),this.core.activeGame=(0,Dt.Ab)(this.router),this.soundService.onInit(),this.renderer.addClass(document.body,this.core.activeGame),this.titleService.setTitle((0,gt.LF)(this.core.activeGame)),this.loading=kr.Assets,class et{static load(C,p=!0){let w=C;return p&&(Kt.aNw.shared.reset(),Kt.P6Y.clearTextureCache()),!Array.isArray(C)&&"string"==typeof C&&(w=this.getCanvasResources((_=>{let C=[_.toString()];return _===Mt.R.MiniRoulette&&C.push("chips"),_===Mt.R.Hilo&&C.push("cards"),C})(C))),Array.isArray(C)&&"string"==typeof C[0]&&(w=this.getCanvasResources(C)),new Promise(J=>{Kt.aNw.shared.pre(this.preResource),w.forEach(zt=>{Kt.aNw.shared.resources[zt.name]||Kt.aNw.shared.add(zt)}),Kt.aNw.shared.load(()=>J())})}static preResource(C,p){C.loadType===E.JSON&&C.onComplete.once(w=>{w.data&&w.data.meta&&w.data.meta.scale&&(w.data.meta.scale="1")}),p()}static getCanvasResources(C){const p=[],w=(0,Zt.x)();return C.forEach(J=>{let zt=1===w?J:J+"@2x";I.hasOwnProperty(zt)&&p.push(I[zt])}),p}}.load(this.core.activeGame).then(()=>{this.loading=kr.Connection,this.connector.init(this.core.activeGame)})}onConnectorStateUpdate(C,p){(C===G.o.Disconnected||C===G.o.Reconnecting||C===G.o.SlowConnection)&&(this.ngbModal.dismissAll(),this.onConnectorStateChange()),this.connectorStatus=null!=C?C:null,this.connectorError=null!=p?p:null,this.connectorStatus===G.o.Disconnected&&this.ifcApiService.emitCloseEvent({reason:p,additionalOperatorData:void 0})}onConnectorStateChange(){this.autoCashoutService.stop()}tickGSAPWhileHidden(C=!0){if(!1===C)return document.removeEventListener("visibilitychange",this.tickGSAPWhileHiddenFn),clearInterval(this.tickGSAPWhileHiddenId);const p=()=>{clearInterval(this.tickGSAPWhileHiddenId),document.hidden?(H.p8.ticker.lagSmoothing(0),this.tickGSAPWhileHiddenId=setInterval(H.p8.ticker.tick,500)):H.p8.ticker.lagSmoothing(500,33)};document.addEventListener("visibilitychange",p),this.tickGSAPWhileHiddenFn=p,p()}ngOnDestroy(){this.tickGSAPWhileHidden(!1)}};Rn.\u0275fac=function(C){return new(C||Rn)(o.Y36(V.F0),o.Y36(It.p),o.Y36(Xt.Dx),o.Y36(o.Qsj),o.Y36(o.sBO),o.Y36(Jt.l),o.Y36(j.NM),o.Y36(Qt.v),o.Y36(ee.Z),o.Y36(ce.z),o.Y36(fe.V),o.Y36(ne.h),o.Y36(re.i),o.Y36(me.a),o.Y36(Er),o.Y36(j.FF),o.Y36(Ye.y),o.Y36(ln.W))},Rn.\u0275cmp=o.Xpm({type:Rn,selectors:[["app-core"]],viewQuery:function(C,p){if(1&C&&(o.Gf(Ga,7),o.Gf(Ha,7)),2&C){let w;o.iGM(w=o.CRH())&&(p.viewPortRef=w.first),o.iGM(w=o.CRH())&&(p.lockUIRef=w.first)}},decls:13,vars:6,consts:[[1,"game-viewport"],["viewPortRef",""],[1,"game-wrapper"],[1,"game","gui-bg-gradient"],[4,"ngIf"],[3,"error",4,"ngIf"],[1,"lock-ui","d-none"],["lockUIRef",""],[1,"game-header-wrapper"],[1,"game-header","position-relative"],[3,"disabled","isBetSet"],[3,"status",4,"ngIf"],[1,"game-body"],[1,"game-footer-wrapper"],[1,"game-footer"],[3,"status"],[1,"w-100","h-100","d-flex","text-white","justify-content-center","align-items-center"],[3,"error"]],template:function(C,p){1&C&&(o.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3),o.YNc(4,ja,10,3,"ng-container",4),o._UZ(5,"app-fun-mode"),o.YNc(6,za,4,2,"ng-container",4),o.YNc(7,Va,1,1,"app-connector-error",5),o.qZA()(),o._UZ(8,"app-toasts")(9,"app-screen-too-small"),o.YNc(10,Wa,1,0,"app-rotate-phone",4),o.qZA(),o._UZ(11,"div",6,7)),2&C&&(o.xp6(3),o.ekj("game-roulette",p.activeGame===p.GameKey.MiniRoulette),o.xp6(1),o.Q6J("ngIf",p.loading===p.LoadingStatus.Complete&&p.connectorStatus!==p.ConnectorState.Disconnected),o.xp6(2),o.Q6J("ngIf",p.loading!==p.LoadingStatus.Complete&&p.connectorStatus!==p.ConnectorState.Disconnected),o.xp6(1),o.Q6J("ngIf",p.connectorStatus===p.ConnectorState.Disconnected),o.xp6(3),o.Q6J("ngIf",p.isMobile))},directives:[N.O5,Ar,Ur,V.lC,vn,yo,oa,Ei,Xe,La],pipes:[lt.Ot],styles:['.game-viewport[_ngcontent-%COMP%]{display:block;width:100%;padding:0;overflow:hidden;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);max-width:177.78vh;max-height:100vh}.game-viewport[_ngcontent-%COMP%]:before{content:"";display:block;padding-top:530px}@media only screen and (min-width: 960px) and (min-height: 540px){.game-viewport[_ngcontent-%COMP%]{max-width:960px;max-height:540px}}@media (max-width: 767.98px){.game-viewport[_ngcontent-%COMP%]{top:0;left:0;transform:translate(0);width:100%;height:100%;max-width:100%;max-height:100%}.game-viewport[_ngcontent-%COMP%]:before{width:100%;height:100%;padding-top:0}}.game-viewport[_ngcontent-%COMP%]   .game-wrapper[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;width:100%;height:100%;border:0;background:#131419;padding:5px}.game-viewport[_ngcontent-%COMP%]   .game-wrapper[_ngcontent-%COMP%]   .game[_ngcontent-%COMP%]{width:100%;height:100%;box-shadow:inset 1px 1px #ffffff3b;border-radius:12px;position:relative;overflow:hidden}.game-viewport[_ngcontent-%COMP%]   .game-wrapper[_ngcontent-%COMP%]   .game[_ngcontent-%COMP%]   .game-header-wrapper[_ngcontent-%COMP%]{position:absolute;z-index:10;top:0;width:100%;height:var(--headerHeight);padding:2px 2px 0}@media (max-width: 767.98px){.game-viewport[_ngcontent-%COMP%]   .game-wrapper[_ngcontent-%COMP%]   .game[_ngcontent-%COMP%]   .game-header-wrapper[_ngcontent-%COMP%]{top:auto;bottom:0;height:36px;padding:5px}}.game-viewport[_ngcontent-%COMP%]   .game-wrapper[_ngcontent-%COMP%]   .game[_ngcontent-%COMP%]   .game-header-wrapper[_ngcontent-%COMP%]   .game-header[_ngcontent-%COMP%]{background:rgba(0,0,0,.3);border-radius:12px;height:100%}@media (max-width: 767.98px){.game-viewport[_ngcontent-%COMP%]   .game-wrapper[_ngcontent-%COMP%]   .game[_ngcontent-%COMP%]   .game-header-wrapper[_ngcontent-%COMP%]   .game-header[_ngcontent-%COMP%]{background:none}}.game-viewport[_ngcontent-%COMP%]   .game-wrapper[_ngcontent-%COMP%]   .game[_ngcontent-%COMP%]   .game-body[_ngcontent-%COMP%]{height:100%;padding-top:var(--headerHeight);padding-bottom:var(--footerHeight)}@media (max-width: 767.98px){.game-viewport[_ngcontent-%COMP%]   .game-wrapper[_ngcontent-%COMP%]   .game[_ngcontent-%COMP%]   .game-body[_ngcontent-%COMP%]{padding-top:0;padding-bottom:calc(var(--footerHeight) + var(--headerHeight))}}.game-viewport[_ngcontent-%COMP%]   .game-wrapper[_ngcontent-%COMP%]   .game[_ngcontent-%COMP%]   .game-footer-wrapper[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%;height:var(--footerHeight);padding:0 2px 2px}@media (max-width: 767.98px){.game-viewport[_ngcontent-%COMP%]   .game-wrapper[_ngcontent-%COMP%]   .game[_ngcontent-%COMP%]   .game-footer-wrapper[_ngcontent-%COMP%]{height:var(--footerHeight);bottom:var(--headerHeight);padding-bottom:0}}.game-viewport[_ngcontent-%COMP%]   .game-wrapper[_ngcontent-%COMP%]   .game[_ngcontent-%COMP%]   .game-footer-wrapper[_ngcontent-%COMP%]   .game-footer[_ngcontent-%COMP%]{background:rgba(0,0,0,.3);border-radius:12px;height:100%}@media (max-width: 767.98px){.game-viewport[_ngcontent-%COMP%]   .game-wrapper[_ngcontent-%COMP%]   .game-roulette[_ngcontent-%COMP%]   .game-body[_ngcontent-%COMP%]{padding-bottom:calc(var(--footerHeightRoulette) + var(--headerHeight))}}@media (max-width: 767.98px){.game-viewport[_ngcontent-%COMP%]   .game-wrapper[_ngcontent-%COMP%]   .game-roulette[_ngcontent-%COMP%]   .game-footer-wrapper[_ngcontent-%COMP%]{height:var(--footerHeightRoulette)}}.lock-ui[_ngcontent-%COMP%]{position:fixed;pointer-events:none;z-index:9999;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.6)}']}),Rn=(0,U.gn)([(0,st.c)()],Rn);const Ja=[{path:"",component:Rn,children:[{path:"hi-lo",redirectTo:"hilo",pathMatch:"full"},{path:"dice",loadChildren:()=>Promise.all([D.e(592),D.e(116)]).then(D.bind(D,5116)).then(_=>_.DiceModule)},{path:"mines",loadChildren:()=>Promise.all([D.e(592),D.e(80)]).then(D.bind(D,1080)).then(_=>_.MinesModule)},{path:"keno",loadChildren:()=>D.e(794).then(D.bind(D,8794)).then(_=>_.KenoModule)},{path:"goal",loadChildren:()=>Promise.all([D.e(592),D.e(455)]).then(D.bind(D,4455)).then(_=>_.GoalModule)},{path:"plinko",loadChildren:()=>Promise.all([D.e(592),D.e(646)]).then(D.bind(D,2646)).then(_=>_.PlinkoModule)},{path:"hilo",loadChildren:()=>Promise.all([D.e(592),D.e(396)]).then(D.bind(D,9396)).then(_=>_.HiloModule)},{path:"mini-roulette",loadChildren:()=>Promise.all([D.e(592),D.e(171)]).then(D.bind(D,9171)).then(_=>_.MiniRouletteModule)},{path:"hotline",loadChildren:()=>Promise.all([D.e(592),D.e(709)]).then(D.bind(D,3709)).then(_=>_.HotlineModule)},{path:"fortune-wheel",loadChildren:()=>Promise.all([D.e(592),D.e(983)]).then(D.bind(D,6983)).then(_=>_.FortuneWheelModule)},{path:"mini-aviator",loadChildren:()=>Promise.all([D.e(592),D.e(17)]).then(D.bind(D,9017)).then(_=>_.MiniAviatorModule)},{path:"balloon",loadChildren:()=>Promise.all([D.e(592),D.e(850)]).then(D.bind(D,1850)).then(_=>_.BalloonModule)}]}];let ua=(()=>{class _{}return _.\u0275fac=function(p){return new(p||_)},_.\u0275mod=o.oAB({type:_}),_.\u0275inj=o.cJS({imports:[[V.Bz.forChild(Ja)],V.Bz]}),_})(),$a=(()=>{class _{}return _.\u0275fac=function(p){return new(p||_)},_.\u0275mod=o.oAB({type:_}),_.\u0275inj=o.cJS({imports:[[N.ez,ut.u5,j.XC,W._J,lt.y4]]}),_})();var Qa=D(8541);let qa=(()=>{class _{}return _.\u0275fac=function(p){return new(p||_)},_.\u0275mod=o.oAB({type:_}),_.\u0275inj=o.cJS({imports:[[N.ez,ua,wt,$a,j.XC,W._J,ht,rt.p,lt.y4,K.D,Qa.t]]}),_})();var Mr=D(5477);let en=(()=>{class _{}return _.\u0275fac=function(p){return new(p||_)},_.\u0275mod=o.oAB({type:_}),_.\u0275inj=o.cJS({imports:[[N.ez,W._J,lt.y4]]}),_})(),In=(()=>{class _{}return _.\u0275fac=function(p){return new(p||_)},_.\u0275mod=o.oAB({type:_}),_.\u0275inj=o.cJS({imports:[[N.ez,W._J,lt.y4]]}),_})(),Ai=(()=>{class _{}return _.\u0275fac=function(p){return new(p||_)},_.\u0275mod=o.oAB({type:_}),_.\u0275inj=o.cJS({imports:[[N.ez,qa,ua,Z,j.XC,Mr.Re,Mr.qn,Mr.FW,Mr.Zb,Mr.bj,Mr.wW,Mr.Go,Mr.XY,yt,Mr.Dh,Mr.$S,en,lt.y4,In,tt]]}),_})()},189:(Ut,Wt,D)=>{"use strict";D.d(Wt,{Kr:()=>o,L3:()=>N,Sv:()=>lt,ms:()=>j,my:()=>yt});const N={bonusGame:{itemWidth:60,itemIndent:1,get itemTotalWidth(){return 2*N.bonusGame.itemIndent+N.bonusGame.itemWidth},get halfItemTotalWidth(){return N.bonusGame.itemTotalWidth/2},widthLeft:77,widthRight:47},background:{speed:{stars:70,clouds:18,ground:5,rays:20,backgroundMain:50,moon:25}},delay:{intervalRequest:100,startGameMouseDown:1300,autoCashout:7,viewKeepAfterInit:0,startViewGreenBalloon:300,viewGreenBalloon:500,get allViewGreenBalloon(){return N.delay.startViewGreenBalloon+N.delay.viewGreenBalloon},loader:1e3,loaderFire:1e3,get startBonusGameFirst(){return N.delay.viewGreenBalloon+N.delay.startViewGreenBalloon+N.delay.loader+N.delay.loaderFire},startBonusGameSecond:600,startBonusGameThird:500,get startBonusGame(){return N.delay.startBonusGameFirst+N.delay.startBonusGameSecond+N.delay.startBonusGameThird},spinBonusGame:5e3,moveCoefficient:1e3,animNumb:1e3,get selectedBonus(){return N.delay.moveCoefficient+N.delay.animNumb},get stepBonusGame(){return N.delay.selectedBonus+N.delay.spinBonusGame},endBonusGame:500,beforeEndGameFirst:3e3,beforeEndGameSecond:2e3,get beforeEndGame(){return N.delay.beforeEndGameFirst+N.delay.beforeEndGameSecond},stepCycleNumbers:50}};function j(W){return N.delay.startBonusGame+N.delay.endBonusGame+N.delay.stepBonusGame*W}var lt=(()=>{return(W=lt||(lt={})).Init="init",W.StartGame="startGame",W.ProgressGame="progressGame",W.PauseGame="pauseGame",W.BonusGame="bonusGame",W.BeforeEndGame="beforeEndGame",W.EndGame="endGame",lt;var W})(),o=(()=>{return(W=o||(o={})).Init="init",W.Win="win",W.Lose="lose",o;var W})(),yt=(()=>{return(W=yt||(yt={})).No="no",W.Yes="yes",W.Fake="fake",yt;var W})()},1420:(Ut,Wt,D)=>{"use strict";D.d(Wt,{A:()=>j});var N=D(9892);class j extends N.W20{constructor(o,yt,W=1){super(),this.chipsCost=yt,this._value=0,this.mcChip=new N.KgH(N.aNw.shared.resources.chips.spritesheet.animations.chip),this.mcChip.anchor.set(.5,.5),this.mcChip.width=46*W,this.mcChip.height=46*W,this.mcChip.gotoAndStop(7),this.addChild(this.mcChip);const dt=new N.pn8({fontFamily:"Roboto",fontSize:14*W,fill:16777215,align:"center",fontWeight:"bold",dropShadow:!0,dropShadowAlpha:.5,dropShadowAngle:45,dropShadowDistance:1});this.label=new N.xvT("",dt),this.label.anchor.set(.5,.5),this.addChild(this.label),this.value=o}set value(o){this._value=o,this.mcChip.gotoAndStop(this.getChipColor()),this.updateLabel()}get value(){return this._value}getChipColor(){if(this.value<=0)return 0;for(let o=0;o<this.chipsCost.length-1;o++)if(this.value>=this.chipsCost[o]&&this.value<this.chipsCost[o+1])return o;return this.chipsCost.length-1}updateLabel(){if(this.value>0){this.label.visible=!0;let o=this.value;o%1e3==0&&(o=o/1e3+"K"),this.label.text=o.toString()}else this.label.visible=!1}}},3031:(Ut,Wt,D)=>{"use strict";D.d(Wt,{y:()=>ft});var N=D(7587),j=D(2821),lt=D(9798),o=D(6352),yt=D(9808),W=D(8248);function K(ut,Ot){if(1&ut&&(N.TgZ(0,"div",2),N._UZ(1,"svg-icon",3),N._uU(2),N.qZA()),2&ut){const Yt=N.oxw().$implicit,xt=N.oxw();N.xp6(2),N.lnq(" ",Yt("shared.Max-win"),": ",xt.config.maxUserWin.toFixed(xt.config.betPrecision)," ",xt.config.currency," ")}}function dt(ut,Ot){if(1&ut&&(N.ynx(0),N.YNc(1,K,3,3,"div",1),N.ALo(2,"async"),N.BQk()),2&ut){const Yt=N.oxw();N.xp6(1),N.Q6J("ngIf",N.lcZ(2,1,Yt.maxWinService.isMaxUserWin$))}}let ft=(()=>{class ut{constructor(Yt,xt){this.coreService=Yt,this.maxWinService=xt}get config(){return this.coreService.config}}return ut.\u0275fac=function(Yt){return new(Yt||ut)(N.Y36(j.p),N.Y36(lt.a))},ut.\u0275cmp=N.Xpm({type:ut,selectors:[["app-max-win"]],decls:1,vars:0,consts:[[4,"transloco"],["class","max-win",4,"ngIf"],[1,"max-win"],["src","assets/icons/icon-warn.svg"]],template:function(Yt,xt){1&Yt&&N.YNc(0,dt,3,3,"ng-container",0)},directives:[o.KI,yt.O5,W.bk],pipes:[yt.Ov],styles:[".max-win[_ngcontent-%COMP%]{display:flex;align-items:center;color:#fff;font-size:12px;line-height:1;padding:3px 5px;border-radius:100px;background-color:#b32b00;width:-moz-fit-content;width:fit-content}.max-win[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%]{display:flex;margin-right:3px}.max-win[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:flex}"]}),ut})()},7303:(Ut,Wt,D)=>{"use strict";D.d(Wt,{p:()=>yt});var N=D(9808),j=D(6352),lt=D(8248),o=D(7587);let yt=(()=>{class W{}return W.\u0275fac=function(dt){return new(dt||W)},W.\u0275mod=o.oAB({type:W}),W.\u0275inj=o.cJS({imports:[[N.ez,lt._J,j.y4]]}),W})()},4530:(Ut,Wt,D)=>{"use strict";D.d(Wt,{O:()=>rt});var N=D(9808),j=D(7587),lt=D(3075),o=D(2805),yt=D(4968),W=(()=>{return(ht=W||(W={})).Enter="Enter",ht.Backspace="Backspace",ht.ArrowDown="ArrowDown",ht.ArrowUp="ArrowUp",ht.Minus="-",W;var ht})(),K=D(9039);function dt(ht,wt){if(1&ht){const V=j.EpF();j.TgZ(0,"div",2)(1,"button",3),j.NdJ("click",function(){const H=j.CHM(V).$implicit;return j.oxw().onKeyClick(H.toString())}),j._uU(2),j.qZA()()}if(2&ht){const V=wt.$implicit,U=j.oxw();j.xp6(1),j.Q6J("disabled",U.isDisabled),j.xp6(1),j.hij(" ",V," ")}}const ft=function(){return[1,2,3,4,5,6,7,8,9]};let ut=(()=>{class ht{constructor(){this.isFractionalCanAdd=!0,this.isDecimalOperatorCanAdd=!0,this.numpadKey=new j.vpe,this.SpecialKeys=W}onKeyClick(V){this.numpadKey.emit(V)}get isDisabled(){return!this.isFractionalCanAdd}}return ht.\u0275fac=function(V){return new(V||ht)},ht.\u0275cmp=j.Xpm({type:ht,selectors:[["app-numpad"]],inputs:{isFractionalCanAdd:"isFractionalCanAdd",isDecimalOperatorCanAdd:"isDecimalOperatorCanAdd",decimalSeparator:"decimalSeparator",valueAsString:"valueAsString",precision:"precision"},outputs:{numpadKey:"numpadKey"},decls:16,vars:6,consts:[[1,"row","no-gutters","numpad","gui-bg","gui-border","shadow-lg"],["class","col-4",4,"ngFor","ngForOf"],[1,"col-4"],["type","button",1,"btn","btn-game","w-100",3,"disabled","click"],[1,"d-flex","justify-content-center"],[1,"backspace"],[1,"col-12"],["type","button",1,"btn","btn-game","btn-done","w-100","shadow-none","border-0",3,"click"],[1,"confirm"]],template:function(V,U){1&V&&(j.TgZ(0,"div",0),j.YNc(1,dt,3,2,"div",1),j.TgZ(2,"div",2)(3,"button",3),j.NdJ("click",function(){return U.onKeyClick(U.decimalSeparator)}),j._uU(4),j.qZA()(),j.TgZ(5,"div",2)(6,"button",3),j.NdJ("click",function(){return U.onKeyClick("0")}),j._uU(7,"0"),j.qZA()(),j.TgZ(8,"div",2)(9,"button",3),j.NdJ("click",function(){return U.onKeyClick(U.SpecialKeys.Backspace)}),j.TgZ(10,"span",4),j._UZ(11,"i",5),j.qZA()()(),j.TgZ(12,"div",6)(13,"button",7),j.NdJ("click",function(){return U.onKeyClick(U.SpecialKeys.Enter)}),j.TgZ(14,"span",4),j._UZ(15,"i",8),j.qZA()()()()),2&V&&(j.xp6(1),j.Q6J("ngForOf",j.DdM(5,ft)),j.xp6(2),j.Q6J("disabled",U.isDisabled||!U.isDecimalOperatorCanAdd),j.xp6(1),j.hij(" ",U.decimalSeparator," "),j.xp6(2),j.Q6J("disabled",U.isDisabled),j.xp6(3),j.Q6J("disabled",""===U.valueAsString))},directives:[N.sg],styles:[".numpad[_ngcontent-%COMP%]{width:234px;padding:3px;border-radius:12px}.numpad[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .numpad[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]{padding:1px}.numpad[_ngcontent-%COMP%]   .btn-game[_ngcontent-%COMP%]{height:34px;border-radius:8px;font-size:22px}.numpad[_ngcontent-%COMP%]   .btn-game.btn-done[_ngcontent-%COMP%]{background:rgba(0,0,0,.5)!important;height:26px}.numpad[_ngcontent-%COMP%]   .btn-game[_ngcontent-%COMP%]   i.backspace[_ngcontent-%COMP%]{background:url(icon-backspace.4af92da27c353bca.svg) no-repeat center center/contain;width:22px;height:17px}.numpad[_ngcontent-%COMP%]   .btn-game[_ngcontent-%COMP%]   i.confirm[_ngcontent-%COMP%]{background:url(icon-confirm.ec9f979b15ef75ed.svg) no-repeat center center/contain;width:18px;height:13px}"]}),ht})();const Ot=["inputField"],Yt=["inputFieldTrigger"],xt=["exchangeField"],at=["buttonMinus"],jt=["buttonPlus"],bt=["dropdown"],Z=function(ht){return{disabled:ht}},tt=["*"];let rt=(()=>{class ht{constructor(V,U,st){this.renderer=V,this.cd=U,this.localeId=st,this.isActiveChange=new j.vpe,this.placement="auto",this.step=1,this.min=0,this.formatPrecision=0,this.exchangeRatePrecision=0,this.thousandSeparator=",",this.decimalSeparator=".",this.value=0,this._isActive=!1,this.valueAsString="",this.exchangeValueAsString="",this.precision=0,this.onChange=()=>{},this.onTouched=()=>{},this.setSeparators()}get isActive(){return this._isActive}set isActive(V){this._isActive=V,void 0!==V&&(this._isActive!==this.dropdown.isOpen()&&(this._isActive?(this.dropdown.open(),this.renderer.setProperty(this.inputFieldText,"innerText",""),this.valueAsString=""):this.dropdown.close()),this.isActiveChange.emit(this._isActive),this.cd.markForCheck())}get keysAllowed(){return["0","1","2","3","4","5","6","7","8","9",W.Minus,this.decimalSeparator,W.ArrowDown,W.ArrowUp,W.Backspace,W.Enter]}ngOnChanges(V){var U;(null===(U=V.max)||void 0===U?void 0:U.firstChange)&&(this.maxBet=this.max),V.balance&&this.setMax(V.balance.currentValue)}ngOnInit(){this.precision=this.formatPrecision>=0?this.formatPrecision:this.step&&this.step.toString().split(/[,]|[.]/).length>1?this.step.toString().split(/[,]|[.]/)[1].length:0,this.setMax(this.balance),this.styleInputField(),this.createInputFieldText(),this.createCaretElement(),this.subscribeToInputFieldTrigger(),this.subscribeToDropdown(),this.formatToPrecision(this.precision)}ngAfterViewInit(){this.exchangeRate&&(this.exchangeValueAsString=this.transformNumberToDecimal(this.value*this.exchangeRate,this.exchangeRatePrecision,this.exchangeRatePrecision),this.formatValueAsString()),this.subscribeToBtnMinus(),this.subscribeToBtnPlus(),this.checkIsBtnMinusDisabled(),this.checkIsBtnPlusDisabled()}setMax(V){this.max=Math.min(null!=V?V:this.maxBet,this.maxBet),this.checkIsBtnMinusDisabled(),this.checkIsBtnPlusDisabled(),this.formatValueAsString()}setSeparators(){const U=this.transformNumberToDecimal(1234.5,1,1);this.decimalSeparator=U.split("5")[0].split("").pop()||"",this.thousandSeparator=U.split("1")[1].split("").shift()||""}transformNumberToDecimal(V,U,st){return(0,N.uf)(V,this.localeId,`1.${U}-${st}`)}onDropdownOpenChange(V){V?(this.isActive=!0,this.subscribeToKeyEvent(),this.addCaretElement()):(this.isActive=!1,this.removeCaretElement(),this.formatToPrecision(this.precision),this.unsubscribeFromKeyEvent())}get isDecimalSeparatorCanAdd(){return 0!==this.precision&&!this.valueAsString.includes(this.decimalSeparator)}get isFractionalCanAdd(){const V=this.valueAsString.split(this.decimalSeparator);return!(V.length>1)||V[1].length<this.precision}get isMinusCanAdd(){return this.min<0&&""===this.valueAsString&&!this.valueAsString.includes(W.Minus)}handleInputKeyCode(V){if(V!==W.Enter)return V===W.Backspace?(this.valueAsString=this.valueAsString.substring(0,this.valueAsString.length-1),void this.writeValue(this.parseValue(this.valueAsString))):void(V!==W.ArrowDown?V!==W.ArrowUp?V===this.decimalSeparator&&!this.isDecimalSeparatorCanAdd||V===W.Minus&&!this.isMinusCanAdd||this.isFractionalCanAdd&&(this.valueAsString=this.valueAsString+V,this.writeValue(this.parseValue(this.valueAsString))):this.spin(1):this.spin(-1));this.isActive=!1}onKeyEvent(V){V.preventDefault(),this.keysAllowed.includes(V.key)&&this.handleInputKeyCode(V.key)}onInputFieldClick(){this.dropdown.isOpen()||(this.isActive=!0)}spin(V){const U=this.step*V,st=this.value||0;this.valueAsString=this.precision?(st+U).toFixed(this.precision):""+(st+U),this.formatToPrecision(this.precision)}repeat(V,U,st){let H=U||500;this.clearTimerSpin();const Kt=(0,o.H)(H);this.timerSpin$=Kt.subscribe(()=>{this.repeat(V,40,st)}),this.spin(st)}clearTimerSpin(){this.timerSpin$&&this.timerSpin$.unsubscribe()}onBtnPlusMousedown(V){this.disabled||this.repeat(V,null,1)}onBtnMinusMousedown(V){this.disabled||this.repeat(V,null,-1)}stopSpinning(){this.disabled||this.clearTimerSpin()}styleInputField(){this.inputField&&(this.renderer.setStyle(this.inputField.nativeElement,"position","relative"),this.renderer.setStyle(this.inputField.nativeElement,"overflow","hidden"),this.renderer.setStyle(this.inputField.nativeElement,"cursor","text"),this.renderer.setStyle(this.inputField.nativeElement,"text-align","center"),this.renderer.setStyle(this.inputField.nativeElement,"direction","rtl"))}createInputFieldText(){this.inputField&&(this.inputFieldText=this.renderer.createElement("div"),this.renderer.setStyle(this.inputFieldText,"display","inline-block"),this.renderer.setStyle(this.inputFieldText,"height","100%"),this.renderer.setStyle(this.inputFieldText,"direction","ltr"),this.renderer.appendChild(this.inputField.nativeElement,this.inputFieldText))}createCaretElement(){this.inputField&&(this.caret=this.renderer.createElement("div"),this.renderer.addClass(this.caret,"caret"))}addCaretElement(){this.caret&&this.renderer.insertBefore(this.inputField.nativeElement,this.caret,this.inputFieldText)}removeCaretElement(){this.caret&&this.renderer.removeChild(this.inputField.nativeElement,this.caret)}subscribeToDropdown(){this.dropdown&&(this.dropdownOpenChange$=this.dropdown.openChange.subscribe(V=>this.onDropdownOpenChange(V)))}unsubscribeFromDropdown(){this.dropdownOpenChange$&&this.dropdownOpenChange$.unsubscribe()}subscribeToKeyEvent(){this.keyEvent$=(0,yt.R)(window,"keydown").subscribe(V=>this.onKeyEvent(V))}unsubscribeFromKeyEvent(){this.keyEvent$&&(this.keyEvent$.unsubscribe(),this.keyEvent$=null)}subscribeToInputFieldTrigger(){this.inputFieldTrigger?this.inputFieldTriggerClick$=(0,yt.R)(this.inputFieldTrigger.nativeElement,"click").subscribe(()=>this.onInputFieldClick()):this.inputField&&(this.inputFieldTriggerClick$=(0,yt.R)(this.inputField.nativeElement,"click").subscribe(()=>this.onInputFieldClick()))}unsubscribeFromInputFieldTrigger(){this.inputFieldTriggerClick$&&this.inputFieldTriggerClick$.unsubscribe()}subscribeToBtnMinus(){this.buttonMinus&&(this.btnMinusMouseDown$=(0,yt.R)(this.buttonMinus.nativeElement,"mousedown").subscribe(V=>this.onBtnMinusMousedown(V)),this.btnMinusMouseLeave$=(0,yt.R)(this.buttonMinus.nativeElement,"mouseleave").subscribe(()=>this.stopSpinning()),this.btnMinusMouseUp$=(0,yt.R)(this.buttonMinus.nativeElement,"mouseup").subscribe(()=>this.stopSpinning()))}unsubscribeFromBtnMinus(){this.btnMinusMouseDown$&&this.btnMinusMouseDown$.unsubscribe(),this.btnMinusMouseLeave$&&this.btnMinusMouseLeave$.unsubscribe(),this.btnMinusMouseUp$&&this.btnMinusMouseUp$.unsubscribe()}checkIsBtnMinusDisabled(){this.buttonMinus&&(this.value===this.min?(this.renderer.setAttribute(this.buttonMinus.nativeElement,"disabled","true"),this.clearTimerSpin()):this.renderer.removeAttribute(this.buttonMinus.nativeElement,"disabled"))}subscribeToBtnPlus(){this.buttonPlus&&(this.btnPlusMouseDown$=(0,yt.R)(this.buttonPlus.nativeElement,"mousedown").subscribe(V=>this.onBtnPlusMousedown(V)),this.btnPlusMouseLeave$=(0,yt.R)(this.buttonPlus.nativeElement,"mouseleave").subscribe(()=>this.stopSpinning()),this.btnPlusMouseUp$=(0,yt.R)(this.buttonPlus.nativeElement,"mouseup").subscribe(()=>this.stopSpinning()))}unsubscribeFromBtnPlus(){this.btnPlusMouseDown$&&this.btnPlusMouseDown$.unsubscribe(),this.btnPlusMouseLeave$&&this.btnPlusMouseLeave$.unsubscribe(),this.btnPlusMouseUp$&&this.btnPlusMouseUp$.unsubscribe()}checkIsBtnPlusDisabled(){this.buttonPlus&&(this.value===this.max?(this.renderer.setAttribute(this.buttonPlus.nativeElement,"disabled","true"),this.clearTimerSpin()):this.renderer.removeAttribute(this.buttonPlus.nativeElement,"disabled"))}formatToPrecision(V){const U=this.parseValue(this.valueAsString);this.valueAsString=U.toFixed(V),this.writeValue(parseFloat(this.valueAsString))}formatValueAsString(){if(null!=this.valueAsString){let V=String(this.valueAsString).replace(".",this.decimalSeparator).replace(new RegExp(this.thousandSeparator,"g"),""),U=V.split(this.decimalSeparator);U[0]=U[0].replace(/\B(?=(\d{3})+(?!\d))/g,this.thousandSeparator),V=U.join(this.decimalSeparator),this.valueAsString=V}else this.valueAsString="";this.inputFieldText&&this.renderer.setProperty(this.inputFieldText,"innerText",this.valueAsString),this.exchangeField&&this.renderer.setProperty(this.exchangeField.nativeElement,"innerText",this.exchangeValueAsString)}parseValue(V){let U;return U=""===(V=V.split(this.thousandSeparator).join("")).trim()?0:this.precision?parseFloat(V.replace(",",".")):parseInt(V),isNaN(U)?U=void 0!==this.min?this.min:0:(void 0!==this.max&&U>this.max&&(U=this.max),void 0!==this.min&&U<this.min&&(U=this.min)),U}toFixed(V,U){let st=Math.pow(10,U||0);return String(Math.round(V*st)/st)}registerOnChange(V){this.onChange=V}registerOnTouched(V){this.onTouched=V}writeValue(V){V!==this.value&&null!=V&&(this.value=this.parseValue(`${V}`),this.onChange(this.value),this.isActive||(this.valueAsString=this.precision?this.value.toFixed(this.precision):""+this.value),this.exchangeRate&&(this.exchangeValueAsString=this.transformNumberToDecimal(this.value*this.exchangeRate,this.exchangeRatePrecision,this.exchangeRatePrecision)),this.checkIsBtnMinusDisabled(),this.checkIsBtnPlusDisabled()),this.formatValueAsString()}setDisabledState(V){this.disabled=V}ngOnDestroy(){this.clearTimerSpin(),this.unsubscribeFromKeyEvent(),this.unsubscribeFromInputFieldTrigger(),this.unsubscribeFromDropdown(),this.unsubscribeFromBtnMinus(),this.unsubscribeFromBtnPlus()}}return ht.\u0275fac=function(V){return new(V||ht)(j.Y36(j.Qsj),j.Y36(j.sBO),j.Y36(j.soG))},ht.\u0275cmp=j.Xpm({type:ht,selectors:[["app-spinner"]],contentQueries:function(V,U,st){if(1&V&&(j.Suo(st,Ot,7),j.Suo(st,Yt,7),j.Suo(st,xt,5),j.Suo(st,at,5),j.Suo(st,jt,5)),2&V){let H;j.iGM(H=j.CRH())&&(U.inputField=H.first),j.iGM(H=j.CRH())&&(U.inputFieldTrigger=H.first),j.iGM(H=j.CRH())&&(U.exchangeField=H.first),j.iGM(H=j.CRH())&&(U.buttonMinus=H.first),j.iGM(H=j.CRH())&&(U.buttonPlus=H.first)}},viewQuery:function(V,U){if(1&V&&j.Gf(bt,7),2&V){let st;j.iGM(st=j.CRH())&&(U.dropdown=st.first)}},inputs:{isActive:"isActive",placement:"placement",step:"step",min:"min",max:"max",balance:"balance",disabled:"disabled",formatPrecision:"formatPrecision",exchangeRate:"exchangeRate",exchangeRatePrecision:"exchangeRatePrecision",numpadColor:"numpadColor"},outputs:{isActiveChange:"isActiveChange"},features:[j._Bn([{provide:lt.JU,useExisting:(0,j.Gpc)(()=>ht),multi:!0}]),j.TTD],ngContentSelectors:tt,decls:6,vars:9,consts:[["ngbDropdown","",1,"spinner","h-100",3,"placement","ngClass"],["dropdown","ngbDropdown"],["ngbDropdownAnchor","",1,"h-100"],["ngbDropdownMenu",""],[3,"valueAsString","decimalSeparator","isFractionalCanAdd","isDecimalOperatorCanAdd","precision","numpadKey"]],template:function(V,U){1&V&&(j.F$t(),j.TgZ(0,"div",0,1)(2,"div",2),j.Hsn(3),j.qZA(),j.TgZ(4,"div",3)(5,"app-numpad",4),j.NdJ("numpadKey",function(H){return U.handleInputKeyCode(H)}),j.qZA()()()),2&V&&(j.Q6J("placement",U.placement)("ngClass",j.VKq(7,Z,U.disabled)),j.xp6(5),j.Q6J("valueAsString",U.valueAsString)("decimalSeparator",U.decimalSeparator)("isFractionalCanAdd",U.isFractionalCanAdd)("isDecimalOperatorCanAdd",U.isDecimalSeparatorCanAdd)("precision",U.precision))},directives:[K.jt,N.mk,K.YE,K.Vi,ut],styles:[".spinner[_ngcontent-%COMP%]{color:#fff}.spinner.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none;cursor:default!important}.spinner[_ngcontent-%COMP%]   .caret[_ngcontent-%COMP%]{position:absolute;display:inline-block;height:100%;width:1px;background:#ffffff;animation:caretAnimation .5s linear infinite alternate}.spinner[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.spinner[_ngcontent-%COMP%]   .dropdown-menu.show[_ngcontent-%COMP%]{min-width:0;background-color:transparent;background-color:initial;color:inherit;border:unset;padding:0;margin:0}@keyframes caretAnimation{0%{background:#ffffff}to{background:transparent}}"]}),ht})()},8721:(Ut,Wt,D)=>{"use strict";D.d(Wt,{F:()=>o});var N=D(9808),j=D(9039),lt=D(7587);let o=(()=>{class yt{}return yt.\u0275fac=function(K){return new(K||yt)},yt.\u0275mod=lt.oAB({type:yt}),yt.\u0275inj=lt.cJS({imports:[[N.ez,j.IJ]]}),yt})()},6064:(Ut,Wt,D)=>{"use strict";D.d(Wt,{i:()=>lt});var N=D(7587),j=D(2821);let lt=(()=>{class o{constructor(W){this.coreService=W,this.disabledBtn=!1}get getDisabledBtn(){return!(!this.coreService.freeBets.activeFreeBet||0!==this.coreService.freeBets.activeFreeBet.leftBets)||this.disabledBtn}set setDisabledBtn(W){this.timer&&clearTimeout(this.timer),this.disabledBtn=W}get getDelayBtnBet(){const W=this.coreService.config.minRoundDurationInMillis;return"number"!=typeof W?0:W}initDisable(){this.disabledBtn=!0,this.timer=setTimeout(()=>{this.disabledBtn=!1},this.getDelayBtnBet)}}return o.\u0275fac=function(W){return new(W||o)(N.LFG(j.p))},o.\u0275prov=N.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},2983:(Ut,Wt,D)=>{"use strict";D.d(Wt,{S:()=>o});var N=D(9082),j=D(7587),lt=D(710);let o=(()=>{class yt{constructor(K){this.ifcApiService=K}startAutoplay(K){this.ifcApiService.emitEvent(N.g.Autoplay,{id:1,value:K})}makeBet(K){this.ifcApiService.emitEvent(N.g.MakeBet,{id:1,amount:K})}startRound(K){this.ifcApiService.emitEvent(N.g.MakeBetComplete,{id:1,code:K.code,errorMessage:K.errorMessage,additionalOperatorData:K.additionalOperatorData}),200===K.code&&this.ifcApiService.emitEvent(N.g.StartRound,{bets:[{id:1,amount:K.betAmount}]})}endRound(K){K.win&&this.endRoundWin(K),this.ifcApiService.emitEvent(N.g.EndRound)}endRoundWin(K){this.ifcApiService.emitEvent(N.g.Cashout,{id:1}),this.ifcApiService.emitEvent(N.g.WinInfo,{id:1,amount:K.winAmount}),this.ifcApiService.emitEvent(N.g.CashoutComplete,{id:1,code:K.code,errorMessage:K.errorMessage,additionalOperatorData:K.additionalOperatorData})}}return yt.\u0275fac=function(K){return new(K||yt)(j.LFG(lt.h))},yt.\u0275prov=j.Yz7({token:yt,factory:yt.\u0275fac,providedIn:"root"}),yt})()},9798:(Ut,Wt,D)=>{"use strict";D.d(Wt,{a:()=>o});var N=D(1135),j=D(7587),lt=D(2821);let o=(()=>{class yt{constructor(K){this.coreService=K,this._maxUserWinSubject=new N.X(!1)}set profit(K){this._maxUserWinSubject.next(K>this.coreService.config.maxUserWin)}get isMaxUserWin$(){return this._maxUserWinSubject.asObservable()}}return yt.\u0275fac=function(K){return new(K||yt)(j.LFG(lt.p))},yt.\u0275prov=j.Yz7({token:yt,factory:yt.\u0275fac,providedIn:"root"}),yt})()},5834:(Ut,Wt,D)=>{"use strict";var N=D(5203),j=D(5685),lt=j(N("String.prototype.indexOf"));Ut.exports=function(yt,W){var K=N(yt,!!W);return"function"==typeof K&&lt(yt,".prototype.")>-1?j(K):K}},5685:(Ut,Wt,D)=>{"use strict";var N=D(4444),j=D(5203),lt=D(9511),o=D(2844),yt=j("%Function.prototype.apply%"),W=j("%Function.prototype.call%"),K=j("%Reflect.apply%",!0)||N.call(W,yt),dt=D(3907),ft=j("%Math.max%");Ut.exports=function(Yt){if("function"!=typeof Yt)throw new o("a function is required");var xt=K(N,W,arguments);return lt(xt,1+ft(0,Yt.length-(arguments.length-1)),!0)};var ut=function(){return K(N,yt,arguments)};dt?dt(Ut.exports,"apply",{value:ut}):Ut.exports.apply=ut},7484:(Ut,Wt,D)=>{"use strict";var N=D(3907),j=D(5917),lt=D(2844),o=D(7378);Ut.exports=function(W,K,dt){if(!W||"object"!=typeof W&&"function"!=typeof W)throw new lt("`obj` must be an object or a function`");if("string"!=typeof K&&"symbol"!=typeof K)throw new lt("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new lt("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new lt("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new lt("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new lt("`loose`, if provided, must be a boolean");var ft=arguments.length>3?arguments[3]:null,ut=arguments.length>4?arguments[4]:null,Ot=arguments.length>5?arguments[5]:null,Yt=arguments.length>6&&arguments[6],xt=!!o&&o(W,K);if(N)N(W,K,{configurable:null===Ot&&xt?xt.configurable:!Ot,enumerable:null===ft&&xt?xt.enumerable:!ft,value:dt,writable:null===ut&&xt?xt.writable:!ut});else{if(!Yt&&(ft||ut||Ot))throw new j("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");W[K]=dt}}},5469:Ut=>{"use strict";function Wt(I,X,E){E=E||2;var it,ct,St,gt,Dt,It,Xt,et=X&&X.length,k=et?X[0]*E:I.length,G=D(I,0,k,E,!0),Y=[];if(!G||G.next===G.prev)return Y;if(et&&(G=function K(I,X,E,et){var G,Y,St,k=[];for(G=0,Y=X.length;G<Y;G++)(St=D(I,X[G]*et,G<Y-1?X[G+1]*et:I.length,et,!1))===St.next&&(St.steiner=!0),k.push(jt(St));for(k.sort(dt),G=0;G<k.length;G++)E=ft(k[G],E);return E}(I,X,G,E)),I.length>80*E){it=St=I[0],ct=gt=I[1];for(var Jt=E;Jt<k;Jt+=E)(Dt=I[Jt])<it&&(it=Dt),(It=I[Jt+1])<ct&&(ct=It),Dt>St&&(St=Dt),It>gt&&(gt=It);Xt=0!==(Xt=Math.max(St-it,gt-ct))?32767/Xt:0}return j(G,Y,E,it,ct,Xt,0),Y}function D(I,X,E,et,k){var G,Y;if(k===Mt(I,X,E,et)>0)for(G=X;G<E;G+=et)Y=Vt(G,I[G],I[G+1],Y);else for(G=E-et;G>=X;G-=et)Y=Vt(G,I[G],I[G+1],Y);return Y&&rt(Y,Y.next)&&(te(Y),Y=Y.next),Y}function N(I,X){if(!I)return I;X||(X=I);var et,E=I;do{if(et=!1,E.steiner||!rt(E,E.next)&&0!==tt(E.prev,E,E.next))E=E.next;else{if(te(E),(E=X=E.prev)===E.next)break;et=!0}}while(et||E!==X);return X}function j(I,X,E,et,k,G,Y){if(I){!Y&&G&&function Yt(I,X,E,et){var k=I;do{0===k.z&&(k.z=at(k.x,k.y,X,E,et)),k.prevZ=k.prev,k.nextZ=k.next,k=k.next}while(k!==I);k.prevZ.nextZ=null,k.prevZ=null,function xt(I){var X,E,et,k,G,Y,it,ct,St=1;do{for(E=I,I=null,G=null,Y=0;E;){for(Y++,et=E,it=0,X=0;X<St&&(it++,et=et.nextZ);X++);for(ct=St;it>0||ct>0&&et;)0!==it&&(0===ct||!et||E.z<=et.z)?(k=E,E=E.nextZ,it--):(k=et,et=et.nextZ,ct--),G?G.nextZ=k:I=k,k.prevZ=G,G=k;E=et}G.nextZ=null,St*=2}while(Y>1)}(k)}(I,et,k,G);for(var ct,St,it=I;I.prev!==I.next;)if(ct=I.prev,St=I.next,G?o(I,et,k,G):lt(I))X.push(ct.i/E|0),X.push(I.i/E|0),X.push(St.i/E|0),te(I),I=St.next,it=St.next;else if((I=St)===it){Y?1===Y?j(I=yt(N(I),X,E),X,E,et,k,G,2):2===Y&&W(I,X,E,et,k,G):j(N(I),X,E,et,k,G,1);break}}}function lt(I){var X=I.prev,E=I,et=I.next;if(tt(X,E,et)>=0)return!1;for(var k=X.x,G=E.x,Y=et.x,it=X.y,ct=E.y,St=et.y,gt=k<G?k<Y?k:Y:G<Y?G:Y,Dt=it<ct?it<St?it:St:ct<St?ct:St,It=k>G?k>Y?k:Y:G>Y?G:Y,Xt=it>ct?it>St?it:St:ct>St?ct:St,Jt=et.next;Jt!==X;){if(Jt.x>=gt&&Jt.x<=It&&Jt.y>=Dt&&Jt.y<=Xt&&bt(k,it,G,ct,Y,St,Jt.x,Jt.y)&&tt(Jt.prev,Jt,Jt.next)>=0)return!1;Jt=Jt.next}return!0}function o(I,X,E,et){var k=I.prev,G=I,Y=I.next;if(tt(k,G,Y)>=0)return!1;for(var it=k.x,ct=G.x,St=Y.x,gt=k.y,Dt=G.y,It=Y.y,Xt=it<ct?it<St?it:St:ct<St?ct:St,Jt=gt<Dt?gt<It?gt:It:Dt<It?Dt:It,Qt=it>ct?it>St?it:St:ct>St?ct:St,ee=gt>Dt?gt>It?gt:It:Dt>It?Dt:It,ce=at(Xt,Jt,X,E,et),fe=at(Qt,ee,X,E,et),ne=I.prevZ,re=I.nextZ;ne&&ne.z>=ce&&re&&re.z<=fe;){if(ne.x>=Xt&&ne.x<=Qt&&ne.y>=Jt&&ne.y<=ee&&ne!==k&&ne!==Y&&bt(it,gt,ct,Dt,St,It,ne.x,ne.y)&&tt(ne.prev,ne,ne.next)>=0||(ne=ne.prevZ,re.x>=Xt&&re.x<=Qt&&re.y>=Jt&&re.y<=ee&&re!==k&&re!==Y&&bt(it,gt,ct,Dt,St,It,re.x,re.y)&&tt(re.prev,re,re.next)>=0))return!1;re=re.nextZ}for(;ne&&ne.z>=ce;){if(ne.x>=Xt&&ne.x<=Qt&&ne.y>=Jt&&ne.y<=ee&&ne!==k&&ne!==Y&&bt(it,gt,ct,Dt,St,It,ne.x,ne.y)&&tt(ne.prev,ne,ne.next)>=0)return!1;ne=ne.prevZ}for(;re&&re.z<=fe;){if(re.x>=Xt&&re.x<=Qt&&re.y>=Jt&&re.y<=ee&&re!==k&&re!==Y&&bt(it,gt,ct,Dt,St,It,re.x,re.y)&&tt(re.prev,re,re.next)>=0)return!1;re=re.nextZ}return!0}function yt(I,X,E){var et=I;do{var k=et.prev,G=et.next.next;!rt(k,G)&&ht(k,et,et.next,G)&&st(k,G)&&st(G,k)&&(X.push(k.i/E|0),X.push(et.i/E|0),X.push(G.i/E|0),te(et),te(et.next),et=I=G),et=et.next}while(et!==I);return N(et)}function W(I,X,E,et,k,G){var Y=I;do{for(var it=Y.next.next;it!==Y.prev;){if(Y.i!==it.i&&Z(Y,it)){var ct=Kt(Y,it);return Y=N(Y,Y.next),ct=N(ct,ct.next),j(Y,X,E,et,k,G,0),void j(ct,X,E,et,k,G,0)}it=it.next}Y=Y.next}while(Y!==I)}function dt(I,X){return I.x-X.x}function ft(I,X){var E=function ut(I,X){var Y,E=X,et=I.x,k=I.y,G=-1/0;do{if(k<=E.y&&k>=E.next.y&&E.next.y!==E.y){var it=E.x+(k-E.y)*(E.next.x-E.x)/(E.next.y-E.y);if(it<=et&&it>G&&(G=it,Y=E.x<E.next.x?E:E.next,it===et))return Y}E=E.next}while(E!==X);if(!Y)return null;var It,ct=Y,St=Y.x,gt=Y.y,Dt=1/0;E=Y;do{et>=E.x&&E.x>=St&&et!==E.x&&bt(k<gt?et:G,k,St,gt,k<gt?G:et,k,E.x,E.y)&&(It=Math.abs(k-E.y)/(et-E.x),st(E,I)&&(It<Dt||It===Dt&&(E.x>Y.x||E.x===Y.x&&Ot(Y,E)))&&(Y=E,Dt=It)),E=E.next}while(E!==ct);return Y}(I,X);if(!E)return X;var et=Kt(E,I);return N(et,et.next),N(E,E.next)}function Ot(I,X){return tt(I.prev,I,X.prev)<0&&tt(X.next,I,I.next)<0}function at(I,X,E,et,k){return(I=1431655765&((I=858993459&((I=252645135&((I=16711935&((I=(I-E)*k|0)|I<<8))|I<<4))|I<<2))|I<<1))|(X=1431655765&((X=858993459&((X=252645135&((X=16711935&((X=(X-et)*k|0)|X<<8))|X<<4))|X<<2))|X<<1))<<1}function jt(I){var X=I,E=I;do{(X.x<E.x||X.x===E.x&&X.y<E.y)&&(E=X),X=X.next}while(X!==I);return E}function bt(I,X,E,et,k,G,Y,it){return(k-Y)*(X-it)>=(I-Y)*(G-it)&&(I-Y)*(et-it)>=(E-Y)*(X-it)&&(E-Y)*(G-it)>=(k-Y)*(et-it)}function Z(I,X){return I.next.i!==X.i&&I.prev.i!==X.i&&!function U(I,X){var E=I;do{if(E.i!==I.i&&E.next.i!==I.i&&E.i!==X.i&&E.next.i!==X.i&&ht(E,E.next,I,X))return!0;E=E.next}while(E!==I);return!1}(I,X)&&(st(I,X)&&st(X,I)&&function H(I,X){var E=I,et=!1,k=(I.x+X.x)/2,G=(I.y+X.y)/2;do{E.y>G!=E.next.y>G&&E.next.y!==E.y&&k<(E.next.x-E.x)*(G-E.y)/(E.next.y-E.y)+E.x&&(et=!et),E=E.next}while(E!==I);return et}(I,X)&&(tt(I.prev,I,X.prev)||tt(I,X.prev,X))||rt(I,X)&&tt(I.prev,I,I.next)>0&&tt(X.prev,X,X.next)>0)}function tt(I,X,E){return(X.y-I.y)*(E.x-X.x)-(X.x-I.x)*(E.y-X.y)}function rt(I,X){return I.x===X.x&&I.y===X.y}function ht(I,X,E,et){var k=V(tt(I,X,E)),G=V(tt(I,X,et)),Y=V(tt(E,et,I)),it=V(tt(E,et,X));return!!(k!==G&&Y!==it||0===k&&wt(I,E,X)||0===G&&wt(I,et,X)||0===Y&&wt(E,I,et)||0===it&&wt(E,X,et))}function wt(I,X,E){return X.x<=Math.max(I.x,E.x)&&X.x>=Math.min(I.x,E.x)&&X.y<=Math.max(I.y,E.y)&&X.y>=Math.min(I.y,E.y)}function V(I){return I>0?1:I<0?-1:0}function st(I,X){return tt(I.prev,I,I.next)<0?tt(I,X,I.next)>=0&&tt(I,I.prev,X)>=0:tt(I,X,I.prev)<0||tt(I,I.next,X)<0}function Kt(I,X){var E=new Zt(I.i,I.x,I.y),et=new Zt(X.i,X.x,X.y),k=I.next,G=X.prev;return I.next=X,X.prev=I,E.next=k,k.prev=E,et.next=E,E.prev=et,G.next=et,et.prev=G,et}function Vt(I,X,E,et){var k=new Zt(I,X,E);return et?(k.next=et.next,k.prev=et,et.next.prev=k,et.next=k):(k.prev=k,k.next=k),k}function te(I){I.next.prev=I.prev,I.prev.next=I.next,I.prevZ&&(I.prevZ.nextZ=I.nextZ),I.nextZ&&(I.nextZ.prevZ=I.prevZ)}function Zt(I,X,E){this.i=I,this.x=X,this.y=E,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Mt(I,X,E,et){for(var k=0,G=X,Y=E-et;G<E;G+=et)k+=(I[Y]-I[G])*(I[G+1]+I[Y+1]),Y=G;return k}Ut.exports=Wt,Ut.exports.default=Wt,Wt.deviation=function(I,X,E,et){var k=X&&X.length,Y=Math.abs(Mt(I,0,k?X[0]*E:I.length,E));if(k)for(var it=0,ct=X.length;it<ct;it++)Y-=Math.abs(Mt(I,X[it]*E,it<ct-1?X[it+1]*E:I.length,E));var Dt=0;for(it=0;it<et.length;it+=3){var It=et[it]*E,Xt=et[it+1]*E,Jt=et[it+2]*E;Dt+=Math.abs((I[It]-I[Jt])*(I[Xt+1]-I[It+1])-(I[It]-I[Xt])*(I[Jt+1]-I[It+1]))}return 0===Y&&0===Dt?0:Math.abs((Dt-Y)/Y)},Wt.flatten=function(I){for(var X=I[0][0].length,E={vertices:[],holes:[],dimensions:X},et=0,k=0;k<I.length;k++){for(var G=0;G<I[k].length;G++)for(var Y=0;Y<X;Y++)E.vertices.push(I[k][G][Y]);k>0&&E.holes.push(et+=I[k-1].length)}return E}},3907:(Ut,Wt,D)=>{"use strict";var j=D(5203)("%Object.defineProperty%",!0)||!1;if(j)try{j({},"a",{value:1})}catch(lt){j=!1}Ut.exports=j},3644:Ut=>{"use strict";Ut.exports=EvalError},1847:Ut=>{"use strict";Ut.exports=Error},1298:Ut=>{"use strict";Ut.exports=RangeError},2681:Ut=>{"use strict";Ut.exports=ReferenceError},5917:Ut=>{"use strict";Ut.exports=SyntaxError},2844:Ut=>{"use strict";Ut.exports=TypeError},7289:Ut=>{"use strict";Ut.exports=URIError},2005:Ut=>{"use strict";var Wt=Object.prototype.hasOwnProperty,D="~";function N(){}function j(W,K,dt){this.fn=W,this.context=K,this.once=dt||!1}function lt(W,K,dt,ft,ut){if("function"!=typeof dt)throw new TypeError("The listener must be a function");var Ot=new j(dt,ft||W,ut),Yt=D?D+K:K;return W._events[Yt]?W._events[Yt].fn?W._events[Yt]=[W._events[Yt],Ot]:W._events[Yt].push(Ot):(W._events[Yt]=Ot,W._eventsCount++),W}function o(W,K){0==--W._eventsCount?W._events=new N:delete W._events[K]}function yt(){this._events=new N,this._eventsCount=0}Object.create&&(N.prototype=Object.create(null),(new N).__proto__||(D=!1)),yt.prototype.eventNames=function(){var dt,ft,K=[];if(0===this._eventsCount)return K;for(ft in dt=this._events)Wt.call(dt,ft)&&K.push(D?ft.slice(1):ft);return Object.getOwnPropertySymbols?K.concat(Object.getOwnPropertySymbols(dt)):K},yt.prototype.listeners=function(K){var ft=this._events[D?D+K:K];if(!ft)return[];if(ft.fn)return[ft.fn];for(var ut=0,Ot=ft.length,Yt=new Array(Ot);ut<Ot;ut++)Yt[ut]=ft[ut].fn;return Yt},yt.prototype.listenerCount=function(K){var ft=this._events[D?D+K:K];return ft?ft.fn?1:ft.length:0},yt.prototype.emit=function(K,dt,ft,ut,Ot,Yt){var xt=D?D+K:K;if(!this._events[xt])return!1;var bt,Z,at=this._events[xt],jt=arguments.length;if(at.fn){switch(at.once&&this.removeListener(K,at.fn,void 0,!0),jt){case 1:return at.fn.call(at.context),!0;case 2:return at.fn.call(at.context,dt),!0;case 3:return at.fn.call(at.context,dt,ft),!0;case 4:return at.fn.call(at.context,dt,ft,ut),!0;case 5:return at.fn.call(at.context,dt,ft,ut,Ot),!0;case 6:return at.fn.call(at.context,dt,ft,ut,Ot,Yt),!0}for(Z=1,bt=new Array(jt-1);Z<jt;Z++)bt[Z-1]=arguments[Z];at.fn.apply(at.context,bt)}else{var rt,tt=at.length;for(Z=0;Z<tt;Z++)switch(at[Z].once&&this.removeListener(K,at[Z].fn,void 0,!0),jt){case 1:at[Z].fn.call(at[Z].context);break;case 2:at[Z].fn.call(at[Z].context,dt);break;case 3:at[Z].fn.call(at[Z].context,dt,ft);break;case 4:at[Z].fn.call(at[Z].context,dt,ft,ut);break;default:if(!bt)for(rt=1,bt=new Array(jt-1);rt<jt;rt++)bt[rt-1]=arguments[rt];at[Z].fn.apply(at[Z].context,bt)}}return!0},yt.prototype.on=function(K,dt,ft){return lt(this,K,dt,ft,!1)},yt.prototype.once=function(K,dt,ft){return lt(this,K,dt,ft,!0)},yt.prototype.removeListener=function(K,dt,ft,ut){var Ot=D?D+K:K;if(!this._events[Ot])return this;if(!dt)return o(this,Ot),this;var Yt=this._events[Ot];if(Yt.fn)Yt.fn===dt&&(!ut||Yt.once)&&(!ft||Yt.context===ft)&&o(this,Ot);else{for(var xt=0,at=[],jt=Yt.length;xt<jt;xt++)(Yt[xt].fn!==dt||ut&&!Yt[xt].once||ft&&Yt[xt].context!==ft)&&at.push(Yt[xt]);at.length?this._events[Ot]=1===at.length?at[0]:at:o(this,Ot)}return this},yt.prototype.removeAllListeners=function(K){var dt;return K?this._events[dt=D?D+K:K]&&o(this,dt):(this._events=new N,this._eventsCount=0),this},yt.prototype.off=yt.prototype.removeListener,yt.prototype.addListener=yt.prototype.on,yt.prefixed=D,yt.EventEmitter=yt,Ut.exports=yt},3457:Ut=>{"use strict";var Wt="Function.prototype.bind called on incompatible ",D=Object.prototype.toString,N=Math.max,j="[object Function]",lt=function(K,dt){for(var ft=[],ut=0;ut<K.length;ut+=1)ft[ut]=K[ut];for(var Ot=0;Ot<dt.length;Ot+=1)ft[Ot+K.length]=dt[Ot];return ft},o=function(K,dt){for(var ft=[],ut=dt||0,Ot=0;ut<K.length;ut+=1,Ot+=1)ft[Ot]=K[ut];return ft},yt=function(W,K){for(var dt="",ft=0;ft<W.length;ft+=1)dt+=W[ft],ft+1<W.length&&(dt+=K);return dt};Ut.exports=function(K){var dt=this;if("function"!=typeof dt||D.apply(dt)!==j)throw new TypeError(Wt+dt);for(var ut,ft=o(arguments,1),Ot=function(){if(this instanceof ut){var bt=dt.apply(this,lt(ft,arguments));return Object(bt)===bt?bt:this}return dt.apply(K,lt(ft,arguments))},Yt=N(0,dt.length-ft.length),xt=[],at=0;at<Yt;at++)xt[at]="$"+at;if(ut=Function("binder","return function ("+yt(xt,",")+"){ return binder.apply(this,arguments); }")(Ot),dt.prototype){var jt=function(){};jt.prototype=dt.prototype,ut.prototype=new jt,jt.prototype=null}return ut}},4444:(Ut,Wt,D)=>{"use strict";var N=D(3457);Ut.exports=Function.prototype.bind||N},5203:(Ut,Wt,D)=>{"use strict";var N,j=D(1847),lt=D(3644),o=D(1298),yt=D(2681),W=D(5917),K=D(2844),dt=D(7289),ft=Function,ut=function(et){try{return ft('"use strict"; return ('+et+").constructor;")()}catch(k){}},Ot=Object.getOwnPropertyDescriptor;if(Ot)try{Ot({},"")}catch(et){Ot=null}var Yt=function(){throw new K},xt=Ot?function(){try{return Yt}catch(et){try{return Ot(arguments,"callee").get}catch(k){return Yt}}}():Yt,at=D(2969)(),jt=D(9757)(),bt=Object.getPrototypeOf||(jt?function(et){return et.__proto__}:null),Z={},tt="undefined"!=typeof Uint8Array&&bt?bt(Uint8Array):N,rt={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?N:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?N:ArrayBuffer,"%ArrayIteratorPrototype%":at&&bt?bt([][Symbol.iterator]()):N,"%AsyncFromSyncIteratorPrototype%":N,"%AsyncFunction%":Z,"%AsyncGenerator%":Z,"%AsyncGeneratorFunction%":Z,"%AsyncIteratorPrototype%":Z,"%Atomics%":"undefined"==typeof Atomics?N:Atomics,"%BigInt%":"undefined"==typeof BigInt?N:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?N:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?N:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?N:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":j,"%eval%":eval,"%EvalError%":lt,"%Float32Array%":"undefined"==typeof Float32Array?N:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?N:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?N:FinalizationRegistry,"%Function%":ft,"%GeneratorFunction%":Z,"%Int8Array%":"undefined"==typeof Int8Array?N:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?N:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?N:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":at&&bt?bt(bt([][Symbol.iterator]())):N,"%JSON%":"object"==typeof JSON?JSON:N,"%Map%":"undefined"==typeof Map?N:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&at&&bt?bt((new Map)[Symbol.iterator]()):N,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?N:Promise,"%Proxy%":"undefined"==typeof Proxy?N:Proxy,"%RangeError%":o,"%ReferenceError%":yt,"%Reflect%":"undefined"==typeof Reflect?N:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?N:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&at&&bt?bt((new Set)[Symbol.iterator]()):N,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?N:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":at&&bt?bt(""[Symbol.iterator]()):N,"%Symbol%":at?Symbol:N,"%SyntaxError%":W,"%ThrowTypeError%":xt,"%TypedArray%":tt,"%TypeError%":K,"%Uint8Array%":"undefined"==typeof Uint8Array?N:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?N:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?N:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?N:Uint32Array,"%URIError%":dt,"%WeakMap%":"undefined"==typeof WeakMap?N:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?N:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?N:WeakSet};if(bt)try{null.error}catch(et){var ht=bt(bt(et));rt["%Error.prototype%"]=ht}var wt=function et(k){var G;if("%AsyncFunction%"===k)G=ut("async function () {}");else if("%GeneratorFunction%"===k)G=ut("function* () {}");else if("%AsyncGeneratorFunction%"===k)G=ut("async function* () {}");else if("%AsyncGenerator%"===k){var Y=et("%AsyncGeneratorFunction%");Y&&(G=Y.prototype)}else if("%AsyncIteratorPrototype%"===k){var it=et("%AsyncGenerator%");it&&bt&&(G=bt(it.prototype))}return rt[k]=G,G},V={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},U=D(4444),st=D(7699),H=U.call(Function.call,Array.prototype.concat),Kt=U.call(Function.apply,Array.prototype.splice),Vt=U.call(Function.call,String.prototype.replace),te=U.call(Function.call,String.prototype.slice),Zt=U.call(Function.call,RegExp.prototype.exec),Mt=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,I=/\\(\\)?/g,X=function(k){var G=te(k,0,1),Y=te(k,-1);if("%"===G&&"%"!==Y)throw new W("invalid intrinsic syntax, expected closing `%`");if("%"===Y&&"%"!==G)throw new W("invalid intrinsic syntax, expected opening `%`");var it=[];return Vt(k,Mt,function(ct,St,gt,Dt){it[it.length]=gt?Vt(Dt,I,"$1"):St||ct}),it},E=function(k,G){var it,Y=k;if(st(V,Y)&&(Y="%"+(it=V[Y])[0]+"%"),st(rt,Y)){var ct=rt[Y];if(ct===Z&&(ct=wt(Y)),void 0===ct&&!G)throw new K("intrinsic "+k+" exists, but is not available. Please file an issue!");return{alias:it,name:Y,value:ct}}throw new W("intrinsic "+k+" does not exist!")};Ut.exports=function(k,G){if("string"!=typeof k||0===k.length)throw new K("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof G)throw new K('"allowMissing" argument must be a boolean');if(null===Zt(/^%?[^%]*%?$/,k))throw new W("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Y=X(k),it=Y.length>0?Y[0]:"",ct=E("%"+it+"%",G),St=ct.name,gt=ct.value,Dt=!1,It=ct.alias;It&&(it=It[0],Kt(Y,H([0,1],It)));for(var Xt=1,Jt=!0;Xt<Y.length;Xt+=1){var Qt=Y[Xt],ee=te(Qt,0,1),ce=te(Qt,-1);if(('"'===ee||"'"===ee||"`"===ee||'"'===ce||"'"===ce||"`"===ce)&&ee!==ce)throw new W("property names with quotes must have matching quotes");if(("constructor"===Qt||!Jt)&&(Dt=!0),st(rt,St="%"+(it+="."+Qt)+"%"))gt=rt[St];else if(null!=gt){if(!(Qt in gt)){if(!G)throw new K("base intrinsic for "+k+" exists, but the property is not available.");return}if(Ot&&Xt+1>=Y.length){var fe=Ot(gt,Qt);gt=(Jt=!!fe)&&"get"in fe&&!("originalValue"in fe.get)?fe.get:gt[Qt]}else Jt=st(gt,Qt),gt=gt[Qt];Jt&&!Dt&&(rt[St]=gt)}}return gt}},7378:(Ut,Wt,D)=>{"use strict";var j=D(5203)("%Object.getOwnPropertyDescriptor%",!0);if(j)try{j([],"length")}catch(lt){j=null}Ut.exports=j},9749:(Ut,Wt,D)=>{"use strict";function N(R){if(void 0===R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}function j(R,l){R.prototype=Object.create(l.prototype),R.prototype.constructor=R,R.__proto__=l}D.d(Wt,{p8:()=>Li});var yt,W,K,E,et,k,G,ct,re,On,Zn,P,O,B,Q,q,ot,R,l,h,c,f,g,y,T,pt,lt={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},o={duration:.5,overwrite:!1,delay:0},dt=1e8,ft=1e-8,ut=2*Math.PI,Ot=ut/4,Yt=0,xt=Math.sqrt,at=Math.cos,jt=Math.sin,bt=function(l){return"string"==typeof l},Z=function(l){return"function"==typeof l},tt=function(l){return"number"==typeof l},rt=function(l){return void 0===l},ht=function(l){return"object"==typeof l},wt=function(l){return!1!==l},V=function(){return"undefined"!=typeof window},U=function(l){return Z(l)||bt(l)},st="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},H=Array.isArray,Kt=/(?:-?\.?\d|\.)+/gi,Vt=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,te=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Zt=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Mt=/[+-]=-?[.\d]+/,I=/[^,'"\[\]\s]+/gi,X=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Y={},it={},St=function(l){return(it=nt(l,Y))&&Xe},gt=function(l,h){return console.warn("Invalid property",l,"set to",h,"Missing plugin? gsap.registerPlugin()")},Dt=function(l,h){return!h&&console.warn(l)},It=function(l,h){return l&&(Y[l]=h)&&it&&(it[l]=h)||Y},Xt=function(){return 0},Jt={suppressEvents:!0,isStart:!0,kill:!1},Qt={suppressEvents:!0,kill:!1},ee={suppressEvents:!0},ce={},fe=[],ne={},me={},yr={},fr=30,Ye=[],or="",dr=function(l){var c,f,h=l[0];if(ht(h)||Z(h)||(l=[l]),!(c=(h._gsap||{}).harness)){for(f=Ye.length;f--&&!Ye[f].targetTest(h););c=Ye[f]}for(f=l.length;f--;)l[f]&&(l[f]._gsap||(l[f]._gsap=new co(l[f],c)))||l.splice(f,1);return l},Er=function(l){return l._gsap||dr(wr(l))[0]._gsap},ln=function(l,h,c){return(c=l[h])&&Z(c)?l[h]():rt(c)&&l.getAttribute&&l.getAttribute(h)||c},qe=function(l,h){return(l=l.split(",")).forEach(h)||l},Be=function(l){return Math.round(1e5*l)/1e5||0},ie=function(l){return Math.round(1e7*l)/1e7||0},br=function(l,h){var c=h.charAt(0),f=parseFloat(h.substr(2));return l=parseFloat(l),"+"===c?l+f:"-"===c?l-f:"*"===c?l*f:l/f},wn=function(l,h){for(var c=h.length,f=0;l.indexOf(h[f])<0&&++f<c;);return f<c},Jr=function(){var c,f,l=fe.length,h=fe.slice(0);for(ne={},fe.length=0,c=0;c<l;c++)(f=h[c])&&f._lazy&&(f.render(f._lazy[0],f._lazy[1],!0)._lazy=0)},Kn=function(l,h,c,f){fe.length&&!W&&Jr(),l.render(h,c,f||W&&h<0&&(l._initted||l._startAt)),fe.length&&!W&&Jr()},pr=function(l){var h=parseFloat(l);return(h||0===h)&&(l+"").match(I).length<2?h:bt(l)?l.trim():l},Sn=function(l){return l},Ke=function(l,h){for(var c in h)c in l||(l[c]=h[c]);return l},nt=function(l,h){for(var c in h)l[c]=h[c];return l},ve=function R(l,h){for(var c in h)"__proto__"!==c&&"constructor"!==c&&"prototype"!==c&&(l[c]=ht(h[c])?R(l[c]||(l[c]={}),h[c]):h[c]);return l},_e=function(l,h){var f,c={};for(f in l)f in h||(c[f]=l[f]);return c},xe=function(l){var h=l.parent||E,c=l.keyframes?function(l){return function(h,c){for(var f in c)f in h||"duration"===f&&l||"ease"===f||(h[f]=c[f])}}(H(l.keyframes)):Ke;if(wt(l.inherit))for(;h;)c(l,h.vars.defaults),h=h.parent||h._dp;return l},Tr=function(l,h,c,f,g){void 0===c&&(c="_first"),void 0===f&&(f="_last");var T,y=l[f];if(g)for(T=h[g];y&&y[g]>T;)y=y._prev;return y?(h._next=y._next,y._next=h):(h._next=l[c],l[c]=h),h._next?h._next._prev=h:l[f]=h,h._prev=y,h.parent=h._dp=l,h},xr=function(l,h,c,f){void 0===c&&(c="_first"),void 0===f&&(f="_last");var g=h._prev,y=h._next;g?g._next=y:l[c]===h&&(l[c]=y),y?y._prev=g:l[f]===h&&(l[f]=g),h._next=h._prev=h.parent=null},Ue=function(l,h){l.parent&&(!h||l.parent.autoRemoveChildren)&&l.parent.remove&&l.parent.remove(l),l._act=0},ar=function(l,h){if(l&&(!h||h._end>l._dur||h._start<0))for(var c=l;c;)c._dirty=1,c=c.parent;return l},Pn=function(l){for(var h=l.parent;h&&h.parent;)h._dirty=1,h.totalDuration(),h=h.parent;return l},We=function(l,h,c,f){return l._startAt&&(W?l._startAt.revert(Qt):l.vars.immediateRender&&!l.vars.autoRevert||l._startAt.render(h,!0,f))},Je=function R(l){return!l||l._ts&&R(l.parent)},Hn=function(l){return l._repeat?Fr(l._tTime,l=l.duration()+l._rDelay)*l:0},Fr=function(l,h){var c=Math.floor(l/=h);return l&&c===l?c-1:c},Hr=function(l,h){return(l-h._start)*h._ts+(h._ts>=0?0:h._dirty?h.totalDuration():h._tDur)},Or=function(l){return l._end=ie(l._start+(l._tDur/Math.abs(l._ts||l._rts||ft)||0))},$r=function(l,h){var c=l._dp;return c&&c.smoothChildTiming&&l._ts&&(l._start=ie(c._time-(l._ts>0?h/l._ts:((l._dirty?l.totalDuration():l._tDur)-h)/-l._ts)),Or(l),c._dirty||ar(c,l)),l},un=function(l,h){var c;if((h._time||!h._dur&&h._initted||h._start<l._time&&(h._dur||!h.add))&&(c=Hr(l.rawTime(),h),(!h._dur||jr(0,h.totalDuration(),c)-h._tTime>ft)&&h.render(c,!0)),ar(l,h)._dp&&l._initted&&l._time>=l._dur&&l._ts){if(l._dur<l.duration())for(c=l;c._dp;)c.rawTime()>=0&&c.totalTime(c._tTime),c=c._dp;l._zTime=-ft}},vr=function(l,h,c,f){return h.parent&&Ue(h),h._start=ie((tt(c)?c:c||l!==E?Ze(l,c,h):l._time)+h._delay),h._end=ie(h._start+(h.totalDuration()/Math.abs(h.timeScale())||0)),Tr(l,h,"_first","_last",l._sort?"_start":0),hn(h)||(l._recent=h),f||un(l,h),l._ts<0&&$r(l,l._tTime),l},En=function(l,h){return(Y.ScrollTrigger||gt("scrollTrigger",h))&&Y.ScrollTrigger.create(h,l)},Xn=function(l,h,c,f,g){return Ci(l,h,g),l._initted?!c&&l._pt&&!W&&(l._dur&&!1!==l.vars.lazy||!l._dur&&l.vars.lazy)&&re!==Cr.frame?(fe.push(l),l._lazy=[g,f],1):void 0:1},ti=function R(l){var h=l.parent;return h&&h._ts&&h._initted&&!h._lock&&(h.rawTime()<0||R(h))},hn=function(l){var h=l.data;return"isFromStart"===h||"isStart"===h},Xr=function(l,h,c,f){var g=l._repeat,y=ie(h)||0,T=l._tTime/l._tDur;return T&&!f&&(l._time*=y/l._dur),l._dur=y,l._tDur=g?g<0?1e10:ie(y*(g+1)+l._rDelay*g):y,T>0&&!f&&$r(l,l._tTime=l._tDur*T),l.parent&&Or(l),c||ar(l.parent,l),l},ri=function(l){return l instanceof ur?ar(l):Xr(l,l._dur)},Ar={_start:0,endTime:Xt,totalDuration:Xt},Ze=function R(l,h,c){var T,P,O,f=l.labels,g=l._recent||Ar,y=l.duration()>=dt?g.endTime(!1):l._dur;return bt(h)&&(isNaN(h)||h in f)?(P=h.charAt(0),O="%"===h.substr(-1),T=h.indexOf("="),"<"===P||">"===P?(T>=0&&(h=h.replace(/=/,"")),("<"===P?g._start:g.endTime(g._repeat>=0))+(parseFloat(h.substr(1))||0)*(O?(T<0?g:c).totalDuration()/100:1)):T<0?(h in f||(f[h]=y),f[h]):(P=parseFloat(h.charAt(T-1)+h.substr(T+1)),O&&c&&(P=P/100*(H(c)?c[0]:c).totalDuration()),T>1?R(l,h.substr(0,T-1),c)+P:y+P)):null==h?y:+h},Nr=function(l,h,c){var T,P,f=tt(h[1]),g=(f?2:1)+(l<2?0:1),y=h[g];if(f&&(y.duration=h[1]),y.parent=c,l){for(T=y,P=c;P&&!("immediateRender"in T);)T=P.vars.defaults||{},P=wt(P.vars.inherit)&&P.parent;y.immediateRender=wt(T.immediateRender),l<2?y.runBackwards=1:y.startAt=h[g-1]}return new He(h[0],y,h[g+1])},Ur=function(l,h){return l||0===l?h(l):h},jr=function(l,h,c){return c<l?l:c>h?h:c},tr=function(l,h){return bt(l)&&(h=X.exec(l))?h[1]:""},pi=[].slice,$i=function(l,h){return l&&ht(l)&&"length"in l&&(!h&&!l.length||l.length-1 in l&&ht(l[0]))&&!l.nodeType&&l!==et},wr=function(l,h,c){return K&&!h&&K.selector?K.selector(l):!bt(l)||c||!k&&Yr()?H(l)?function(l,h,c){return void 0===c&&(c=[]),l.forEach(function(f){var g;return bt(f)&&!h||$i(f,1)?(g=c).push.apply(g,wr(f)):c.push(f)})||c}(l,c):$i(l)?pi.call(l,0):l?[l]:[]:pi.call((h||G).querySelectorAll(l),0)},vi=function(l){return l=wr(l)[0]||Dt("Invalid scope")||{},function(h){var c=l.current||l.nativeElement||l;return wr(h,c.querySelectorAll?c:c===l?Dt("Invalid scope")||G.createElement("div"):l)}},Qi=function(l){return l.sort(function(){return.5-Math.random()})},qi=function(l){if(Z(l))return l;var h=ht(l)?l:{each:l},c=dn(h.ease),f=h.from||0,g=parseFloat(h.base)||0,y={},T=f>0&&f<1,P=isNaN(f)||T,O=h.axis,B=f,Q=f;return bt(f)?B=Q={center:.5,edges:.5,end:1}[f]||0:!T&&P&&(B=f[0],Q=f[1]),function(q,ot,pt){var Tt,Bt,Ht,Ft,Rt,$t,Et,qt,Lt,z=(pt||h).length,_t=y[z];if(!_t){if(!(Lt="auto"===h.grid?0:(h.grid||[1,dt])[1])){for(Et=-dt;Et<(Et=pt[Lt++].getBoundingClientRect().left)&&Lt<z;);Lt<z&&Lt--}for(_t=y[z]=[],Tt=P?Math.min(Lt,z)*B-.5:f%Lt,Bt=Lt===dt?0:P?z*Q/Lt-.5:f/Lt|0,Et=0,qt=dt,$t=0;$t<z;$t++)Ht=$t%Lt-Tt,Ft=Bt-($t/Lt|0),_t[$t]=Rt=O?Math.abs("y"===O?Ft:Ht):xt(Ht*Ht+Ft*Ft),Rt>Et&&(Et=Rt),Rt<qt&&(qt=Rt);"random"===f&&Qi(_t),_t.max=Et-qt,_t.min=qt,_t.v=z=(parseFloat(h.amount)||parseFloat(h.each)*(Lt>z?z-1:O?"y"===O?z/Lt:Lt:Math.max(Lt,z/Lt))||0)*("edges"===f?-1:1),_t.b=z<0?g-z:g,_t.u=tr(h.amount||h.each)||0,c=c&&z<0?uo(c):c}return z=(_t[q]-_t.min)/_t.max||0,ie(_t.b+(c?c(z):z)*_t.v)+_t.u}},_i=function(l){var h=Math.pow(10,((l+"").split(".")[1]||"").length);return function(c){var f=ie(Math.round(parseFloat(c)/l)*l*h);return(f-f%1)/h+(tt(c)?0:tr(c))}},Ki=function(l,h){var f,g,c=H(l);return!c&&ht(l)&&(f=c=l.radius||dt,l.values?(l=wr(l.values),(g=!tt(l[0]))&&(f*=f)):l=_i(l.increment)),Ur(h,c?Z(l)?function(y){return g=l(y),Math.abs(g-y)<=f?g:y}:function(y){for(var q,ot,T=parseFloat(g?y.x:y),P=parseFloat(g?y.y:0),O=dt,B=0,Q=l.length;Q--;)(q=g?(q=l[Q].x-T)*q+(ot=l[Q].y-P)*ot:Math.abs(l[Q]-T))<O&&(O=q,B=Q);return B=!f||O<=f?l[B]:y,g||B===y||tt(y)?B:B+tr(y)}:_i(l))},to=function(l,h,c,f){return Ur(H(l)?!h:!0===c?!!(c=0):!f,function(){return H(l)?l[~~(Math.random()*l.length)]:(c=c||1e-5)&&(f=c<1?Math.pow(10,(c+"").length-2):1)&&Math.floor(Math.round((l-c/2+Math.random()*(h-l+.99*c))/c)*c*f)/f})},eo=function(l,h,c){return Ur(c,function(f){return l[~~h(f)]})},er=function(l){for(var f,g,y,T,h=0,c="";~(f=l.indexOf("random(",h));)y=l.indexOf(")",f),T="["===l.charAt(f+7),g=l.substr(f+7,y-f-7).match(T?I:Kt),c+=l.substr(h,f-h)+to(T?g:+g[0],T?0:+g[1],+g[2]||1e-5),h=y+1;return c+l.substr(h,l.length-h)},ro=function(l,h,c,f,g){var y=h-l,T=f-c;return Ur(g,function(P){return c+((P-l)/y*T||0)})},_r=function(l,h,c){var y,T,P,f=l.labels,g=dt;for(y in f)(T=f[y]-h)<0==!!c&&T&&g>(T=Math.abs(T))&&(P=y,g=T);return P},Te=function(l,h,c){var P,O,B,f=l.vars,g=f[h],y=K,T=l._ctx;if(g)return P=f[h+"Params"],O=f.callbackScope||l,c&&fe.length&&Jr(),T&&(K=T),B=P?g.apply(O,P):g.call(O),K=y,B},Yn=function(l){return Ue(l),l.scrollTrigger&&l.scrollTrigger.kill(!!W),l.progress()<1&&Te(l,"onInterrupt"),l},no=[],io=function(l){if(l)if(l=!l.name&&l.default||l,V()||l.headless){var h=l.name,c=Z(l),f=h&&!c&&l.init?function(){this._props=[]}:l,g={init:Xt,render:Si,add:bi,kill:vn,modifier:ra,rawVars:0},y={targetTest:0,get:0,getSetter:wi,aliases:{},register:0};if(Yr(),l!==f){if(me[h])return;Ke(f,Ke(_e(l,g),y)),nt(f.prototype,nt(g,_e(l,y))),me[f.prop=h]=f,l.targetTest&&(Ye.push(f),ce[h]=1),h=("css"===h?"CSS":h.charAt(0).toUpperCase()+h.substr(1))+"Plugin"}It(h,f),l.register&&l.register(Xe,f,gr)}else no.push(l)},Ae=255,An={aqua:[0,Ae,Ae],lime:[0,Ae,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ae],navy:[0,0,128],white:[Ae,Ae,Ae],olive:[128,128,0],yellow:[Ae,Ae,0],orange:[Ae,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ae,0,0],pink:[Ae,192,203],cyan:[0,Ae,Ae],transparent:[Ae,Ae,Ae,0]},gi=function(l,h,c){return(6*(l+=l<0?1:l>1?-1:0)<1?h+(c-h)*l*6:l<.5?c:3*l<2?h+(c-h)*(2/3-l)*6:h)*Ae+.5|0},Mn=function(l,h,c){var g,y,T,P,O,B,Q,q,ot,pt,f=l?tt(l)?[l>>16,l>>8&Ae,l&Ae]:0:An.black;if(!f){if(","===l.substr(-1)&&(l=l.substr(0,l.length-1)),An[l])f=An[l];else if("#"===l.charAt(0)){if(l.length<6&&(g=l.charAt(1),y=l.charAt(2),T=l.charAt(3),l="#"+g+g+y+y+T+T+(5===l.length?l.charAt(4)+l.charAt(4):"")),9===l.length)return[(f=parseInt(l.substr(1,6),16))>>16,f>>8&Ae,f&Ae,parseInt(l.substr(7),16)/255];f=[(l=parseInt(l.substr(1),16))>>16,l>>8&Ae,l&Ae]}else if("hsl"===l.substr(0,3))if(f=pt=l.match(Kt),h){if(~l.indexOf("="))return f=l.match(Vt),c&&f.length<4&&(f[3]=1),f}else P=+f[0]%360/360,O=+f[1]/100,g=2*(B=+f[2]/100)-(y=B<=.5?B*(O+1):B+O-B*O),f.length>3&&(f[3]*=1),f[0]=gi(P+1/3,g,y),f[1]=gi(P,g,y),f[2]=gi(P-1/3,g,y);else f=l.match(Kt)||An.transparent;f=f.map(Number)}return h&&!pt&&(g=f[0]/Ae,y=f[1]/Ae,T=f[2]/Ae,B=((Q=Math.max(g,y,T))+(q=Math.min(g,y,T)))/2,Q===q?P=O=0:(ot=Q-q,O=B>.5?ot/(2-Q-q):ot/(Q+q),P=Q===g?(y-T)/ot+(y<T?6:0):Q===y?(T-g)/ot+2:(g-y)/ot+4,P*=60),f[0]=~~(P+.5),f[1]=~~(100*O+.5),f[2]=~~(100*B+.5)),c&&f.length<4&&(f[3]=1),f},oo=function(l){var h=[],c=[],f=-1;return l.split(Qr).forEach(function(g){var y=g.match(te)||[];h.push.apply(h,y),c.push(f+=y.length+1)}),h.c=c,h},ao=function(l,h,c){var P,O,B,Q,f="",g=(l+f).match(Qr),y=h?"hsla(":"rgba(",T=0;if(!g)return l;if(g=g.map(function(q){return(q=Mn(q,h,1))&&y+(h?q[0]+","+q[1]+"%,"+q[2]+"%,"+q[3]:q.join(","))+")"}),c&&(B=oo(l),(P=c.c).join(f)!==B.c.join(f)))for(Q=(O=l.replace(Qr,"1").split(te)).length-1;T<Q;T++)f+=O[T]+(~P.indexOf(T)?g.shift()||y+"0,0,0,0)":(B.length?B:g.length?g:c).shift());if(!O)for(Q=(O=l.split(Qr)).length-1;T<Q;T++)f+=O[T]+g[T];return f+O[Q]},Qr=function(){var l,R="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(l in An)R+="|"+l+"\\b";return new RegExp(R+")","gi")}(),jo=/hsl[a]?\(/,so=function(l){var c,h=l.join(" ");if(Qr.lastIndex=0,Qr.test(h))return c=jo.test(h),l[1]=ao(l[1],c),l[0]=ao(l[0],c,oo(l[1])),!0},Cr=(R=Date.now,l=500,h=33,c=R(),f=c,y=g=1e3/240,pt=function z(_t){var Ht,Ft,Rt,$t,Tt=R()-f,Bt=!0===_t;if((Tt>l||Tt<0)&&(c+=Tt-h),((Ht=(Rt=(f+=Tt)-c)-y)>0||Bt)&&($t=++Q.frame,q=Rt-1e3*Q.time,Q.time=Rt/=1e3,y+=Ht+(Ht>=g?4:g-Ht),Ft=1),Bt||(P=O(z)),Ft)for(ot=0;ot<T.length;ot++)T[ot](Rt,q,$t,_t)},Q={time:0,frame:0,tick:function(){pt(!0)},deltaRatio:function(_t){return q/(1e3/(_t||60))},wake:function(){ct&&(!k&&V()&&(et=k=window,G=et.document||{},Y.gsap=Xe,(et.gsapVersions||(et.gsapVersions=[])).push(Xe.version),St(it||et.GreenSockGlobals||!et.gsap&&et||{}),no.forEach(io)),B="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame,P&&Q.sleep(),O=B||function(_t){return setTimeout(_t,y-1e3*Q.time+1|0)},Zn=1,pt(2))},sleep:function(){(B?cancelAnimationFrame:clearTimeout)(P),Zn=0,O=Xt},lagSmoothing:function(_t,Tt){l=_t||1/0,h=Math.min(Tt||33,l)},fps:function(_t){y=1e3*Q.time+(g=1e3/(_t||240))},add:function(_t,Tt,Bt){var Ht=Tt?function(Ft,Rt,$t,Et){_t(Ft,Rt,$t,Et),Q.remove(Ht)}:_t;return Q.remove(_t),T[Bt?"unshift":"push"](Ht),Yr(),Ht},remove:function(_t,Tt){~(Tt=T.indexOf(_t))&&T.splice(Tt,1)&&ot>=Tt&&ot--},_listeners:T=[]}),Yr=function(){return!Zn&&Cr.wake()},be={},Yo=/^[\d.\-M][\d.\-,\s]/,lo=/["']/g,Zo=function(l){for(var T,P,O,h={},c=l.substr(1,l.length-3).split(":"),f=c[0],g=1,y=c.length;g<y;g++)P=c[g],T=g!==y-1?P.lastIndexOf(","):P.length,O=P.substr(0,T),h[f]=isNaN(O)?O.replace(lo,"").trim():+O,f=P.substr(T+1).trim();return h},uo=function(l){return function(h){return 1-l(1-h)}},qr=function R(l,h){for(var f,c=l._first;c;)c instanceof ur?R(c,h):c.vars.yoyoEase&&(!c._yoyo||!c._repeat)&&c._yoyo!==h&&(c.timeline?R(c.timeline,h):(f=c._ease,c._ease=c._yEase,c._yEase=f,c._yoyo=h)),c=c._next},dn=function(l,h){return l&&(Z(l)?l:be[l]||function(l){var h=(l+"").split("("),c=be[h[0]];return c&&h.length>1&&c.config?c.config.apply(null,~l.indexOf("{")?[Zo(h[1])]:function(l){var h=l.indexOf("(")+1,c=l.indexOf(")"),f=l.indexOf("(",h);return l.substring(h,~f&&f<c?l.indexOf(")",c+1):c)}(l).split(",").map(pr)):be._CE&&Yo.test(l)?be._CE("",l):c}(l))||h},pn=function(l,h,c,f){void 0===c&&(c=function(P){return 1-h(1-P)}),void 0===f&&(f=function(P){return P<.5?h(2*P)/2:1-h(2*(1-P))/2});var y,g={easeIn:h,easeOut:c,easeInOut:f};return qe(l,function(T){for(var P in be[T]=Y[T]=g,be[y=T.toLowerCase()]=c,g)be[y+("easeIn"===P?".in":"easeOut"===P?".out":".inOut")]=be[T+"."+P]=g[P]}),g},ho=function(l){return function(h){return h<.5?(1-l(1-2*h))/2:.5+l(2*(h-.5))/2}},mi=function R(l,h,c){var f=h>=1?h:1,g=(c||(l?.3:.45))/(h<1?h:1),y=g/ut*(Math.asin(1/f)||0),T=function(B){return 1===B?1:f*Math.pow(2,-10*B)*jt((B-y)*g)+1},P="out"===l?T:"in"===l?function(O){return 1-T(1-O)}:ho(T);return g=ut/g,P.config=function(O,B){return R(l,O,B)},P},yi=function R(l,h){void 0===h&&(h=1.70158);var c=function(y){return y?--y*y*((h+1)*y+h)+1:0},f="out"===l?c:"in"===l?function(g){return 1-c(1-g)}:ho(c);return f.config=function(g){return R(l,g)},f};qe("Linear,Quad,Cubic,Quart,Quint,Strong",function(R,l){var h=l<5?l+1:l;pn(R+",Power"+(h-1),l?function(c){return Math.pow(c,h)}:function(c){return c},function(c){return 1-Math.pow(1-c,h)},function(c){return c<.5?Math.pow(2*c,h)/2:1-Math.pow(2*(1-c),h)/2})}),be.Linear.easeNone=be.none=be.Linear.easeIn,pn("Elastic",mi("in"),mi("out"),mi()),function(R,l){var g=function(T){return T<.36363636363636365?R*T*T:T<.7272727272727273?R*Math.pow(T-1.5/l,2)+.75:T<.9090909090909092?R*(T-=2.25/l)*T+.9375:R*Math.pow(T-2.625/l,2)+.984375};pn("Bounce",function(y){return 1-g(1-y)},g)}(7.5625,2.75),pn("Expo",function(R){return R?Math.pow(2,10*(R-1)):0}),pn("Circ",function(R){return-(xt(1-R*R)-1)}),pn("Sine",function(R){return 1===R?1:1-at(R*Ot)}),pn("Back",yi("in"),yi("out"),yi()),be.SteppedEase=be.steps=Y.SteppedEase={config:function(l,h){void 0===l&&(l=1);var c=1/l,f=l+(h?0:1),g=h?1:0;return function(T){return((f*jr(0,.99999999,T)|0)+g)*c}}},o.ease=be["quad.out"],qe("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(R){return or+=R+","+R+"Params,"});var co=function(l,h){this.id=Yt++,l._gsap=this,this.target=l,this.harness=h,this.get=h?h.get:ln,this.set=h?h.getSetter:wi},zn=function(){function R(h){this.vars=h,this._delay=+h.delay||0,(this._repeat=h.repeat===1/0?-2:h.repeat||0)&&(this._rDelay=h.repeatDelay||0,this._yoyo=!!h.yoyo||!!h.yoyoEase),this._ts=1,Xr(this,+h.duration,1,1),this.data=h.data,K&&(this._ctx=K,K.data.push(this)),Zn||Cr.wake()}var l=R.prototype;return l.delay=function(c){return c||0===c?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+c-this._delay),this._delay=c,this):this._delay},l.duration=function(c){return arguments.length?this.totalDuration(this._repeat>0?c+(c+this._rDelay)*this._repeat:c):this.totalDuration()&&this._dur},l.totalDuration=function(c){return arguments.length?(this._dirty=0,Xr(this,this._repeat<0?c:(c-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},l.totalTime=function(c,f){if(Yr(),!arguments.length)return this._tTime;var g=this._dp;if(g&&g.smoothChildTiming&&this._ts){for($r(this,c),!g._dp||g.parent||un(g,this);g&&g.parent;)g.parent._time!==g._start+(g._ts>=0?g._tTime/g._ts:(g.totalDuration()-g._tTime)/-g._ts)&&g.totalTime(g._tTime,!0),g=g.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&c<this._tDur||this._ts<0&&c>0||!this._tDur&&!c)&&vr(this._dp,this,this._start-this._delay)}return(this._tTime!==c||!this._dur&&!f||this._initted&&Math.abs(this._zTime)===ft||!c&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=c),Kn(this,c,f)),this},l.time=function(c,f){return arguments.length?this.totalTime(Math.min(this.totalDuration(),c+Hn(this))%(this._dur+this._rDelay)||(c?this._dur:0),f):this._time},l.totalProgress=function(c,f){return arguments.length?this.totalTime(this.totalDuration()*c,f):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},l.progress=function(c,f){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?c:1-c)+Hn(this),f):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},l.iteration=function(c,f){var g=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(c-1)*g,f):this._repeat?Fr(this._tTime,g)+1:1},l.timeScale=function(c,f){if(!arguments.length)return this._rts===-ft?0:this._rts;if(this._rts===c)return this;var g=this.parent&&this._ts?Hr(this.parent._time,this):this._tTime;return this._rts=+c||0,this._ts=this._ps||c===-ft?0:this._rts,this.totalTime(jr(-Math.abs(this._delay),this._tDur,g),!1!==f),Or(this),Pn(this)},l.paused=function(c){return arguments.length?(this._ps!==c&&(this._ps=c,c?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Yr(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==ft&&(this._tTime-=ft)))),this):this._ps},l.startTime=function(c){if(arguments.length){this._start=c;var f=this.parent||this._dp;return f&&(f._sort||!this.parent)&&vr(f,this,c-this._delay),this}return this._start},l.endTime=function(c){return this._start+(wt(c)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},l.rawTime=function(c){var f=this.parent||this._dp;return f?c&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Hr(f.rawTime(c),this):this._tTime:this._tTime},l.revert=function(c){void 0===c&&(c=ee);var f=W;return W=c,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(c),this.totalTime(-.01,c.suppressEvents)),"nested"!==this.data&&!1!==c.kill&&this.kill(),W=f,this},l.globalTime=function(c){for(var f=this,g=arguments.length?c:f.rawTime();f;)g=f._start+g/(Math.abs(f._ts)||1),f=f._dp;return!this.parent&&this._sat?this._sat.globalTime(c):g},l.repeat=function(c){return arguments.length?(this._repeat=c===1/0?-2:c,ri(this)):-2===this._repeat?1/0:this._repeat},l.repeatDelay=function(c){if(arguments.length){var f=this._time;return this._rDelay=c,ri(this),f?this.time(f):this}return this._rDelay},l.yoyo=function(c){return arguments.length?(this._yoyo=c,this):this._yoyo},l.seek=function(c,f){return this.totalTime(Ze(this,c),wt(f))},l.restart=function(c,f){return this.play().totalTime(c?-this._delay:0,wt(f))},l.play=function(c,f){return null!=c&&this.seek(c,f),this.reversed(!1).paused(!1)},l.reverse=function(c,f){return null!=c&&this.seek(c||this.totalDuration(),f),this.reversed(!0).paused(!1)},l.pause=function(c,f){return null!=c&&this.seek(c,f),this.paused(!0)},l.resume=function(){return this.paused(!1)},l.reversed=function(c){return arguments.length?(!!c!==this.reversed()&&this.timeScale(-this._rts||(c?-ft:0)),this):this._rts<0},l.invalidate=function(){return this._initted=this._act=0,this._zTime=-ft,this},l.isActive=function(){var g,c=this.parent||this._dp,f=this._start;return!(c&&!(this._ts&&this._initted&&c.isActive()&&(g=c.rawTime(!0))>=f&&g<this.endTime(!0)-ft))},l.eventCallback=function(c,f,g){var y=this.vars;return arguments.length>1?(f?(y[c]=f,g&&(y[c+"Params"]=g),"onUpdate"===c&&(this._onUpdate=f)):delete y[c],this):y[c]},l.then=function(c){var f=this;return new Promise(function(g){var y=Z(c)?c:Sn,T=function(){var O=f.then;f.then=null,Z(y)&&(y=y(f))&&(y.then||y===f)&&(f.then=O),g(y),f.then=O};f._initted&&1===f.totalProgress()&&f._ts>=0||!f._tTime&&f._ts<0?T():f._prom=T})},l.kill=function(){Yn(this)},R}();Ke(zn.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-ft,_prom:0,_ps:!1,_rts:1});var ur=function(R){function l(c,f){var g;return void 0===c&&(c={}),(g=R.call(this,c)||this).labels={},g.smoothChildTiming=!!c.smoothChildTiming,g.autoRemoveChildren=!!c.autoRemoveChildren,g._sort=wt(c.sortChildren),E&&vr(c.parent||E,N(g),f),c.reversed&&g.reverse(),c.paused&&g.paused(!0),c.scrollTrigger&&En(N(g),c.scrollTrigger),g}j(l,R);var h=l.prototype;return h.to=function(f,g,y){return Nr(0,arguments,this),this},h.from=function(f,g,y){return Nr(1,arguments,this),this},h.fromTo=function(f,g,y,T){return Nr(2,arguments,this),this},h.set=function(f,g,y){return g.duration=0,g.parent=this,xe(g).repeatDelay||(g.repeat=0),g.immediateRender=!!g.immediateRender,new He(f,g,Ze(this,y),1),this},h.call=function(f,g,y){return vr(this,He.delayedCall(0,f,g),y)},h.staggerTo=function(f,g,y,T,P,O,B){return y.duration=g,y.stagger=y.stagger||T,y.onComplete=O,y.onCompleteParams=B,y.parent=this,new He(f,y,Ze(this,P)),this},h.staggerFrom=function(f,g,y,T,P,O,B){return y.runBackwards=1,xe(y).immediateRender=wt(y.immediateRender),this.staggerTo(f,g,y,T,P,O,B)},h.staggerFromTo=function(f,g,y,T,P,O,B,Q){return T.startAt=y,xe(T).immediateRender=wt(T.immediateRender),this.staggerTo(f,g,T,P,O,B,Q)},h.render=function(f,g,y){var q,ot,pt,z,_t,Tt,Bt,Ht,Ft,Rt,$t,Et,T=this._time,P=this._dirty?this.totalDuration():this._tDur,O=this._dur,B=f<=0?0:ie(f),Q=this._zTime<0!=f<0&&(this._initted||!O);if(this!==E&&B>P&&f>=0&&(B=P),B!==this._tTime||y||Q){if(T!==this._time&&O&&(B+=this._time-T,f+=this._time-T),q=B,Ft=this._start,Tt=!(Ht=this._ts),Q&&(O||(T=this._zTime),(f||!g)&&(this._zTime=f)),this._repeat){if($t=this._yoyo,_t=O+this._rDelay,this._repeat<-1&&f<0)return this.totalTime(100*_t+f,g,y);if(q=ie(B%_t),B===P?(z=this._repeat,q=O):((z=~~(B/_t))&&z===B/_t&&(q=O,z--),q>O&&(q=O)),Rt=Fr(this._tTime,_t),!T&&this._tTime&&Rt!==z&&this._tTime-Rt*_t-this._dur<=0&&(Rt=z),$t&&1&z&&(q=O-q,Et=1),z!==Rt&&!this._lock){var qt=$t&&1&Rt,Lt=qt===($t&&1&z);if(z<Rt&&(qt=!qt),T=qt?0:B%O?O:B,this._lock=1,this.render(T||(Et?0:ie(z*_t)),g,!O)._lock=0,this._tTime=B,!g&&this.parent&&Te(this,"onRepeat"),this.vars.repeatRefresh&&!Et&&(this.invalidate()._lock=1),T&&T!==this._time||Tt!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(O=this._dur,P=this._tDur,Lt&&(this._lock=2,this.render(T=qt?O:-1e-4,!0),this.vars.repeatRefresh&&!Et&&this.invalidate()),this._lock=0,!this._ts&&!Tt)return this;qr(this,Et)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(Bt=function(l,h,c){var f;if(c>h)for(f=l._first;f&&f._start<=c;){if("isPause"===f.data&&f._start>h)return f;f=f._next}else for(f=l._last;f&&f._start>=c;){if("isPause"===f.data&&f._start<h)return f;f=f._prev}}(this,ie(T),ie(q)),Bt&&(B-=q-(q=Bt._start))),this._tTime=B,this._time=q,this._act=!Ht,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=f,T=0),!T&&q&&!g&&!z&&(Te(this,"onStart"),this._tTime!==B))return this;if(q>=T&&f>=0)for(ot=this._first;ot;){if(pt=ot._next,(ot._act||q>=ot._start)&&ot._ts&&Bt!==ot){if(ot.parent!==this)return this.render(f,g,y);if(ot.render(ot._ts>0?(q-ot._start)*ot._ts:(ot._dirty?ot.totalDuration():ot._tDur)+(q-ot._start)*ot._ts,g,y),q!==this._time||!this._ts&&!Tt){Bt=0,pt&&(B+=this._zTime=-ft);break}}ot=pt}else{ot=this._last;for(var ye=f<0?f:q;ot;){if(pt=ot._prev,(ot._act||ye<=ot._end)&&ot._ts&&Bt!==ot){if(ot.parent!==this)return this.render(f,g,y);if(ot.render(ot._ts>0?(ye-ot._start)*ot._ts:(ot._dirty?ot.totalDuration():ot._tDur)+(ye-ot._start)*ot._ts,g,y||W&&(ot._initted||ot._startAt)),q!==this._time||!this._ts&&!Tt){Bt=0,pt&&(B+=this._zTime=ye?-ft:ft);break}}ot=pt}}if(Bt&&!g&&(this.pause(),Bt.render(q>=T?0:-ft)._zTime=q>=T?1:-1,this._ts))return this._start=Ft,Or(this),this.render(f,g,y);this._onUpdate&&!g&&Te(this,"onUpdate",!0),(B===P&&this._tTime>=this.totalDuration()||!B&&T)&&(Ft===this._start||Math.abs(Ht)!==Math.abs(this._ts))&&(this._lock||((f||!O)&&(B===P&&this._ts>0||!B&&this._ts<0)&&Ue(this,1),!g&&(!(f<0)||T)&&(B||T||!P)&&(Te(this,B===P&&f>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(B<P&&this.timeScale()>0)&&this._prom())))}return this},h.add=function(f,g){var y=this;if(tt(g)||(g=Ze(this,g,f)),!(f instanceof zn)){if(H(f))return f.forEach(function(T){return y.add(T,g)}),this;if(bt(f))return this.addLabel(f,g);if(!Z(f))return this;f=He.delayedCall(0,f)}return this!==f?vr(this,f,g):this},h.getChildren=function(f,g,y,T){void 0===f&&(f=!0),void 0===g&&(g=!0),void 0===y&&(y=!0),void 0===T&&(T=-dt);for(var P=[],O=this._first;O;)O._start>=T&&(O instanceof He?g&&P.push(O):(y&&P.push(O),f&&P.push.apply(P,O.getChildren(!0,g,y)))),O=O._next;return P},h.getById=function(f){for(var g=this.getChildren(1,1,1),y=g.length;y--;)if(g[y].vars.id===f)return g[y]},h.remove=function(f){return bt(f)?this.removeLabel(f):Z(f)?this.killTweensOf(f):(xr(this,f),f===this._recent&&(this._recent=this._last),ar(this))},h.totalTime=function(f,g){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ie(Cr.time-(this._ts>0?f/this._ts:(this.totalDuration()-f)/-this._ts))),R.prototype.totalTime.call(this,f,g),this._forcing=0,this):this._tTime},h.addLabel=function(f,g){return this.labels[f]=Ze(this,g),this},h.removeLabel=function(f){return delete this.labels[f],this},h.addPause=function(f,g,y){var T=He.delayedCall(0,g||Xt,y);return T.data="isPause",this._hasPause=1,vr(this,T,Ze(this,f))},h.removePause=function(f){var g=this._first;for(f=Ze(this,f);g;)g._start===f&&"isPause"===g.data&&Ue(g),g=g._next},h.killTweensOf=function(f,g,y){for(var T=this.getTweensOf(f,y),P=T.length;P--;)Kr!==T[P]&&T[P].kill(f,g);return this},h.getTweensOf=function(f,g){for(var B,y=[],T=wr(f),P=this._first,O=tt(g);P;)P instanceof He?wn(P._targets,T)&&(O?(!Kr||P._initted&&P._ts)&&P.globalTime(0)<=g&&P.globalTime(P.totalDuration())>g:!g||P.isActive())&&y.push(P):(B=P.getTweensOf(T,g)).length&&y.push.apply(y,B),P=P._next;return y},h.tweenTo=function(f,g){g=g||{};var ot,y=this,T=Ze(y,f),O=g.startAt,B=g.onStart,Q=g.onStartParams,q=g.immediateRender,pt=He.to(y,Ke({ease:g.ease||"none",lazy:!1,immediateRender:!1,time:T,overwrite:"auto",duration:g.duration||Math.abs((T-(O&&"time"in O?O.time:y._time))/y.timeScale())||ft,onStart:function(){if(y.pause(),!ot){var _t=g.duration||Math.abs((T-(O&&"time"in O?O.time:y._time))/y.timeScale());pt._dur!==_t&&Xr(pt,_t,0,1).render(pt._time,!0,!0),ot=1}B&&B.apply(pt,Q||[])}},g));return q?pt.render(0):pt},h.tweenFromTo=function(f,g,y){return this.tweenTo(g,Ke({startAt:{time:Ze(this,f)}},y))},h.recent=function(){return this._recent},h.nextLabel=function(f){return void 0===f&&(f=this._time),_r(this,Ze(this,f))},h.previousLabel=function(f){return void 0===f&&(f=this._time),_r(this,Ze(this,f),1)},h.currentLabel=function(f){return arguments.length?this.seek(f,!0):this.previousLabel(this._time+ft)},h.shiftChildren=function(f,g,y){void 0===y&&(y=0);for(var O,T=this._first,P=this.labels;T;)T._start>=y&&(T._start+=f,T._end+=f),T=T._next;if(g)for(O in P)P[O]>=y&&(P[O]+=f);return ar(this)},h.invalidate=function(f){var g=this._first;for(this._lock=0;g;)g.invalidate(f),g=g._next;return R.prototype.invalidate.call(this,f)},h.clear=function(f){void 0===f&&(f=!0);for(var y,g=this._first;g;)y=g._next,this.remove(g),g=y;return this._dp&&(this._time=this._tTime=this._pTime=0),f&&(this.labels={}),ar(this)},h.totalDuration=function(f){var O,B,Q,g=0,y=this,T=y._last,P=dt;if(arguments.length)return y.timeScale((y._repeat<0?y.duration():y.totalDuration())/(y.reversed()?-f:f));if(y._dirty){for(Q=y.parent;T;)O=T._prev,T._dirty&&T.totalDuration(),(B=T._start)>P&&y._sort&&T._ts&&!y._lock?(y._lock=1,vr(y,T,B-T._delay,1)._lock=0):P=B,B<0&&T._ts&&(g-=B,(!Q&&!y._dp||Q&&Q.smoothChildTiming)&&(y._start+=B/y._ts,y._time-=B,y._tTime-=B),y.shiftChildren(-B,!1,-1/0),P=0),T._end>g&&T._ts&&(g=T._end),T=O;Xr(y,y===E&&y._time>g?y._time:g,1,1),y._dirty=0}return y._tDur},l.updateRoot=function(f){if(E._ts&&(Kn(E,Hr(f,E)),re=Cr.frame),Cr.frame>=fr){fr+=lt.autoSleep||120;var g=E._first;if((!g||!g._ts)&&lt.autoSleep&&Cr._listeners.length<2){for(;g&&!g._ts;)g=g._next;g||Cr.sleep()}}},l}(zn);Ke(ur.prototype,{_lock:0,_hasPause:0,_forcing:0});var Kr,xi,Wo=function(l,h,c,f,g,y,T){var Q,q,ot,pt,z,_t,Tt,Bt,P=new gr(this._pt,l,h,0,1,go,null,g),O=0,B=0;for(P.b=c,P.e=f,c+="",(Tt=~(f+="").indexOf("random("))&&(f=er(f)),y&&(y(Bt=[c,f],l,h),c=Bt[0],f=Bt[1]),q=c.match(Zt)||[];Q=Zt.exec(f);)pt=Q[0],z=f.substring(O,Q.index),ot?ot=(ot+1)%5:"rgba("===z.substr(-5)&&(ot=1),pt!==q[B++]&&(_t=parseFloat(q[B-1])||0,P._pt={_next:P._pt,p:z||1===B?z:",",s:_t,c:"="===pt.charAt(1)?br(_t,pt)-_t:parseFloat(pt)-_t,m:ot&&ot<4?Math.round:0},O=Zt.lastIndex);return P.c=O<f.length?f.substring(O,f.length):"",P.fp=T,(Mt.test(f)||Tt)&&(P.e=0),this._pt=P,P},bi=function(l,h,c,f,g,y,T,P,O,B){Z(f)&&(f=f(g||0,l,y));var pt,Q=l[h],q="get"!==c?c:Z(Q)?O?l[h.indexOf("set")||!Z(l["get"+h.substr(3)])?h:"get"+h.substr(3)](O):l[h]():Q,ot=Z(Q)?O?Ko:_o:Ti;if(bt(f)&&(~f.indexOf("random(")&&(f=er(f)),"="===f.charAt(1)&&((pt=br(q,f)+(tr(q)||0))||0===pt)&&(f=pt)),!B||q!==f||xi)return isNaN(q*f)||""===f?(!Q&&!(h in l)&&gt(h,f),Wo.call(this,l,h,q,f,ot,P||lt.stringFilter,O)):(pt=new gr(this._pt,l,h,+q||0,f-(q||0),"boolean"==typeof Q?ea:tn,0,ot),O&&(pt.fp=O),T&&pt.modifier(T,this,l),this._pt=pt)},fo=function(l,h,c,f,g,y){var T,P,O,B;if(me[l]&&!1!==(T=new me[l]).init(g,T.rawVars?h[l]:function(l,h,c,f,g){if(Z(l)&&(l=Vn(l,g,h,c,f)),!ht(l)||l.style&&l.nodeType||H(l)||st(l))return bt(l)?Vn(l,g,h,c,f):l;var T,y={};for(T in l)y[T]=Vn(l[T],g,h,c,f);return y}(h[l],f,g,y,c),c,f,y)&&(c._pt=P=new gr(c._pt,g,l,0,1,T.render,T,0,T.priority),c!==On))for(O=c._ptLookup[c._targets.indexOf(g)],B=T._props.length;B--;)O[T._props[B]]=P;return T},Ci=function R(l,h,c){var Rt,$t,Et,qt,Lt,ye,Ne,De,Me,sr,rr,Ve,nr,f=l.vars,g=f.ease,y=f.startAt,T=f.immediateRender,P=f.lazy,O=f.onUpdate,B=f.runBackwards,Q=f.yoyoEase,q=f.keyframes,ot=f.autoRevert,pt=l._dur,z=l._startAt,_t=l._targets,Tt=l.parent,Bt=Tt&&"nested"===Tt.data?Tt.vars.targets:_t,Ht="auto"===l._overwrite&&!yt,Ft=l.timeline;if(Ft&&(!q||!g)&&(g="none"),l._ease=dn(g,o.ease),l._yEase=Q?uo(dn(!0===Q?g:Q,o.ease)):0,Q&&l._yoyo&&!l._repeat&&(Q=l._yEase,l._yEase=l._ease,l._ease=Q),l._from=!Ft&&!!f.runBackwards,!Ft||q&&!f.stagger){if(Ve=(De=_t[0]?Er(_t[0]).harness:0)&&f[De.prop],Rt=_e(f,ce),z&&(z._zTime<0&&z.progress(1),h<0&&B&&T&&!ot?z.render(-1,!0):z.revert(B&&pt?Qt:Jt),z._lazy=0),y){if(Ue(l._startAt=He.set(_t,Ke({data:"isStart",overwrite:!1,parent:Tt,immediateRender:!0,lazy:!z&&wt(P),startAt:null,delay:0,onUpdate:O&&function(){return Te(l,"onUpdate")},stagger:0},y))),l._startAt._dp=0,l._startAt._sat=l,h<0&&(W||!T&&!ot)&&l._startAt.revert(Qt),T&&pt&&h<=0&&c<=0)return void(h&&(l._zTime=h))}else if(B&&pt&&!z)if(h&&(T=!1),Et=Ke({overwrite:!1,data:"isFromStart",lazy:T&&!z&&wt(P),immediateRender:T,stagger:0,parent:Tt},Rt),Ve&&(Et[De.prop]=Ve),Ue(l._startAt=He.set(_t,Et)),l._startAt._dp=0,l._startAt._sat=l,h<0&&(W?l._startAt.revert(Qt):l._startAt.render(-1,!0)),l._zTime=h,T){if(!h)return}else R(l._startAt,ft,ft);for(l._pt=l._ptCache=0,P=pt&&wt(P)||P&&!pt,$t=0;$t<_t.length;$t++){if(Ne=(Lt=_t[$t])._gsap||dr(_t)[$t]._gsap,l._ptLookup[$t]=sr={},ne[Ne.id]&&fe.length&&Jr(),rr=Bt===_t?$t:Bt.indexOf(Lt),De&&!1!==(Me=new De).init(Lt,Ve||Rt,l,rr,Bt)&&(l._pt=qt=new gr(l._pt,Lt,Me.name,0,1,Me.render,Me,0,Me.priority),Me._props.forEach(function(Wr){sr[Wr]=qt}),Me.priority&&(ye=1)),!De||Ve)for(Et in Rt)me[Et]&&(Me=fo(Et,Rt,l,rr,Lt,Bt))?Me.priority&&(ye=1):sr[Et]=qt=bi.call(l,Lt,Et,"get",Rt[Et],rr,Bt,0,f.stringFilter);l._op&&l._op[$t]&&l.kill(Lt,l._op[$t]),Ht&&l._pt&&(Kr=l,E.killTweensOf(Lt,sr,l.globalTime(h)),nr=!l.parent,Kr=0),l._pt&&P&&(ne[Ne.id]=1)}ye&&mo(l),l._onInit&&l._onInit(l)}l._onUpdate=O,l._initted=(!l._op||l._pt)&&!nr,q&&h<=0&&Ft.render(dt,!0,!0)},qo=function(l,h,c,f){var y,T,g=h.ease||f||"power1.inOut";if(H(h))T=c[l]||(c[l]=[]),h.forEach(function(P,O){return T.push({t:O/(h.length-1)*100,v:P,e:g})});else for(y in h)T=c[y]||(c[y]=[]),"ease"===y||T.push({t:parseFloat(l),v:h[y],e:g})},Vn=function(l,h,c,f,g){return Z(l)?l.call(h,c,f,g):bt(l)&&~l.indexOf("random(")?er(l):l},po=or+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",vo={};qe(po+",id,stagger,delay,duration,paused,scrollTrigger",function(R){return vo[R]=1});var He=function(R){function l(c,f,g,y){var T;"number"==typeof f&&(g.duration=f,f=g,g=null);var Ft,Rt,$t,Et,qt,Lt,ye,Ne,P=(T=R.call(this,y?f:xe(f))||this).vars,O=P.duration,B=P.delay,Q=P.immediateRender,q=P.stagger,ot=P.overwrite,pt=P.keyframes,z=P.defaults,_t=P.scrollTrigger,Tt=P.yoyoEase,Bt=f.parent||E,Ht=(H(c)||st(c)?tt(c[0]):"length"in f)?[c]:wr(c);if(T._targets=Ht.length?dr(Ht):Dt("GSAP target "+c+" not found. https://gsap.com",!lt.nullTargetWarn)||[],T._ptLookup=[],T._overwrite=ot,pt||q||U(O)||U(B)){if(f=T.vars,(Ft=T.timeline=new ur({data:"nested",defaults:z||{},targets:Bt&&"nested"===Bt.data?Bt.vars.targets:Ht})).kill(),Ft.parent=Ft._dp=N(T),Ft._start=0,q||U(O)||U(B)){if(Et=Ht.length,ye=q&&qi(q),ht(q))for(qt in q)~po.indexOf(qt)&&(Ne||(Ne={}),Ne[qt]=q[qt]);for(Rt=0;Rt<Et;Rt++)($t=_e(f,vo)).stagger=0,Tt&&($t.yoyoEase=Tt),Ne&&nt($t,Ne),Lt=Ht[Rt],$t.duration=+Vn(O,N(T),Rt,Lt,Ht),$t.delay=(+Vn(B,N(T),Rt,Lt,Ht)||0)-T._delay,!q&&1===Et&&$t.delay&&(T._delay=B=$t.delay,T._start+=B,$t.delay=0),Ft.to(Lt,$t,ye?ye(Rt,Lt,Ht):0),Ft._ease=be.none;Ft.duration()?O=B=0:T.timeline=0}else if(pt){xe(Ke(Ft.vars.defaults,{ease:"none"})),Ft._ease=dn(pt.ease||f.ease||"none");var Me,sr,rr,De=0;if(H(pt))pt.forEach(function(Ve){return Ft.to(Ht,Ve,">")}),Ft.duration();else{for(qt in $t={},pt)"ease"===qt||"easeEach"===qt||qo(qt,pt[qt],$t,pt.easeEach);for(qt in $t)for(Me=$t[qt].sort(function(Ve,nr){return Ve.t-nr.t}),De=0,Rt=0;Rt<Me.length;Rt++)(rr={ease:(sr=Me[Rt]).e,duration:(sr.t-(Rt?Me[Rt-1].t:0))/100*O})[qt]=sr.v,Ft.to(Ht,rr,De),De+=rr.duration;Ft.duration()<O&&Ft.to({},{duration:O-Ft.duration()})}}O||T.duration(O=Ft.duration())}else T.timeline=0;return!0===ot&&!yt&&(Kr=N(T),E.killTweensOf(Ht),Kr=0),vr(Bt,N(T),g),f.reversed&&T.reverse(),f.paused&&T.paused(!0),(Q||!O&&!pt&&T._start===ie(Bt._time)&&wt(Q)&&Je(N(T))&&"nested"!==Bt.data)&&(T._tTime=-ft,T.render(Math.max(0,-B)||0)),_t&&En(N(T),_t),T}j(l,R);var h=l.prototype;return h.render=function(f,g,y){var q,ot,pt,z,_t,Tt,Bt,Ht,Ft,T=this._time,P=this._tDur,O=this._dur,B=f<0,Q=f>P-ft&&!B?P:f<ft?0:f;if(O){if(Q!==this._tTime||!f||y||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==B){if(q=Q,Ht=this.timeline,this._repeat){if(z=O+this._rDelay,this._repeat<-1&&B)return this.totalTime(100*z+f,g,y);if(q=ie(Q%z),Q===P?(pt=this._repeat,q=O):((pt=~~(Q/z))&&pt===ie(Q/z)&&(q=O,pt--),q>O&&(q=O)),(Tt=this._yoyo&&1&pt)&&(Ft=this._yEase,q=O-q),_t=Fr(this._tTime,z),q===T&&!y&&this._initted&&pt===_t)return this._tTime=Q,this;pt!==_t&&(Ht&&this._yEase&&qr(Ht,Tt),this.vars.repeatRefresh&&!Tt&&!this._lock&&this._time!==z&&this._initted&&(this._lock=y=1,this.render(ie(z*pt),!0).invalidate()._lock=0))}if(!this._initted){if(Xn(this,B?f:q,y,g,Q))return this._tTime=0,this;if(!(T===this._time||y&&this.vars.repeatRefresh&&pt!==_t))return this;if(O!==this._dur)return this.render(f,g,y)}if(this._tTime=Q,this._time=q,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=Bt=(Ft||this._ease)(q/O),this._from&&(this.ratio=Bt=1-Bt),q&&!T&&!g&&!pt&&(Te(this,"onStart"),this._tTime!==Q))return this;for(ot=this._pt;ot;)ot.r(Bt,ot.d),ot=ot._next;Ht&&Ht.render(f<0?f:Ht._dur*Ht._ease(q/this._dur),g,y)||this._startAt&&(this._zTime=f),this._onUpdate&&!g&&(B&&We(this,f,0,y),Te(this,"onUpdate")),this._repeat&&pt!==_t&&this.vars.onRepeat&&!g&&this.parent&&Te(this,"onRepeat"),(Q===this._tDur||!Q)&&this._tTime===Q&&(B&&!this._onUpdate&&We(this,f,0,!0),(f||!O)&&(Q===this._tDur&&this._ts>0||!Q&&this._ts<0)&&Ue(this,1),!g&&(!B||T)&&(Q||T||Tt)&&(Te(this,Q===P?"onComplete":"onReverseComplete",!0),this._prom&&!(Q<P&&this.timeScale()>0)&&this._prom()))}}else!function(l,h,c,f){var O,B,Q,g=l.ratio,y=h<0||!h&&(!l._start&&ti(l)&&(l._initted||!hn(l))||(l._ts<0||l._dp._ts<0)&&!hn(l))?0:1,T=l._rDelay,P=0;if(T&&l._repeat&&(P=jr(0,l._tDur,h),B=Fr(P,T),l._yoyo&&1&B&&(y=1-y),B!==Fr(l._tTime,T)&&(g=1-y,l.vars.repeatRefresh&&l._initted&&l.invalidate())),y!==g||W||f||l._zTime===ft||!h&&l._zTime){if(!l._initted&&Xn(l,h,f,c,P))return;for(Q=l._zTime,l._zTime=h||(c?ft:0),c||(c=h&&!Q),l.ratio=y,l._from&&(y=1-y),l._time=0,l._tTime=P,O=l._pt;O;)O.r(y,O.d),O=O._next;h<0&&We(l,h,0,!0),l._onUpdate&&!c&&Te(l,"onUpdate"),P&&l._repeat&&!c&&l.parent&&Te(l,"onRepeat"),(h>=l._tDur||h<0)&&l.ratio===y&&(y&&Ue(l,1),!c&&!W&&(Te(l,y?"onComplete":"onReverseComplete",!0),l._prom&&l._prom()))}else l._zTime||(l._zTime=h)}(this,f,g,y);return this},h.targets=function(){return this._targets},h.invalidate=function(f){return(!f||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(f),R.prototype.invalidate.call(this,f)},h.resetTo=function(f,g,y,T,P){Zn||Cr.wake(),this._ts||this.play();var O=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||Ci(this,O),function(l,h,c,f,g,y,T,P){var B,Q,q,ot,O=(l._pt&&l._ptCache||(l._ptCache={}))[h];if(!O)for(O=l._ptCache[h]=[],q=l._ptLookup,ot=l._targets.length;ot--;){if((B=q[ot][h])&&B.d&&B.d._pt)for(B=B.d._pt;B&&B.p!==h&&B.fp!==h;)B=B._next;if(!B)return xi=1,l.vars[h]="+=0",Ci(l,T),xi=0,P?Dt(h+" not eligible for reset"):1;O.push(B)}for(ot=O.length;ot--;)(B=(Q=O[ot])._pt||Q).s=!f&&0!==f||g?B.s+(f||0)+y*B.c:f,B.c=c-B.s,Q.e&&(Q.e=Be(c)+tr(Q.e)),Q.b&&(Q.b=B.s+tr(Q.b))}(this,f,g,y,T,this._ease(O/this._dur),O,P)?this.resetTo(f,g,y,T,1):($r(this,0),this.parent||Tr(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},h.kill=function(f,g){if(void 0===g&&(g="all"),!(f||g&&"all"!==g))return this._lazy=this._pt=0,this.parent?Yn(this):this;if(this.timeline){var y=this.timeline.totalDuration();return this.timeline.killTweensOf(f,g,Kr&&!0!==Kr.vars.overwrite)._first||Yn(this),this.parent&&y!==this.timeline.totalDuration()&&Xr(this,this._dur*this.timeline._tDur/y,0,1),this}var Q,q,ot,pt,z,_t,Tt,T=this._targets,P=f?wr(f):T,O=this._ptLookup,B=this._pt;if((!g||"all"===g)&&function(l,h){for(var c=l.length,f=c===h.length;f&&c--&&l[c]===h[c];);return c<0}(T,P))return"all"===g&&(this._pt=0),Yn(this);for(Q=this._op=this._op||[],"all"!==g&&(bt(g)&&(z={},qe(g,function(Bt){return z[Bt]=1}),g=z),g=function(l,h){var g,y,T,P,c=l[0]?Er(l[0]).harness:0,f=c&&c.aliases;if(!f)return h;for(y in g=nt({},h),f)if(y in g)for(T=(P=f[y].split(",")).length;T--;)g[P[T]]=g[y];return g}(T,g)),Tt=T.length;Tt--;)if(~P.indexOf(T[Tt]))for(z in q=O[Tt],"all"===g?(Q[Tt]=g,pt=q,ot={}):(ot=Q[Tt]=Q[Tt]||{},pt=g),pt)(_t=q&&q[z])&&((!("kill"in _t.d)||!0===_t.d.kill(z))&&xr(this,_t,"_pt"),delete q[z]),"all"!==ot&&(ot[z]=1);return this._initted&&!this._pt&&B&&Yn(this),this},l.to=function(f,g){return new l(f,g,arguments[2])},l.from=function(f,g){return Nr(1,arguments)},l.delayedCall=function(f,g,y,T){return new l(g,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:f,onComplete:g,onReverseComplete:g,onCompleteParams:y,onReverseCompleteParams:y,callbackScope:T})},l.fromTo=function(f,g,y){return Nr(2,arguments)},l.set=function(f,g){return g.duration=0,g.repeatDelay||(g.repeat=0),new l(f,g)},l.killTweensOf=function(f,g,y){return E.killTweensOf(f,g,y)},l}(zn);Ke(He.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),qe("staggerTo,staggerFrom,staggerFromTo",function(R){He[R]=function(){var l=new ur,h=pi.call(arguments,0);return h.splice("staggerFromTo"===R?5:4,0,0),l[R].apply(l,h)}});var Ti=function(l,h,c){return l[h]=c},_o=function(l,h,c){return l[h](c)},Ko=function(l,h,c,f){return l[h](f.fp,c)},ta=function(l,h,c){return l.setAttribute(h,c)},wi=function(l,h){return Z(l[h])?_o:rt(l[h])&&l.setAttribute?ta:Ti},tn=function(l,h){return h.set(h.t,h.p,Math.round(1e6*(h.s+h.c*l))/1e6,h)},ea=function(l,h){return h.set(h.t,h.p,!!(h.s+h.c*l),h)},go=function(l,h){var c=h._pt,f="";if(!l&&h.b)f=h.b;else if(1===l&&h.e)f=h.e;else{for(;c;)f=c.p+(c.m?c.m(c.s+c.c*l):Math.round(1e4*(c.s+c.c*l))/1e4)+f,c=c._next;f+=h.c}h.set(h.t,h.p,f,h)},Si=function(l,h){for(var c=h._pt;c;)c.r(l,c.d),c=c._next},ra=function(l,h,c,f){for(var y,g=this._pt;g;)y=g._next,g.p===f&&g.modifier(l,h,c),g=y},vn=function(l){for(var c,f,h=this._pt;h;)f=h._next,h.p===l&&!h.op||h.op===l?xr(this,h,"_pt"):h.dep||(c=1),h=f;return!c},na=function(l,h,c,f){f.mSet(l,h,f.m.call(f.tween,c,f.mt),f)},mo=function(l){for(var c,f,g,y,h=l._pt;h;){for(c=h._next,f=g;f&&f.pr>h.pr;)f=f._next;(h._prev=f?f._prev:y)?h._prev._next=h:g=h,(h._next=f)?f._prev=h:y=h,h=c}l._pt=g},gr=function(){function R(h,c,f,g,y,T,P,O,B){this.t=c,this.s=g,this.c=y,this.p=f,this.r=T||tn,this.d=P||this,this.set=O||Ti,this.pr=B||0,this._next=h,h&&(h._prev=this)}return R.prototype.modifier=function(c,f,g){this.mSet=this.mSet||this.set,this.set=na,this.m=c,this.mt=g,this.tween=f},R}();qe(or+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(R){return ce[R]=1}),Y.TweenMax=Y.TweenLite=He,Y.TimelineLite=Y.TimelineMax=ur,E=new ur({sortChildren:!1,defaults:o,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),lt.stringFilter=so;var _n=[],ni={},ia=[],yo=0,oa=0,Pi=function(l){return(ni[l]||ia).map(function(h){return h()})},Ei=function(){var l=Date.now(),h=[];l-yo>2&&(Pi("matchMediaInit"),_n.forEach(function(c){var y,T,P,O,f=c.queries,g=c.conditions;for(T in f)(y=et.matchMedia(f[T]).matches)&&(P=1),y!==g[T]&&(g[T]=y,O=1);O&&(c.revert(),P&&h.push(c))}),Pi("matchMediaRevert"),h.forEach(function(c){return c.onMatch(c,function(f){return c.add(null,f)})}),yo=l,Pi("matchMedia"))},bo=function(){function R(h,c){this.selector=c&&vi(c),this.data=[],this._r=[],this.isReverted=!1,this.id=oa++,h&&this.add(h)}var l=R.prototype;return l.add=function(c,f,g){Z(c)&&(g=f,f=c,c=Z);var y=this,T=function(){var Q,O=K,B=y.selector;return O&&O!==y&&O.data.push(y),g&&(y.selector=vi(g)),K=y,Q=f.apply(y,arguments),Z(Q)&&y._r.push(Q),K=O,y.selector=B,y.isReverted=!1,Q};return y.last=T,c===Z?T(y,function(P){return y.add(null,P)}):c?y[c]=T:T},l.ignore=function(c){var f=K;K=null,c(this),K=f},l.getTweens=function(){var c=[];return this.data.forEach(function(f){return f instanceof R?c.push.apply(c,f.getTweens()):f instanceof He&&!(f.parent&&"nested"===f.parent.data)&&c.push(f)}),c},l.clear=function(){this._r.length=this.data.length=0},l.kill=function(c,f){var g=this;if(c?function(){for(var O,T=g.getTweens(),P=g.data.length;P--;)"isFlip"===(O=g.data[P]).data&&(O.revert(),O.getChildren(!0,!0,!1).forEach(function(B){return T.splice(T.indexOf(B),1)}));for(T.map(function(B){return{g:B._dur||B._delay||B._sat&&!B._sat.vars.immediateRender?B.globalTime(0):-1/0,t:B}}).sort(function(B,Q){return Q.g-B.g||-1/0}).forEach(function(B){return B.t.revert(c)}),P=g.data.length;P--;)(O=g.data[P])instanceof ur?"nested"!==O.data&&(O.scrollTrigger&&O.scrollTrigger.revert(),O.kill()):!(O instanceof He)&&O.revert&&O.revert(c);g._r.forEach(function(B){return B(c,g)}),g.isReverted=!0}():this.data.forEach(function(T){return T.kill&&T.kill()}),this.clear(),f)for(var y=_n.length;y--;)_n[y].id===this.id&&_n.splice(y,1)},l.revert=function(c){this.kill(c||{})},R}(),aa=function(){function R(h){this.contexts=[],this.scope=h,K&&K.data.push(this)}var l=R.prototype;return l.add=function(c,f,g){ht(c)||(c={matches:c});var P,O,B,y=new bo(0,g||this.scope),T=y.conditions={};for(O in K&&!y.selector&&(y.selector=K.selector),this.contexts.push(y),f=y.add("onMatch",f),y.queries=c,c)"all"===O?B=1:(P=et.matchMedia(c[O]))&&(_n.indexOf(y)<0&&_n.push(y),(T[O]=P.matches)&&(B=1),P.addListener?P.addListener(Ei):P.addEventListener("change",Ei));return B&&f(y,function(Q){return y.add(null,Q)}),this},l.revert=function(c){this.kill(c||{})},l.kill=function(c){this.contexts.forEach(function(f){return f.kill(c,!0)})},R}(),ii={registerPlugin:function(){for(var l=arguments.length,h=new Array(l),c=0;c<l;c++)h[c]=arguments[c];h.forEach(function(f){return io(f)})},timeline:function(l){return new ur(l)},getTweensOf:function(l,h){return E.getTweensOf(l,h)},getProperty:function(l,h,c,f){bt(l)&&(l=wr(l)[0]);var g=Er(l||{}).get,y=c?Sn:pr;return"native"===c&&(c=""),l&&(h?y((me[h]&&me[h].get||g)(l,h,c,f)):function(T,P,O){return y((me[T]&&me[T].get||g)(l,T,P,O))})},quickSetter:function(l,h,c){if((l=wr(l)).length>1){var f=l.map(function(B){return Xe.quickSetter(B,h,c)}),g=f.length;return function(B){for(var Q=g;Q--;)f[Q](B)}}var y=me[h],T=Er(l=l[0]||{}),P=T.harness&&(T.harness.aliases||{})[h]||h,O=y?function(B){var Q=new y;On._pt=0,Q.init(l,c?B+c:B,On,0,[l]),Q.render(1,Q),On._pt&&Si(1,On)}:T.set(l,P);return y?O:function(B){return O(l,P,c?B+c:B,T,1)}},quickTo:function(l,h,c){var f,g=Xe.to(l,nt(((f={})[h]="+=0.1",f.paused=!0,f),c||{})),y=function(P,O,B){return g.resetTo(h,P,O,B)};return y.tween=g,y},isTweening:function(l){return E.getTweensOf(l,!0).length>0},defaults:function(l){return l&&l.ease&&(l.ease=dn(l.ease,o.ease)),ve(o,l||{})},config:function(l){return ve(lt,l||{})},registerEffect:function(l){var h=l.name,c=l.effect,g=l.defaults,y=l.extendTimeline;(l.plugins||"").split(",").forEach(function(T){return T&&!me[T]&&!Y[T]&&Dt(h+" effect requires "+T+" plugin.")}),yr[h]=function(T,P,O){return c(wr(T),Ke(P||{},g),O)},y&&(ur.prototype[h]=function(T,P,O){return this.add(yr[h](T,ht(P)?P:(O=P)&&{},this),O)})},registerEase:function(l,h){be[l]=dn(h)},parseEase:function(l,h){return arguments.length?dn(l,h):be},getById:function(l){return E.getById(l)},exportRoot:function(l,h){void 0===l&&(l={});var f,g,c=new ur(l);for(c.smoothChildTiming=wt(l.smoothChildTiming),E.remove(c),c._dp=0,c._time=c._tTime=E._time,f=E._first;f;)g=f._next,(h||!(!f._dur&&f instanceof He&&f.vars.onComplete===f._targets[0]))&&vr(c,f,f._start-f._delay),f=g;return vr(E,c,0),c},context:function(l,h){return l?new bo(l,h):K},matchMedia:function(l){return new aa(l)},matchMediaRefresh:function(){return _n.forEach(function(l){var c,f,h=l.conditions;for(f in h)h[f]&&(h[f]=!1,c=1);c&&l.revert()})||Ei()},addEventListener:function(l,h){var c=ni[l]||(ni[l]=[]);~c.indexOf(h)||c.push(h)},removeEventListener:function(l,h){var c=ni[l],f=c&&c.indexOf(h);f>=0&&c.splice(f,1)},utils:{wrap:function R(l,h,c){var f=h-l;return H(l)?eo(l,R(0,l.length),h):Ur(c,function(g){return(f+(g-l)%f)%f+l})},wrapYoyo:function R(l,h,c){var f=h-l,g=2*f;return H(l)?eo(l,R(0,l.length-1),h):Ur(c,function(y){return l+((y=(g+(y-l)%g)%g||0)>f?g-y:y)})},distribute:qi,random:to,snap:Ki,normalize:function(l,h,c){return ro(l,h,0,1,c)},getUnit:tr,clamp:function(l,h,c){return Ur(c,function(f){return jr(l,h,f)})},splitColor:Mn,toArray:wr,selector:vi,mapRange:ro,pipe:function(){for(var l=arguments.length,h=new Array(l),c=0;c<l;c++)h[c]=arguments[c];return function(f){return h.reduce(function(g,y){return y(g)},f)}},unitize:function(l,h){return function(c){return l(parseFloat(c))+(h||tr(c))}},interpolate:function R(l,h,c,f){var g=isNaN(l+h)?0:function(ot){return(1-ot)*l+ot*h};if(!g){var P,O,B,Q,q,y=bt(l),T={};if(!0===c&&(f=1)&&(c=null),y)l={p:l},h={p:h};else if(H(l)&&!H(h)){for(B=[],q=(Q=l.length)-2,O=1;O<Q;O++)B.push(R(l[O-1],l[O]));Q--,g=function(pt){pt*=Q;var z=Math.min(q,~~pt);return B[z](pt-z)},c=h}else f||(l=nt(H(l)?[]:{},l));if(!B){for(P in h)bi.call(T,l,P,"get",h[P]);g=function(pt){return Si(pt,T)||(y?l.p:l)}}}return Ur(c,g)},shuffle:Qi},install:St,effects:yr,ticker:Cr,updateRoot:ur.updateRoot,plugins:me,globalTimeline:E,core:{PropTween:gr,globals:It,Tween:He,Timeline:ur,Animation:zn,getCache:Er,_removeLinkedListItem:xr,reverting:function(){return W},context:function(l){return l&&K&&(K.data.push(l),l._ctx=K),K},suppressOverwrites:function(l){return yt=l}}};qe("to,from,fromTo,delayedCall,set,killTweensOf",function(R){return ii[R]=He[R]}),Cr.add(ur.updateRoot),On=ii.to({},{duration:0});var sa=function(l,h){for(var c=l._pt;c&&c.p!==h&&c.op!==h&&c.fp!==h;)c=c._next;return c},Oi=function(l,h){return{name:l,rawVars:1,init:function(f,g,y){y._onInit=function(T){var P,O;if(bt(g)&&(P={},qe(g,function(B){return P[B]=1}),g=P),h){for(O in P={},g)P[O]=h(g[O]);g=P}!function(l,h){var f,g,y,c=l._targets;for(f in h)for(g=c.length;g--;)(y=l._ptLookup[g][f])&&(y=y.d)&&(y._pt&&(y=sa(y,f)),y&&y.modifier&&y.modifier(h[f],l,c[g],f))}(T,g)}}}},Xe=ii.registerPlugin({name:"attr",init:function(l,h,c,f,g){var y,T,P;for(y in this.tween=c,h)P=l.getAttribute(y)||"",(T=this.add(l,"setAttribute",(P||0)+"",h[y],f,g,0,0,y)).op=y,T.b=P,this._props.push(y)},render:function(l,h){for(var c=h._pt;c;)W?c.set(c.t,c.p,c.b,c):c.r(l,c.d),c=c._next}},{name:"endArray",init:function(l,h){for(var c=h.length;c--;)this.add(l,c,l[c]||0,h[c],0,0,0,0,0,1)}},Oi("roundProps",_i),Oi("modifiers"),Oi("snap",Ki))||ii;He.version=ur.version=Xe.version="3.12.5",ct=1,V()&&Yr();var Mr,en,In,Ai,_,p,w,Dn,zt={},Ee=180/Math.PI,Lr=Math.PI/180,rn=Math.atan2,xo=1e8,Mi=/([A-Z])/g,ha=/(left|right|width|margin|padding|x)/i,ca=/[\s,\(]\S/,Gr={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Zr=function(l,h){return h.set(h.t,h.p,Math.round(1e4*(h.s+h.c*l))/1e4+h.u,h)},Ri=function(l,h){return h.set(h.t,h.p,1===l?h.e:Math.round(1e4*(h.s+h.c*l))/1e4+h.u,h)},Ii=function(l,h){return h.set(h.t,h.p,l?Math.round(1e4*(h.s+h.c*l))/1e4+h.u:h.b,h)},fa=function(l,h){var c=h.s+h.c*l;h.set(h.t,h.p,~~(c+(c<0?-.5:.5))+h.u,h)},Co=function(l,h){return h.set(h.t,h.p,l?h.e:h.b,h)},To=function(l,h){return h.set(h.t,h.p,1!==l?h.b:h.e,h)},da=function(l,h,c){return l.style[h]=c},Ka=function(l,h,c){return l.style.setProperty(h,c)},wo=function(l,h,c){return l._gsap[h]=c},pa=function(l,h,c){return l._gsap.scaleX=l._gsap.scaleY=c},ts=function(l,h,c,f,g){var y=l._gsap;y.scaleX=y.scaleY=c,y.renderTransform(g,y)},So=function(l,h,c,f,g){var y=l._gsap;y[h]=c,y.renderTransform(g,y)},ke="transform",Sr=ke+"Origin",Bi=function R(l,h){var c=this,f=this.target,g=f.style,y=f._gsap;if(l in zt&&g){if(this.tfm=this.tfm||{},"transform"===l)return Gr.transform.split(",").forEach(function(T){return R.call(c,T,h)});if(~(l=Gr[l]||l).indexOf(",")?l.split(",").forEach(function(T){return c.tfm[T]=nn(f,T)}):this.tfm[l]=y.x?y[l]:nn(f,l),l===Sr&&(this.tfm.zOrigin=y.zOrigin),this.props.indexOf(ke)>=0)return;y.svg&&(this.svgo=f.getAttribute("data-svg-origin"),this.props.push(Sr,h,"")),l=ke}(g||h)&&this.props.push(l,h,g[l])},Po=function(l){l.translate&&(l.removeProperty("translate"),l.removeProperty("scale"),l.removeProperty("rotate"))},va=function(){var g,y,l=this.props,h=this.target,c=h.style,f=h._gsap;for(g=0;g<l.length;g+=3)l[g+1]?h[l[g]]=l[g+2]:l[g+2]?c[l[g]]=l[g+2]:c.removeProperty("--"===l[g].substr(0,2)?l[g]:l[g].replace(Mi,"-$1").toLowerCase());if(this.tfm){for(y in this.tfm)f[y]=this.tfm[y];f.svg&&(f.renderTransform(),h.setAttribute("data-svg-origin",this.svgo||"")),(!(g=w())||!g.isStart)&&!c[ke]&&(Po(c),f.zOrigin&&c[Sr]&&(c[Sr]+=" "+f.zOrigin+"px",f.zOrigin=0,f.renderTransform()),f.uncache=1)}},Bn=function(l,h){var c={target:l,props:[],revert:va,save:Bi};return l._gsap||Xe.core.getCache(l),h&&h.split(",").forEach(function(f){return c.save(f)}),c},_a=function(l,h){var c=en.createElementNS?en.createElementNS((h||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),l):en.createElement(l);return c&&c.style?c:en.createElement(l)},hr=function R(l,h,c){var f=getComputedStyle(l);return f[h]||f.getPropertyValue(h.replace(Mi,"-$1").toLowerCase())||f.getPropertyValue(h)||!c&&R(l,$e(h)||h,1)||""},ga="O,Moz,ms,Ms,Webkit".split(","),$e=function(l,h,c){var g=(h||_).style,y=5;if(l in g&&!c)return l;for(l=l.charAt(0).toUpperCase()+l.substr(1);y--&&!(ga[y]+l in g););return y<0?null:(3===y?"ms":y>=0?ga[y]:"")+l},Di=function(){"undefined"!=typeof window&&window.document&&(Mr=window,In=(en=Mr.document).documentElement,_=_a("div")||{style:{}},_a("div"),ke=$e(ke),Sr=ke+"Origin",_.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Dn=!!$e("perspective"),w=Xe.core.reverting,Ai=1)},mr=function R(l){var y,h=_a("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),c=this.parentNode,f=this.nextSibling,g=this.style.cssText;if(In.appendChild(h),h.appendChild(this),this.style.display="block",l)try{y=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=R}catch(T){}else this._gsapBBox&&(y=this._gsapBBox());return c&&(f?c.insertBefore(this,f):c.appendChild(this)),In.removeChild(h),this.style.cssText=g,y},Rr=function(l,h){for(var c=h.length;c--;)if(l.hasAttribute(h[c]))return l.getAttribute(h[c])},es=function(l){var h;try{h=l.getBBox()}catch(c){h=mr.call(l,!0)}return h&&(h.width||h.height)||l.getBBox===mr||(h=mr.call(l,!0)),!h||h.width||h.x||h.y?h:{x:+Rr(l,["x","cx","x1"])||0,y:+Rr(l,["y","cy","y1"])||0,width:0,height:0}},rs=function(l){return!(!l.getCTM||l.parentNode&&!l.ownerSVGElement||!es(l))},gn=function(l,h){if(h){var f,c=l.style;h in zt&&h!==Sr&&(h=ke),c.removeProperty?(("ms"===(f=h.substr(0,2))||"webkit"===h.substr(0,6))&&(h="-"+h),c.removeProperty("--"===f?h:h.replace(Mi,"-$1").toLowerCase())):c.removeAttribute(h)}},mn=function(l,h,c,f,g,y){var T=new gr(l._pt,h,c,0,1,y?To:Co);return l._pt=T,T.b=f,T.e=g,l._props.push(c),T},ma={deg:1,rad:1,turn:1},Bs={grid:1,flex:1},zr=function R(l,h,c,f){var pt,z,_t,Tt,g=parseFloat(c)||0,y=(c+"").trim().substr((g+"").length)||"px",T=_.style,P=ha.test(h),O="svg"===l.tagName.toLowerCase(),B=(O?"client":"offset")+(P?"Width":"Height"),Q=100,q="px"===f,ot="%"===f;if(f===y||!g||ma[f]||ma[y])return g;if("px"!==y&&!q&&(g=R(l,h,c,"px")),Tt=l.getCTM&&rs(l),(ot||"%"===y)&&(zt[h]||~h.indexOf("adius")))return pt=Tt?l.getBBox()[P?"width":"height"]:l[B],Be(ot?g/pt*Q:g/100*pt);if(T[P?"width":"height"]=Q+(q?y:f),z=~h.indexOf("adius")||"em"===f&&l.appendChild&&!O?l:l.parentNode,Tt&&(z=(l.ownerSVGElement||{}).parentNode),(!z||z===en||!z.appendChild)&&(z=en.body),(_t=z._gsap)&&ot&&_t.width&&P&&_t.time===Cr.time&&!_t.uncache)return Be(g/_t.width*Q);if(!ot||"height"!==h&&"width"!==h)(ot||"%"===y)&&!Bs[hr(z,"display")]&&(T.position=hr(l,"position")),z===l&&(T.position="static"),z.appendChild(_),pt=_[B],z.removeChild(_),T.position="absolute";else{var Bt=l.style[h];l.style[h]=Q+f,pt=l[B],Bt?l.style[h]=Bt:gn(l,h)}return P&&ot&&((_t=Er(z)).time=Cr.time,_t.width=z[B]),Be(q?pt*g/Q:pt&&g?Q/pt*g:0)},nn=function(l,h,c,f){var g;return Ai||Di(),h in Gr&&"transform"!==h&&~(h=Gr[h]).indexOf(",")&&(h=h.split(",")[0]),zt[h]&&"transform"!==h?(g=ki(l,f),g="transformOrigin"!==h?g[h]:g.svg?g.origin:yn(hr(l,Sr))+" "+g.zOrigin+"px"):(!(g=l.style[h])||"auto"===g||f||~(g+"").indexOf("calc("))&&(g=je[h]&&je[h](l,h,c)||hr(l,h)||ln(l,h)||("opacity"===h?1:0)),c&&!~(g+"").trim().indexOf(" ")?zr(l,h,g,c)+c:g},Fi=function(l,h,c,f){if(!c||"none"===c){var g=$e(h,l,1),y=g&&hr(l,g,1);y&&y!==c?(h=g,c=y):"borderColor"===h&&(c=hr(l,"borderTopColor"))}var B,Q,q,ot,pt,z,_t,Tt,Bt,Ht,Ft,T=new gr(this._pt,l.style,h,0,1,go),P=0,O=0;if(T.b=c,T.e=f,c+="","auto"==(f+="")&&(z=l.style[h],l.style[h]=f,f=hr(l,h)||f,z?l.style[h]=z:gn(l,h)),so(B=[c,f]),f=B[1],q=(c=B[0]).match(te)||[],(f.match(te)||[]).length){for(;Q=te.exec(f);)_t=Q[0],Bt=f.substring(P,Q.index),pt?pt=(pt+1)%5:("rgba("===Bt.substr(-5)||"hsla("===Bt.substr(-5))&&(pt=1),_t!==(z=q[O++]||"")&&(ot=parseFloat(z)||0,Ft=z.substr((ot+"").length),"="===_t.charAt(1)&&(_t=br(ot,_t)+Ft),Tt=parseFloat(_t),Ht=_t.substr((Tt+"").length),P=te.lastIndex-Ht.length,Ht||(Ht=Ht||lt.units[h]||Ft,P===f.length&&(f+=Ht,T.e+=Ht)),Ft!==Ht&&(ot=zr(l,h,z,Ht)||0),T._pt={_next:T._pt,p:Bt||1===O?Bt:",",s:ot,c:Tt-ot,m:pt&&pt<4||"zIndex"===h?Math.round:0});T.c=P<f.length?f.substring(P,f.length):""}else T.r="display"===h&&"none"===f?To:Co;return Mt.test(f)&&(T.e=0),this._pt=T,T},Ni={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Ds=function(l){var h=l.split(" "),c=h[0],f=h[1]||"50%";return("top"===c||"bottom"===c||"left"===f||"right"===f)&&(l=c,c=f,f=l),h[0]=Ni[c]||c,h[1]=Ni[f]||f,h.join(" ")},Fs=function(l,h){if(h.tween&&h.tween._time===h.tween._dur){var T,P,O,c=h.t,f=c.style,g=h.u,y=c._gsap;if("all"===g||!0===g)f.cssText="",P=1;else for(O=(g=g.split(",")).length;--O>-1;)zt[T=g[O]]&&(P=1,T="transformOrigin"===T?Sr:ke),gn(c,T);P&&(gn(c,ke),y&&(y.svg&&c.removeAttribute("transform"),ki(c,1),y.uncache=1,Po(f)))}},je={clearProps:function(l,h,c,f,g){if("isFromStart"!==g.data){var y=l._pt=new gr(l._pt,h,c,0,0,Fs);return y.u=f,y.pr=-10,y.tween=g,l._props.push(c),1}}},Oe=[1,0,0,1,0,0],Ui={},Ce=function(l){return"matrix(1, 0, 0, 1, 0, 0)"===l||"none"===l||!l},ns=function(l){var h=hr(l,ke);return Ce(h)?Oe:h.substr(7).match(Vt).map(Be)},ya=function(l,h){var y,T,P,O,c=l._gsap||Er(l),f=l.style,g=ns(l);return c.svg&&l.getAttribute("transform")?"1,0,0,1,0,0"===(g=[(P=l.transform.baseVal.consolidate().matrix).a,P.b,P.c,P.d,P.e,P.f]).join(",")?Oe:g:(g===Oe&&!l.offsetParent&&l!==In&&!c.svg&&(P=f.display,f.display="block",(!(y=l.parentNode)||!l.offsetParent)&&(O=1,T=l.nextElementSibling,In.appendChild(l)),g=ns(l),P?f.display=P:gn(l,"display"),O&&(T?y.insertBefore(l,T):y?y.appendChild(l):In.removeChild(l))),h&&g.length>6?[g[0],g[1],g[4],g[5],g[12],g[13]]:g)},oi=function(l,h,c,f,g,y){var $t,Et,Lt,T=l._gsap,P=g||ya(l,!0),O=T.xOrigin||0,B=T.yOrigin||0,Q=T.xOffset||0,q=T.yOffset||0,ot=P[0],pt=P[1],z=P[2],_t=P[3],Tt=P[4],Bt=P[5],Ht=h.split(" "),Ft=parseFloat(Ht[0])||0,Rt=parseFloat(Ht[1])||0;c?P!==Oe&&(Et=ot*_t-pt*z)&&(Lt=Ft*(-pt/Et)+Rt*(ot/Et)-(ot*Bt-pt*Tt)/Et,Ft=Ft*(_t/Et)+Rt*(-z/Et)+(z*Bt-_t*Tt)/Et,Rt=Lt):(Ft=($t=es(l)).x+(~Ht[0].indexOf("%")?Ft/100*$t.width:Ft),Rt=$t.y+(~(Ht[1]||Ht[0]).indexOf("%")?Rt/100*$t.height:Rt)),f||!1!==f&&T.smooth?(T.xOffset=Q+((Tt=Ft-O)*ot+(Bt=Rt-B)*z)-Tt,T.yOffset=q+(Tt*pt+Bt*_t)-Bt):T.xOffset=T.yOffset=0,T.xOrigin=Ft,T.yOrigin=Rt,T.smooth=!!f,T.origin=h,T.originIsAbsolute=!!c,l.style[Sr]="0px 0px",y&&(mn(y,T,"xOrigin",O,Ft),mn(y,T,"yOrigin",B,Rt),mn(y,T,"xOffset",Q,T.xOffset),mn(y,T,"yOffset",q,T.yOffset)),l.setAttribute("data-svg-origin",Ft+" "+Rt)},ki=function(l,h){var c=l._gsap||new co(l);if("x"in c&&!h&&!c.uncache)return c;var B,Q,q,ot,pt,z,_t,Tt,Bt,Ht,Ft,Rt,$t,Et,qt,Lt,ye,Ne,De,Me,sr,rr,Ve,nr,Wr,ai,si,li,Fn,Gi,he,Dr,f=l.style,g=c.scaleX<0,y="px",T="deg",P=getComputedStyle(l),O=hr(l,Sr)||"0";return B=Q=q=z=_t=Tt=Bt=Ht=Ft=0,ot=pt=1,c.svg=!(!l.getCTM||!rs(l)),P.translate&&(("none"!==P.translate||"none"!==P.scale||"none"!==P.rotate)&&(f[ke]=("none"!==P.translate?"translate3d("+(P.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==P.rotate?"rotate("+P.rotate+") ":"")+("none"!==P.scale?"scale("+P.scale.split(" ").join(",")+") ":"")+("none"!==P[ke]?P[ke]:"")),f.scale=f.rotate=f.translate="none"),Et=ya(l,c.svg),c.svg&&(c.uncache?(Wr=l.getBBox(),O=c.xOrigin-Wr.x+"px "+(c.yOrigin-Wr.y)+"px",nr=""):nr=!h&&l.getAttribute("data-svg-origin"),oi(l,nr||O,!!nr||c.originIsAbsolute,!1!==c.smooth,Et)),Rt=c.xOrigin||0,$t=c.yOrigin||0,Et!==Oe&&(Ne=Et[0],De=Et[1],Me=Et[2],sr=Et[3],B=rr=Et[4],Q=Ve=Et[5],6===Et.length?(ot=Math.sqrt(Ne*Ne+De*De),pt=Math.sqrt(sr*sr+Me*Me),z=Ne||De?rn(De,Ne)*Ee:0,(Bt=Me||sr?rn(Me,sr)*Ee+z:0)&&(pt*=Math.abs(Math.cos(Bt*Lr))),c.svg&&(B-=Rt-(Rt*Ne+$t*Me),Q-=$t-(Rt*De+$t*sr))):(Gi=Et[7],si=Et[8],li=Et[9],he=Et[11],B=Et[12],Q=Et[13],q=Et[14],_t=(qt=rn(Dr=Et[6],Fn=Et[10]))*Ee,qt&&(nr=rr*(Lt=Math.cos(-qt))+si*(ye=Math.sin(-qt)),Wr=Ve*Lt+li*ye,ai=Dr*Lt+Fn*ye,si=rr*-ye+si*Lt,li=Ve*-ye+li*Lt,Fn=Dr*-ye+Fn*Lt,he=Gi*-ye+he*Lt,rr=nr,Ve=Wr,Dr=ai),Tt=(qt=rn(-Me,Fn))*Ee,qt&&(Lt=Math.cos(-qt),he=sr*(ye=Math.sin(-qt))+he*Lt,Ne=nr=Ne*Lt-si*ye,De=Wr=De*Lt-li*ye,Me=ai=Me*Lt-Fn*ye),z=(qt=rn(De,Ne))*Ee,qt&&(nr=Ne*(Lt=Math.cos(qt))+De*(ye=Math.sin(qt)),Wr=rr*Lt+Ve*ye,De=De*Lt-Ne*ye,Ve=Ve*Lt-rr*ye,Ne=nr,rr=Wr),_t&&Math.abs(_t)+Math.abs(z)>359.9&&(_t=z=0,Tt=180-Tt),ot=Be(Math.sqrt(Ne*Ne+De*De+Me*Me)),pt=Be(Math.sqrt(Ve*Ve+Dr*Dr)),qt=rn(rr,Ve),Bt=Math.abs(qt)>2e-4?qt*Ee:0,Ft=he?1/(he<0?-he:he):0),c.svg&&(nr=l.getAttribute("transform"),c.forceCSS=l.setAttribute("transform","")||!Ce(hr(l,ke)),nr&&l.setAttribute("transform",nr))),Math.abs(Bt)>90&&Math.abs(Bt)<270&&(g?(ot*=-1,Bt+=z<=0?180:-180,z+=z<=0?180:-180):(pt*=-1,Bt+=Bt<=0?180:-180)),h=h||c.uncache,c.x=B-((c.xPercent=B&&(!h&&c.xPercent||(Math.round(l.offsetWidth/2)===Math.round(-B)?-50:0)))?l.offsetWidth*c.xPercent/100:0)+y,c.y=Q-((c.yPercent=Q&&(!h&&c.yPercent||(Math.round(l.offsetHeight/2)===Math.round(-Q)?-50:0)))?l.offsetHeight*c.yPercent/100:0)+y,c.z=q+y,c.scaleX=Be(ot),c.scaleY=Be(pt),c.rotation=Be(z)+T,c.rotationX=Be(_t)+T,c.rotationY=Be(Tt)+T,c.skewX=Bt+T,c.skewY=Ht+T,c.transformPerspective=Ft+y,(c.zOrigin=parseFloat(O.split(" ")[2])||!h&&c.zOrigin||0)&&(f[Sr]=yn(O)),c.xOffset=c.yOffset=0,c.force3D=lt.force3D,c.renderTransform=c.svg?is:Dn?Eo:Wn,c.uncache=0,c},yn=function(l){return(l=l.split(" "))[0]+" "+l[1]},ze=function(l,h,c){var f=tr(h);return Be(parseFloat(h)+parseFloat(zr(l,"x",c+"px",f)))+f},Wn=function(l,h){h.z="0px",h.rotationY=h.rotationX="0deg",h.force3D=0,Eo(l,h)},Ir="0deg",Vr="0px",Br=") ",Eo=function(l,h){var c=h||this,f=c.xPercent,g=c.yPercent,y=c.x,T=c.y,P=c.z,O=c.rotation,B=c.rotationY,Q=c.rotationX,q=c.skewX,ot=c.skewY,pt=c.scaleX,z=c.scaleY,_t=c.transformPerspective,Tt=c.force3D,Bt=c.target,Ht=c.zOrigin,Ft="",Rt="auto"===Tt&&l&&1!==l||!0===Tt;if(Ht&&(Q!==Ir||B!==Ir)){var Lt,$t=parseFloat(B)*Lr,Et=Math.sin($t),qt=Math.cos($t);$t=parseFloat(Q)*Lr,Lt=Math.cos($t),y=ze(Bt,y,Et*Lt*-Ht),T=ze(Bt,T,-Math.sin($t)*-Ht),P=ze(Bt,P,qt*Lt*-Ht+Ht)}_t!==Vr&&(Ft+="perspective("+_t+Br),(f||g)&&(Ft+="translate("+f+"%, "+g+"%) "),(Rt||y!==Vr||T!==Vr||P!==Vr)&&(Ft+=P!==Vr||Rt?"translate3d("+y+", "+T+", "+P+") ":"translate("+y+", "+T+Br),O!==Ir&&(Ft+="rotate("+O+Br),B!==Ir&&(Ft+="rotateY("+B+Br),Q!==Ir&&(Ft+="rotateX("+Q+Br),(q!==Ir||ot!==Ir)&&(Ft+="skew("+q+", "+ot+Br),(1!==pt||1!==z)&&(Ft+="scale("+pt+", "+z+Br),Bt.style[ke]=Ft||"translate(0, 0)"},is=function(l,h){var Rt,$t,Et,qt,Lt,c=h||this,f=c.xPercent,g=c.yPercent,y=c.x,T=c.y,P=c.rotation,O=c.skewX,B=c.skewY,Q=c.scaleX,q=c.scaleY,ot=c.target,pt=c.xOrigin,z=c.yOrigin,_t=c.xOffset,Tt=c.yOffset,Bt=c.forceCSS,Ht=parseFloat(y),Ft=parseFloat(T);P=parseFloat(P),O=parseFloat(O),(B=parseFloat(B))&&(O+=B=parseFloat(B),P+=B),P||O?(P*=Lr,O*=Lr,Rt=Math.cos(P)*Q,$t=Math.sin(P)*Q,Et=Math.sin(P-O)*-q,qt=Math.cos(P-O)*q,O&&(B*=Lr,Lt=Math.tan(O-B),Et*=Lt=Math.sqrt(1+Lt*Lt),qt*=Lt,B&&(Lt=Math.tan(B),Rt*=Lt=Math.sqrt(1+Lt*Lt),$t*=Lt)),Rt=Be(Rt),$t=Be($t),Et=Be(Et),qt=Be(qt)):(Rt=Q,qt=q,$t=Et=0),(Ht&&!~(y+"").indexOf("px")||Ft&&!~(T+"").indexOf("px"))&&(Ht=zr(ot,"x",y,"px"),Ft=zr(ot,"y",T,"px")),(pt||z||_t||Tt)&&(Ht=Be(Ht+pt-(pt*Rt+z*Et)+_t),Ft=Be(Ft+z-(pt*$t+z*qt)+Tt)),(f||g)&&(Lt=ot.getBBox(),Ht=Be(Ht+f/100*Lt.width),Ft=Be(Ft+g/100*Lt.height)),ot.setAttribute("transform",Lt="matrix("+Rt+","+$t+","+Et+","+qt+","+Ht+","+Ft+")"),Bt&&(ot.style[ke]=Lt)},Oo=function(l,h,c,f,g){var Q,q,y=360,T=bt(g),O=parseFloat(g)*(T&&~g.indexOf("rad")?Ee:1)-f,B=f+O+"deg";return T&&("short"===(Q=g.split("_")[1])&&(O%=y)!=O%180&&(O+=O<0?y:-y),"cw"===Q&&O<0?O=(O+y*xo)%y-~~(O/y)*y:"ccw"===Q&&O>0&&(O=(O-y*xo)%y-~~(O/y)*y)),l._pt=q=new gr(l._pt,h,c,f,O,Ri),q.e=B,q.u="deg",l._props.push(c),q},os=function(l,h){for(var c in h)l[c]=h[c];return l},Le=function(l,h,c){var T,P,O,B,Q,q,pt,f=os({},c._gsap),y=c.style;for(P in f.svg?(O=c.getAttribute("transform"),c.setAttribute("transform",""),y[ke]=h,T=ki(c,1),gn(c,ke),c.setAttribute("transform",O)):(O=getComputedStyle(c)[ke],y[ke]=h,T=ki(c,1),y[ke]=O),zt)(O=f[P])!==(B=T[P])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(P)<0&&(Q=tr(O)!==(pt=tr(B))?zr(c,P,O,pt):parseFloat(O),q=parseFloat(B),l._pt=new gr(l._pt,T,P,Q,q-Q,Zr),l._pt.u=pt||0,l._props.push(P));os(T,f)};qe("padding,margin,Width,Radius",function(R,l){var h="Top",c="Right",f="Bottom",g="Left",y=(l<3?[h,c,f,g]:[h+g,h+c,f+c,f+g]).map(function(T){return l<2?R+T:"border"+T+R});je[l>1?"border"+R:R]=function(T,P,O,B,Q){var q,ot;if(arguments.length<4)return q=y.map(function(pt){return nn(T,pt,O)}),5===(ot=q.join(" ")).split(q[0]).length?q[0]:ot;q=(B+"").split(" "),ot={},y.forEach(function(pt,z){return ot[pt]=q[z]=q[z]||q[(z-1)/2|0]}),T.init(P,ot,Q)}});var ba={name:"css",register:Di,targetTest:function(l){return l.style&&l.nodeType},init:function(l,h,c,f,g){var O,B,Q,q,ot,pt,z,_t,Tt,Bt,Ht,Ft,Rt,$t,Et,qt,y=this._props,T=l.style,P=c.vars.startAt;for(z in Ai||Di(),this.styles=this.styles||Bn(l),qt=this.styles.props,this.tween=c,h)if("autoRound"!==z&&(B=h[z],!me[z]||!fo(z,h,c,f,l,g)))if(pt=je[z],"function"==(ot=typeof B)&&(ot=typeof(B=B.call(c,f,l,g))),"string"===ot&&~B.indexOf("random(")&&(B=er(B)),pt)pt(this,l,z,B,c)&&(Et=1);else if("--"===z.substr(0,2))O=(getComputedStyle(l).getPropertyValue(z)+"").trim(),B+="",Qr.lastIndex=0,Qr.test(O)||(_t=tr(O),Tt=tr(B)),Tt?_t!==Tt&&(O=zr(l,z,O,Tt)+Tt):_t&&(B+=_t),this.add(T,"setProperty",O,B,f,g,0,0,z),y.push(z),qt.push(z,0,T[z]);else if("undefined"!==ot){if(P&&z in P?(O="function"==typeof P[z]?P[z].call(c,f,l,g):P[z],bt(O)&&~O.indexOf("random(")&&(O=er(O)),tr(O+"")||"auto"===O||(O+=lt.units[z]||tr(nn(l,z))||""),"="===(O+"").charAt(1)&&(O=nn(l,z))):O=nn(l,z),q=parseFloat(O),(Bt="string"===ot&&"="===B.charAt(1)&&B.substr(0,2))&&(B=B.substr(2)),Q=parseFloat(B),z in Gr&&("autoAlpha"===z&&(1===q&&"hidden"===nn(l,"visibility")&&Q&&(q=0),qt.push("visibility",0,T.visibility),mn(this,T,"visibility",q?"inherit":"hidden",Q?"inherit":"hidden",!Q)),"scale"!==z&&"transform"!==z&&~(z=Gr[z]).indexOf(",")&&(z=z.split(",")[0])),Ht=z in zt)if(this.styles.save(z),Ft||((Rt=l._gsap).renderTransform&&!h.parseTransform||ki(l,h.parseTransform),$t=!1!==h.smoothOrigin&&Rt.smooth,(Ft=this._pt=new gr(this._pt,T,ke,0,1,Rt.renderTransform,Rt,0,-1)).dep=1),"scale"===z)this._pt=new gr(this._pt,Rt,"scaleY",Rt.scaleY,(Bt?br(Rt.scaleY,Bt+Q):Q)-Rt.scaleY||0,Zr),this._pt.u=0,y.push("scaleY",z),z+="X";else{if("transformOrigin"===z){qt.push(Sr,0,T[Sr]),B=Ds(B),Rt.svg?oi(l,B,0,$t,0,this):((Tt=parseFloat(B.split(" ")[2])||0)!==Rt.zOrigin&&mn(this,Rt,"zOrigin",Rt.zOrigin,Tt),mn(this,T,z,yn(O),yn(B)));continue}if("svgOrigin"===z){oi(l,B,1,$t,0,this);continue}if(z in Ui){Oo(this,Rt,z,q,Bt?br(q,Bt+B):B);continue}if("smoothOrigin"===z){mn(this,Rt,"smooth",Rt.smooth,B);continue}if("force3D"===z){Rt[z]=B;continue}if("transform"===z){Le(this,B,l);continue}}else z in T||(z=$e(z)||z);if(Ht||(Q||0===Q)&&(q||0===q)&&!ca.test(B)&&z in T)Q||(Q=0),(_t=(O+"").substr((q+"").length))!==(Tt=tr(B)||(z in lt.units?lt.units[z]:_t))&&(q=zr(l,z,O,Tt)),this._pt=new gr(this._pt,Ht?Rt:T,z,q,(Bt?br(q,Bt+Q):Q)-q,Ht||"px"!==Tt&&"zIndex"!==z||!1===h.autoRound?Zr:fa),this._pt.u=Tt||0,_t!==Tt&&"%"!==Tt&&(this._pt.b=O,this._pt.r=Ii);else if(z in T)Fi.call(this,l,z,O,Bt?Bt+B:B);else if(z in l)this.add(l,z,O||l[z],Bt?Bt+B:B,f,g);else if("parseTransform"!==z){gt(z,B);continue}Ht||(z in T?qt.push(z,0,T[z]):qt.push(z,1,O||l[z])),y.push(z)}Et&&mo(this)},render:function(l,h){if(h.tween._time||!w())for(var c=h._pt;c;)c.r(l,c.d),c=c._next;else h.styles.revert()},get:nn,aliases:Gr,getSetter:function(l,h,c){var f=Gr[h];return f&&f.indexOf(",")<0&&(h=f),h in zt&&h!==Sr&&(l._gsap.x||nn(l,"x"))?c&&p===c?"scale"===h?pa:wo:(p=c||{})&&("scale"===h?ts:So):l.style&&!rt(l.style[h])?da:~h.indexOf("-")?Ka:wi(l,h)},core:{_removeProperty:gn,_getMatrix:ya}};Xe.utils.checkPrefix=$e,Xe.core.getStyleSaver=Bn,function(R,l,h,c){var f=qe(R+","+l+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(g){zt[g]=1});qe(l,function(g){lt.units[g]="deg",Ui[g]=1}),Gr[f[13]]=R+","+l,qe("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(g){var y=g.split(":");Gr[y[1]]=f[y[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),qe("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(R){lt.units[R]="px"}),Xe.registerPlugin(ba);var Li=Xe.registerPlugin(ba)||Xe},7027:(Ut,Wt,D)=>{"use strict";var N=D(3907),j=function(){return!!N};j.hasArrayLengthDefineBug=function(){if(!N)return null;try{return 1!==N([],"length",{value:1}).length}catch(o){return!0}},Ut.exports=j},9757:Ut=>{"use strict";var Wt={__proto__:null,foo:{}},D=Object;Ut.exports=function(){return{__proto__:Wt}.foo===Wt.foo&&!(Wt instanceof D)}},2969:(Ut,Wt,D)=>{"use strict";var N="undefined"!=typeof Symbol&&Symbol,j=D(1983);Ut.exports=function(){return"function"==typeof N&&"function"==typeof Symbol&&"symbol"==typeof N("foo")&&"symbol"==typeof Symbol("bar")&&j()}},1983:Ut=>{"use strict";Ut.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var D={},N=Symbol("test"),j=Object(N);if("string"==typeof N||"[object Symbol]"!==Object.prototype.toString.call(N)||"[object Symbol]"!==Object.prototype.toString.call(j))return!1;for(N in D[N]=42,D)return!1;if("function"==typeof Object.keys&&0!==Object.keys(D).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(D).length)return!1;var o=Object.getOwnPropertySymbols(D);if(1!==o.length||o[0]!==N||!Object.prototype.propertyIsEnumerable.call(D,N))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var yt=Object.getOwnPropertyDescriptor(D,N);if(42!==yt.value||!0!==yt.enumerable)return!1}return!0}},7699:(Ut,Wt,D)=>{"use strict";var N=Function.prototype.call,j=Object.prototype.hasOwnProperty,lt=D(4444);Ut.exports=lt.call(N,j)},5943:Ut=>{"use strict";var Wt=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;function j(o){if(null==o)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(o)}Ut.exports=function lt(){try{if(!Object.assign)return!1;var o=new String("abc");if(o[5]="de","5"===Object.getOwnPropertyNames(o)[0])return!1;for(var yt={},W=0;W<10;W++)yt["_"+String.fromCharCode(W)]=W;if("0123456789"!==Object.getOwnPropertyNames(yt).map(function(ft){return yt[ft]}).join(""))return!1;var dt={};return"abcdefghijklmnopqrst".split("").forEach(function(ft){dt[ft]=ft}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},dt)).join("")}catch(ft){return!1}}()?Object.assign:function(o,yt){for(var W,dt,K=j(o),ft=1;ft<arguments.length;ft++){for(var ut in W=Object(arguments[ft]))D.call(W,ut)&&(K[ut]=W[ut]);if(Wt){dt=Wt(W);for(var Ot=0;Ot<dt.length;Ot++)N.call(W,dt[Ot])&&(K[dt[Ot]]=W[dt[Ot]])}}return K}},7024:(Ut,Wt,D)=>{var N="function"==typeof Map&&Map.prototype,j=Object.getOwnPropertyDescriptor&&N?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,lt=N&&j&&"function"==typeof j.get?j.get:null,o=N&&Map.prototype.forEach,yt="function"==typeof Set&&Set.prototype,W=Object.getOwnPropertyDescriptor&&yt?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,K=yt&&W&&"function"==typeof W.get?W.get:null,dt=yt&&Set.prototype.forEach,ut="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,Yt="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,at="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,jt=Boolean.prototype.valueOf,bt=Object.prototype.toString,Z=Function.prototype.toString,tt=String.prototype.match,rt=String.prototype.slice,ht=String.prototype.replace,wt=String.prototype.toUpperCase,V=String.prototype.toLowerCase,U=RegExp.prototype.test,st=Array.prototype.concat,H=Array.prototype.join,Kt=Array.prototype.slice,Vt=Math.floor,te="function"==typeof BigInt?BigInt.prototype.valueOf:null,Zt=Object.getOwnPropertySymbols,Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,I="function"==typeof Symbol&&"object"==typeof Symbol.iterator,X="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol,1)?Symbol.toStringTag:null,E=Object.prototype.propertyIsEnumerable,et=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(L){return L.__proto__}:null);function k(L,nt){if(L===1/0||L===-1/0||L!=L||L&&L>-1e3&&L<1e3||U.call(/e/,nt))return nt;var ve=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof L){var _e=L<0?-Vt(-L):Vt(L);if(_e!==L){var xe=String(_e),ue=rt.call(nt,xe.length+1);return ht.call(xe,ve,"$&_")+"."+ht.call(ht.call(ue,/([0-9]{3})/g,"$&_"),/_$/,"")}}return ht.call(nt,ve,"$&_")}var G=D(4654),Y=G.custom,it=ce(Y)?Y:null;function ct(L,nt,ve){var _e="double"===(ve.quoteStyle||nt)?'"':"'";return _e+L+_e}function St(L){return ht.call(String(L),/"/g,"&quot;")}function gt(L){return!("[object Array]"!==me(L)||X&&"object"==typeof L&&X in L)}function It(L){return!("[object RegExp]"!==me(L)||X&&"object"==typeof L&&X in L)}function ce(L){if(I)return L&&"object"==typeof L&&L instanceof Symbol;if("symbol"==typeof L)return!0;if(!L||"object"!=typeof L||!Mt)return!1;try{return Mt.call(L),!0}catch(nt){}return!1}Ut.exports=function L(nt,ve,_e,xe){var ue=ve||{};if(re(ue,"quoteStyle")&&"single"!==ue.quoteStyle&&"double"!==ue.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(re(ue,"maxStringLength")&&("number"==typeof ue.maxStringLength?ue.maxStringLength<0&&ue.maxStringLength!==1/0:null!==ue.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Tr=!re(ue,"customInspect")||ue.customInspect;if("boolean"!=typeof Tr&&"symbol"!==Tr)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(re(ue,"indent")&&null!==ue.indent&&"\t"!==ue.indent&&!(parseInt(ue.indent,10)===ue.indent&&ue.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(re(ue,"numericSeparator")&&"boolean"!=typeof ue.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var xr=ue.numericSeparator;if(void 0===nt)return"undefined";if(null===nt)return"null";if("boolean"==typeof nt)return nt?"true":"false";if("string"==typeof nt)return Be(nt,ue);if("number"==typeof nt){if(0===nt)return 1/0/nt>0?"0":"-0";var Ue=String(nt);return xr?k(nt,Ue):Ue}if("bigint"==typeof nt){var ar=String(nt)+"n";return xr?k(nt,ar):ar}var Pn=void 0===ue.depth?5:ue.depth;if(void 0===_e&&(_e=0),_e>=Pn&&Pn>0&&"object"==typeof nt)return gt(nt)?"[Array]":"[Object]";var We=function pr(L,nt){var ve;if("\t"===L.indent)ve="\t";else{if(!("number"==typeof L.indent&&L.indent>0))return null;ve=H.call(Array(L.indent+1)," ")}return{base:ve,prev:H.call(Array(nt+1),ve)}}(ue,_e);if(void 0===xe)xe=[];else if(fr(xe,nt)>=0)return"[Circular]";function Je(Ze,Nr,Ur){if(Nr&&(xe=Kt.call(xe)).push(Nr),Ur){var jr={depth:ue.depth};return re(ue,"quoteStyle")&&(jr.quoteStyle=ue.quoteStyle),L(Ze,jr,_e+1,xe)}return L(Ze,ue,_e+1,xe)}if("function"==typeof nt&&!It(nt)){var Hn=function yr(L){if(L.name)return L.name;var nt=tt.call(Z.call(L),/^function\s*([\w$]+)/);return nt?nt[1]:null}(nt),Fr=Ke(nt,Je);return"[Function"+(Hn?": "+Hn:" (anonymous)")+"]"+(Fr.length>0?" { "+H.call(Fr,", ")+" }":"")}if(ce(nt)){var Hr=I?ht.call(String(nt),/^(Symbol\(.*\))_[^)]*$/,"$1"):Mt.call(nt);return"object"!=typeof nt||I?Hr:br(Hr)}if(function qe(L){return!(!L||"object"!=typeof L)&&("undefined"!=typeof HTMLElement&&L instanceof HTMLElement||"string"==typeof L.nodeName&&"function"==typeof L.getAttribute)}(nt)){for(var Or="<"+V.call(String(nt.nodeName)),$r=nt.attributes||[],un=0;un<$r.length;un++)Or+=" "+$r[un].name+"="+ct(St($r[un].value),"double",ue);return Or+=">",nt.childNodes&&nt.childNodes.length&&(Or+="..."),Or+"</"+V.call(String(nt.nodeName))+">"}if(gt(nt)){if(0===nt.length)return"[]";var vr=Ke(nt,Je);return We&&!function Kn(L){for(var nt=0;nt<L.length;nt++)if(fr(L[nt],"\n")>=0)return!1;return!0}(vr)?"["+Sn(vr,We)+"]":"[ "+H.call(vr,", ")+" ]"}if(function Xt(L){return!("[object Error]"!==me(L)||X&&"object"==typeof L&&X in L)}(nt)){var En=Ke(nt,Je);return"cause"in Error.prototype||!("cause"in nt)||E.call(nt,"cause")?0===En.length?"["+String(nt)+"]":"{ ["+String(nt)+"] "+H.call(En,", ")+" }":"{ ["+String(nt)+"] "+H.call(st.call("[cause]: "+Je(nt.cause),En),", ")+" }"}if("object"==typeof nt&&Tr){if(it&&"function"==typeof nt[it]&&G)return G(nt,{depth:Pn-_e});if("symbol"!==Tr&&"function"==typeof nt.inspect)return nt.inspect()}if(function Ye(L){if(!lt||!L||"object"!=typeof L)return!1;try{lt.call(L);try{K.call(L)}catch(nt){return!0}return L instanceof Map}catch(nt){}return!1}(nt)){var Xn=[];return o&&o.call(nt,function(Ze,Nr){Xn.push(Je(Nr,nt,!0)+" => "+Je(Ze,nt))}),Jr("Map",lt.call(nt),Xn,We)}if(function Er(L){if(!K||!L||"object"!=typeof L)return!1;try{K.call(L);try{lt.call(L)}catch(nt){return!0}return L instanceof Set}catch(nt){}return!1}(nt)){var ti=[];return dt&&dt.call(nt,function(Ze){ti.push(Je(Ze,nt))}),Jr("Set",K.call(nt),ti,We)}if(function or(L){if(!ut||!L||"object"!=typeof L)return!1;try{ut.call(L,ut);try{Yt.call(L,Yt)}catch(nt){return!0}return L instanceof WeakMap}catch(nt){}return!1}(nt))return wn("WeakMap");if(function ln(L){if(!Yt||!L||"object"!=typeof L)return!1;try{Yt.call(L,Yt);try{ut.call(L,ut)}catch(nt){return!0}return L instanceof WeakSet}catch(nt){}return!1}(nt))return wn("WeakSet");if(function dr(L){if(!at||!L||"object"!=typeof L)return!1;try{return at.call(L),!0}catch(nt){}return!1}(nt))return wn("WeakRef");if(function Qt(L){return!("[object Number]"!==me(L)||X&&"object"==typeof L&&X in L)}(nt))return br(Je(Number(nt)));if(function fe(L){if(!L||"object"!=typeof L||!te)return!1;try{return te.call(L),!0}catch(nt){}return!1}(nt))return br(Je(te.call(nt)));if(function ee(L){return!("[object Boolean]"!==me(L)||X&&"object"==typeof L&&X in L)}(nt))return br(jt.call(nt));if(function Jt(L){return!("[object String]"!==me(L)||X&&"object"==typeof L&&X in L)}(nt))return br(Je(String(nt)));if("undefined"!=typeof window&&nt===window)return"{ [object Window] }";if("undefined"!=typeof globalThis&&nt===globalThis||"undefined"!=typeof global&&nt===global)return"{ [object globalThis] }";if(!function Dt(L){return!("[object Date]"!==me(L)||X&&"object"==typeof L&&X in L)}(nt)&&!It(nt)){var hn=Ke(nt,Je),ei=et?et(nt)===Object.prototype:nt instanceof Object||nt.constructor===Object,jn=nt instanceof Object?"":"null prototype",Xr=!ei&&X&&Object(nt)===nt&&X in nt?rt.call(me(nt),8,-1):jn?"Object":"",Ar=(ei||"function"!=typeof nt.constructor?"":nt.constructor.name?nt.constructor.name+" ":"")+(Xr||jn?"["+H.call(st.call([],Xr||[],jn||[]),": ")+"] ":"");return 0===hn.length?Ar+"{}":We?Ar+"{"+Sn(hn,We)+"}":Ar+"{ "+H.call(hn,", ")+" }"}return String(nt)};var ne=Object.prototype.hasOwnProperty||function(L){return L in this};function re(L,nt){return ne.call(L,nt)}function me(L){return bt.call(L)}function fr(L,nt){if(L.indexOf)return L.indexOf(nt);for(var ve=0,_e=L.length;ve<_e;ve++)if(L[ve]===nt)return ve;return-1}function Be(L,nt){if(L.length>nt.maxStringLength){var ve=L.length-nt.maxStringLength,_e="... "+ve+" more character"+(ve>1?"s":"");return Be(rt.call(L,0,nt.maxStringLength),nt)+_e}return ct(ht.call(ht.call(L,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,ie),"single",nt)}function ie(L){var nt=L.charCodeAt(0),ve={8:"b",9:"t",10:"n",12:"f",13:"r"}[nt];return ve?"\\"+ve:"\\x"+(nt<16?"0":"")+wt.call(nt.toString(16))}function br(L){return"Object("+L+")"}function wn(L){return L+" { ? }"}function Jr(L,nt,ve,_e){return L+" ("+nt+") {"+(_e?Sn(ve,_e):H.call(ve,", "))+"}"}function Sn(L,nt){if(0===L.length)return"";var ve="\n"+nt.prev+nt.base;return ve+H.call(L,","+ve)+"\n"+nt.prev}function Ke(L,nt){var ve=gt(L),_e=[];if(ve){_e.length=L.length;for(var xe=0;xe<L.length;xe++)_e[xe]=re(L,xe)?nt(L[xe],L):""}var Tr,ue="function"==typeof Zt?Zt(L):[];if(I){Tr={};for(var xr=0;xr<ue.length;xr++)Tr["$"+ue[xr]]=ue[xr]}for(var Ue in L)!re(L,Ue)||ve&&String(Number(Ue))===Ue&&Ue<L.length||I&&Tr["$"+Ue]instanceof Symbol||(U.call(/[^\w$]/,Ue)?_e.push(nt(Ue,L)+": "+nt(L[Ue],L)):_e.push(Ue+": "+nt(L[Ue],L)));if("function"==typeof Zt)for(var ar=0;ar<ue.length;ar++)E.call(L,ue[ar])&&_e.push("["+nt(ue[ar])+"]: "+nt(L[ue[ar]],L));return _e}},6117:function(Ut,Wt,D){var N;Ut=D.nmd(Ut),function(j){"object"==typeof global&&global;var W,K=2147483647,bt=/^xn--/,Z=/[^\x20-\x7E]/,tt=/[\x2E\u3002\uFF0E\uFF61]/g,rt={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},wt=Math.floor,V=String.fromCharCode;function st(G){throw new RangeError(rt[G])}function H(G,Y){for(var it=G.length,ct=[];it--;)ct[it]=Y(G[it]);return ct}function Kt(G,Y){var it=G.split("@"),ct="";return it.length>1&&(ct=it[0]+"@",G=it[1]),ct+H((G=G.replace(tt,".")).split("."),Y).join(".")}function Vt(G){for(var St,gt,Y=[],it=0,ct=G.length;it<ct;)(St=G.charCodeAt(it++))>=55296&&St<=56319&&it<ct?56320==(64512&(gt=G.charCodeAt(it++)))?Y.push(((1023&St)<<10)+(1023&gt)+65536):(Y.push(St),it--):Y.push(St);return Y}function te(G){return H(G,function(Y){var it="";return Y>65535&&(it+=V((Y-=65536)>>>10&1023|55296),Y=56320|1023&Y),it+V(Y)}).join("")}function Zt(G){return G-48<10?G-22:G-65<26?G-65:G-97<26?G-97:36}function Mt(G,Y){return G+22+75*(G<26)-((0!=Y)<<5)}function I(G,Y,it){var ct=0;for(G=it?wt(G/700):G>>1,G+=wt(G/Y);G>455;ct+=36)G=wt(G/35);return wt(ct+36*G/(G+38))}function X(G){var ct,It,Xt,Jt,Qt,ee,ce,fe,ne,re,Y=[],it=G.length,St=0,gt=128,Dt=72;for((It=G.lastIndexOf("-"))<0&&(It=0),Xt=0;Xt<It;++Xt)G.charCodeAt(Xt)>=128&&st("not-basic"),Y.push(G.charCodeAt(Xt));for(Jt=It>0?It+1:0;Jt<it;){for(Qt=St,ee=1,ce=36;Jt>=it&&st("invalid-input"),((fe=Zt(G.charCodeAt(Jt++)))>=36||fe>wt((K-St)/ee))&&st("overflow"),St+=fe*ee,!(fe<(ne=ce<=Dt?1:ce>=Dt+26?26:ce-Dt));ce+=36)ee>wt(K/(re=36-ne))&&st("overflow"),ee*=re;Dt=I(St-Qt,ct=Y.length+1,0==Qt),wt(St/ct)>K-gt&&st("overflow"),gt+=wt(St/ct),St%=ct,Y.splice(St++,0,gt)}return te(Y)}function E(G){var Y,it,ct,St,gt,Dt,It,Xt,Jt,Qt,ee,fe,ne,re,me,ce=[];for(fe=(G=Vt(G)).length,Y=128,it=0,gt=72,Dt=0;Dt<fe;++Dt)(ee=G[Dt])<128&&ce.push(V(ee));for(ct=St=ce.length,St&&ce.push("-");ct<fe;){for(It=K,Dt=0;Dt<fe;++Dt)(ee=G[Dt])>=Y&&ee<It&&(It=ee);for(It-Y>wt((K-it)/(ne=ct+1))&&st("overflow"),it+=(It-Y)*ne,Y=It,Dt=0;Dt<fe;++Dt)if((ee=G[Dt])<Y&&++it>K&&st("overflow"),ee==Y){for(Xt=it,Jt=36;!(Xt<(Qt=Jt<=gt?1:Jt>=gt+26?26:Jt-gt));Jt+=36)ce.push(V(Mt(Qt+(me=Xt-Qt)%(re=36-Qt),0))),Xt=wt(me/re);ce.push(V(Mt(Xt,0))),gt=I(it,ne,ct==St),it=0,++ct}++it,++Y}return ce.join("")}W={version:"1.4.1",ucs2:{decode:Vt,encode:te},decode:X,encode:E,toASCII:function k(G){return Kt(G,function(Y){return Z.test(Y)?"xn--"+E(Y):Y})},toUnicode:function et(G){return Kt(G,function(Y){return bt.test(Y)?X(Y.slice(4).toLowerCase()):Y})}},void 0!==(N=function(){return W}.call(Wt,D,Wt,Ut))&&(Ut.exports=N)}()},9165:Ut=>{"use strict";var Wt=String.prototype.replace,D=/%20/g;Ut.exports={default:"RFC3986",formatters:{RFC1738:function(j){return Wt.call(j,D,"+")},RFC3986:function(j){return String(j)}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},1781:(Ut,Wt,D)=>{"use strict";var N=D(3726),j=D(6954),lt=D(9165);Ut.exports={formats:lt,parse:j,stringify:N}},6954:(Ut,Wt,D)=>{"use strict";var N=D(4393),j=Object.prototype.hasOwnProperty,lt=Array.isArray,o={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:N.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},W=function(xt,at){return xt&&"string"==typeof xt&&at.comma&&xt.indexOf(",")>-1?xt.split(","):xt},Ot=function(at,jt,bt,Z){if(at){var tt=bt.allowDots?at.replace(/\.([^.[]+)/g,"[$1]"):at,ht=/(\[[^[\]]*])/g,wt=bt.depth>0&&/(\[[^[\]]*])/.exec(tt),V=wt?tt.slice(0,wt.index):tt,U=[];if(V){if(!bt.plainObjects&&j.call(Object.prototype,V)&&!bt.allowPrototypes)return;U.push(V)}for(var st=0;bt.depth>0&&null!==(wt=ht.exec(tt))&&st<bt.depth;){if(st+=1,!bt.plainObjects&&j.call(Object.prototype,wt[1].slice(1,-1))&&!bt.allowPrototypes)return;U.push(wt[1])}return wt&&U.push("["+tt.slice(wt.index)+"]"),function(xt,at,jt,bt){for(var Z=bt?at:W(at,jt),tt=xt.length-1;tt>=0;--tt){var rt,ht=xt[tt];if("[]"===ht&&jt.parseArrays)rt=jt.allowEmptyArrays&&(""===Z||jt.strictNullHandling&&null===Z)?[]:[].concat(Z);else{rt=jt.plainObjects?Object.create(null):{};var wt="["===ht.charAt(0)&&"]"===ht.charAt(ht.length-1)?ht.slice(1,-1):ht,V=jt.decodeDotInKeys?wt.replace(/%2E/g,"."):wt,U=parseInt(V,10);jt.parseArrays||""!==V?!isNaN(U)&&ht!==V&&String(U)===V&&U>=0&&jt.parseArrays&&U<=jt.arrayLimit?(rt=[])[U]=Z:"__proto__"!==V&&(rt[V]=Z):rt={0:Z}}Z=rt}return Z}(U,jt,bt,Z)}};Ut.exports=function(xt,at){var jt=function(at){if(!at)return o;if(void 0!==at.allowEmptyArrays&&"boolean"!=typeof at.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==at.decodeDotInKeys&&"boolean"!=typeof at.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!=at.decoder&&"function"!=typeof at.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==at.charset&&"utf-8"!==at.charset&&"iso-8859-1"!==at.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var jt=void 0===at.charset?o.charset:at.charset,bt=void 0===at.duplicates?o.duplicates:at.duplicates;if("combine"!==bt&&"first"!==bt&&"last"!==bt)throw new TypeError("The duplicates option must be either combine, first, or last");return{allowDots:void 0===at.allowDots?!0===at.decodeDotInKeys||o.allowDots:!!at.allowDots,allowEmptyArrays:"boolean"==typeof at.allowEmptyArrays?!!at.allowEmptyArrays:o.allowEmptyArrays,allowPrototypes:"boolean"==typeof at.allowPrototypes?at.allowPrototypes:o.allowPrototypes,allowSparse:"boolean"==typeof at.allowSparse?at.allowSparse:o.allowSparse,arrayLimit:"number"==typeof at.arrayLimit?at.arrayLimit:o.arrayLimit,charset:jt,charsetSentinel:"boolean"==typeof at.charsetSentinel?at.charsetSentinel:o.charsetSentinel,comma:"boolean"==typeof at.comma?at.comma:o.comma,decodeDotInKeys:"boolean"==typeof at.decodeDotInKeys?at.decodeDotInKeys:o.decodeDotInKeys,decoder:"function"==typeof at.decoder?at.decoder:o.decoder,delimiter:"string"==typeof at.delimiter||N.isRegExp(at.delimiter)?at.delimiter:o.delimiter,depth:"number"==typeof at.depth||!1===at.depth?+at.depth:o.depth,duplicates:bt,ignoreQueryPrefix:!0===at.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof at.interpretNumericEntities?at.interpretNumericEntities:o.interpretNumericEntities,parameterLimit:"number"==typeof at.parameterLimit?at.parameterLimit:o.parameterLimit,parseArrays:!1!==at.parseArrays,plainObjects:"boolean"==typeof at.plainObjects?at.plainObjects:o.plainObjects,strictNullHandling:"boolean"==typeof at.strictNullHandling?at.strictNullHandling:o.strictNullHandling}}(at);if(""===xt||null==xt)return jt.plainObjects?Object.create(null):{};for(var bt="string"==typeof xt?function(at,jt){var wt,bt={__proto__:null},Z=jt.ignoreQueryPrefix?at.replace(/^\?/,""):at,rt=(Z=Z.replace(/%5B/gi,"[").replace(/%5D/gi,"]")).split(jt.delimiter,jt.parameterLimit===1/0?void 0:jt.parameterLimit),ht=-1,V=jt.charset;if(jt.charsetSentinel)for(wt=0;wt<rt.length;++wt)0===rt[wt].indexOf("utf8=")&&("utf8=%E2%9C%93"===rt[wt]?V="utf-8":"utf8=%26%2310003%3B"===rt[wt]&&(V="iso-8859-1"),ht=wt,wt=rt.length);for(wt=0;wt<rt.length;++wt)if(wt!==ht){var Kt,Vt,U=rt[wt],st=U.indexOf("]="),H=-1===st?U.indexOf("="):st+1;-1===H?(Kt=jt.decoder(U,o.decoder,V,"key"),Vt=jt.strictNullHandling?null:""):(Kt=jt.decoder(U.slice(0,H),o.decoder,V,"key"),Vt=N.maybeMap(W(U.slice(H+1),jt),function(Zt){return jt.decoder(Zt,o.decoder,V,"value")})),Vt&&jt.interpretNumericEntities&&"iso-8859-1"===V&&(Vt=Vt.replace(/&#(\d+);/g,function(at,jt){return String.fromCharCode(parseInt(jt,10))})),U.indexOf("[]=")>-1&&(Vt=lt(Vt)?[Vt]:Vt);var te=j.call(bt,Kt);te&&"combine"===jt.duplicates?bt[Kt]=N.combine(bt[Kt],Vt):(!te||"last"===jt.duplicates)&&(bt[Kt]=Vt)}return bt}(xt,jt):xt,Z=jt.plainObjects?Object.create(null):{},tt=Object.keys(bt),rt=0;rt<tt.length;++rt){var ht=tt[rt],wt=Ot(ht,bt[ht],jt,"string"==typeof xt);Z=N.merge(Z,wt,jt)}return!0===jt.allowSparse?Z:N.compact(Z)}},3726:(Ut,Wt,D)=>{"use strict";var N=D(8475),j=D(4393),lt=D(9165),o=Object.prototype.hasOwnProperty,yt={brackets:function(Z){return Z+"[]"},comma:"comma",indices:function(Z,tt){return Z+"["+tt+"]"},repeat:function(Z){return Z}},W=Array.isArray,K=Array.prototype.push,dt=function(bt,Z){K.apply(bt,W(Z)?Z:[Z])},ft=Date.prototype.toISOString,ut=lt.default,Ot={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:j.encode,encodeValuesOnly:!1,format:ut,formatter:lt.formatters[ut],indices:!1,serializeDate:function(Z){return ft.call(Z)},skipNulls:!1,strictNullHandling:!1},xt={},at=function bt(Z,tt,rt,ht,wt,V,U,st,H,Kt,Vt,te,Zt,Mt,I,X,E,et){for(var k=Z,G=et,Y=0,it=!1;void 0!==(G=G.get(xt))&&!it;){var ct=G.get(Z);if(Y+=1,void 0!==ct){if(ct===Y)throw new RangeError("Cyclic object value");it=!0}void 0===G.get(xt)&&(Y=0)}if("function"==typeof Kt?k=Kt(tt,k):k instanceof Date?k=Zt(k):"comma"===rt&&W(k)&&(k=j.maybeMap(k,function(me){return me instanceof Date?Zt(me):me})),null===k){if(V)return H&&!X?H(tt,Ot.encoder,E,"key",Mt):tt;k=""}if(function(Z){return"string"==typeof Z||"number"==typeof Z||"boolean"==typeof Z||"symbol"==typeof Z||"bigint"==typeof Z}(k)||j.isBuffer(k))return H?[I(X?tt:H(tt,Ot.encoder,E,"key",Mt))+"="+I(H(k,Ot.encoder,E,"value",Mt))]:[I(tt)+"="+I(String(k))];var Dt,gt=[];if(void 0===k)return gt;if("comma"===rt&&W(k))X&&H&&(k=j.maybeMap(k,H)),Dt=[{value:k.length>0?k.join(",")||null:void 0}];else if(W(Kt))Dt=Kt;else{var It=Object.keys(k);Dt=Vt?It.sort(Vt):It}var Xt=st?tt.replace(/\./g,"%2E"):tt,Jt=ht&&W(k)&&1===k.length?Xt+"[]":Xt;if(wt&&W(k)&&0===k.length)return Jt+"[]";for(var Qt=0;Qt<Dt.length;++Qt){var ee=Dt[Qt],ce="object"==typeof ee&&void 0!==ee.value?ee.value:k[ee];if(!U||null!==ce){var fe=te&&st?ee.replace(/\./g,"%2E"):ee,ne=W(k)?"function"==typeof rt?rt(Jt,fe):Jt:Jt+(te?"."+fe:"["+fe+"]");et.set(Z,Y);var re=N();re.set(xt,et),dt(gt,bt(ce,ne,rt,ht,wt,V,U,st,"comma"===rt&&X&&W(k)?null:H,Kt,Vt,te,Zt,Mt,I,X,E,re))}}return gt};Ut.exports=function(bt,Z){var ht,tt=bt,rt=function(Z){if(!Z)return Ot;if(void 0!==Z.allowEmptyArrays&&"boolean"!=typeof Z.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==Z.encodeDotInKeys&&"boolean"!=typeof Z.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!=Z.encoder&&"function"!=typeof Z.encoder)throw new TypeError("Encoder has to be a function.");var tt=Z.charset||Ot.charset;if(void 0!==Z.charset&&"utf-8"!==Z.charset&&"iso-8859-1"!==Z.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var rt=lt.default;if(void 0!==Z.format){if(!o.call(lt.formatters,Z.format))throw new TypeError("Unknown format option provided.");rt=Z.format}var V,ht=lt.formatters[rt],wt=Ot.filter;if(("function"==typeof Z.filter||W(Z.filter))&&(wt=Z.filter),V=Z.arrayFormat in yt?Z.arrayFormat:"indices"in Z?Z.indices?"indices":"repeat":Ot.arrayFormat,"commaRoundTrip"in Z&&"boolean"!=typeof Z.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");return{addQueryPrefix:"boolean"==typeof Z.addQueryPrefix?Z.addQueryPrefix:Ot.addQueryPrefix,allowDots:void 0===Z.allowDots?!0===Z.encodeDotInKeys||Ot.allowDots:!!Z.allowDots,allowEmptyArrays:"boolean"==typeof Z.allowEmptyArrays?!!Z.allowEmptyArrays:Ot.allowEmptyArrays,arrayFormat:V,charset:tt,charsetSentinel:"boolean"==typeof Z.charsetSentinel?Z.charsetSentinel:Ot.charsetSentinel,commaRoundTrip:Z.commaRoundTrip,delimiter:void 0===Z.delimiter?Ot.delimiter:Z.delimiter,encode:"boolean"==typeof Z.encode?Z.encode:Ot.encode,encodeDotInKeys:"boolean"==typeof Z.encodeDotInKeys?Z.encodeDotInKeys:Ot.encodeDotInKeys,encoder:"function"==typeof Z.encoder?Z.encoder:Ot.encoder,encodeValuesOnly:"boolean"==typeof Z.encodeValuesOnly?Z.encodeValuesOnly:Ot.encodeValuesOnly,filter:wt,format:rt,formatter:ht,serializeDate:"function"==typeof Z.serializeDate?Z.serializeDate:Ot.serializeDate,skipNulls:"boolean"==typeof Z.skipNulls?Z.skipNulls:Ot.skipNulls,sort:"function"==typeof Z.sort?Z.sort:null,strictNullHandling:"boolean"==typeof Z.strictNullHandling?Z.strictNullHandling:Ot.strictNullHandling}}(Z);"function"==typeof rt.filter?tt=(0,rt.filter)("",tt):W(rt.filter)&&(ht=rt.filter);var V=[];if("object"!=typeof tt||null===tt)return"";var U=yt[rt.arrayFormat],st="comma"===U&&rt.commaRoundTrip;ht||(ht=Object.keys(tt)),rt.sort&&ht.sort(rt.sort);for(var H=N(),Kt=0;Kt<ht.length;++Kt){var Vt=ht[Kt];rt.skipNulls&&null===tt[Vt]||dt(V,at(tt[Vt],Vt,U,st,rt.allowEmptyArrays,rt.strictNullHandling,rt.skipNulls,rt.encodeDotInKeys,rt.encode?rt.encoder:null,rt.filter,rt.sort,rt.allowDots,rt.serializeDate,rt.format,rt.formatter,rt.encodeValuesOnly,rt.charset,H))}var te=V.join(rt.delimiter),Zt=!0===rt.addQueryPrefix?"?":"";return rt.charsetSentinel&&(Zt+="iso-8859-1"===rt.charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),te.length>0?Zt+te:""}},4393:(Ut,Wt,D)=>{"use strict";var N=D(9165),j=Object.prototype.hasOwnProperty,lt=Array.isArray,o=function(){for(var Z=[],tt=0;tt<256;++tt)Z.push("%"+((tt<16?"0":"")+tt.toString(16)).toUpperCase());return Z}(),W=function(tt,rt){for(var ht=rt&&rt.plainObjects?Object.create(null):{},wt=0;wt<tt.length;++wt)void 0!==tt[wt]&&(ht[wt]=tt[wt]);return ht};Ut.exports={arrayToObject:W,assign:function(tt,rt){return Object.keys(rt).reduce(function(ht,wt){return ht[wt]=rt[wt],ht},tt)},combine:function(tt,rt){return[].concat(tt,rt)},compact:function(tt){for(var rt=[{obj:{o:tt},prop:"o"}],ht=[],wt=0;wt<rt.length;++wt)for(var V=rt[wt],U=V.obj[V.prop],st=Object.keys(U),H=0;H<st.length;++H){var Kt=st[H],Vt=U[Kt];"object"==typeof Vt&&null!==Vt&&-1===ht.indexOf(Vt)&&(rt.push({obj:U,prop:Kt}),ht.push(Vt))}return function(tt){for(;tt.length>1;){var rt=tt.pop(),ht=rt.obj[rt.prop];if(lt(ht)){for(var wt=[],V=0;V<ht.length;++V)void 0!==ht[V]&&wt.push(ht[V]);rt.obj[rt.prop]=wt}}}(rt),tt},decode:function(Z,tt,rt){var ht=Z.replace(/\+/g," ");if("iso-8859-1"===rt)return ht.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(ht)}catch(wt){return ht}},encode:function(tt,rt,ht,wt,V){if(0===tt.length)return tt;var U=tt;if("symbol"==typeof tt?U=Symbol.prototype.toString.call(tt):"string"!=typeof tt&&(U=String(tt)),"iso-8859-1"===ht)return escape(U).replace(/%u[0-9a-f]{4}/gi,function(Mt){return"%26%23"+parseInt(Mt.slice(2),16)+"%3B"});for(var st="",H=0;H<U.length;H+=1024){for(var Kt=U.length>=1024?U.slice(H,H+1024):U,Vt=[],te=0;te<Kt.length;++te){var Zt=Kt.charCodeAt(te);45===Zt||46===Zt||95===Zt||126===Zt||Zt>=48&&Zt<=57||Zt>=65&&Zt<=90||Zt>=97&&Zt<=122||V===N.RFC1738&&(40===Zt||41===Zt)?Vt[Vt.length]=Kt.charAt(te):Zt<128?Vt[Vt.length]=o[Zt]:Zt<2048?Vt[Vt.length]=o[192|Zt>>6]+o[128|63&Zt]:Zt<55296||Zt>=57344?Vt[Vt.length]=o[224|Zt>>12]+o[128|Zt>>6&63]+o[128|63&Zt]:(Zt=65536+((1023&Zt)<<10|1023&Kt.charCodeAt(te+=1)),Vt[Vt.length]=o[240|Zt>>18]+o[128|Zt>>12&63]+o[128|Zt>>6&63]+o[128|63&Zt])}st+=Vt.join("")}return st},isBuffer:function(tt){return!(!tt||"object"!=typeof tt||!(tt.constructor&&tt.constructor.isBuffer&&tt.constructor.isBuffer(tt)))},isRegExp:function(tt){return"[object RegExp]"===Object.prototype.toString.call(tt)},maybeMap:function(tt,rt){if(lt(tt)){for(var ht=[],wt=0;wt<tt.length;wt+=1)ht.push(rt(tt[wt]));return ht}return rt(tt)},merge:function Z(tt,rt,ht){if(!rt)return tt;if("object"!=typeof rt){if(lt(tt))tt.push(rt);else{if(!tt||"object"!=typeof tt)return[tt,rt];(ht&&(ht.plainObjects||ht.allowPrototypes)||!j.call(Object.prototype,rt))&&(tt[rt]=!0)}return tt}if(!tt||"object"!=typeof tt)return[tt].concat(rt);var wt=tt;return lt(tt)&&!lt(rt)&&(wt=W(tt,ht)),lt(tt)&&lt(rt)?(rt.forEach(function(V,U){if(j.call(tt,U)){var st=tt[U];st&&"object"==typeof st&&V&&"object"==typeof V?tt[U]=Z(st,V,ht):tt.push(V)}else tt[U]=V}),tt):Object.keys(rt).reduce(function(V,U){var st=rt[U];return V[U]=j.call(V,U)?Z(V[U],st,ht):st,V},wt)}}},3601:(Ut,Wt,D)=>{"use strict";D.d(Wt,{e:()=>K});var N=D(4049),j=D(4482),lt=D(8421),o=D(5403),W=D(2805);function K(dt,ft=N.z){return function yt(dt){return(0,j.e)((ft,ut)=>{let Ot=!1,Yt=null,xt=null,at=!1;const jt=()=>{if(null==xt||xt.unsubscribe(),xt=null,Ot){Ot=!1;const Z=Yt;Yt=null,ut.next(Z)}at&&ut.complete()},bt=()=>{xt=null,at&&ut.complete()};ft.subscribe((0,o.x)(ut,Z=>{Ot=!0,Yt=Z,xt||(0,lt.Xf)(dt(Z)).subscribe(xt=(0,o.x)(ut,jt,bt))},()=>{at=!0,(!Ot||!xt||xt.closed)&&ut.complete()}))})}(()=>(0,W.H)(dt,ft))}},9511:(Ut,Wt,D)=>{"use strict";var N=D(5203),j=D(7484),lt=D(7027)(),o=D(7378),yt=D(2844),W=N("%Math.floor%");Ut.exports=function(dt,ft){if("function"!=typeof dt)throw new yt("`fn` is not a function");if("number"!=typeof ft||ft<0||ft>4294967295||W(ft)!==ft)throw new yt("`length` must be a positive 32-bit integer");var ut=arguments.length>2&&!!arguments[2],Ot=!0,Yt=!0;if("length"in dt&&o){var xt=o(dt,"length");xt&&!xt.configurable&&(Ot=!1),xt&&!xt.writable&&(Yt=!1)}return(Ot||Yt||!ut)&&(lt?j(dt,"length",ft,!0,!0):j(dt,"length",ft)),dt}},8475:(Ut,Wt,D)=>{"use strict";var N=D(5203),j=D(5834),lt=D(7024),o=D(2844),yt=N("%WeakMap%",!0),W=N("%Map%",!0),K=j("WeakMap.prototype.get",!0),dt=j("WeakMap.prototype.set",!0),ft=j("WeakMap.prototype.has",!0),ut=j("Map.prototype.get",!0),Ot=j("Map.prototype.set",!0),Yt=j("Map.prototype.has",!0),xt=function(Z,tt){for(var ht,rt=Z;null!==(ht=rt.next);rt=ht)if(ht.key===tt)return rt.next=ht.next,ht.next=Z.next,Z.next=ht,ht};Ut.exports=function(){var tt,rt,ht,wt={assert:function(V){if(!wt.has(V))throw new o("Side channel does not contain "+lt(V))},get:function(V){if(yt&&V&&("object"==typeof V||"function"==typeof V)){if(tt)return K(tt,V)}else if(W){if(rt)return ut(rt,V)}else if(ht)return function(Z,tt){var rt=xt(Z,tt);return rt&&rt.value}(ht,V)},has:function(V){if(yt&&V&&("object"==typeof V||"function"==typeof V)){if(tt)return ft(tt,V)}else if(W){if(rt)return Yt(rt,V)}else if(ht)return function(Z,tt){return!!xt(Z,tt)}(ht,V);return!1},set:function(V,U){yt&&V&&("object"==typeof V||"function"==typeof V)?(tt||(tt=new yt),dt(tt,V,U)):W?(rt||(rt=new W),Ot(rt,V,U)):(ht||(ht={key:{},next:null}),function(Z,tt,rt){var ht=xt(Z,tt);ht?ht.value=rt:Z.next={key:tt,next:Z.next,value:rt}}(ht,V,U))}};return wt}},8762:(Ut,Wt,D)=>{"use strict";var j=D(6117);function lt(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var o=/^([a-z0-9.+-]+:)/i,yt=/:[0-9]*$/,W=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,dt=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),ft=["'"].concat(dt),ut=["%","/","?",";","#"].concat(ft),Ot=["/","?","#"],xt=/^[+a-z0-9A-Z_-]{0,63}$/,at=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,jt={javascript:!0,"javascript:":!0},bt={javascript:!0,"javascript:":!0},Z={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},tt=D(1781);function rt(U,st,H){if(U&&"object"==typeof U&&U instanceof lt)return U;var Kt=new lt;return Kt.parse(U,st,H),Kt}lt.prototype.parse=function(U,st,H){if("string"!=typeof U)throw new TypeError("Parameter 'url' must be a string, not "+typeof U);var Kt=U.indexOf("?"),Vt=-1!==Kt&&Kt<U.indexOf("#")?"?":"#",te=U.split(Vt);te[0]=te[0].replace(/\\/g,"/");var Mt=U=te.join(Vt);if(Mt=Mt.trim(),!H&&1===U.split("#").length){var I=W.exec(Mt);if(I)return this.path=Mt,this.href=Mt,this.pathname=I[1],I[2]?(this.search=I[2],this.query=st?tt.parse(this.search.substr(1)):this.search.substr(1)):st&&(this.search="",this.query={}),this}var X=o.exec(Mt);if(X){var E=(X=X[0]).toLowerCase();this.protocol=E,Mt=Mt.substr(X.length)}if(H||X||Mt.match(/^\/\/[^@/]+@[^@/]+/)){var et="//"===Mt.substr(0,2);et&&(!X||!bt[X])&&(Mt=Mt.substr(2),this.slashes=!0)}if(!bt[X]&&(et||X&&!Z[X])){for(var k=-1,G=0;G<Ot.length;G++)-1!==(Y=Mt.indexOf(Ot[G]))&&(-1===k||Y<k)&&(k=Y);var it,ct;for(-1!==(ct=-1===k?Mt.lastIndexOf("@"):Mt.lastIndexOf("@",k))&&(it=Mt.slice(0,ct),Mt=Mt.slice(ct+1),this.auth=decodeURIComponent(it)),k=-1,G=0;G<ut.length;G++){var Y;-1!==(Y=Mt.indexOf(ut[G]))&&(-1===k||Y<k)&&(k=Y)}-1===k&&(k=Mt.length),this.host=Mt.slice(0,k),Mt=Mt.slice(k),this.parseHost(),this.hostname=this.hostname||"";var St="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!St)for(var gt=this.hostname.split(/\./),Dt=(G=0,gt.length);G<Dt;G++){var It=gt[G];if(It&&!It.match(xt)){for(var Xt="",Jt=0,Qt=It.length;Jt<Qt;Jt++)It.charCodeAt(Jt)>127?Xt+="x":Xt+=It[Jt];if(!Xt.match(xt)){var ee=gt.slice(0,G),ce=gt.slice(G+1),fe=It.match(at);fe&&(ee.push(fe[1]),ce.unshift(fe[2])),ce.length&&(Mt="/"+ce.join(".")+Mt),this.hostname=ee.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),St||(this.hostname=j.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,St&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==Mt[0]&&(Mt="/"+Mt))}if(!jt[E])for(G=0,Dt=ft.length;G<Dt;G++){var me=ft[G];if(-1!==Mt.indexOf(me)){var yr=encodeURIComponent(me);yr===me&&(yr=escape(me)),Mt=Mt.split(me).join(yr)}}var fr=Mt.indexOf("#");-1!==fr&&(this.hash=Mt.substr(fr),Mt=Mt.slice(0,fr));var Ye=Mt.indexOf("?");return-1!==Ye?(this.search=Mt.substr(Ye),this.query=Mt.substr(Ye+1),st&&(this.query=tt.parse(this.query)),Mt=Mt.slice(0,Ye)):st&&(this.search="",this.query={}),Mt&&(this.pathname=Mt),Z[E]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},lt.prototype.format=function(){var U=this.auth||"";U&&(U=(U=encodeURIComponent(U)).replace(/%3A/i,":"),U+="@");var st=this.protocol||"",H=this.pathname||"",Kt=this.hash||"",Vt=!1,te="";this.host?Vt=U+this.host:this.hostname&&(Vt=U+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(Vt+=":"+this.port)),this.query&&"object"==typeof this.query&&Object.keys(this.query).length&&(te=tt.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var Zt=this.search||te&&"?"+te||"";return st&&":"!==st.substr(-1)&&(st+=":"),this.slashes||(!st||Z[st])&&!1!==Vt?(Vt="//"+(Vt||""),H&&"/"!==H.charAt(0)&&(H="/"+H)):Vt||(Vt=""),Kt&&"#"!==Kt.charAt(0)&&(Kt="#"+Kt),Zt&&"?"!==Zt.charAt(0)&&(Zt="?"+Zt),st+Vt+(H=H.replace(/[?#]/g,function(Mt){return encodeURIComponent(Mt)}))+(Zt=Zt.replace("#","%23"))+Kt},lt.prototype.resolve=function(U){return this.resolveObject(rt(U,!1,!0)).format()},lt.prototype.resolveObject=function(U){if("string"==typeof U){var st=new lt;st.parse(U,!1,!0),U=st}for(var H=new lt,Kt=Object.keys(this),Vt=0;Vt<Kt.length;Vt++){var te=Kt[Vt];H[te]=this[te]}if(H.hash=U.hash,""===U.href)return H.href=H.format(),H;if(U.slashes&&!U.protocol){for(var Zt=Object.keys(U),Mt=0;Mt<Zt.length;Mt++){var I=Zt[Mt];"protocol"!==I&&(H[I]=U[I])}return Z[H.protocol]&&H.hostname&&!H.pathname&&(H.pathname="/",H.path=H.pathname),H.href=H.format(),H}if(U.protocol&&U.protocol!==H.protocol){if(!Z[U.protocol]){for(var X=Object.keys(U),E=0;E<X.length;E++){var et=X[E];H[et]=U[et]}return H.href=H.format(),H}if(H.protocol=U.protocol,U.host||bt[U.protocol])H.pathname=U.pathname;else{for(var Dt=(U.pathname||"").split("/");Dt.length&&!(U.host=Dt.shift()););U.host||(U.host=""),U.hostname||(U.hostname=""),""!==Dt[0]&&Dt.unshift(""),Dt.length<2&&Dt.unshift(""),H.pathname=Dt.join("/")}return H.search=U.search,H.query=U.query,H.host=U.host||"",H.auth=U.auth,H.hostname=U.hostname||U.host,H.port=U.port,(H.pathname||H.search)&&(H.path=(H.pathname||"")+(H.search||"")),H.slashes=H.slashes||U.slashes,H.href=H.format(),H}var Y=H.pathname&&"/"===H.pathname.charAt(0),it=U.host||U.pathname&&"/"===U.pathname.charAt(0),ct=it||Y||H.host&&U.pathname,St=ct,gt=H.pathname&&H.pathname.split("/")||[],It=(Dt=U.pathname&&U.pathname.split("/")||[],H.protocol&&!Z[H.protocol]);if(It&&(H.hostname="",H.port=null,H.host&&(""===gt[0]?gt[0]=H.host:gt.unshift(H.host)),H.host="",U.protocol&&(U.hostname=null,U.port=null,U.host&&(""===Dt[0]?Dt[0]=U.host:Dt.unshift(U.host)),U.host=null),ct=ct&&(""===Dt[0]||""===gt[0])),it)H.host=U.host||""===U.host?U.host:H.host,H.hostname=U.hostname||""===U.hostname?U.hostname:H.hostname,H.search=U.search,H.query=U.query,gt=Dt;else if(Dt.length)gt||(gt=[]),gt.pop(),gt=gt.concat(Dt),H.search=U.search,H.query=U.query;else if(null!=U.search)return It&&(H.host=gt.shift(),H.hostname=H.host,(Xt=!!(H.host&&H.host.indexOf("@")>0)&&H.host.split("@"))&&(H.auth=Xt.shift(),H.hostname=Xt.shift(),H.host=H.hostname)),H.search=U.search,H.query=U.query,(null!==H.pathname||null!==H.search)&&(H.path=(H.pathname?H.pathname:"")+(H.search?H.search:"")),H.href=H.format(),H;if(!gt.length)return H.pathname=null,H.path=H.search?"/"+H.search:null,H.href=H.format(),H;for(var Jt=gt.slice(-1)[0],Qt=(H.host||U.host||gt.length>1)&&("."===Jt||".."===Jt)||""===Jt,ee=0,ce=gt.length;ce>=0;ce--)"."===(Jt=gt[ce])?gt.splice(ce,1):".."===Jt?(gt.splice(ce,1),ee++):ee&&(gt.splice(ce,1),ee--);if(!ct&&!St)for(;ee--;ee)gt.unshift("..");ct&&""!==gt[0]&&(!gt[0]||"/"!==gt[0].charAt(0))&&gt.unshift(""),Qt&&"/"!==gt.join("/").substr(-1)&&gt.push("");var Xt,fe=""===gt[0]||gt[0]&&"/"===gt[0].charAt(0);return It&&(H.hostname=fe?"":gt.length?gt.shift():"",H.host=H.hostname,(Xt=!!(H.host&&H.host.indexOf("@")>0)&&H.host.split("@"))&&(H.auth=Xt.shift(),H.hostname=Xt.shift(),H.host=H.hostname)),(ct=ct||H.host&&gt.length)&&!fe&&gt.unshift(""),gt.length>0?H.pathname=gt.join("/"):(H.pathname=null,H.path=null),(null!==H.pathname||null!==H.search)&&(H.path=(H.pathname?H.pathname:"")+(H.search?H.search:"")),H.auth=U.auth||H.auth,H.slashes=H.slashes||U.slashes,H.href=H.format(),H},lt.prototype.parseHost=function(){var U=this.host,st=yt.exec(U);st&&(":"!==(st=st[0])&&(this.port=st.substr(1)),U=U.substr(0,U.length-st.length)),U&&(this.hostname=U)},Wt.Qc=rt,Wt.DB=function wt(U,st){return rt(U,!1,!0).resolve(st)},Wt.WU=function ht(U){return"string"==typeof U&&(U=rt(U)),U instanceof lt?U.format():lt.prototype.format.call(U)}},4654:()=>{},9892:(Ut,Wt,D)=>{"use strict";D.d(Wt,{KgH:()=>zd,MxU:()=>ah,W20:()=>f,TCu:()=>Ia,aNw:()=>Pa,E9j:()=>Oe,Thl:()=>Ws,jyi:()=>Io,xvT:()=>Cl,pn8:()=>Vi,xEZ:()=>he,u8d:()=>Vd,P6Y:()=>N});var N={};D.r(N),D.d(N,{BaseTextureCache:()=>Rr,CanvasRenderTarget:()=>gn,DATA_URI:()=>ma,EventEmitter:()=>nt,ProgramCache:()=>Di,TextureCache:()=>mr,clearTextureCache:()=>rs,correctBlendMode:()=>da,createIndicesForQuads:()=>ts,decomposeDataUri:()=>Bs,deprecation:()=>$e,destroyTextureCache:()=>es,determineCrossOrigin:()=>nn,earcut:()=>ve,getBufferType:()=>So,getResolutionOfUrl:()=>Fi,hex2rgb:()=>Zr,hex2string:()=>Ri,interleaveTypedArrays:()=>Sr,isMobile:()=>pr,isPow2:()=>Po,isWebGLSupported:()=>Or,log2:()=>va,nextPow2:()=>Bi,path:()=>Pn,premultiplyBlendMode:()=>To,premultiplyRgba:()=>Ka,premultiplyTint:()=>wo,premultiplyTintToRgba:()=>pa,removeItems:()=>Bn,rgb2hex:()=>fa,sayHello:()=>Fr,sign:()=>Dn,skipHello:()=>Hn,string2hex:()=>Ii,trimCanvas:()=>mn,uid:()=>hr,url:()=>xe});function W(n,e){this.name="AggregateError",this.errors=n,this.message=e||""}W.prototype=Error.prototype;var ft=setTimeout;function ut(n){return Boolean(n&&void 0!==n.length)}function Ot(){}function xt(n){if(!(this instanceof xt))throw new TypeError("Promises must be constructed via new");if("function"!=typeof n)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],rt(n,this)}function at(n,e){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,xt._immediateFn(function(){var t=1===n._state?e.onFulfilled:e.onRejected;if(null!==t){var r;try{r=t(n._value)}catch(i){return void bt(e.promise,i)}jt(e.promise,r)}else(1===n._state?jt:bt)(e.promise,n._value)})):n._deferreds.push(e)}function jt(n,e){try{if(e===n)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if(e instanceof xt)return n._state=3,n._value=e,void Z(n);if("function"==typeof t)return void rt(function Yt(n,e){return function(){n.apply(e,arguments)}}(t,e),n)}n._state=1,n._value=e,Z(n)}catch(r){bt(n,r)}}function bt(n,e){n._state=2,n._value=e,Z(n)}function Z(n){2===n._state&&0===n._deferreds.length&&xt._immediateFn(function(){n._handled||xt._unhandledRejectionFn(n._value)});for(var e=0,t=n._deferreds.length;e<t;e++)at(n,n._deferreds[e]);n._deferreds=null}function tt(n,e,t){this.onFulfilled="function"==typeof n?n:null,this.onRejected="function"==typeof e?e:null,this.promise=t}function rt(n,e){var t=!1;try{n(function(r){t||(t=!0,jt(e,r))},function(r){t||(t=!0,bt(e,r))})}catch(r){if(t)return;t=!0,bt(e,r)}}xt.prototype.catch=function(n){return this.then(null,n)},xt.prototype.then=function(n,e){var t=new this.constructor(Ot);return at(this,new tt(n,e,t)),t},xt.prototype.finally=function j(n){var e=this.constructor;return this.then(function(t){return e.resolve(n()).then(function(){return t})},function(t){return e.resolve(n()).then(function(){return e.reject(t)})})},xt.all=function(n){return new xt(function(e,t){if(!ut(n))return t(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(n);if(0===r.length)return e([]);var i=r.length;function a(u,d){try{if(d&&("object"==typeof d||"function"==typeof d)){var v=d.then;if("function"==typeof v)return void v.call(d,function(m){a(u,m)},t)}r[u]=d,0==--i&&e(r)}catch(m){t(m)}}for(var s=0;s<r.length;s++)a(s,r[s])})},xt.any=function K(n){var e=this;return new e(function(t,r){if(!n||void 0===n.length)return r(new TypeError("Promise.any accepts an array"));var i=Array.prototype.slice.call(n);if(0===i.length)return r();for(var a=[],s=0;s<i.length;s++)try{e.resolve(i[s]).then(t).catch(function(u){a.push(u),a.length===i.length&&r(new W(a,"All promises were rejected"))})}catch(u){r(u)}})},xt.allSettled=function o(n){return new this(function(t,r){if(!n||void 0===n.length)return r(new TypeError(typeof n+" "+n+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(n);if(0===i.length)return t([]);var a=i.length;function s(d,v){if(v&&("object"==typeof v||"function"==typeof v)){var m=v.then;if("function"==typeof m)return void m.call(v,function(x){s(d,x)},function(x){i[d]={status:"rejected",reason:x},0==--a&&t(i)})}i[d]={status:"fulfilled",value:v},0==--a&&t(i)}for(var u=0;u<i.length;u++)s(u,i[u])})},xt.resolve=function(n){return n&&"object"==typeof n&&n.constructor===xt?n:new xt(function(e){e(n)})},xt.reject=function(n){return new xt(function(e,t){t(n)})},xt.race=function(n){return new xt(function(e,t){if(!ut(n))return t(new TypeError("Promise.race accepts an array"));for(var r=0,i=n.length;r<i;r++)xt.resolve(n[r]).then(e,t)})},xt._immediateFn="function"==typeof setImmediate&&function(n){setImmediate(n)}||function(n){ft(n,0)},xt._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};const ht=xt;var wt=D(5943);if("undefined"==typeof globalThis&&("undefined"!=typeof self?self.globalThis=self:"undefined"!=typeof global&&(global.globalThis=global)),globalThis.Promise||(globalThis.Promise=ht),Object.assign||(Object.assign=wt),Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!globalThis.performance||!globalThis.performance.now){var U=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-U}}for(var st=Date.now(),H=["ms","moz","webkit","o"],Kt=0;Kt<H.length&&!globalThis.requestAnimationFrame;++Kt){var Vt=H[Kt];globalThis.requestAnimationFrame=globalThis[Vt+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[Vt+"CancelAnimationFrame"]||globalThis[Vt+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(n){if("function"!=typeof n)throw new TypeError(n+"is not a function");var e=Date.now(),t=16+st-e;return t<0&&(t=0),st=e,globalThis.self.setTimeout(function(){st=Date.now(),n(performance.now())},t)}),globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(n){return clearTimeout(n)}),Math.sign||(Math.sign=function(e){return 0===(e=Number(e))||isNaN(e)?e:e>0?1:-1}),Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array),globalThis.Float32Array||(globalThis.Float32Array=Array),globalThis.Uint32Array||(globalThis.Uint32Array=Array),globalThis.Uint16Array||(globalThis.Uint16Array=Array),globalThis.Uint8Array||(globalThis.Uint8Array=Array),globalThis.Int32Array||(globalThis.Int32Array=Array);var te=(()=>{return(n=te||(te={}))[n.WEBGL_LEGACY=0]="WEBGL_LEGACY",n[n.WEBGL=1]="WEBGL",n[n.WEBGL2=2]="WEBGL2",te;var n})(),Zt=(()=>{return(n=Zt||(Zt={}))[n.UNKNOWN=0]="UNKNOWN",n[n.WEBGL=1]="WEBGL",n[n.CANVAS=2]="CANVAS",Zt;var n})(),Mt=(()=>{return(n=Mt||(Mt={}))[n.COLOR=16384]="COLOR",n[n.DEPTH=256]="DEPTH",n[n.STENCIL=1024]="STENCIL",Mt;var n})(),I=(()=>{return(n=I||(I={}))[n.NORMAL=0]="NORMAL",n[n.ADD=1]="ADD",n[n.MULTIPLY=2]="MULTIPLY",n[n.SCREEN=3]="SCREEN",n[n.OVERLAY=4]="OVERLAY",n[n.DARKEN=5]="DARKEN",n[n.LIGHTEN=6]="LIGHTEN",n[n.COLOR_DODGE=7]="COLOR_DODGE",n[n.COLOR_BURN=8]="COLOR_BURN",n[n.HARD_LIGHT=9]="HARD_LIGHT",n[n.SOFT_LIGHT=10]="SOFT_LIGHT",n[n.DIFFERENCE=11]="DIFFERENCE",n[n.EXCLUSION=12]="EXCLUSION",n[n.HUE=13]="HUE",n[n.SATURATION=14]="SATURATION",n[n.COLOR=15]="COLOR",n[n.LUMINOSITY=16]="LUMINOSITY",n[n.NORMAL_NPM=17]="NORMAL_NPM",n[n.ADD_NPM=18]="ADD_NPM",n[n.SCREEN_NPM=19]="SCREEN_NPM",n[n.NONE=20]="NONE",n[n.SRC_OVER=0]="SRC_OVER",n[n.SRC_IN=21]="SRC_IN",n[n.SRC_OUT=22]="SRC_OUT",n[n.SRC_ATOP=23]="SRC_ATOP",n[n.DST_OVER=24]="DST_OVER",n[n.DST_IN=25]="DST_IN",n[n.DST_OUT=26]="DST_OUT",n[n.DST_ATOP=27]="DST_ATOP",n[n.ERASE=26]="ERASE",n[n.SUBTRACT=28]="SUBTRACT",n[n.XOR=29]="XOR",I;var n})(),X=(()=>{return(n=X||(X={}))[n.POINTS=0]="POINTS",n[n.LINES=1]="LINES",n[n.LINE_LOOP=2]="LINE_LOOP",n[n.LINE_STRIP=3]="LINE_STRIP",n[n.TRIANGLES=4]="TRIANGLES",n[n.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",n[n.TRIANGLE_FAN=6]="TRIANGLE_FAN",X;var n})(),E=(()=>{return(n=E||(E={}))[n.RGBA=6408]="RGBA",n[n.RGB=6407]="RGB",n[n.RG=33319]="RG",n[n.RED=6403]="RED",n[n.RGBA_INTEGER=36249]="RGBA_INTEGER",n[n.RGB_INTEGER=36248]="RGB_INTEGER",n[n.RG_INTEGER=33320]="RG_INTEGER",n[n.RED_INTEGER=36244]="RED_INTEGER",n[n.ALPHA=6406]="ALPHA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL",E;var n})(),et=(()=>{return(n=et||(et={}))[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",et;var n})(),k=(()=>{return(n=k||(k={}))[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",n[n.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",n[n.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",n[n.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",n[n.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",n[n.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",n[n.BYTE=5120]="BYTE",n[n.SHORT=5122]="SHORT",n[n.INT=5124]="INT",n[n.FLOAT=5126]="FLOAT",n[n.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",n[n.HALF_FLOAT=36193]="HALF_FLOAT",k;var n})(),G=(()=>{return(n=G||(G={}))[n.FLOAT=0]="FLOAT",n[n.INT=1]="INT",n[n.UINT=2]="UINT",G;var n})(),Y=(()=>{return(n=Y||(Y={}))[n.NEAREST=0]="NEAREST",n[n.LINEAR=1]="LINEAR",Y;var n})(),it=(()=>{return(n=it||(it={}))[n.CLAMP=33071]="CLAMP",n[n.REPEAT=10497]="REPEAT",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",it;var n})(),ct=(()=>{return(n=ct||(ct={}))[n.OFF=0]="OFF",n[n.POW2=1]="POW2",n[n.ON=2]="ON",n[n.ON_MANUAL=3]="ON_MANUAL",ct;var n})(),St=(()=>{return(n=St||(St={}))[n.NPM=0]="NPM",n[n.UNPACK=1]="UNPACK",n[n.PMA=2]="PMA",n[n.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",n[n.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",n[n.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",n[n.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",St;var n})(),gt=(()=>{return(n=gt||(gt={}))[n.NO=0]="NO",n[n.YES=1]="YES",n[n.AUTO=2]="AUTO",n[n.BLEND=0]="BLEND",n[n.CLEAR=1]="CLEAR",n[n.BLIT=2]="BLIT",gt;var n})(),Dt=(()=>{return(n=Dt||(Dt={}))[n.AUTO=0]="AUTO",n[n.MANUAL=1]="MANUAL",Dt;var n})(),It=(()=>{return(n=It||(It={})).LOW="lowp",n.MEDIUM="mediump",n.HIGH="highp",It;var n})(),Xt=(()=>{return(n=Xt||(Xt={}))[n.NONE=0]="NONE",n[n.SCISSOR=1]="SCISSOR",n[n.STENCIL=2]="STENCIL",n[n.SPRITE=3]="SPRITE",n[n.COLOR=4]="COLOR",Xt;var n})(),Qt=(()=>{return(n=Qt||(Qt={}))[n.NONE=0]="NONE",n[n.LOW=2]="LOW",n[n.MEDIUM=4]="MEDIUM",n[n.HIGH=8]="HIGH",Qt;var n})(),ee=(()=>{return(n=ee||(ee={}))[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",ee;var n})(),ce={createCanvas:function(n,e){var t=document.createElement("canvas");return t.width=n,t.height=e,t},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var n;return null!==(n=document.baseURI)&&void 0!==n?n:window.location.href},fetch:function(n,e){return fetch(n,e)}},fe=/iPhone/i,ne=/iPod/i,re=/iPad/i,me=/\biOS-universal(?:.+)Mac\b/i,yr=/\bAndroid(?:.+)Mobile\b/i,fr=/Android/i,Ye=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,or=/Silk/i,dr=/Windows Phone/i,Er=/\bWindows(?:.+)ARM\b/i,ln=/BlackBerry/i,qe=/BB10/i,Be=/Opera Mini/i,ie=/\b(CriOS|Chrome)(?:.+)Mobile/i,br=/Mobile(?:.+)Firefox\b/i,wn=function(n){return void 0!==n&&"MacIntel"===n.platform&&"number"==typeof n.maxTouchPoints&&n.maxTouchPoints>1&&"undefined"==typeof MSStream},pr=function Kn(n){var e={userAgent:"",platform:"",maxTouchPoints:0};n||"undefined"==typeof navigator?"string"==typeof n?e.userAgent=n:n&&n.userAgent&&(e={userAgent:n.userAgent,platform:n.platform,maxTouchPoints:n.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var t=e.userAgent,r=t.split("[FBAN");void 0!==r[1]&&(t=r[0]),void 0!==(r=t.split("Twitter"))[1]&&(t=r[0]);var i=function Jr(n){return function(e){return e.test(n)}}(t),a={apple:{phone:i(fe)&&!i(dr),ipod:i(ne),tablet:!i(fe)&&(i(re)||wn(e))&&!i(dr),universal:i(me),device:(i(fe)||i(ne)||i(re)||i(me)||wn(e))&&!i(dr)},amazon:{phone:i(Ye),tablet:!i(Ye)&&i(or),device:i(Ye)||i(or)},android:{phone:!i(dr)&&i(Ye)||!i(dr)&&i(yr),tablet:!i(dr)&&!i(Ye)&&!i(yr)&&(i(or)||i(fr)),device:!i(dr)&&(i(Ye)||i(or)||i(yr)||i(fr))||i(/\bokhttp\b/i)},windows:{phone:i(dr),tablet:i(Er),device:i(dr)||i(Er)},other:{blackberry:i(ln),blackberry10:i(qe),opera:i(Be),firefox:i(br),chrome:i(ie),device:i(ln)||i(qe)||i(Be)||i(br)||i(ie)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}(globalThis.navigator),L={ADAPTER:ce,MIPMAP_TEXTURES:ct.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:Qt.NONE,SPRITE_MAX_TEXTURES:function Ke(n){var t,e=!0;(pr.tablet||pr.phone)&&(pr.apple.device&&(t=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(t[1],10)<11&&(e=!1),pr.android.device&&(t=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(t[1],10)<7&&(e=!1));return e?n:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,width:800,height:600,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,antialias:!1,preserveDrawingBuffer:!1},GC_MODE:Dt.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:it.CLAMP,SCALE_MODE:Y.LINEAR,PRECISION_VERTEX:It.HIGH,PRECISION_FRAGMENT:pr.apple.device?It.HIGH:It.MEDIUM,CAN_UPLOAD_SAME_BUFFER:function Sn(){return!pr.apple.device}(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},nt=D(2005),ve=D(5469),_e=D(8762),xe={parse:_e.Qc,format:_e.WU,resolve:_e.DB};function ue(n){if("string"!=typeof n)throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}function Tr(n){return n.split("?")[0].split("#")[0]}var Pn={toPosix:function(n){return function Ue(n,e,t){return n.replace(new RegExp(function xr(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(e),"g"),t)}(n,"\\","/")},isUrl:function(n){return/^https?:/.test(this.toPosix(n))},isDataUrl:function(n){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(n)},hasProtocol:function(n){return/^[^/:]+:\//.test(this.toPosix(n))},getProtocol:function(n){ue(n),n=this.toPosix(n);var e="",t=/^file:\/\/\//.exec(n),r=/^[^/:]+:\/\//.exec(n),i=/^[^/:]+:\//.exec(n);if(t||r||i){var a=(null==t?void 0:t[0])||(null==r?void 0:r[0])||(null==i?void 0:i[0]);e=a,n=n.slice(a.length)}return e},toAbsolute:function(n,e,t){if(this.isDataUrl(n))return n;var r=Tr(this.toPosix(null!=e?e:L.ADAPTER.getBaseUrl())),i=Tr(this.toPosix(null!=t?t:this.rootname(r)));return ue(n),(n=this.toPosix(n)).startsWith("/")?Pn.join(i,n.slice(1)):this.isAbsolute(n)?n:this.join(r,n)},normalize:function(n){if(ue(n=this.toPosix(n)),0===n.length)return".";var e="",t=n.startsWith("/");this.hasProtocol(n)&&(e=this.rootname(n),n=n.slice(e.length));var r=n.endsWith("/");return n=function ar(n,e){for(var s,t="",r=0,i=-1,a=0,u=0;u<=n.length;++u){if(u<n.length)s=n.charCodeAt(u);else{if(47===s)break;s=47}if(47===s){if(i!==u-1&&1!==a)if(i!==u-1&&2===a){if(t.length<2||2!==r||46!==t.charCodeAt(t.length-1)||46!==t.charCodeAt(t.length-2))if(t.length>2){var d=t.lastIndexOf("/");if(d!==t.length-1){-1===d?(t="",r=0):r=(t=t.slice(0,d)).length-1-t.lastIndexOf("/"),i=u,a=0;continue}}else if(2===t.length||1===t.length){t="",r=0,i=u,a=0;continue}e&&(t.length>0?t+="/..":t="..",r=2)}else t.length>0?t+="/"+n.slice(i+1,u):t=n.slice(i+1,u),r=u-i-1;i=u,a=0}else 46===s&&-1!==a?++a:a=-1}return t}(n,!1),n.length>0&&r&&(n+="/"),t?"/"+n:e+n},isAbsolute:function(n){return ue(n),n=this.toPosix(n),!!this.hasProtocol(n)||n.startsWith("/")},join:function(){for(var e,n=arguments,t=[],r=0;r<arguments.length;r++)t[r]=n[r];if(0===t.length)return".";for(var i,a=0;a<t.length;++a){var s=t[a];if(ue(s),s.length>0)if(void 0===i)i=s;else{var u=null!==(e=t[a-1])&&void 0!==e?e:"";this.extname(u)?i+="/../"+s:i+="/"+s}}return void 0===i?".":this.normalize(i)},dirname:function(n){if(ue(n),0===n.length)return".";for(var e=(n=this.toPosix(n)).charCodeAt(0),t=47===e,r=-1,i=!0,a=this.getProtocol(n),s=n,u=(n=n.slice(a.length)).length-1;u>=1;--u)if(47===(e=n.charCodeAt(u))){if(!i){r=u;break}}else i=!1;return-1===r?t?"/":this.isUrl(s)?a+n:a:t&&1===r?"//":a+n.slice(0,r)},rootname:function(n){ue(n);var e="";if(e=(n=this.toPosix(n)).startsWith("/")?"/":this.getProtocol(n),this.isUrl(n)){var t=n.indexOf("/",e.length);(e=-1!==t?n.slice(0,t):n).endsWith("/")||(e+="/")}return e},basename:function(n,e){ue(n),e&&ue(e),n=this.toPosix(n);var a,t=0,r=-1,i=!0;if(void 0!==e&&e.length>0&&e.length<=n.length){if(e.length===n.length&&e===n)return"";var s=e.length-1,u=-1;for(a=n.length-1;a>=0;--a){var d=n.charCodeAt(a);if(47===d){if(!i){t=a+1;break}}else-1===u&&(i=!1,u=a+1),s>=0&&(d===e.charCodeAt(s)?-1==--s&&(r=a):(s=-1,r=u))}return t===r?r=u:-1===r&&(r=n.length),n.slice(t,r)}for(a=n.length-1;a>=0;--a)if(47===n.charCodeAt(a)){if(!i){t=a+1;break}}else-1===r&&(i=!1,r=a+1);return-1===r?"":n.slice(t,r)},extname:function(n){ue(n);for(var e=-1,t=0,r=-1,i=!0,a=0,s=(n=this.toPosix(n)).length-1;s>=0;--s){var u=n.charCodeAt(s);if(47!==u)-1===r&&(i=!1,r=s+1),46===u?-1===e?e=s:1!==a&&(a=1):-1!==e&&(a=-1);else if(!i){t=s+1;break}}return-1===e||-1===r||0===a||1===a&&e===r-1&&e===t+1?"":n.slice(e,r)},parse:function(n){ue(n);var e={root:"",dir:"",base:"",ext:"",name:""};if(0===n.length)return e;var i,t=(n=this.toPosix(n)).charCodeAt(0),r=this.isAbsolute(n);e.root=this.rootname(n),i=r||this.hasProtocol(n)?1:0;for(var a=-1,s=0,u=-1,d=!0,v=n.length-1,m=0;v>=i;--v)if(47!==(t=n.charCodeAt(v)))-1===u&&(d=!1,u=v+1),46===t?-1===a?a=v:1!==m&&(m=1):-1!==a&&(m=-1);else if(!d){s=v+1;break}return-1===a||-1===u||0===m||1===m&&a===u-1&&a===s+1?-1!==u&&(e.base=e.name=n.slice(0===s&&r?1:s,u)):(0===s&&r?(e.name=n.slice(1,a),e.base=n.slice(1,u)):(e.name=n.slice(s,a),e.base=n.slice(s,u)),e.ext=n.slice(a,u)),e.dir=this.dirname(n),e},sep:"/",delimiter:":"};L.RETINA_PREFIX=/@([0-9\.]+)x/,L.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Hr,We=!1;function Hn(){We=!0}function Fr(n){var e;We||(L.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1?(e=globalThis.console).log.apply(e,["\n %c %c %c PixiJS 6.5.10 - \u2730 "+n+" \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):globalThis.console&&globalThis.console.log("PixiJS 6.5.10 - "+n+" - http://www.pixijs.com/"),We=!0)}function Or(){return void 0===Hr&&(Hr=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:L.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!L.ADAPTER.getWebGLRenderingContext())return!1;var t=L.ADAPTER.createCanvas(),r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),i=!(!r||!r.getContextAttributes().stencil);if(r){var a=r.getExtension("WEBGL_lose_context");a&&a.loseContext()}return r=null,i}catch(s){return!1}}()),Hr}var Gr={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Zr(n,e){return void 0===e&&(e=[]),e[0]=(n>>16&255)/255,e[1]=(n>>8&255)/255,e[2]=(255&n)/255,e}function Ri(n){var e=n.toString(16);return"#"+("000000".substring(0,6-e.length)+e)}function Ii(n){return"string"==typeof n&&"#"===(n=Gr[n.toLowerCase()]||n)[0]&&(n=n.slice(1)),parseInt(n,16)}function fa(n){return(255*n[0]<<16)+(255*n[1]<<8)+(255*n[2]|0)}var To=function Co(){for(var n=[],e=[],t=0;t<32;t++)n[t]=t,e[t]=t;n[I.NORMAL_NPM]=I.NORMAL,n[I.ADD_NPM]=I.ADD,n[I.SCREEN_NPM]=I.SCREEN,e[I.NORMAL]=I.NORMAL_NPM,e[I.ADD]=I.ADD_NPM,e[I.SCREEN]=I.SCREEN_NPM;var r=[];return r.push(e),r.push(n),r}();function da(n,e){return To[e?1:0][n]}function Ka(n,e,t,r){return t=t||new Float32Array(4),r||void 0===r?(t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e):(t[0]=n[0],t[1]=n[1],t[2]=n[2]),t[3]=e,t}function wo(n,e){if(1===e)return(255*e<<24)+n;if(0===e)return 0;var t=n>>16&255,r=n>>8&255,i=255&n;return(255*e<<24)+((t=t*e+.5|0)<<16)+((r=r*e+.5|0)<<8)+(i*e+.5|0)}function pa(n,e,t,r){return(t=t||new Float32Array(4))[0]=(n>>16&255)/255,t[1]=(n>>8&255)/255,t[2]=(255&n)/255,(r||void 0===r)&&(t[0]*=e,t[1]*=e,t[2]*=e),t[3]=e,t}function ts(n,e){void 0===e&&(e=null);var t=6*n;if((e=e||new Uint16Array(t)).length!==t)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+t);for(var r=0,i=0;r<t;r+=6,i+=4)e[r+0]=i+0,e[r+1]=i+1,e[r+2]=i+2,e[r+3]=i+0,e[r+4]=i+2,e[r+5]=i+3;return e}function So(n){if(4===n.BYTES_PER_ELEMENT)return n instanceof Float32Array?"Float32Array":n instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===n.BYTES_PER_ELEMENT){if(n instanceof Uint16Array)return"Uint16Array"}else if(1===n.BYTES_PER_ELEMENT&&n instanceof Uint8Array)return"Uint8Array";return null}var ke={Float32Array,Uint32Array,Int32Array,Uint8Array};function Sr(n,e){for(var t=0,r=0,i={},a=0;a<n.length;a++)r+=e[a],t+=n[a].length;var s=new ArrayBuffer(4*t),u=null,d=0;for(a=0;a<n.length;a++){var v=e[a],m=n[a],x=So(m);i[x]||(i[x]=new ke[x](s)),u=i[x];for(var b=0;b<m.length;b++)u[(b/v|0)*r+d+b%v]=m[b];d+=v}return new Float32Array(s)}function Bi(n){return n+=0===n?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,1+(n|=n>>>16)}function Po(n){return!(n&n-1||!n)}function va(n){var e=(n>65535?1:0)<<4,t=((n>>>=e)>255?1:0)<<3;return e|=t,e|=t=((n>>>=t)>15?1:0)<<2,(e|=t=((n>>>=t)>3?1:0)<<1)|(n>>>=t)>>1}function Bn(n,e,t){var i,r=n.length;if(!(e>=r||0===t)){var a=r-(t=e+t>r?r-e:t);for(i=e;i<a;++i)n[i]=n[i+t];n.length=a}}function Dn(n){return 0===n?0:n<0?-1:1}var _a=0;function hr(){return++_a}var ga={};function $e(n,e,t){if(void 0===t&&(t=3),!ga[e]){var r=(new Error).stack;void 0===r?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+n):(r=r.split("\n").splice(t).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+n),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+n),console.warn(r))),ga[e]=!0}}var Di={},mr=Object.create(null),Rr=Object.create(null);function es(){var n;for(n in mr)mr[n].destroy();for(n in Rr)Rr[n].destroy()}function rs(){var n;for(n in mr)delete mr[n];for(n in Rr)delete Rr[n]}var gn=function(){function n(e,t,r){this.canvas=L.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=r||L.RESOLUTION,this.resize(e,t)}return n.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},n.prototype.resize=function(e,t){this.canvas.width=Math.round(e*this.resolution),this.canvas.height=Math.round(t*this.resolution)},n.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(n.prototype,"width",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=Math.round(e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=Math.round(e)},enumerable:!1,configurable:!0}),n}();function mn(n){var v,m,x,e=n.width,t=n.height,r=n.getContext("2d",{willReadFrequently:!0}),a=r.getImageData(0,0,e,t).data,s=a.length,u={top:null,left:null,right:null,bottom:null},d=null;for(v=0;v<s;v+=4)0!==a[v+3]&&(m=v/4%e,x=~~(v/4/e),null===u.top&&(u.top=x),(null===u.left||m<u.left)&&(u.left=m),(null===u.right||u.right<m)&&(u.right=m+1),(null===u.bottom||u.bottom<x)&&(u.bottom=x));return null!==u.top&&(d=r.getImageData(u.left,u.top,e=u.right-u.left,t=u.bottom-u.top+1)),{height:t,width:e,data:d}}var zr,ma=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function Bs(n){var e=ma.exec(n);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function nn(n,e){if(void 0===e&&(e=globalThis.location),0===n.indexOf("data:"))return"";e=e||globalThis.location,zr||(zr=document.createElement("a")),zr.href=n;var t=xe.parse(zr.href);return t.hostname!==e.hostname||(t.port||""!==e.port)&&t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function Fi(n,e){var t=L.RETINA_PREFIX.exec(n);return t?parseFloat(t[1]):void 0!==e?e:1}var Ni=2*Math.PI,Ds=180/Math.PI,Fs=Math.PI/180,je=(()=>{return(n=je||(je={}))[n.POLY=0]="POLY",n[n.RECT=1]="RECT",n[n.CIRC=2]="CIRC",n[n.ELIP=3]="ELIP",n[n.RREC=4]="RREC",je;var n})(),Oe=function(){function n(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=0,this.y=0,this.x=e,this.y=t}return n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.copyFrom=function(e){return this.set(e.x,e.y),this},n.prototype.copyTo=function(e){return e.set(this.x,this.y),e},n.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},n.prototype.set=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.x=e,this.y=t,this},n.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},n}(),Ui=[new Oe,new Oe,new Oe,new Oe],Ce=function(){function n(e,t,r,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=Number(e),this.y=Number(t),this.width=Number(r),this.height=Number(i),this.type=je.RECT}return Object.defineProperty(n.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(n,"EMPTY",{get:function(){return new n(0,0,0,0)},enumerable:!1,configurable:!0}),n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},n.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},n.prototype.contains=function(e,t){return!(this.width<=0||this.height<=0)&&e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height},n.prototype.intersects=function(e,t){if(!t)return!((this.right>e.right?e.right:this.right)<=(this.x<e.x?e.x:this.x))&&(this.bottom>e.bottom?e.bottom:this.bottom)>(this.y<e.y?e.y:this.y);var u=this.left,d=this.right,v=this.top,m=this.bottom;if(d<=u||m<=v)return!1;var x=Ui[0].set(e.left,e.top),b=Ui[1].set(e.left,e.bottom),S=Ui[2].set(e.right,e.top),A=Ui[3].set(e.right,e.bottom);if(S.x<=x.x||b.y<=x.y)return!1;var M=Math.sign(t.a*t.d-t.b*t.c);if(0===M||(t.apply(x,x),t.apply(b,b),t.apply(S,S),t.apply(A,A),Math.max(x.x,b.x,S.x,A.x)<=u||Math.min(x.x,b.x,S.x,A.x)>=d||Math.max(x.y,b.y,S.y,A.y)<=v||Math.min(x.y,b.y,S.y,A.y)>=m))return!1;var F=M*(b.y-x.y),$=M*(x.x-b.x),mt=F*u+$*v,At=F*d+$*v,Gt=F*u+$*m,vt=F*d+$*m;if(Math.max(mt,At,Gt,vt)<=F*x.x+$*x.y||Math.min(mt,At,Gt,vt)>=F*A.x+$*A.y)return!1;var Ct=M*(x.y-S.y),Pt=M*(S.x-x.x),oe=Ct*u+Pt*v,Nt=Ct*d+Pt*v,kt=Ct*u+Pt*m,le=Ct*d+Pt*m;return!(Math.max(oe,Nt,kt,le)<=Ct*x.x+Pt*x.y||Math.min(oe,Nt,kt,le)>=Ct*A.x+Pt*A.y)},n.prototype.pad=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this},n.prototype.fit=function(e){var t=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),a=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(r-t,0),this.y=i,this.height=Math.max(a-i,0),this},n.prototype.ceil=function(e,t){void 0===e&&(e=1),void 0===t&&(t=.001);var r=Math.ceil((this.x+this.width-t)*e)/e,i=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=r-this.x,this.height=i-this.y,this},n.prototype.enlarge=function(e){var t=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),a=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=r-t,this.y=i,this.height=a-i,this},n.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},n}(),ns=function(){function n(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),this.x=e,this.y=t,this.radius=r,this.type=je.CIRC}return n.prototype.clone=function(){return new n(this.x,this.y,this.radius)},n.prototype.contains=function(e,t){if(this.radius<=0)return!1;var i=this.x-e,a=this.y-t;return(i*=i)+(a*=a)<=this.radius*this.radius},n.prototype.getBounds=function(){return new Ce(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},n.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},n}(),ya=function(){function n(e,t,r,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=e,this.y=t,this.width=r,this.height=i,this.type=je.ELIP}return n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var r=(e-this.x)/this.width,i=(t-this.y)/this.height;return(r*=r)+(i*=i)<=1},n.prototype.getBounds=function(){return new Ce(this.x-this.width,this.y-this.height,this.width,this.height)},n.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},n}(),oi=function(){function n(){for(var e=arguments,t=[],r=0;r<arguments.length;r++)t[r]=e[r];var i=Array.isArray(t[0])?t[0]:t;if("number"!=typeof i[0]){for(var a=[],s=0,u=i.length;s<u;s++)a.push(i[s].x,i[s].y);i=a}this.points=i,this.type=je.POLY,this.closeStroke=!0}return n.prototype.clone=function(){var t=new n(this.points.slice());return t.closeStroke=this.closeStroke,t},n.prototype.contains=function(e,t){for(var r=!1,i=this.points.length/2,a=0,s=i-1;a<i;s=a++){var u=this.points[2*a],d=this.points[2*a+1],m=this.points[2*s+1];d>t!=m>t&&e<(t-d)/(m-d)*(this.points[2*s]-u)+u&&(r=!r)}return r},n.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(e,t){return e+", "+t},"")+"]"},n}(),ki=function(){function n(e,t,r,i,a){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=20),this.x=e,this.y=t,this.width=r,this.height=i,this.radius=a,this.type=je.RREC}return n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height,this.radius)},n.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){var r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+r&&t<=this.y+this.height-r||e>=this.x+r&&e<=this.x+this.width-r)return!0;var i=e-(this.x+r),a=t-(this.y+r),s=r*r;if(i*i+a*a<=s||(i=e-(this.x+this.width-r))*i+a*a<=s||i*i+(a=t-(this.y+this.height-r))*a<=s||(i=e-(this.x+r))*i+a*a<=s)return!0}return!1},n.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"},n}(),yn=function(){function n(e,t,r,i){void 0===r&&(r=0),void 0===i&&(i=0),this._x=r,this._y=i,this.cb=e,this.scope=t}return n.prototype.clone=function(e,t){return void 0===e&&(e=this.cb),void 0===t&&(t=this.scope),new n(e,t,this._x,this._y)},n.prototype.set=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this},n.prototype.copyFrom=function(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this},n.prototype.copyTo=function(e){return e.set(this._x,this._y),e},n.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},n.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(n.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),n}(),ze=function(){function n(e,t,r,i,a,s){void 0===e&&(e=1),void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===a&&(a=0),void 0===s&&(s=0),this.array=null,this.a=e,this.b=t,this.c=r,this.d=i,this.tx=a,this.ty=s}return n.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},n.prototype.set=function(e,t,r,i,a,s){return this.a=e,this.b=t,this.c=r,this.d=i,this.tx=a,this.ty=s,this},n.prototype.toArray=function(e,t){this.array||(this.array=new Float32Array(9));var r=t||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r},n.prototype.apply=function(e,t){t=t||new Oe;var r=e.x,i=e.y;return t.x=this.a*r+this.c*i+this.tx,t.y=this.b*r+this.d*i+this.ty,t},n.prototype.applyInverse=function(e,t){t=t||new Oe;var r=1/(this.a*this.d+this.c*-this.b),i=e.x,a=e.y;return t.x=this.d*r*i+-this.c*r*a+(this.ty*this.c-this.tx*this.d)*r,t.y=this.a*r*a+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,t},n.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},n.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},n.prototype.rotate=function(e){var t=Math.cos(e),r=Math.sin(e),i=this.a,a=this.c,s=this.tx;return this.a=i*t-this.b*r,this.b=i*r+this.b*t,this.c=a*t-this.d*r,this.d=a*r+this.d*t,this.tx=s*t-this.ty*r,this.ty=s*r+this.ty*t,this},n.prototype.append=function(e){var t=this.a,r=this.b,i=this.c,a=this.d;return this.a=e.a*t+e.b*i,this.b=e.a*r+e.b*a,this.c=e.c*t+e.d*i,this.d=e.c*r+e.d*a,this.tx=e.tx*t+e.ty*i+this.tx,this.ty=e.tx*r+e.ty*a+this.ty,this},n.prototype.setTransform=function(e,t,r,i,a,s,u,d,v){return this.a=Math.cos(u+v)*a,this.b=Math.sin(u+v)*a,this.c=-Math.sin(u-d)*s,this.d=Math.cos(u-d)*s,this.tx=e-(r*this.a+i*this.c),this.ty=t-(r*this.b+i*this.d),this},n.prototype.prepend=function(e){var t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){var r=this.a,i=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this},n.prototype.decompose=function(e){var t=this.a,r=this.b,i=this.c,a=this.d,s=e.pivot,u=-Math.atan2(-i,a),d=Math.atan2(r,t),v=Math.abs(u+d);return v<1e-5||Math.abs(Ni-v)<1e-5?(e.rotation=d,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=u,e.skew.y=d),e.scale.x=Math.sqrt(t*t+r*r),e.scale.y=Math.sqrt(i*i+a*a),e.position.x=this.tx+(s.x*t+s.y*i),e.position.y=this.ty+(s.x*r+s.y*a),e},n.prototype.invert=function(){var e=this.a,t=this.b,r=this.c,i=this.d,a=this.tx,s=e*i-t*r;return this.a=i/s,this.b=-t/s,this.c=-r/s,this.d=e/s,this.tx=(r*this.ty-i*a)/s,this.ty=-(e*this.ty-t*a)/s,this},n.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},n.prototype.clone=function(){var e=new n;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},n.prototype.copyTo=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},n.prototype.copyFrom=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},n.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(n,"IDENTITY",{get:function(){return new n},enumerable:!1,configurable:!0}),Object.defineProperty(n,"TEMP_MATRIX",{get:function(){return new n},enumerable:!1,configurable:!0}),n}(),Wn=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ir=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Vr=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Br=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Eo=[],is=[],Oo=Math.sign;!function os(){for(var n=0;n<16;n++){var e=[];Eo.push(e);for(var t=0;t<16;t++)for(var r=Oo(Wn[n]*Wn[t]+Vr[n]*Ir[t]),i=Oo(Ir[n]*Wn[t]+Br[n]*Ir[t]),a=Oo(Wn[n]*Vr[t]+Vr[n]*Br[t]),s=Oo(Ir[n]*Vr[t]+Br[n]*Br[t]),u=0;u<16;u++)if(Wn[u]===r&&Ir[u]===i&&Vr[u]===a&&Br[u]===s){e.push(u);break}}for(n=0;n<16;n++){var d=new ze;d.set(Wn[n],Ir[n],Vr[n],Br[n],0,0),is.push(d)}}();var Le={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(n){return Wn[n]},uY:function(n){return Ir[n]},vX:function(n){return Vr[n]},vY:function(n){return Br[n]},inv:function(n){return 8&n?15&n:7&-n},add:function(n,e){return Eo[n][e]},sub:function(n,e){return Eo[n][Le.inv(e)]},rotate180:function(n){return 4^n},isVertical:function(n){return 2==(3&n)},byDirection:function(n,e){return 2*Math.abs(n)<=Math.abs(e)?e>=0?Le.S:Le.N:2*Math.abs(e)<=Math.abs(n)?n>0?Le.E:Le.W:e>0?n>0?Le.SE:Le.SW:n>0?Le.NE:Le.NW},matrixAppendRotationInv:function(n,e,t,r){void 0===t&&(t=0),void 0===r&&(r=0);var i=is[Le.inv(e)];i.tx=t,i.ty=r,n.append(i)}},ba=function(){function n(){this.worldTransform=new ze,this.localTransform=new ze,this.position=new yn(this.onChange,this,0,0),this.scale=new yn(this.onChange,this,1,1),this.pivot=new yn(this.onChange,this,0,0),this.skew=new yn(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return n.prototype.onChange=function(){this._localID++},n.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},n.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},n.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},n.prototype.updateTransform=function(e){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var r=e.worldTransform,i=this.worldTransform;i.a=t.a*r.a+t.b*r.c,i.b=t.a*r.b+t.b*r.d,i.c=t.c*r.a+t.d*r.c,i.d=t.c*r.b+t.d*r.d,i.tx=t.tx*r.a+t.ty*r.c+r.tx,i.ty=t.tx*r.b+t.ty*r.d+r.ty,this._parentID=e._worldID,this._worldID++}},n.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},Object.defineProperty(n.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())},enumerable:!1,configurable:!0}),n.IDENTITY=new n,n}();L.SORTABLE_CHILDREN=!1;var Li=function(){function n(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return n.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},n.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},n.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?Ce.EMPTY:((e=e||new Ce(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},n.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},n.prototype.addPointMatrix=function(e,t){var v=e.a*t.x+e.c*t.y+e.tx,m=e.b*t.x+e.d*t.y+e.ty;this.minX=Math.min(this.minX,v),this.maxX=Math.max(this.maxX,v),this.minY=Math.min(this.minY,m),this.maxY=Math.max(this.maxY,m)},n.prototype.addQuad=function(e){var t=this.minX,r=this.minY,i=this.maxX,a=this.maxY,s=e[0],u=e[1];t=s<t?s:t,r=u<r?u:r,i=s>i?s:i,a=u>a?u:a,t=(s=e[2])<t?s:t,r=(u=e[3])<r?u:r,i=s>i?s:i,a=u>a?u:a,t=(s=e[4])<t?s:t,r=(u=e[5])<r?u:r,i=s>i?s:i,a=u>a?u:a,r=(u=e[7])<r?u:r,i=(s=e[6])>i?s:i,a=u>a?u:a,this.minX=t=s<t?s:t,this.minY=r,this.maxX=i,this.maxY=a},n.prototype.addFrame=function(e,t,r,i,a){this.addFrameMatrix(e.worldTransform,t,r,i,a)},n.prototype.addFrameMatrix=function(e,t,r,i,a){var s=e.a,u=e.b,d=e.c,v=e.d,m=e.tx,x=e.ty,b=this.minX,S=this.minY,A=this.maxX,M=this.maxY,F=s*t+d*r+m,$=u*t+v*r+x;b=F<b?F:b,S=$<S?$:S,A=F>A?F:A,M=$>M?$:M,b=(F=s*i+d*r+m)<b?F:b,S=($=u*i+v*r+x)<S?$:S,A=F>A?F:A,M=$>M?$:M,b=(F=s*t+d*a+m)<b?F:b,S=($=u*t+v*a+x)<S?$:S,A=F>A?F:A,M=$>M?$:M,S=($=u*i+v*a+x)<S?$:S,A=(F=s*i+d*a+m)>A?F:A,M=$>M?$:M,this.minX=b=F<b?F:b,this.minY=S,this.maxX=A,this.maxY=M},n.prototype.addVertexData=function(e,t,r){for(var i=this.minX,a=this.minY,s=this.maxX,u=this.maxY,d=t;d<r;d+=2){var v=e[d],m=e[d+1];i=v<i?v:i,a=m<a?m:a,s=v>s?v:s,u=m>u?m:u}this.minX=i,this.minY=a,this.maxX=s,this.maxY=u},n.prototype.addVertices=function(e,t,r,i){this.addVerticesMatrix(e.worldTransform,t,r,i)},n.prototype.addVerticesMatrix=function(e,t,r,i,a,s){void 0===a&&(a=0),void 0===s&&(s=a);for(var u=e.a,d=e.b,v=e.c,m=e.d,x=e.tx,b=e.ty,S=this.minX,A=this.minY,M=this.maxX,F=this.maxY,$=r;$<i;$+=2){var mt=t[$],At=t[$+1],Gt=u*mt+v*At+x,vt=m*At+d*mt+b;S=Math.min(S,Gt-a),M=Math.max(M,Gt+a),A=Math.min(A,vt-s),F=Math.max(F,vt+s)}this.minX=S,this.minY=A,this.maxX=M,this.maxY=F},n.prototype.addBounds=function(e){var t=this.minX,r=this.minY,i=this.maxX,a=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>a?e.maxY:a},n.prototype.addBoundsMask=function(e,t){var r=e.minX>t.minX?e.minX:t.minX,i=e.minY>t.minY?e.minY:t.minY,a=e.maxX<t.maxX?e.maxX:t.maxX,s=e.maxY<t.maxY?e.maxY:t.maxY;if(r<=a&&i<=s){var u=this.minX,d=this.minY,v=this.maxX,m=this.maxY;this.minX=r<u?r:u,this.minY=i<d?i:d,this.maxX=a>v?a:v,this.maxY=s>m?s:m}},n.prototype.addBoundsMatrix=function(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)},n.prototype.addBoundsArea=function(e,t){var r=e.minX>t.x?e.minX:t.x,i=e.minY>t.y?e.minY:t.y,a=e.maxX<t.x+t.width?e.maxX:t.x+t.width,s=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(r<=a&&i<=s){var u=this.minX,d=this.minY,v=this.maxX,m=this.maxY;this.minX=r<u?r:u,this.minY=i<d?i:d,this.maxX=a>v?a:v,this.maxY=s>m?s:m}},n.prototype.pad=function(e,t){void 0===e&&(e=0),void 0===t&&(t=e),this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)},n.prototype.addFramePad=function(e,t,r,i,a,s){t-=s,r+=a,i+=s,this.minX=this.minX<(e-=a)?this.minX:e,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>i?this.maxY:i},n}(),as=function(n,e){return(as=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)};function R(n,e){function t(){this.constructor=n}as(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var l=function(n){function e(){var t=n.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new ba,t.alpha=1,t.visible=!0,t.renderable=!0,t.cullable=!1,t.cullArea=null,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new Li,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._maskRefCount=0,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}return R(e,n),e.mixin=function(t){for(var r=Object.keys(t),i=0;i<r.length;++i){var a=r[i];Object.defineProperty(e.prototype,a,Object.getOwnPropertyDescriptor(t,a))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,r){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),r||(this._boundsRect||(this._boundsRect=new Ce),r=this._boundsRect),this._bounds.getRectangle(r)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new Ce),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Li);var r=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var a=this._bounds,s=this._boundsID;this._bounds=this._localBounds;var u=this.getBounds(!1,t);return this.parent=i,this.transform=r,this._bounds=a,this._bounds.updateID+=this._boundsID-s,u},e.prototype.toGlobal=function(t,r,i){return void 0===i&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,r)},e.prototype.toLocal=function(t,r,i,a){return r&&(t=r.toGlobal(t,i,a)),a||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,r,i,a,s,u,d,v,m){return void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===a&&(a=1),void 0===s&&(s=0),void 0===u&&(u=0),void 0===d&&(d=0),void 0===v&&(v=0),void 0===m&&(m=0),this.position.x=t,this.position.y=r,this.scale.x=i||1,this.scale.y=a||1,this.rotation=s,this.skew.x=u,this.skew.y=d,this.pivot.x=v,this.pivot.y=m,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new h),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*Ds},set:function(t){this.transform.rotation=t*Fs},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){var r;this._mask!==t&&(this._mask&&(r=this._mask.isMaskData?this._mask.maskObject:this._mask)&&(r._maskRefCount--,0===r._maskRefCount&&(r.renderable=!0,r.isMask=!1)),this._mask=t,this._mask&&(r=this._mask.isMaskData?this._mask.maskObject:this._mask)&&(0===r._maskRefCount&&(r.renderable=!1,r.isMask=!0),r._maskRefCount++))},enumerable:!1,configurable:!0}),e}(nt),h=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.sortDirty=null,t}return R(e,n),e}(l);function c(n,e){return n.zIndex===e.zIndex?n._lastSortedIndex-e._lastSortedIndex:n.zIndex-e.zIndex}l.prototype.displayObjectUpdateTransform=l.prototype.updateTransform;var f=function(n){function e(){var t=n.call(this)||this;return t.children=[],t.sortableChildren=L.SORTABLE_CHILDREN,t.sortDirty=!1,t}return R(e,n),e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,r=[],i=0;i<arguments.length;i++)r[i]=t[i];if(r.length>1)for(var a=0;a<r.length;a++)this.addChild(r[a]);else{var s=r[0];s.parent&&s.parent.removeChild(s),s.parent=this,this.sortDirty=!0,s.transform._parentID=-1,this.children.push(s),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",s,this,this.children.length-1),s.emit("added",this)}return r[0]},e.prototype.addChildAt=function(t,r){if(r<0||r>this.children.length)throw new Error(t+"addChildAt: The index "+r+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(r,0,t),this._boundsID++,this.onChildrenChange(r),t.emit("added",this),this.emit("childAdded",t,this,r),t},e.prototype.swapChildren=function(t,r){if(t!==r){var i=this.getChildIndex(t),a=this.getChildIndex(r);this.children[i]=r,this.children[a]=t,this.onChildrenChange(i<a?i:a)}},e.prototype.getChildIndex=function(t){var r=this.children.indexOf(t);if(-1===r)throw new Error("The supplied DisplayObject must be a child of the caller");return r},e.prototype.setChildIndex=function(t,r){if(r<0||r>=this.children.length)throw new Error("The index "+r+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);Bn(this.children,i,1),this.children.splice(r,0,t),this.onChildrenChange(r)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,r=[],i=0;i<arguments.length;i++)r[i]=t[i];if(r.length>1)for(var a=0;a<r.length;a++)this.removeChild(r[a]);else{var s=r[0],u=this.children.indexOf(s);if(-1===u)return null;s.parent=null,s.transform._parentID=-1,Bn(this.children,u,1),this._boundsID++,this.onChildrenChange(u),s.emit("removed",this),this.emit("childRemoved",s,this,u)}return r[0]},e.prototype.removeChildAt=function(t){var r=this.getChildAt(t);return r.parent=null,r.transform._parentID=-1,Bn(this.children,t,1),this._boundsID++,this.onChildrenChange(t),r.emit("removed",this),this.emit("childRemoved",r,this,t),r},e.prototype.removeChildren=function(t,r){void 0===t&&(t=0),void 0===r&&(r=this.children.length);var u,s=r-t;if(s>0&&s<=r){u=this.children.splice(t,s);for(var d=0;d<u.length;++d)u[d].parent=null,u[d].transform&&(u[d].transform._parentID=-1);for(this._boundsID++,this.onChildrenChange(t),d=0;d<u.length;++d)u[d].emit("removed",this),this.emit("childRemoved",u[d],this,d);return u}if(0===s&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,r=0,i=this.children.length;r<i;++r){var a=this.children[r];a._lastSortedIndex=r,!t&&0!==a.zIndex&&(t=!0)}t&&this.children.length>1&&this.children.sort(c),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,r=this.children.length;t<r;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var r=this.children[t];if(r.visible&&r.renderable)if(r.calculateBounds(),r._mask){var i=r._mask.isMaskData?r._mask.maskObject:r._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(r._bounds,i._bounds)):this._bounds.addBounds(r._bounds)}else r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(t,r){void 0===r&&(r=!1);var i=n.prototype.getLocalBounds.call(this,t);if(!r)for(var a=0,s=this.children.length;a<s;++a){var u=this.children[a];u.visible&&u.updateTransform()}return i},e.prototype._calculateBounds=function(){},e.prototype._renderWithCulling=function(t){var r=t.renderTexture.sourceFrame;if(r.width>0&&r.height>0){var i,a;if(this.cullArea?(i=this.cullArea,a=this.worldTransform):this._render!==e.prototype._render&&(i=this.getBounds(!0)),i&&r.intersects(i,a))this._render(t);else if(this.cullArea)return;for(var s=0,u=this.children.length;s<u;++s){var d=this.children[s],v=d.cullable;d.cullable=v||!this.cullArea,d.render(t),d.cullable=v}}},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(var r=0,i=this.children.length;r<i;++r)this.children[r].render(t)}},e.prototype.renderAdvanced=function(t){var r=this.filters,i=this._mask;if(r){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var a=0;a<r.length;a++)r[a].enabled&&this._enabledFilters.push(r[a])}var s=r&&this._enabledFilters&&this._enabledFilters.length||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==Xt.NONE));if(s&&t.batch.flush(),r&&this._enabledFilters&&this._enabledFilters.length&&t.filter.push(this,this._enabledFilters),i&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t),a=0;for(var u=this.children.length;a<u;++a)this.children[a].render(t)}s&&t.batch.flush(),i&&t.mask.pop(this),r&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(t){n.prototype.destroy.call(this),this.sortDirty=!1;var r="boolean"==typeof t?t:t&&t.children,i=this.removeChildren(0,this.children.length);if(r)for(var a=0;a<i.length;++a)i[a].destroy(t)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var r=this.getLocalBounds().width;this.scale.x=0!==r?t/r:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var r=this.getLocalBounds().height;this.scale.y=0!==r?t/r:1,this._height=t},enumerable:!1,configurable:!0}),e}(l);f.prototype.containerUpdateTransform=f.prototype.updateTransform;var g=function(){return g=Object.assign||function(e){for(var r,t=arguments,i=1,a=arguments.length;i<a;i++)for(var s in r=t[i])Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);return e},g.apply(this,arguments)},y=(()=>{return(n=y||(y={})).Application="application",n.RendererPlugin="renderer-webgl-plugin",n.CanvasRendererPlugin="renderer-canvas-plugin",n.Loader="loader",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser",y;var n})(),T=function(n){if("function"==typeof n||"object"==typeof n&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");n=g(g({},"object"!=typeof n.extension?{type:n.extension}:n.extension),{ref:n})}if("object"!=typeof n)throw new Error("Invalid extension type");return"string"==typeof(n=g({},n)).type&&(n.type=[n.type]),n},P={_addHandlers:null,_removeHandlers:null,_queue:{},remove:function(){for(var n=arguments,e=this,t=[],r=0;r<arguments.length;r++)t[r]=n[r];return t.map(T).forEach(function(i){i.type.forEach(function(a){var s,u;return null===(u=(s=e._removeHandlers)[a])||void 0===u?void 0:u.call(s,i)})}),this},add:function(){for(var n=arguments,e=this,t=[],r=0;r<arguments.length;r++)t[r]=n[r];return t.map(T).forEach(function(i){i.type.forEach(function(a){var s=e._addHandlers,u=e._queue;s[a]?s[a](i):(u[a]=u[a]||[],u[a].push(i))})}),this},handle:function(n,e,t){var r=this._addHandlers=this._addHandlers||{},i=this._removeHandlers=this._removeHandlers||{};if(r[n]||i[n])throw new Error("Extension type "+n+" already has a handler");r[n]=e,i[n]=t;var a=this._queue;return a[n]&&(a[n].forEach(function(s){return e(s)}),delete a[n]),this},handleByMap:function(n,e){return this.handle(n,function(t){e[t.name]=t.ref},function(t){delete e[t.name]})},handleByList:function(n,e){return this.handle(n,function(t){var r,i;e.includes(t.ref)||(e.push(t.ref),n===y.Loader&&(null===(i=(r=t.ref).add)||void 0===i||i.call(r)))},function(t){var r=e.indexOf(t.ref);-1!==r&&e.splice(r,1)})}},O=function(){function n(e){this.items=[],this._name=e,this._aliasCount=0}return n.prototype.emit=function(e,t,r,i,a,s,u,d){if(arguments.length>8)throw new Error("max arguments reached");var v=this,m=v.name,x=v.items;this._aliasCount++;for(var b=0,S=x.length;b<S;b++)x[b][m](e,t,r,i,a,s,u,d);return x===this.items&&this._aliasCount--,this},n.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},n.prototype.add=function(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this},n.prototype.remove=function(e){var t=this.items.indexOf(e);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},n.prototype.contains=function(e){return-1!==this.items.indexOf(e)},n.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},n.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(n.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),n}();Object.defineProperties(O.prototype,{dispatch:{value:O.prototype.emit},run:{value:O.prototype.emit}}),L.TARGET_FPMS=.06;var B=(()=>{return(n=B||(B={}))[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",B;var n})(),Q=function(){function n(e,t,r,i){void 0===t&&(t=null),void 0===r&&(r=0),void 0===i&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=r,this.once=i}return n.prototype.match=function(e,t){return void 0===t&&(t=null),this.fn===e&&this.context===t},n.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},n.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},n.prototype.destroy=function(e){void 0===e&&(e=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=e?null:t,this.previous=null,t},n}(),q=function(){function n(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Q(null,null,1/0),this.deltaMS=1/L.TARGET_FPMS,this.elapsedMS=1/L.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return n.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},n.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},n.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},n.prototype.add=function(e,t,r){return void 0===r&&(r=B.NORMAL),this._addListener(new Q(e,t,r))},n.prototype.addOnce=function(e,t,r){return void 0===r&&(r=B.NORMAL),this._addListener(new Q(e,t,r,!0))},n.prototype._addListener=function(e){var t=this._head.next,r=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(r);break}r=t,t=t.next}e.previous||e.connect(r)}else e.connect(r);return this._startIfPossible(),this},n.prototype.remove=function(e,t){for(var r=this._head.next;r;)r=r.match(e,t)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(n.prototype,"count",{get:function(){if(!this._head)return 0;for(var e=0,t=this._head;t=t.next;)e++;return e},enumerable:!1,configurable:!0}),n.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},n.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},n.prototype.destroy=function(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}},n.prototype.update=function(e){var t;if(void 0===e&&(e=performance.now()),e>this.lastTime){if((t=this.elapsedMS=e-this.lastTime)>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){var r=e-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=e-r%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*L.TARGET_FPMS;for(var i=this._head,a=i.next;a;)a=a.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e},Object.defineProperty(n.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(this.maxFPS,e),r=Math.min(Math.max(0,t)/1e3,L.TARGET_FPMS);this._maxElapsedMS=1/r},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(e){if(0===e)this._minElapsedMS=0;else{var t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(n,"shared",{get:function(){if(!n._shared){var e=n._shared=new n;e.autoStart=!0,e._protected=!0}return n._shared},enumerable:!1,configurable:!0}),Object.defineProperty(n,"system",{get:function(){if(!n._system){var e=n._system=new n;e.autoStart=!0,e._protected=!0}return n._system},enumerable:!1,configurable:!0}),n}(),ot=function(){function n(){}return n.init=function(e){var t=this;e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set:function(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,B.LOW)},get:function(){return this._ticker}}),this.stop=function(){t._ticker.stop()},this.start=function(){t._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?q.shared:new q,e.autoStart&&this.start()},n.destroy=function(){if(this._ticker){var e=this._ticker;this.ticker=null,e.destroy()}},n.extension=y.Application,n}();L.PREFER_ENV=pr.any?te.WEBGL:te.WEBGL2,L.STRICT_TEXTURE_CACHE=!1;var pt=[];function z(n,e){if(!n)return null;var t="";if("string"==typeof n){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(n);r&&(t=r[1].toLowerCase())}for(var i=pt.length-1;i>=0;--i){var a=pt[i];if(a.test&&a.test(n,t))return new a(n,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var _t=function(n,e){return(_t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)};function Tt(n,e){function t(){this.constructor=n}_t(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var Bt=function(){return Bt=Object.assign||function(e){for(var r,t=arguments,i=1,a=arguments.length;i<a;i++)for(var s in r=t[i])Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);return e},Bt.apply(this,arguments)},Ft=function(){function n(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new O("setRealSize"),this.onUpdate=new O("update"),this.onError=new O("onError")}return n.prototype.bind=function(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},n.prototype.unbind=function(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)},n.prototype.resize=function(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))},Object.defineProperty(n.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),n.prototype.update=function(){this.destroyed||this.onUpdate.emit()},n.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(n.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),n.prototype.style=function(e,t,r){return!1},n.prototype.dispose=function(){},n.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},n.test=function(e,t){return!1},n}(),Rt=function(n){function e(t,r){var i=this,a=r||{},s=a.width,u=a.height;if(!s||!u)throw new Error("BufferResource width or height invalid");return(i=n.call(this,s,u)||this).data=t,i}return Tt(e,n),e.prototype.upload=function(t,r,i){var a=t.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===St.UNPACK);var s=r.realWidth,u=r.realHeight;return i.width===s&&i.height===u?a.texSubImage2D(r.target,0,0,0,s,u,r.format,i.type,this.data):(i.width=s,i.height=u,a.texImage2D(r.target,0,i.internalFormat,s,u,0,r.format,i.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(Ft),$t={scaleMode:Y.NEAREST,format:E.RGBA,alphaMode:St.NPM},Et=function(n){function e(t,r){void 0===t&&(t=null),void 0===r&&(r=null);var i=n.call(this)||this,a=(r=r||{}).alphaMode,s=r.mipmap,u=r.anisotropicLevel,d=r.scaleMode,v=r.width,m=r.height,x=r.wrapMode,b=r.format,S=r.type,A=r.target,M=r.resolution;return t&&!(t instanceof Ft)&&((t=z(t,r.resourceOptions)).internal=!0),i.resolution=M||L.RESOLUTION,i.width=Math.round((v||0)*i.resolution)/i.resolution,i.height=Math.round((m||0)*i.resolution)/i.resolution,i._mipmap=void 0!==s?s:L.MIPMAP_TEXTURES,i.anisotropicLevel=void 0!==u?u:L.ANISOTROPIC_LEVEL,i._wrapMode=x||L.WRAP_MODE,i._scaleMode=void 0!==d?d:L.SCALE_MODE,i.format=b||E.RGBA,i.type=S||k.UNSIGNED_BYTE,i.target=A||et.TEXTURE_2D,i.alphaMode=void 0!==a?a:St.UNPACK,i.uid=hr(),i.touched=0,i.isPowerOfTwo=!1,i._refreshPOT(),i._glTextures={},i.dirtyId=0,i.dirtyStyleId=0,i.cacheId=null,i.valid=v>0&&m>0,i.textureCacheIds=[],i.destroyed=!1,i.resource=null,i._batchEnabled=0,i._batchLocation=0,i.parentTextureArray=null,i.setResource(t),i}return Tt(e,n),Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,r){var i;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),void 0!==r&&r!==this.mipmap&&(this.mipmap=r,i=!0),i&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,r,i){return this.setRealSize(t*(i=i||this.resolution),r*i,i)},e.prototype.setRealSize=function(t,r,i){return this.resolution=i||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(r)/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=Po(this.realWidth)&&Po(this.realHeight)},e.prototype.setResolution=function(t){var r=this.resolution;return r===t||(this.resolution=t,this.valid&&(this.width=Math.round(this.width*r)/t,this.height=Math.round(this.height*r)/t,this.emit("update",this)),this._refreshPOT()),this},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Rr[this.cacheId],delete mr[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,r,i){void 0===i&&(i=L.STRICT_TEXTURE_CACHE);var a="string"==typeof t,s=null;a?s=t:(t._pixiId||(t._pixiId=(r&&r.pixiIdPrefix||"pixiid")+"_"+hr()),s=t._pixiId);var d=Rr[s];if(a&&i&&!d)throw new Error('The cacheId "'+s+'" does not exist in BaseTextureCache.');return d||((d=new e(t,r)).cacheId=s,e.addToCache(d,s)),d},e.fromBuffer=function(t,r,i,a){t=t||new Float32Array(r*i*4);var s=new Rt(t,{width:r,height:i}),u=t instanceof Float32Array?k.FLOAT:k.UNSIGNED_BYTE;return new e(s,Object.assign({},$t,a||{width:r,height:i,type:u}))},e.addToCache=function(t,r){r&&(-1===t.textureCacheIds.indexOf(r)&&t.textureCacheIds.push(r),Rr[r]&&console.warn("BaseTexture added to the cache with an id ["+r+"] that already had an entry"),Rr[r]=t)},e.removeFromCache=function(t){if("string"==typeof t){var r=Rr[t];if(r){var i=r.textureCacheIds.indexOf(t);return i>-1&&r.textureCacheIds.splice(i,1),delete Rr[t],r}}else if(t&&t.textureCacheIds){for(var a=0;a<t.textureCacheIds.length;++a)delete Rr[t.textureCacheIds[a]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e}(nt),qt=function(n){function e(t,r){var i=this,a=r||{};(i=n.call(this,a.width,a.height)||this).items=[],i.itemDirtyIds=[];for(var d=0;d<t;d++){var v=new Et;i.items.push(v),i.itemDirtyIds.push(-2)}return i.length=t,i._load=null,i.baseTexture=null,i}return Tt(e,n),e.prototype.initFromArray=function(t,r){for(var i=0;i<this.length;i++)!t[i]||(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):this.addResourceAt(t[i]instanceof Ft?t[i]:z(t[i],r),i))},e.prototype.dispose=function(){for(var t=0,r=this.length;t<r;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,r){if(!this.items[r])throw new Error("Index "+r+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[r].setResource(t),this},e.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");n.prototype.bind.call(this,t);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=t,this.items[r].on("update",t.update,t)},e.prototype.unbind=function(t){n.prototype.unbind.call(this,t);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",t.update,t)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var i=this.items.map(function(a){return a.resource}).filter(function(a){return a}).map(function(a){return a.load()});return this._load=Promise.all(i).then(function(){var a=t.items[0];return t.resize(a.realWidth,a.realHeight),Promise.resolve(t)}),this._load},e}(Ft),Lt=function(n){function e(t,r){var d,v,i=this,a=r||{},s=a.width,u=a.height;return Array.isArray(t)?(d=t,v=t.length):v=t,i=n.call(this,v,{width:s,height:u})||this,d&&i.initFromArray(d,r),i}return Tt(e,n),e.prototype.addBaseTextureAt=function(t,r){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,r),this},e.prototype.bind=function(t){n.prototype.bind.call(this,t),t.target=et.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,r,i){var a=this,s=a.length,u=a.itemDirtyIds,d=a.items,v=t.gl;i.dirtyId<0&&v.texImage3D(v.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,s,0,r.format,i.type,null);for(var m=0;m<s;m++){var x=d[m];u[m]<x.dirtyId&&(u[m]=x.dirtyId,x.valid&&v.texSubImage3D(v.TEXTURE_2D_ARRAY,0,0,0,m,x.resource.width,x.resource.height,1,r.format,i.type,x.resource.source))}return!0},e}(qt),ye=function(n){function e(t){var r=this;return(r=n.call(this,t.naturalWidth||t.videoWidth||t.width,t.naturalHeight||t.videoHeight||t.height)||this).source=t,r.noSubImage=!1,r}return Tt(e,n),e.crossOrigin=function(t,r,i){void 0===i&&0!==r.indexOf("data:")?t.crossOrigin=nn(r):!1!==i&&(t.crossOrigin="string"==typeof i?i:"anonymous")},e.prototype.upload=function(t,r,i,a){var s=t.gl,u=r.realWidth,d=r.realHeight;if((a=a||this.source)instanceof HTMLImageElement){if(!a.complete||0===a.naturalWidth)return!1}else if(a instanceof HTMLVideoElement&&a.readyState<=1)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===St.UNPACK),this.noSubImage||r.target!==s.TEXTURE_2D||i.width!==u||i.height!==d?(i.width=u,i.height=d,s.texImage2D(r.target,0,i.internalFormat,r.format,i.type,a)):s.texSubImage2D(s.TEXTURE_2D,0,0,0,r.format,i.type,a),!0},e.prototype.update=function(){if(!this.destroyed){var t=this.source;this.resize(t.naturalWidth||t.videoWidth||t.width,t.naturalHeight||t.videoHeight||t.height),n.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(Ft),Ne=function(n){function e(t){return n.call(this,t)||this}return Tt(e,n),e.test=function(t){var r=globalThis.OffscreenCanvas;return!!(r&&t instanceof r)||globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement},e}(ye),De=function(n){function e(t,r){var i=this,a=r||{},s=a.width,u=a.height,d=a.autoLoad,v=a.linkBaseTexture;if(t&&t.length!==e.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");i=n.call(this,6,{width:s,height:u})||this;for(var m=0;m<e.SIDES;m++)i.items[m].target=et.TEXTURE_CUBE_MAP_POSITIVE_X+m;return i.linkBaseTexture=!1!==v,t&&i.initFromArray(t,r),!1!==d&&i.load(),i}return Tt(e,n),e.prototype.bind=function(t){n.prototype.bind.call(this,t),t.target=et.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,r,i){if(!this.items[r])throw new Error("Index "+r+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,r)}else t.target=et.TEXTURE_CUBE_MAP_POSITIVE_X+r,t.parentTextureArray=this.baseTexture,this.items[r]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[r]=t,this},e.prototype.upload=function(t,r,i){for(var a=this.itemDirtyIds,s=0;s<e.SIDES;s++){var u=this.items[s];(a[s]<u.dirtyId||i.dirtyId<r.dirtyId)&&(u.valid&&u.resource?(u.resource.upload(t,u,i),a[s]=u.dirtyId):a[s]<-1&&(t.gl.texImage2D(u.target,0,i.internalFormat,r.realWidth,r.realHeight,0,r.format,i.type,null),a[s]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e}(qt),Me=function(n){function e(t,r){var i=this;if(r=r||{},!(t instanceof HTMLImageElement)){var a=new Image;ye.crossOrigin(a,t,r.crossorigin),a.src=t,t=a}return i=n.call(this,t)||this,!t.complete&&!!i._width&&!!i._height&&(i._width=0,i._height=0),i.url=t.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==r.createBitmap?r.createBitmap:L.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,i.alphaMode="number"==typeof r.alphaMode?r.alphaMode:null,i.bitmap=null,i._load=null,!1!==r.autoLoad&&i.load(),i}return Tt(e,n),e.prototype.load=function(t){var r=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(function(i,a){var s=r.source;r.url=s.src;var u=function(){r.destroyed||(s.onload=null,s.onerror=null,r.resize(s.width,s.height),r._load=null,i(r.createBitmap?r.process():r))};s.complete&&s.src?u():(s.onload=u,s.onerror=function(d){a(d),r.onError.emit(d)})})),this._load},e.prototype.process=function(){var t=this,r=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);var i=globalThis.createImageBitmap;return this._process=fetch(r.src,{mode:r.crossOrigin&&"anonymous"!==r.crossOrigin?"no-cors":"cors"}).then(function(s){return s.blob()}).then(function(s){return i(s,0,0,r.width,r.height,{premultiplyAlpha:null===t.alphaMode||t.alphaMode===St.UNPACK?"premultiply":"none"})}).then(function(s){return t.destroyed?Promise.reject():(t.bitmap=s,t.update(),t._process=null,Promise.resolve(t))}),this._process},e.prototype.upload=function(t,r,i){if("number"==typeof this.alphaMode&&(r.alphaMode=this.alphaMode),!this.createBitmap)return n.prototype.upload.call(this,t,r,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(n.prototype.upload.call(this,t,r,i,this.bitmap),!this.preserveBitmap){var a=!0,s=r._glTextures;for(var u in s){var d=s[u];if(d!==i&&d.dirtyId!==r.dirtyId){a=!1;break}}a&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,n.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},e}(ye),sr=function(n){function e(t,r){var i=this;return r=r||{},(i=n.call(this,L.ADAPTER.createCanvas())||this)._width=0,i._height=0,i.svg=t,i.scale=r.scale||1,i._overrideWidth=r.width,i._overrideHeight=r.height,i._resolve=null,i._crossorigin=r.crossorigin,i._load=null,!1!==r.autoLoad&&i.load(),i}return Tt(e,n),e.prototype.load=function(){var t=this;return this._load||(this._load=new Promise(function(r){if(t._resolve=function(){t.resize(t.source.width,t.source.height),r(t)},e.SVG_XML.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()})),this._load},e.prototype._loadSvg=function(){var t=this,r=new Image;ye.crossOrigin(r,this.svg,this._crossorigin),r.src=this.svg,r.onerror=function(i){!t._resolve||(r.onerror=null,t.onError.emit(i))},r.onload=function(){if(t._resolve){var i=r.width,a=r.height;if(!i||!a)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var s=i*t.scale,u=a*t.scale;(t._overrideWidth||t._overrideHeight)&&(s=t._overrideWidth||t._overrideHeight/a*i,u=t._overrideHeight||t._overrideWidth/i*a),s=Math.round(s),u=Math.round(u);var d=t.source;d.width=s,d.height=u,d._pixiId="canvas_"+hr(),d.getContext("2d").drawImage(r,0,0,i,a,0,0,s,u),t._resolve(),t._resolve=null}}},e.getSize=function(t){var r=e.SVG_SIZE.exec(t),i={};return r&&(i[r[1]]=Math.round(parseFloat(r[3])),i[r[5]]=Math.round(parseFloat(r[7]))),i},e.prototype.dispose=function(){n.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,r){return"svg"===r||"string"==typeof t&&t.startsWith("data:image/svg+xml")||"string"==typeof t&&e.SVG_XML.test(t)},e.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(ye),rr=function(n){function e(t,r){var i=this;if(r=r||{},!(t instanceof HTMLVideoElement)){var a=document.createElement("video");a.setAttribute("preload","auto"),a.setAttribute("webkit-playsinline",""),a.setAttribute("playsinline",""),"string"==typeof t&&(t=[t]),ye.crossOrigin(a,t[0].src||t[0],r.crossorigin);for(var u=0;u<t.length;++u){var d=document.createElement("source"),v=t[u],m=v.src,x=v.mime,b=(m=m||t[u]).split("?").shift().toLowerCase(),S=b.slice(b.lastIndexOf(".")+1);x=x||e.MIME_TYPES[S]||"video/"+S,d.src=m,d.type=x,a.appendChild(d)}t=a}return(i=n.call(this,t)||this).noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=r.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=!1!==r.autoPlay,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),!1!==r.autoLoad&&i.load(),i}return Tt(e,n),e.prototype.update=function(t){this.destroyed||(this._msToNextUpdate=Math.floor(this._msToNextUpdate-q.shared.elapsedMS*this.source.playbackRate),(!this._updateFPS||this._msToNextUpdate<=0)&&(n.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},e.prototype.load=function(){var t=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(i){t.valid?i(t):(t._resolve=i,r.load())}),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return!t.paused&&!t.ended&&this._isSourceReady()},e.prototype._isSourceReady=function(){return this.source.readyState>2},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(q.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(q.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var r=this.valid;this.resize(t.videoWidth,t.videoHeight),!r&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&(q.shared.remove(this.update,this),this._isConnectedToTicker=!1);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),n.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(q.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(q.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,r){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.indexOf(r)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(ye),Ve=function(n){function e(t){return n.call(this,t)||this}return Tt(e,n),e.test=function(t){return!!globalThis.createImageBitmap&&"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},e}(ye);pt.push(Me,Ve,Ne,rr,sr,Rt,De,Lt);var nr={__proto__:null,Resource:Ft,BaseImageResource:ye,INSTALLED:pt,autoDetectResource:z,AbstractMultiResource:qt,ArrayResource:Lt,BufferResource:Rt,CanvasResource:Ne,CubeResource:De,ImageResource:Me,SVGResource:sr,VideoResource:rr,ImageBitmapResource:Ve},Wr=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return Tt(e,n),e.prototype.upload=function(t,r,i){var a=t.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===St.UNPACK);var s=r.realWidth,u=r.realHeight;return i.width===s&&i.height===u?a.texSubImage2D(r.target,0,0,0,s,u,r.format,i.type,this.data):(i.width=s,i.height=u,a.texImage2D(r.target,0,i.internalFormat,s,u,0,r.format,i.type,this.data)),!0},e}(Rt),ai=function(){function n(e,t){this.width=Math.round(e||100),this.height=Math.round(t||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new O("disposeFramebuffer"),this.multisample=Qt.NONE}return Object.defineProperty(n.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),n.prototype.addColorTexture=function(e,t){return void 0===e&&(e=0),this.colorTextures[e]=t||new Et(null,{scaleMode:Y.NEAREST,resolution:1,mipmap:ct.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},n.prototype.addDepthTexture=function(e){return this.depthTexture=e||new Et(new Wr(null,{width:this.width,height:this.height}),{scaleMode:Y.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:ct.OFF,format:E.DEPTH_COMPONENT,type:k.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},n.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},n.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},n.prototype.resize=function(e,t){if(e=Math.round(e),t=Math.round(t),e!==this.width||t!==this.height){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var i=this.colorTextures[r];i.setSize(e/(a=i.resolution),t/a)}var a;this.depthTexture&&this.depthTexture.setSize(e/(a=this.depthTexture.resolution),t/a)}},n.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},n.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},n}(),si=function(n){function e(t){void 0===t&&(t={});var r=this;if("number"==typeof t){var i=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3];t={width:i,height:a,scaleMode:s,resolution:u}}return t.width=t.width||100,t.height=t.height||100,t.multisample=void 0!==t.multisample?t.multisample:Qt.NONE,(r=n.call(this,null,t)||this).mipmap=ct.OFF,r.valid=!0,r.clearColor=[0,0,0,0],r.framebuffer=new ai(r.realWidth,r.realHeight).addColorTexture(0,r),r.framebuffer.multisample=t.multisample,r.maskStack=[],r.filterStack=[{}],r}return Tt(e,n),e.prototype.resize=function(t,r){this.framebuffer.resize(t*this.resolution,r*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},e.prototype.dispose=function(){this.framebuffer.dispose(),n.prototype.dispose.call(this)},e.prototype.destroy=function(){n.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(Et),li=function(){function n(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return n.prototype.set=function(e,t,r){var i=t.width,a=t.height;if(r){var s=e.width/2/i,u=e.height/2/a,d=e.x/i+s,v=e.y/a+u;r=Le.add(r,Le.NW),this.x0=d+s*Le.uX(r),this.y0=v+u*Le.uY(r),r=Le.add(r,2),this.x1=d+s*Le.uX(r),this.y1=v+u*Le.uY(r),r=Le.add(r,2),this.x2=d+s*Le.uX(r),this.y2=v+u*Le.uY(r),r=Le.add(r,2),this.x3=d+s*Le.uX(r),this.y3=v+u*Le.uY(r)}else this.x0=e.x/i,this.y0=e.y/a,this.x1=(e.x+e.width)/i,this.y1=e.y/a,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/a,this.x3=e.x/i,this.y3=(e.y+e.height)/a;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},n.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},n}(),Fn=new li;function Gi(n){n.destroy=function(){},n.on=function(){},n.once=function(){},n.emit=function(){}}var he=function(n){function e(t,r,i,a,s,u){var d=n.call(this)||this;if(d.noFrame=!1,r||(d.noFrame=!0,r=new Ce(0,0,1,1)),t instanceof e&&(t=t.baseTexture),d.baseTexture=t,d._frame=r,d.trim=a,d.valid=!1,d._uvs=Fn,d.uvMatrix=null,d.orig=i||r,d._rotate=Number(s||0),!0===s)d._rotate=2;else if(d._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return d.defaultAnchor=u?new Oe(u.x,u.y):new Oe(0,0),d._updateID=0,d.textureCacheIds=[],t.valid?d.noFrame?t.valid&&d.onBaseTextureUpdated(t):d.frame=r:t.once("loaded",d.onBaseTextureUpdated,d),d.noFrame&&t.on("update",d.onBaseTextureUpdated,d),d}return Tt(e,n),e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var r=this.baseTexture.resource;r&&r.url&&mr[r.url]&&e.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var t=this._frame.clone(),r=this._frame===this.orig?t:this.orig.clone(),i=new e(this.baseTexture,!this.noFrame&&t,r,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(i._frame=t),i},e.prototype.updateUvs=function(){this._uvs===Fn&&(this._uvs=new li),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,r,i){void 0===r&&(r={}),void 0===i&&(i=L.STRICT_TEXTURE_CACHE);var a="string"==typeof t,s=null;a?s=t:t instanceof Et?(t.cacheId||(t.cacheId=(r&&r.pixiIdPrefix||"pixiid")+"-"+hr(),Et.addToCache(t,t.cacheId)),s=t.cacheId):(t._pixiId||(t._pixiId=(r&&r.pixiIdPrefix||"pixiid")+"_"+hr()),s=t._pixiId);var d=mr[s];if(a&&i&&!d)throw new Error('The cacheId "'+s+'" does not exist in TextureCache.');return d||t instanceof Et?!d&&t instanceof Et&&(d=new e(t),e.addToCache(d,s)):(r.resolution||(r.resolution=Fi(t)),(d=new e(new Et(t,r))).baseTexture.cacheId=s,Et.addToCache(d.baseTexture,s),e.addToCache(d,s)),d},e.fromURL=function(t,r){var i=Object.assign({autoLoad:!1},null==r?void 0:r.resourceOptions),a=e.from(t,Object.assign({resourceOptions:i},r),!1),s=a.baseTexture.resource;return a.baseTexture.valid?Promise.resolve(a):s.load().then(function(){return Promise.resolve(a)})},e.fromBuffer=function(t,r,i,a){return new e(Et.fromBuffer(t,r,i,a))},e.fromLoader=function(t,r,i,a){var s=new Et(t,Object.assign({scaleMode:L.SCALE_MODE,resolution:Fi(r)},a)),u=s.resource;u instanceof Me&&(u.url=r);var d=new e(s);return i||(i=r),Et.addToCache(d.baseTexture,i),e.addToCache(d,i),i!==r&&(Et.addToCache(d.baseTexture,r),e.addToCache(d,r)),d.baseTexture.valid?Promise.resolve(d):new Promise(function(v){d.baseTexture.once("loaded",function(){return v(d)})})},e.addToCache=function(t,r){r&&(-1===t.textureCacheIds.indexOf(r)&&t.textureCacheIds.push(r),mr[r]&&console.warn("Texture added to the cache with an id ["+r+"] that already had an entry"),mr[r]=t)},e.removeFromCache=function(t){if("string"==typeof t){var r=mr[t];if(r){var i=r.textureCacheIds.indexOf(t);return i>-1&&r.textureCacheIds.splice(i,1),delete mr[t],r}}else if(t&&t.textureCacheIds){for(var a=0;a<t.textureCacheIds.length;++a)mr[t.textureCacheIds[a]]===t&&delete mr[t.textureCacheIds[a]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var r=t.x,i=t.y,a=t.width,s=t.height,u=r+a>this.baseTexture.width,d=i+s>this.baseTexture.height;if(u||d)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: X: "+r+" + "+a+" = "+(r+a)+" > "+this.baseTexture.width+" "+(u&&d?"and":"or")+" Y: "+i+" + "+s+" = "+(i+s)+" > "+this.baseTexture.height);this.valid=a&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(e,"EMPTY",{get:function(){return e._EMPTY||(Gi(e._EMPTY=new e(new Et)),Gi(e._EMPTY.baseTexture)),e._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WHITE",{get:function(){if(!e._WHITE){var t=L.ADAPTER.createCanvas(16,16),r=t.getContext("2d");t.width=16,t.height=16,r.fillStyle="white",r.fillRect(0,0,16,16),Gi(e._WHITE=new e(Et.from(t))),Gi(e._WHITE.baseTexture)}return e._WHITE},enumerable:!1,configurable:!0}),e}(nt),Dr=function(n){function e(t,r){var i=n.call(this,t,r)||this;return i.valid=!0,i.filterFrame=null,i.filterPoolKey=null,i.updateUvs(),i}return Tt(e,n),Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(t){this.framebuffer.multisample=t},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,r,i){void 0===i&&(i=!0);var a=this.baseTexture.resolution,s=Math.round(t*a)/a,u=Math.round(r*a)/a;this.valid=s>0&&u>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=u,i&&this.baseTexture.resize(s,u),this.updateUvs()},e.prototype.setResolution=function(t){var r=this.baseTexture;r.resolution!==t&&(r.setResolution(t),this.resize(r.width,r.height,!1))},e.create=function(t){for(var r=arguments,i=[],a=1;a<arguments.length;a++)i[a-1]=r[a];return"number"==typeof t&&($e("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:i[0],scaleMode:i[1],resolution:i[2]}),new e(new si(t))},e}(he),ch=function(){function n(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return n.prototype.createTexture=function(e,t,r){void 0===r&&(r=Qt.NONE);var i=new si(Object.assign({width:e,height:t,resolution:1,multisample:r},this.textureOptions));return new Dr(i)},n.prototype.getOptimalTexture=function(e,t,r,i){var a;void 0===r&&(r=1),void 0===i&&(i=Qt.NONE),e=Math.ceil(e*r-1e-6),t=Math.ceil(t*r-1e-6),this.enableFullScreen&&e===this._pixelsWidth&&t===this._pixelsHeight?a=i>1?-i:-1:(a=((65535&(e=Bi(e)))<<16|65535&(t=Bi(t)))>>>0,i>1&&(a+=4294967296*i)),this.texturePool[a]||(this.texturePool[a]=[]);var s=this.texturePool[a].pop();return s||(s=this.createTexture(e,t,i)),s.filterPoolKey=a,s.setResolution(r),s},n.prototype.getFilterTexture=function(e,t,r){var i=this.getOptimalTexture(e.width,e.height,t||e.resolution,r||Qt.NONE);return i.filterFrame=e.filterFrame,i},n.prototype.returnTexture=function(e){var t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)},n.prototype.returnFilterTexture=function(e){this.returnTexture(e)},n.prototype.clear=function(e){if(e=!1!==e)for(var t in this.texturePool){var r=this.texturePool[t];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}},n.prototype.setScreenSize=function(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){for(var t in this.enableFullScreen=e.width>0&&e.height>0,this.texturePool)if(Number(t)<0){var r=this.texturePool[t];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}},n.SCREEN_KEY=-1,n}(),Hl=function(){function n(e,t,r,i,a,s,u){void 0===t&&(t=0),void 0===r&&(r=!1),void 0===i&&(i=k.FLOAT),this.buffer=e,this.size=t,this.normalized=r,this.type=i,this.stride=a,this.start=s,this.instance=u}return n.prototype.destroy=function(){this.buffer=null},n.from=function(e,t,r,i,a){return new n(e,t,r,i,a)},n}(),fh=0,cr=function(){function n(e,t,r){void 0===t&&(t=!0),void 0===r&&(r=!1),this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=t,this.id=fh++,this.disposeRunner=new O("disposeBuffer")}return n.prototype.update=function(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++},n.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},n.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(n.prototype,"index",{get:function(){return this.type===ee.ELEMENT_ARRAY_BUFFER},set:function(e){this.type=e?ee.ELEMENT_ARRAY_BUFFER:ee.ARRAY_BUFFER},enumerable:!1,configurable:!0}),n.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new n(e)},n}(),dh={Float32Array,Uint32Array,Int32Array,Uint8Array},Xl={5126:4,5123:2,5121:1},vh=0,_h={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},xa=function(){function n(e,t){void 0===e&&(e=[]),void 0===t&&(t={}),this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=vh++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new O("disposeGeometry"),this.refCount=0}return n.prototype.addAttribute=function(e,t,r,i,a,s,u,d){if(void 0===r&&(r=0),void 0===i&&(i=!1),void 0===d&&(d=!1),!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof cr||(t instanceof Array&&(t=new Float32Array(t)),t=new cr(t));var v=e.split("|");if(v.length>1){for(var m=0;m<v.length;m++)this.addAttribute(v[m],t,r,i,a);return this}var x=this.buffers.indexOf(t);return-1===x&&(this.buffers.push(t),x=this.buffers.length-1),this.attributes[e]=new Hl(x,r,i,a,s,u,d),this.instanced=this.instanced||d,this},n.prototype.getAttribute=function(e){return this.attributes[e]},n.prototype.getBuffer=function(e){return this.buffers[this.getAttribute(e).buffer]},n.prototype.addIndex=function(e){return e instanceof cr||(e instanceof Array&&(e=new Uint16Array(e)),e=new cr(e)),e.type=ee.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,-1===this.buffers.indexOf(e)&&this.buffers.push(e),this},n.prototype.getIndex=function(){return this.indexBuffer},n.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var i,e=[],t=[],r=new cr;for(i in this.attributes){var a=this.attributes[i];e.push(this.buffers[a.buffer].data),t.push(a.size*Xl[a.type]/4),a.buffer=0}for(r.data=function ph(n,e){for(var t=0,r=0,i={},a=0;a<n.length;a++)r+=e[a],t+=n[a].length;var s=new ArrayBuffer(4*t),u=null,d=0;for(a=0;a<n.length;a++){var v=e[a],m=n[a],x=So(m);i[x]||(i[x]=new dh[x](s)),u=i[x];for(var b=0;b<m.length;b++)u[(b/v|0)*r+d+b%v]=m[b];d+=v}return new Float32Array(s)}(e,t),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},n.prototype.getSize=function(){for(var e in this.attributes){var t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},n.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},n.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},n.prototype.clone=function(){for(var e=new n,t=0;t<this.buffers.length;t++)e.buffers[t]=new cr(this.buffers[t].data.slice(0));for(var t in this.attributes){var r=this.attributes[t];e.attributes[t]=new Hl(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=ee.ELEMENT_ARRAY_BUFFER),e},n.merge=function(e){for(var s,t=new n,r=[],i=[],a=[],u=0;u<e.length;u++){s=e[u];for(var d=0;d<s.buffers.length;d++)i[d]=i[d]||0,i[d]+=s.buffers[d].data.length,a[d]=0}for(u=0;u<s.buffers.length;u++)r[u]=new(_h[So(s.buffers[u].data)])(i[u]),t.buffers[u]=new cr(r[u]);for(u=0;u<e.length;u++)for(s=e[u],d=0;d<s.buffers.length;d++)r[d].set(s.buffers[d].data,a[d]),a[d]+=s.buffers[d].data.length;if(t.attributes=s.attributes,s.indexBuffer){t.indexBuffer=t.buffers[s.buffers.indexOf(s.indexBuffer)],t.indexBuffer.type=ee.ELEMENT_ARRAY_BUFFER;var v=0,m=0,x=0,b=0;for(u=0;u<s.buffers.length;u++)if(s.buffers[u]!==s.indexBuffer){b=u;break}for(var u in s.attributes){var S=s.attributes[u];(0|S.buffer)===b&&(m+=S.size*Xl[S.type]/4)}for(u=0;u<e.length;u++){var A=e[u].indexBuffer.data;for(d=0;d<A.length;d++)t.indexBuffer.data[d+x]+=v;v+=e[u].buffers[b].data.length/m,x+=A.length}}return t},n}(),gh=function(n){function e(){var t=n.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}return Tt(e,n),e}(xa),jl=function(n){function e(){var t=n.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new cr(t.vertices),t.uvBuffer=new cr(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}return Tt(e,n),e.prototype.map=function(t,r){var i=0,a=0;return this.uvs[0]=i,this.uvs[1]=a,this.uvs[2]=i+r.width/t.width,this.uvs[3]=a,this.uvs[4]=i+r.width/t.width,this.uvs[5]=a+r.height/t.height,this.uvs[6]=i,this.uvs[7]=a+r.height/t.height,a=r.y,this.vertices[0]=i=r.x,this.vertices[1]=a,this.vertices[2]=i+r.width,this.vertices[3]=a,this.vertices[4]=i+r.width,this.vertices[5]=a+r.height,this.vertices[6]=i,this.vertices[7]=a+r.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(xa),mh=0,Hi=function(){function n(e,t,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=mh++,this.static=!!t,this.ubo=!!r,e instanceof cr?(this.buffer=e,this.buffer.type=ee.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new cr(new Float32Array(1)),this.buffer.type=ee.UNIFORM_BUFFER,this.autoManage=!0))}return n.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},n.prototype.add=function(e,t,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new n(t,r)},n.from=function(e,t,r){return new n(e,t,r)},n.uboFrom=function(e,t){return new n(e,null==t||t,!0)},n}(),yh=function(){function n(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Qt.NONE,this.sourceFrame=new Ce,this.destinationFrame=new Ce,this.bindingSourceFrame=new Ce,this.bindingDestinationFrame=new Ce,this.filters=[],this.transform=null}return n.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},n}(),ss=[new Oe,new Oe,new Oe,new Oe],Ns=new ze,Yl=function(){function n(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new ch,this.texturePool.setScreenSize(e.view),this.statePool=[],this.quad=new gh,this.quadUv=new jl,this.tempRect=new Ce,this.activeState={},this.globalUniforms=new Hi({outputFrame:new Ce,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return n.prototype.push=function(e,t){for(var r,i,a=this.renderer,s=this.defaultFilterStack,u=this.statePool.pop()||new yh,d=this.renderer.renderTexture,v=t[0].resolution,m=t[0].multisample,x=t[0].padding,b=t[0].autoFit,S=null===(r=t[0].legacy)||void 0===r||r,A=1;A<t.length;A++){var M=t[A];v=Math.min(v,M.resolution),m=Math.min(m,M.multisample),x=this.useMaxPadding?Math.max(x,M.padding):x+M.padding,b=b&&M.autoFit,S=S||null===(i=M.legacy)||void 0===i||i}1===s.length&&(this.defaultFilterStack[0].renderTexture=d.current),s.push(u),u.resolution=v,u.multisample=m,u.legacy=S,u.target=e,u.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),u.sourceFrame.pad(x);var F=this.tempRect.copyFrom(d.sourceFrame);a.projection.transform&&this.transformAABB(Ns.copyFrom(a.projection.transform).invert(),F),b?(u.sourceFrame.fit(F),(u.sourceFrame.width<=0||u.sourceFrame.height<=0)&&(u.sourceFrame.width=0,u.sourceFrame.height=0)):u.sourceFrame.intersects(F)||(u.sourceFrame.width=0,u.sourceFrame.height=0),this.roundFrame(u.sourceFrame,d.current?d.current.resolution:a.resolution,d.sourceFrame,d.destinationFrame,a.projection.transform),u.renderTexture=this.getOptimalFilterTexture(u.sourceFrame.width,u.sourceFrame.height,v,m),u.filters=t,u.destinationFrame.width=u.renderTexture.width,u.destinationFrame.height=u.renderTexture.height;var $=this.tempRect;$.x=0,$.y=0,$.width=u.sourceFrame.width,$.height=u.sourceFrame.height,u.renderTexture.filterFrame=u.sourceFrame,u.bindingSourceFrame.copyFrom(d.sourceFrame),u.bindingDestinationFrame.copyFrom(d.destinationFrame),u.transform=a.projection.transform,a.projection.transform=null,d.bind(u.renderTexture,u.sourceFrame,$),a.framebuffer.clear(0,0,0,0)},n.prototype.pop=function(){var e=this.defaultFilterStack,t=e.pop(),r=t.filters;this.activeState=t;var i=this.globalUniforms.uniforms;i.outputFrame=t.sourceFrame,i.resolution=t.resolution;var a=i.inputSize,s=i.inputPixel,u=i.inputClamp;if(a[0]=t.destinationFrame.width,a[1]=t.destinationFrame.height,a[2]=1/a[0],a[3]=1/a[1],s[0]=Math.round(a[0]*t.resolution),s[1]=Math.round(a[1]*t.resolution),s[2]=1/s[0],s[3]=1/s[1],u[0]=.5*s[2],u[1]=.5*s[3],u[2]=t.sourceFrame.width*a[2]-.5*s[2],u[3]=t.sourceFrame.height*a[3]-.5*s[3],t.legacy){var d=i.filterArea;d[0]=t.destinationFrame.width,d[1]=t.destinationFrame.height,d[2]=t.sourceFrame.x,d[3]=t.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();var v=e[e.length-1];if(this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,t.renderTexture,v.renderTexture,gt.BLEND,t),this.returnFilterTexture(t.renderTexture);else{var m=t.renderTexture,x=this.getOptimalFilterTexture(m.width,m.height,t.resolution);x.filterFrame=m.filterFrame;var b=0;for(b=0;b<r.length-1;++b){1===b&&t.multisample>1&&((x=this.getOptimalFilterTexture(m.width,m.height,t.resolution)).filterFrame=m.filterFrame),r[b].apply(this,m,x,gt.CLEAR,t);var S=m;m=x,x=S}r[b].apply(this,m,v.renderTexture,gt.BLEND,t),b>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(m),this.returnFilterTexture(x)}t.clear(),this.statePool.push(t)},n.prototype.bindAndClear=function(e,t){void 0===t&&(t=gt.CLEAR);var r=this.renderer,i=r.renderTexture,a=r.state;if(this.renderer.projection.transform=e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.activeState.transform:null,e&&e.filterFrame){var s=this.tempRect;s.x=0,s.y=0,s.width=e.filterFrame.width,s.height=e.filterFrame.height,i.bind(e,e.filterFrame,s)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);(t===gt.CLEAR||t===gt.BLIT&&(1&a.stateId||this.forceClear))&&this.renderer.framebuffer.clear(0,0,0,0)},n.prototype.applyFilter=function(e,t,r,i){var a=this.renderer;a.state.set(e.state),this.bindAndClear(r,i),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,a.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),a.geometry.bind(this.quadUv),a.geometry.draw(X.TRIANGLES)):(a.geometry.bind(this.quad),a.geometry.draw(X.TRIANGLE_STRIP))},n.prototype.calculateSpriteMatrix=function(e,t){var r=this.activeState,i=r.sourceFrame,a=r.destinationFrame,s=t._texture.orig,u=e.set(a.width,0,0,a.height,i.x,i.y),d=t.worldTransform.copyTo(ze.TEMP_MATRIX);return d.invert(),u.prepend(d),u.scale(1/s.width,1/s.height),u.translate(t.anchor.x,t.anchor.y),u},n.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},n.prototype.getOptimalFilterTexture=function(e,t,r,i){return void 0===r&&(r=1),void 0===i&&(i=Qt.NONE),this.texturePool.getOptimalTexture(e,t,r,i)},n.prototype.getFilterTexture=function(e,t,r){if("number"==typeof e){var i=e;e=t,t=i}var a=this.texturePool.getOptimalTexture((e=e||this.activeState.renderTexture).width,e.height,t||e.resolution,r||Qt.NONE);return a.filterFrame=e.filterFrame,a},n.prototype.returnFilterTexture=function(e){this.texturePool.returnTexture(e)},n.prototype.emptyPool=function(){this.texturePool.clear(!0)},n.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},n.prototype.transformAABB=function(e,t){var r=ss[0],i=ss[1],a=ss[2],s=ss[3];r.set(t.left,t.top),i.set(t.left,t.bottom),a.set(t.right,t.top),s.set(t.right,t.bottom),e.apply(r,r),e.apply(i,i),e.apply(a,a),e.apply(s,s);var u=Math.min(r.x,i.x,a.x,s.x),d=Math.min(r.y,i.y,a.y,s.y),v=Math.max(r.x,i.x,a.x,s.x),m=Math.max(r.y,i.y,a.y,s.y);t.x=u,t.y=d,t.width=v-u,t.height=m-d},n.prototype.roundFrame=function(e,t,r,i,a){if(!(e.width<=0||e.height<=0||r.width<=0||r.height<=0)){if(a){var s=a.a,d=a.c,v=a.d;if((Math.abs(a.b)>1e-4||Math.abs(d)>1e-4)&&(Math.abs(s)>1e-4||Math.abs(v)>1e-4))return}(a=a?Ns.copyFrom(a):Ns.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(a,e),e.ceil(t),this.transformAABB(a.invert(),e)}},n}(),ls=function(){function n(e){this.renderer=e}return n.prototype.flush=function(){},n.prototype.destroy=function(){this.renderer=null},n.prototype.start=function(){},n.prototype.stop=function(){this.flush()},n.prototype.render=function(e){},n}(),Zl=function(){function n(e){this.renderer=e,this.emptyRenderer=new ls(e),this.currentRenderer=this.emptyRenderer}return n.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},n.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},n.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},n.prototype.copyBoundTextures=function(e,t){for(var r=this.renderer.texture.boundTextures,i=t-1;i>=0;--i)e[i]=r[i]||null,e[i]&&(e[i]._batchLocation=i)},n.prototype.boundArray=function(e,t,r,i){for(var a=e.elements,s=e.ids,u=e.count,d=0,v=0;v<u;v++){var m=a[v],x=m._batchLocation;if(x>=0&&x<i&&t[x]===m)s[v]=x;else for(;d<i;){var b=t[d];if(!b||b._batchEnabled!==r||b._batchLocation!==d){s[v]=d,m._batchLocation=d,t[d]=m;break}d++}}},n.prototype.destroy=function(){this.renderer=null},n}(),zl=0,Vl=function(){function n(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),e.view.addEventListener("webglcontextlost",this.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(n.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),n.prototype.contextChange=function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=zl++},n.prototype.initFromContext=function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=zl++,this.renderer.runners.contextChange.emit(e)},n.prototype.initFromOptions=function(e){var t=this.createContext(this.renderer.view,e);this.initFromContext(t)},n.prototype.createContext=function(e,t){var r;if(L.PREFER_ENV>=te.WEBGL2&&(r=e.getContext("webgl2",t)),r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},n.prototype.getExtensions=function(){var e=this.gl,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})},n.prototype.handleContextLost=function(e){var t=this;e.preventDefault(),setTimeout(function(){t.gl.isContextLost()&&t.extensions.loseContext&&t.extensions.loseContext.restoreContext()},0)},n.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},n.prototype.destroy=function(){var e=this.renderer.view;this.renderer=null,e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},n.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},n.prototype.validateContext=function(e){var t=e.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var i=r||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},n}(),bh=function n(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Qt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0},xh=new Ce,Wl=function(){function n(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new ai(10,10),this.msaaSamples=null}return n.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Ce,this.hasMRT=!0,this.writeDepthTexture=!0,1===this.renderer.context.webGLVersion){var t=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;L.PREFER_ENV===te.WEBGL_LEGACY&&(t=null,r=null),t?e.drawBuffers=function(i){return t.drawBuffersWEBGL(i)}:(this.hasMRT=!1,e.drawBuffers=function(){}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)},n.prototype.bind=function(e,t,r){void 0===r&&(r=0);var i=this.gl;if(e){var a=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,a.framebuffer)),a.mipLevel!==r&&(e.dirtyId++,e.dirtyFormat++,a.mipLevel=r),a.dirtyId!==e.dirtyId&&(a.dirtyId=e.dirtyId,a.dirtyFormat!==e.dirtyFormat?(a.dirtyFormat=e.dirtyFormat,a.dirtySize=e.dirtySize,this.updateFramebuffer(e,r)):a.dirtySize!==e.dirtySize&&(a.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var s=0;s<e.colorTextures.length;s++){var u=e.colorTextures[s];this.renderer.texture.unbind(u.parentTextureArray||u)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){var m=(d=t.width>>r)/t.width;this.setViewport(t.x*m,t.y*m,d,t.height>>r)}else{var d;this.setViewport(0,0,d=e.width>>r,e.height>>r)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},n.prototype.setViewport=function(e,t,r,i){var a=this.viewport;e=Math.round(e),t=Math.round(t),r=Math.round(r),i=Math.round(i),(a.width!==r||a.height!==i||a.x!==e||a.y!==t)&&(a.x=e,a.y=t,a.width=r,a.height=i,this.gl.viewport(e,t,r,i))},Object.defineProperty(n.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),n.prototype.clear=function(e,t,r,i,a){void 0===a&&(a=Mt.COLOR|Mt.DEPTH);var s=this.gl;s.clearColor(e,t,r,i),s.clear(a)},n.prototype.initFramebuffer=function(e){var r=new bh(this.gl.createFramebuffer());return r.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(e),e.disposeRunner.add(this),r},n.prototype.resizeFramebuffer=function(e){var t=this.gl,r=e.glFramebuffers[this.CONTEXT_UID];r.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,r.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,t.RGBA8,e.width,e.height)),r.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,r.stencil),r.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,t.DEPTH24_STENCIL8,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.width,e.height));var i=e.colorTextures,a=i.length;t.drawBuffers||(a=Math.min(a,1));for(var s=0;s<a;s++){var u=i[s];this.renderer.texture.bind(u.parentTextureArray||u,0)}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)},n.prototype.updateFramebuffer=function(e,t){var r=this.gl,i=e.glFramebuffers[this.CONTEXT_UID],a=e.colorTextures,s=a.length;r.drawBuffers||(s=Math.min(s,1)),i.multisample>1&&this.canMultisampleFramebuffer(e)?(i.msaaBuffer=i.msaaBuffer||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,i.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.RGBA8,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,i.msaaBuffer)):i.msaaBuffer&&(r.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));for(var u=[],d=0;d<s;d++){var v=a[d],m=v.parentTextureArray||v;this.renderer.texture.bind(m,0),(0!==d||!i.msaaBuffer)&&(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+d,v.target,m._glTextures[this.CONTEXT_UID].texture,t),u.push(r.COLOR_ATTACHMENT0+d))}if(u.length>1&&r.drawBuffers(u),e.depthTexture&&this.writeDepthTexture){var b=e.depthTexture;this.renderer.texture.bind(b,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,b._glTextures[this.CONTEXT_UID].texture,t)}!e.stencil&&!e.depth||e.depthTexture&&this.writeDepthTexture?i.stencil&&(r.deleteRenderbuffer(i.stencil),i.stencil=null):(i.stencil=i.stencil||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,i.stencil),i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.DEPTH24_STENCIL8,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,i.stencil))},n.prototype.canMultisampleFramebuffer=function(e){return 1!==this.renderer.context.webGLVersion&&e.colorTextures.length<=1&&!e.depthTexture},n.prototype.detectSamples=function(e){var t=this.msaaSamples,r=Qt.NONE;if(e<=1||null===t)return r;for(var i=0;i<t.length;i++)if(t[i]<=e){r=t[i];break}return 1===r&&(r=Qt.NONE),r},n.prototype.blit=function(e,t,r){var i=this,a=i.current,u=i.gl;if(2===i.renderer.context.webGLVersion&&a){var v=a.glFramebuffers[i.CONTEXT_UID];if(v){if(!e){if(!v.msaaBuffer)return;var m=a.colorTextures[0];if(!m)return;v.blitFramebuffer||(v.blitFramebuffer=new ai(a.width,a.height),v.blitFramebuffer.addColorTexture(0,m)),(e=v.blitFramebuffer).colorTextures[0]!==m&&(e.colorTextures[0]=m,e.dirtyId++,e.dirtyFormat++),(e.width!==a.width||e.height!==a.height)&&(e.width=a.width,e.height=a.height,e.dirtyId++,e.dirtySize++)}t||((t=xh).width=a.width,t.height=a.height),r||(r=t);var x=t.width===r.width&&t.height===r.height;this.bind(e),u.bindFramebuffer(u.READ_FRAMEBUFFER,v.framebuffer),u.blitFramebuffer(t.left,t.top,t.right,t.bottom,r.left,r.top,r.right,r.bottom,u.COLOR_BUFFER_BIT,x?u.NEAREST:u.LINEAR)}}},n.prototype.disposeFramebuffer=function(e,t){var r=e.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(r){delete e.glFramebuffers[this.CONTEXT_UID];var a=this.managedFramebuffers.indexOf(e);a>=0&&this.managedFramebuffers.splice(a,1),e.disposeRunner.remove(this),t||(i.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&i.deleteRenderbuffer(r.msaaBuffer),r.stencil&&i.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&r.blitFramebuffer.dispose()}},n.prototype.disposeAll=function(e){var t=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<t.length;r++)this.disposeFramebuffer(t[r],e)},n.prototype.forceStencil=function(){var e=this.current;if(e){var t=e.glFramebuffers[this.CONTEXT_UID];if(t&&!t.stencil){e.stencil=!0;var r=e.width,i=e.height,a=this.gl,s=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,s),t.msaaBuffer?a.renderbufferStorageMultisample(a.RENDERBUFFER,t.multisample,a.DEPTH24_STENCIL8,r,i):a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,r,i),t.stencil=s,a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,s)}}},n.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Ce},n.prototype.destroy=function(){this.renderer=null},n}(),Us={5126:4,5123:2,5121:1},Jl=function(){function n(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return n.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==t.webGLVersion){var r=this.renderer.context.extensions.vertexArrayObject;L.PREFER_ENV===te.WEBGL_LEGACY&&(r=null),r?(e.createVertexArray=function(){return r.createVertexArrayOES()},e.bindVertexArray=function(a){return r.bindVertexArrayOES(a)},e.deleteVertexArray=function(a){return r.deleteVertexArrayOES(a)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(2!==t.webGLVersion){var i=e.getExtension("ANGLE_instanced_arrays");i?(e.vertexAttribDivisor=function(a,s){return i.vertexAttribDivisorANGLE(a,s)},e.drawElementsInstanced=function(a,s,u,d,v){return i.drawElementsInstancedANGLE(a,s,u,d,v)},e.drawArraysInstanced=function(a,s,u,d){return i.drawArraysInstancedANGLE(a,s,u,d)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===t.webGLVersion||!!t.extensions.uint32ElementIndex},n.prototype.bind=function(e,t){t=t||this.renderer.shader.shader;var r=this.gl,i=e.glVertexArrayObjects[this.CONTEXT_UID],a=!1;i||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=i={},a=!0);var s=i[t.program.id]||this.initGeometryVao(e,t,a);this._activeGeometry=e,this._activeVao!==s&&(this._activeVao=s,this.hasVao?r.bindVertexArray(s):this.activateVao(e,t.program)),this.updateBuffers()},n.prototype.reset=function(){this.unbind()},n.prototype.updateBuffers=function(){for(var e=this._activeGeometry,t=this.renderer.buffer,r=0;r<e.buffers.length;r++)t.update(e.buffers[r])},n.prototype.checkCompatibility=function(e,t){var r=e.attributes,i=t.attributeData;for(var a in i)if(!r[a])throw new Error('shader and geometry incompatible, geometry missing the "'+a+'" attribute')},n.prototype.getSignature=function(e,t){var r=e.attributes,i=t.attributeData,a=["g",e.id];for(var s in r)i[s]&&a.push(s,i[s].location);return a.join("-")},n.prototype.initGeometryVao=function(e,t,r){void 0===r&&(r=!0);var i=this.gl,a=this.CONTEXT_UID,s=this.renderer.buffer,u=t.program;u.glPrograms[a]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,u);var d=this.getSignature(e,u),v=e.glVertexArrayObjects[this.CONTEXT_UID],m=v[d];if(m)return v[u.id]=m,m;var x=e.buffers,b=e.attributes,S={},A={};for(var M in x)S[M]=0,A[M]=0;for(var M in b)!b[M].size&&u.attributeData[M]?b[M].size=u.attributeData[M].size:b[M].size||console.warn("PIXI Geometry attribute '"+M+"' size cannot be determined (likely the bound shader does not have the attribute)"),S[b[M].buffer]+=b[M].size*Us[b[M].type];for(var M in b){var F=b[M],$=F.size;void 0===F.stride&&(F.stride=S[F.buffer]===$*Us[F.type]?0:S[F.buffer]),void 0===F.start&&(F.start=A[F.buffer],A[F.buffer]+=$*Us[F.type])}m=i.createVertexArray(),i.bindVertexArray(m);for(var mt=0;mt<x.length;mt++){var At=x[mt];s.bind(At),r&&At._glBuffers[a].refCount++}return this.activateVao(e,u),this._activeVao=m,v[u.id]=m,v[d]=m,m},n.prototype.disposeGeometry=function(e,t){var r;if(this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var i=e.glVertexArrayObjects[this.CONTEXT_UID],a=this.gl,s=e.buffers,u=null===(r=this.renderer)||void 0===r?void 0:r.buffer;if(e.disposeRunner.remove(this),i){if(u)for(var d=0;d<s.length;d++){var v=s[d]._glBuffers[this.CONTEXT_UID];v&&(v.refCount--,0===v.refCount&&!t&&u.dispose(s[d],t))}if(!t)for(var m in i)if("g"===m[0]){var x=i[m];this._activeVao===x&&this.unbind(),a.deleteVertexArray(x)}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}},n.prototype.disposeAll=function(e){for(var t=Object.keys(this.managedGeometries),r=0;r<t.length;r++)this.disposeGeometry(this.managedGeometries[t[r]],e)},n.prototype.activateVao=function(e,t){var r=this.gl,i=this.CONTEXT_UID,a=this.renderer.buffer,s=e.buffers,u=e.attributes;e.indexBuffer&&a.bind(e.indexBuffer);var d=null;for(var v in u){var m=u[v],x=s[m.buffer],b=x._glBuffers[i];if(t.attributeData[v]){d!==b&&(a.bind(x),d=b);var S=t.attributeData[v].location;if(r.enableVertexAttribArray(S),r.vertexAttribPointer(S,m.size,m.type||r.FLOAT,m.normalized,m.stride,m.start),m.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(S,1)}}}},n.prototype.draw=function(e,t,r,i){var a=this.gl,s=this._activeGeometry;if(s.indexBuffer){var u=s.indexBuffer.data.BYTES_PER_ELEMENT,d=2===u?a.UNSIGNED_SHORT:a.UNSIGNED_INT;2===u||4===u&&this.canUseUInt32ElementIndex?s.instanced?a.drawElementsInstanced(e,t||s.indexBuffer.data.length,d,(r||0)*u,i||1):a.drawElements(e,t||s.indexBuffer.data.length,d,(r||0)*u):console.warn("unsupported index buffer type: uint32")}else s.instanced?a.drawArraysInstanced(e,r,t||s.getSize(),i||1):a.drawArrays(e,r,t||s.getSize());return this},n.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},n.prototype.destroy=function(){this.renderer=null},n}(),Ch=function(){function n(e){void 0===e&&(e=null),this.type=Xt.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=L.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}return Object.defineProperty(n.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null},enumerable:!1,configurable:!0}),n.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=Xt.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},n.prototype.copyCountersOrReset=function(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},n}();function $l(n,e,t){var r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}function Ql(n,e){var t=n.getShaderSource(e).split("\n").map(function(v,m){return m+": "+v}),r=n.getShaderInfoLog(e),i=r.split("\n"),a={},s=i.map(function(v){return parseFloat(v.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(v){return!(!v||a[v]||(a[v]=!0,0))}),u=[""];s.forEach(function(v){t[v-1]="%c"+t[v-1]+"%c",u.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var d=t.join("\n");u[0]=d,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,u),console.groupEnd()}function ks(n){for(var e=new Array(n),t=0;t<e.length;t++)e[t]=!1;return e}function ql(n,e){switch(n){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return ks(2*e);case"bvec3":return ks(3*e);case"bvec4":return ks(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var us,Kl={},Ca=Kl;function tu(n,e,t){if("precision"!==n.substring(0,9)){var r=e;return e===It.HIGH&&t!==It.HIGH&&(r=It.MEDIUM),"precision "+r+" float;\n"+n}return t!==It.HIGH&&"precision highp"===n.substring(0,15)?n.replace("precision highp","precision mediump"):n}var Ph={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function eu(n){return Ph[n]}var hs=null,ru={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function nu(n,e){if(!hs){var t=Object.keys(ru);hs={};for(var r=0;r<t.length;++r){var i=t[r];hs[n[i]]=ru[i]}}return hs[e]}var Ta,Ao=[{test:function(n){return"float"===n.type&&1===n.size&&!n.isArray},code:function(n){return'\n            if(uv["'+n+'"] !== ud["'+n+'"].value)\n            {\n                ud["'+n+'"].value = uv["'+n+'"]\n                gl.uniform1f(ud["'+n+'"].location, uv["'+n+'"])\n            }\n            '}},{test:function(n,e){return!("sampler2D"!==n.type&&"samplerCube"!==n.type&&"sampler2DArray"!==n.type||1!==n.size||n.isArray||null!=e&&void 0===e.castToBaseTexture)},code:function(n){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+n+'"], t);\n\n            if(ud["'+n+'"].value !== t)\n            {\n                ud["'+n+'"].value = t;\n                gl.uniform1i(ud["'+n+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(n,e){return"mat3"===n.type&&1===n.size&&!n.isArray&&void 0!==e.a},code:function(n){return'\n            gl.uniformMatrix3fv(ud["'+n+'"].location, false, uv["'+n+'"].toArray(true));\n            '},codeUbo:function(n){return"\n                var "+n+"_matrix = uv."+n+".toArray(true);\n\n                data[offset] = "+n+"_matrix[0];\n                data[offset+1] = "+n+"_matrix[1];\n                data[offset+2] = "+n+"_matrix[2];\n        \n                data[offset + 4] = "+n+"_matrix[3];\n                data[offset + 5] = "+n+"_matrix[4];\n                data[offset + 6] = "+n+"_matrix[5];\n        \n                data[offset + 8] = "+n+"_matrix[6];\n                data[offset + 9] = "+n+"_matrix[7];\n                data[offset + 10] = "+n+"_matrix[8];\n            "}},{test:function(n,e){return"vec2"===n.type&&1===n.size&&!n.isArray&&void 0!==e.x},code:function(n){return'\n                cv = ud["'+n+'"].value;\n                v = uv["'+n+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+n+'"].location, v.x, v.y);\n                }'},codeUbo:function(n){return"\n                v = uv."+n+";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            "}},{test:function(n){return"vec2"===n.type&&1===n.size&&!n.isArray},code:function(n){return'\n                cv = ud["'+n+'"].value;\n                v = uv["'+n+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+n+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(n,e){return"vec4"===n.type&&1===n.size&&!n.isArray&&void 0!==e.width},code:function(n){return'\n                cv = ud["'+n+'"].value;\n                v = uv["'+n+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+n+'"].location, v.x, v.y, v.width, v.height)\n                }'},codeUbo:function(n){return"\n                    v = uv."+n+";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                "}},{test:function(n){return"vec4"===n.type&&1===n.size&&!n.isArray},code:function(n){return'\n                cv = ud["'+n+'"].value;\n                v = uv["'+n+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+n+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],Eh={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",samplerCube:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",sampler2DArray:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"},Oh={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},Mh=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Rh(n){for(var e="",t=0;t<n;++t)t>0&&(e+="\nelse "),t<n-1&&(e+="if(test == "+t+".0){}");return e}var Nh=0,cs={},wa=function(){function n(e,t,r){void 0===r&&(r="pixi-shader"),this.id=Nh++,this.vertexSrc=e||n.defaultVertexSrc,this.fragmentSrc=t||n.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),cs[r]?(cs[r]++,r+="-"+cs[r]):cs[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=tu(this.vertexSrc,L.PRECISION_VERTEX,It.HIGH),this.fragmentSrc=tu(this.fragmentSrc,L.PRECISION_FRAGMENT,function Sh(){if(!us){us=It.MEDIUM;var n=function wh(){if(Ca===Kl||Ca&&Ca.isContextLost()){var n=L.ADAPTER.createCanvas(),e=void 0;L.PREFER_ENV>=te.WEBGL2&&(e=n.getContext("webgl2",{})),e||((e=n.getContext("webgl",{})||n.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),Ca=e}return Ca}();if(n&&n.getShaderPrecisionFormat){var e=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT);us=e.precision?It.HIGH:It.MEDIUM}}return us}())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(n,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(n,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),n.from=function(e,t,r){var i=e+t,a=Di[i];return a||(Di[i]=a=new n(e,t,r)),a},n}(),ui=function(){function n(e,t){this.uniformBindCount=0,this.program=e,this.uniformGroup=t?t instanceof Hi?t:new Hi(t):new Hi({}),this.disposeRunner=new O("disposeShader")}return n.prototype.checkUniformExists=function(e,t){if(t.uniforms[e])return!0;for(var r in t.uniforms){var i=t.uniforms[r];if(i.group&&this.checkUniformExists(e,i))return!0}return!1},n.prototype.destroy=function(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()},Object.defineProperty(n.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),n.from=function(e,t,r){return new n(wa.from(e,t),r)},n}(),Xi=function(){function n(){this.data=0,this.blendMode=I.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(n.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(e){!!(1&this.data)!==e&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(e){!!(2&this.data)!==e&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(e){!!(4&this.data)!==e&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(e){!!(8&this.data)!==e&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(e){!!(32&this.data)!==e&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(e){!!(16&this.data)!==e&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this.blend=e!==I.NONE,this._blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e,this._polygonOffset=e},enumerable:!1,configurable:!0}),n.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},n.for2d=function(){var e=new n;return e.depthTest=!1,e.blend=!0,e},n}(),hi=function(n){function e(t,r,i){var a=this,s=wa.from(t||e.defaultVertexSrc,r||e.defaultFragmentSrc);return(a=n.call(this,s,i)||this).padding=0,a.resolution=L.FILTER_RESOLUTION,a.multisample=L.FILTER_MULTISAMPLE,a.enabled=!0,a.autoFit=!0,a.state=new Xi,a}return Tt(e,n),e.prototype.apply=function(t,r,i,a,s){t.applyFilter(this,r,i,a)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),e}(ui),iu=new ze,Zs=function(){function n(e,t){this._texture=e,this.mapCoord=new ze,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===t?.5:t,this.isSimple=!1}return Object.defineProperty(n.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture=e,this._textureID=-1},enumerable:!1,configurable:!0}),n.prototype.multiplyUvs=function(e,t){void 0===t&&(t=e);for(var r=this.mapCoord,i=0;i<e.length;i+=2){var a=e[i],s=e[i+1];t[i]=a*r.a+s*r.c+r.tx,t[i+1]=a*r.b+s*r.d+r.ty}return t},n.prototype.update=function(e){var t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;var r=t._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=t.orig,a=t.trim;a&&(iu.set(i.width/a.width,0,0,i.height/a.height,-a.x/a.width,-a.y/a.height),this.mapCoord.append(iu));var s=t.baseTexture,u=this.uClampFrame,d=this.clampMargin/s.resolution,v=this.clampOffset;return u[0]=(t._frame.x+d+v)/s.width,u[1]=(t._frame.y+d+v)/s.height,u[2]=(t._frame.x+t._frame.width-d+v)/s.width,u[3]=(t._frame.y+t._frame.height-d+v)/s.height,this.uClampOffset[0]=v/s.realWidth,this.uClampOffset[1]=v/s.realHeight,this.isSimple=t._frame.width===s.width&&t._frame.height===s.height&&0===t.rotate,!0},n}(),Hh=function(n){function e(t,r,i){var a=this,s=null;return"string"!=typeof t&&void 0===r&&void 0===i&&(s=t,t=void 0,r=void 0,i=void 0),(a=n.call(this,t||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",r||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",i)||this).maskSprite=s,a.maskMatrix=new ze,a}return Tt(e,n),Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),e.prototype.apply=function(t,r,i,a){var s=this._maskSprite,u=s._texture;!u.valid||(u.uvMatrix||(u.uvMatrix=new Zs(u,0)),u.uvMatrix.update(),this.uniforms.npmAlpha=u.baseTexture.alphaMode?0:1,this.uniforms.mask=u,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,s).prepend(u.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=u.uvMatrix.uClampFrame,t.applyFilter(this,r,i,a))},e}(hi),ou=function(){function n(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return n.prototype.setMaskStack=function(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)},n.prototype.push=function(e,t){var r=t;if(!r.isMaskData){var i=this.maskDataPool.pop()||new Ch;i.pooled=!0,i.maskObject=t,r=i}var a=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(a),r._colorMask=a?a._colorMask:15,r.autoDetect&&this.detect(r),r._target=e,r.type!==Xt.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case Xt.SCISSOR:this.renderer.scissor.push(r);break;case Xt.STENCIL:this.renderer.stencil.push(r);break;case Xt.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case Xt.COLOR:this.pushColorMask(r)}r.type===Xt.SPRITE&&this.maskStack.push(r)},n.prototype.pop=function(e){var t=this.maskStack.pop();if(t&&t._target===e){if(t.enabled)switch(t.type){case Xt.SCISSOR:this.renderer.scissor.pop(t);break;case Xt.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case Xt.SPRITE:this.popSpriteMask(t);break;case Xt.COLOR:this.popColorMask(t)}if(t.reset(),t.pooled&&this.maskDataPool.push(t),0!==this.maskStack.length){var r=this.maskStack[this.maskStack.length-1];r.type===Xt.SPRITE&&r._filters&&(r._filters[0].maskSprite=r.maskObject)}}},n.prototype.detect=function(e){var t=e.maskObject;e.type=t?t.isSprite?Xt.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?Xt.SCISSOR:Xt.STENCIL:Xt.COLOR},n.prototype.pushSpriteMask=function(e){var t,r,i=e.maskObject,a=e._target,s=e._filters;s||(s=this.alphaMaskPool[this.alphaMaskIndex])||(s=this.alphaMaskPool[this.alphaMaskIndex]=[new Hh]);var v,m,u=this.renderer,d=u.renderTexture;if(d.current){var x=d.current;v=e.resolution||x.resolution,m=null!==(t=e.multisample)&&void 0!==t?t:x.multisample}else v=e.resolution||u.resolution,m=null!==(r=e.multisample)&&void 0!==r?r:u.multisample;s[0].resolution=v,s[0].multisample=m,s[0].maskSprite=i;var b=a.filterArea;a.filterArea=i.getBounds(!0),u.filter.push(a,s),a.filterArea=b,e._filters||this.alphaMaskIndex++},n.prototype.popSpriteMask=function(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},n.prototype.pushColorMask=function(e){var t=e._colorMask,r=e._colorMask=t&e.colorMask;r!==t&&this.renderer.gl.colorMask(0!=(1&r),0!=(2&r),0!=(4&r),0!=(8&r))},n.prototype.popColorMask=function(e){var r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==e._colorMask&&this.renderer.gl.colorMask(0!=(1&r),0!=(2&r),0!=(4&r),0!=(8&r))},n.prototype.destroy=function(){this.renderer=null},n}(),au=function(){function n(e){this.renderer=e,this.maskStack=[],this.glConst=0}return n.prototype.getStackLength=function(){return this.maskStack.length},n.prototype.setMaskStack=function(e){var t=this.renderer.gl,r=this.getStackLength();this.maskStack=e;var i=this.getStackLength();i!==r&&(0===i?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))},n.prototype._useCurrent=function(){},n.prototype.destroy=function(){this.renderer=null,this.maskStack=null},n}(),su=new ze,lu=[],uu=function(n){function e(t){var r=n.call(this,t)||this;return r.glConst=L.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST,r}return Tt(e,n),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.calcScissorRect=function(t){var r;if(!t._scissorRectLocal){var i=t._scissorRect,s=this.renderer,u=s.renderTexture,d=t.maskObject.getBounds(!0,null!==(r=lu.pop())&&void 0!==r?r:new Ce);this.roundFrameToPixels(d,u.current?u.current.resolution:s.resolution,u.sourceFrame,u.destinationFrame,s.projection.transform),i&&d.fit(i),t._scissorRectLocal=d}},e.isMatrixRotated=function(t){if(!t)return!1;var r=t.a,a=t.c,s=t.d;return(Math.abs(t.b)>1e-4||Math.abs(a)>1e-4)&&(Math.abs(r)>1e-4||Math.abs(s)>1e-4)},e.prototype.testScissor=function(t){var r=t.maskObject;if(!r.isFastRect||!r.isFastRect()||e.isMatrixRotated(r.worldTransform)||e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);var i=t._scissorRectLocal;return i.width>0&&i.height>0},e.prototype.roundFrameToPixels=function(t,r,i,a,s){e.isMatrixRotated(s)||((s=s?su.copyFrom(s):su.identity()).translate(-i.x,-i.y).scale(a.width/i.width,a.height/i.height).translate(a.x,a.y),this.renderer.filter.transformAABB(s,t),t.fit(a),t.x=Math.round(t.x*r),t.y=Math.round(t.y*r),t.width=Math.round(t.width*r),t.height=Math.round(t.height*r))},e.prototype.push=function(t){t._scissorRectLocal||this.calcScissorRect(t);var r=this.renderer.gl;t._scissorRect||r.enable(r.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()},e.prototype.pop=function(t){var r=this.renderer.gl;t&&lu.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():r.disable(r.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect;this.renderer.gl.scissor(t.x,this.renderer.renderTexture.current?t.y:this.renderer.height-t.height-t.y,t.width,t.height)},e}(au),hu=function(n){function e(t){var r=n.call(this,t)||this;return r.glConst=L.ADAPTER.getWebGLRenderingContext().STENCIL_TEST,r}return Tt(e,n),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var r=t.maskObject,i=this.renderer.gl,a=t._stencilCounter;0===a&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),t._stencilCounter++;var s=t._colorMask;0!==s&&(t._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,a,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,0!==s&&(t._colorMask=s,i.colorMask(0!=(1&s),0!=(2&s),0!=(4&s),0!=(8&s))),this._useCurrent()},e.prototype.pop=function(t){var r=this.renderer.gl;if(0===this.getStackLength())r.disable(r.STENCIL_TEST);else{var i=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,a=i?i._colorMask:15;0!==a&&(i._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilOp(r.KEEP,r.KEEP,r.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,0!==a&&(i._colorMask=a,r.colorMask(0!=(1&a),0!=(2&a),0!=(4&a),0!=(8&a))),this._useCurrent()}},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e}(au),cu=function(){function n(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new ze,this.transform=null}return n.prototype.update=function(e,t,r,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);var a=this.renderer;a.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,a.globalUniforms.update(),a.shader.shader&&a.shader.syncUniformGroup(a.shader.shader.uniforms.globals)},n.prototype.calculateProjection=function(e,t,r,i){var a=this.projectionMatrix,s=i?-1:1;a.identity(),a.a=1/t.width*2,a.d=s*(1/t.height*2),a.tx=-1-t.x*a.a,a.ty=-s-t.y*a.d},n.prototype.setTransform=function(e){},n.prototype.destroy=function(){this.renderer=null},n}(),ji=new Ce,Sa=new Ce,fu=function(){function n(e){this.renderer=e,this.clearColor=e._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Ce,this.destinationFrame=new Ce,this.viewportFrame=new Ce}return n.prototype.bind=function(e,t,r){void 0===e&&(e=null);var a,s,u,i=this.renderer;this.current=e,e?(u=(a=e.baseTexture).resolution,t||(ji.width=e.frame.width,ji.height=e.frame.height,t=ji),r||(Sa.x=e.frame.x,Sa.y=e.frame.y,Sa.width=t.width,Sa.height=t.height,r=Sa),s=a.framebuffer):(u=i.resolution,t||(ji.width=i.screen.width,ji.height=i.screen.height,t=ji),r||((r=ji).width=t.width,r.height=t.height));var d=this.viewportFrame;d.x=r.x*u,d.y=r.y*u,d.width=r.width*u,d.height=r.height*u,e||(d.y=i.view.height-(d.y+d.height)),d.ceil(),this.renderer.framebuffer.bind(s,d),this.renderer.projection.update(r,t,u,!s),this.renderer.mask.setMaskStack(e?a.maskStack:this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(r)},n.prototype.clear=function(e,t){e=this.current?e||this.current.baseTexture.clearColor:e||this.clearColor;var r=this.destinationFrame,i=this.current?this.current.baseTexture:this.renderer.screen,a=r.width!==i.width||r.height!==i.height;if(a){var s=this.viewportFrame,u=s.x,d=s.y,v=s.width,m=s.height;u=Math.round(u),d=Math.round(d),v=Math.round(v),m=Math.round(m),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(u,d,v,m)}this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],t),a&&this.renderer.scissor.pop()},n.prototype.resize=function(){this.bind(null)},n.prototype.reset=function(){this.bind(null)},n.prototype.destroy=function(){this.renderer=null},n}();function Xh(n,e,t,r,i){t.buffer.update(i)}var jh={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},du={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};var Vh=function(){function n(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return n.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},n}();var Qh=0,fs={textureCount:0,uboCount:0},pu=function(){function n(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Qh++}return n.prototype.systemCheck=function(){if(!function Bh(){if("boolean"==typeof Ta)return Ta;try{var n=new Function("param1","param2","param3","return param1[param2] === param3;");Ta=!0===n({a:"b"},"a","b")}catch(e){Ta=!1}return Ta}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},n.prototype.contextChange=function(e){this.gl=e,this.reset()},n.prototype.bind=function(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;var r=e.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),t||(fs.textureCount=0,fs.uboCount=0,this.syncUniformGroup(e.uniformGroup,fs)),i},n.prototype.setUniforms=function(e){var t=this.shader.program;t.syncUniforms(t.glPrograms[this.renderer.CONTEXT_UID].uniformData,e,this.renderer)},n.prototype.syncUniformGroup=function(e,t){var r=this.getGlProgram();(!e.static||e.dirtyId!==r.uniformDirtyGroups[e.id])&&(r.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,r,t))},n.prototype.syncUniforms=function(e,t,r){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,r)},n.prototype.createSyncGroups=function(e){var t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=function Ah(n,e){var t,r=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(var i in n.uniforms){var a=e[i];if(a){for(var s=n.uniforms[i],u=!1,d=0;d<Ao.length;d++)if(Ao[d].test(a,s)){r.push(Ao[d].code(i,s)),u=!0;break}if(!u){var m=(1!==a.size||a.isArray?Oh:Eh)[a.type].replace("location",'ud["'+i+'"].location');r.push('\n            cu = ud["'+i+'"];\n            cv = cu.value;\n            v = uv["'+i+'"];\n            '+m+";")}}else(null===(t=n.uniforms[i])||void 0===t?void 0:t.group)&&r.push(n.uniforms[i].ubo?"\n                        renderer.shader.syncUniformBufferGroup(uv."+i+", '"+i+"');\n                    ":"\n                        renderer.shader.syncUniformGroup(uv."+i+", syncData);\n                    ")}return new Function("ud","uv","renderer","syncData",r.join("\n"))}(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]},n.prototype.syncUniformBufferGroup=function(e,t){var r=this.getGlProgram();if(!e.static||0!==e.dirtyId||!r.uniformGroups[e.id]){e.dirtyId=0;var i=r.uniformGroups[e.id]||this.createSyncBufferGroup(e,r,t);e.buffer.update(),i(r.uniformData,e.uniforms,this.renderer,fs,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,r.uniformBufferBindings[t])},n.prototype.createSyncBufferGroup=function(e,t,r){var i=this.renderer.gl;this.renderer.buffer.bind(e.buffer);var a=this.gl.getUniformBlockIndex(t.program,r);t.uniformBufferBindings[r]=this.shader.uniformBindCount,i.uniformBlockBinding(t.program,a,this.shader.uniformBindCount),this.shader.uniformBindCount++;var s=this.getSignature(e,this.shader.program.uniformData,"ubo"),u=this._uboCache[s];if(u||(u=this._uboCache[s]=function zh(n,e){if(!n.autoManage)return{size:0,syncFunc:Xh};for(var t=function Zh(n,e){var t=[];for(var r in n)e[r]&&t.push(e[r]);return t.sort(function(i,a){return i.index-a.index}),t}(n.uniforms,e),r=function Yh(n){for(var e=n.map(function(d){return{data:d,offset:0,dataLen:0,dirty:0}}),t=0,r=0,i=0,a=0;a<e.length;a++){var s=e[a];if(t=du[s.data.type],s.data.size>1&&(t=Math.max(t,16)*s.data.size),s.dataLen=t,r%t!=0&&r<16){var u=r%t%16;r+=u,i+=u}r+t>16?(i=16*Math.ceil(i/16),s.offset=i,i+=t,r=t):(s.offset=i,r+=t,i+=t)}return{uboElements:e,size:i=16*Math.ceil(i/16)}}(t),i=r.uboElements,a=r.size,s=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "],u=0;u<i.length;u++){for(var d=i[u],v=n.uniforms[d.data.name],m=d.data.name,x=!1,b=0;b<Ao.length;b++){var S=Ao[b];if(S.codeUbo&&S.test(d.data,v)){s.push("offset = "+d.offset/4+";",Ao[b].codeUbo(d.data.name,v)),x=!0;break}}if(!x)if(d.data.size>1){var A=eu(d.data.type),M=Math.max(du[d.data.type]/16,1),F=A/M;s.push("\n                cv = ud."+m+".value;\n                v = uv."+m+";\n                offset = "+d.offset/4+";\n\n                t = 0;\n\n                for(var i=0; i < "+d.data.size*M+"; i++)\n                {\n                    for(var j = 0; j < "+F+"; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += "+(4-F%4)%4+";\n                }\n\n                ")}else s.push("\n                cv = ud."+m+".value;\n                v = uv."+m+";\n                offset = "+d.offset/4+";\n                "+jh[d.data.type]+";\n                ")}return s.push("\n       renderer.buffer.update(buffer);\n    "),{size:a,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join("\n"))}}(e,this.shader.program.uniformData)),e.autoManage){var d=new Float32Array(u.size/4);e.buffer.update(d)}return t.uniformGroups[e.id]=u.syncFunc,t.uniformGroups[e.id]},n.prototype.getSignature=function(e,t,r){var i=e.uniforms,a=[r+"-"];for(var s in i)a.push(s),t[s]&&a.push(t[s].type);return a.join("-")},n.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},n.prototype.generateProgram=function(e){var r=e.program,i=function $h(n,e){var t=$l(n,n.VERTEX_SHADER,e.vertexSrc),r=$l(n,n.FRAGMENT_SHADER,e.fragmentSrc),i=n.createProgram();if(n.attachShader(i,t),n.attachShader(i,r),n.linkProgram(i),n.getProgramParameter(i,n.LINK_STATUS)||function Th(n,e,t,r){n.getProgramParameter(e,n.LINK_STATUS)||(n.getShaderParameter(t,n.COMPILE_STATUS)||Ql(n,t),n.getShaderParameter(r,n.COMPILE_STATUS)||Ql(n,r),console.error("PixiJS Error: Could not initialize shader."),""!==n.getProgramInfoLog(e)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",n.getProgramInfoLog(e)))}(n,i,t,r),e.attributeData=function Wh(n,e){for(var t={},r=e.getProgramParameter(n,e.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var a=e.getActiveAttrib(n,i);if(0!==a.name.indexOf("gl_")){var s=nu(e,a.type),u={type:s,name:a.name,size:eu(s),location:e.getAttribLocation(n,a.name)};t[a.name]=u}}return t}(i,n),e.uniformData=function Jh(n,e){for(var t={},r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS),i=0;i<r;i++){var a=e.getActiveUniform(n,i),s=a.name.replace(/\[.*?\]$/,""),u=!!a.name.match(/\[.*?\]$/),d=nu(e,a.type);t[s]={name:s,index:i,type:d,size:a.size,isArray:u,value:ql(d,a.size)}}return t}(i,n),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){var a=Object.keys(e.attributeData);a.sort(function(m,x){return m>x?1:-1});for(var s=0;s<a.length;s++)e.attributeData[a[s]].location=s,n.bindAttribLocation(i,s,a[s]);n.linkProgram(i)}n.deleteShader(t),n.deleteShader(r);var u={};for(var s in e.uniformData){var d=e.uniformData[s];u[s]={location:n.getUniformLocation(i,s),value:ql(d.type,d.size)}}return new Vh(i,u)}(this.gl,r);return r.glPrograms[this.renderer.CONTEXT_UID]=i,i},n.prototype.reset=function(){this.program=null,this.shader=null},n.prototype.disposeShader=function(e){this.shader===e&&(this.shader=null)},n.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},n}(),vu=function(){function n(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=I.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new Xi,this.defaultState.blend=!0}return n.prototype.contextChange=function(e){this.gl=e,this.blendModes=function qh(n,e){return void 0===e&&(e=[]),e[I.NORMAL]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[I.ADD]=[n.ONE,n.ONE],e[I.MULTIPLY]=[n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[I.SCREEN]=[n.ONE,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[I.OVERLAY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[I.DARKEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[I.LIGHTEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[I.COLOR_DODGE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[I.COLOR_BURN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[I.HARD_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[I.SOFT_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[I.DIFFERENCE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[I.EXCLUSION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[I.HUE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[I.SATURATION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[I.COLOR]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[I.LUMINOSITY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[I.NONE]=[0,0],e[I.NORMAL_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[I.ADD_NPM]=[n.SRC_ALPHA,n.ONE,n.ONE,n.ONE],e[I.SCREEN_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[I.SRC_IN]=[n.DST_ALPHA,n.ZERO],e[I.SRC_OUT]=[n.ONE_MINUS_DST_ALPHA,n.ZERO],e[I.SRC_ATOP]=[n.DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],e[I.DST_OVER]=[n.ONE_MINUS_DST_ALPHA,n.ONE],e[I.DST_IN]=[n.ZERO,n.SRC_ALPHA],e[I.DST_OUT]=[n.ZERO,n.ONE_MINUS_SRC_ALPHA],e[I.DST_ATOP]=[n.ONE_MINUS_DST_ALPHA,n.SRC_ALPHA],e[I.XOR]=[n.ONE_MINUS_DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],e[I.SUBTRACT]=[n.ONE,n.ONE,n.ONE,n.ONE,n.FUNC_REVERSE_SUBTRACT,n.FUNC_ADD],e}(e),this.set(this.defaultState),this.reset()},n.prototype.set=function(e){if(this.stateId!==(e=e||this.defaultState).data){for(var t=this.stateId^e.data,r=0;t;)1&t&&this.map[r].call(this,!!(e.data&1<<r)),t>>=1,r++;this.stateId=e.data}for(r=0;r<this.checks.length;r++)this.checks[r](this,e)},n.prototype.forceState=function(e){e=e||this.defaultState;for(var t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data},n.prototype.setBlend=function(e){this.updateCheck(n.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},n.prototype.setOffset=function(e){this.updateCheck(n.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},n.prototype.setDepthTest=function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)},n.prototype.setDepthMask=function(e){this.gl.depthMask(e)},n.prototype.setCullFace=function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)},n.prototype.setFrontFace=function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])},n.prototype.setBlendMode=function(e){if(e!==this.blendMode){this.blendMode=e;var t=this.blendModes[e],r=this.gl;2===t.length?r.blendFunc(t[0],t[1]):r.blendFuncSeparate(t[0],t[1],t[2],t[3]),6===t.length?(this._blendEq=!0,r.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}},n.prototype.setPolygonOffset=function(e,t){this.gl.polygonOffset(e,t)},n.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},n.prototype.updateCheck=function(e,t){var r=this.checks.indexOf(e);t&&-1===r?this.checks.push(e):!t&&-1!==r&&this.checks.splice(r,1)},n.checkBlendMode=function(e,t){e.setBlendMode(t.blendMode)},n.checkPolygonOffset=function(e,t){e.setPolygonOffset(1,t.polygonOffset)},n.prototype.destroy=function(){this.gl=null},n}(),_u=function(){function n(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=L.GC_MAX_IDLE,this.checkCountMax=L.GC_MAX_CHECK_COUNT,this.mode=L.GC_MODE}return n.prototype.postrender=function(){!this.renderer.renderingToScreen||(this.count++,this.mode!==Dt.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},n.prototype.run=function(){for(var e=this.renderer.texture,t=e.managedTextures,r=!1,i=0;i<t.length;i++){var a=t[i];!a.framebuffer&&this.count-a.touched>this.maxIdle&&(e.destroyTexture(a,!0),t[i]=null,r=!0)}if(r){var s=0;for(i=0;i<t.length;i++)null!==t[i]&&(t[s++]=t[i]);t.length=s}},n.prototype.unload=function(e){var r=e._texture;r&&!r.framebuffer&&this.renderer.texture.destroyTexture(r);for(var i=e.children.length-1;i>=0;i--)this.unload(e.children[i])},n.prototype.destroy=function(){this.renderer=null},n}(),zs=function n(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=k.UNSIGNED_BYTE,this.internalFormat=E.RGBA,this.samplerType=0},gu=function(){function n(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Et,this.hasIntegerTextures=!1}return n.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function oc(n){var e,t,r,i,a,s,u,d,v,m,x,b,S,A,M,F,$,mt,At,Gt,vt,Ct,Pt;return"WebGL2RenderingContext"in globalThis&&n instanceof globalThis.WebGL2RenderingContext?((e={})[k.UNSIGNED_BYTE]=((t={})[E.RGBA]=n.RGBA8,t[E.RGB]=n.RGB8,t[E.RG]=n.RG8,t[E.RED]=n.R8,t[E.RGBA_INTEGER]=n.RGBA8UI,t[E.RGB_INTEGER]=n.RGB8UI,t[E.RG_INTEGER]=n.RG8UI,t[E.RED_INTEGER]=n.R8UI,t[E.ALPHA]=n.ALPHA,t[E.LUMINANCE]=n.LUMINANCE,t[E.LUMINANCE_ALPHA]=n.LUMINANCE_ALPHA,t),e[k.BYTE]=((r={})[E.RGBA]=n.RGBA8_SNORM,r[E.RGB]=n.RGB8_SNORM,r[E.RG]=n.RG8_SNORM,r[E.RED]=n.R8_SNORM,r[E.RGBA_INTEGER]=n.RGBA8I,r[E.RGB_INTEGER]=n.RGB8I,r[E.RG_INTEGER]=n.RG8I,r[E.RED_INTEGER]=n.R8I,r),e[k.UNSIGNED_SHORT]=((i={})[E.RGBA_INTEGER]=n.RGBA16UI,i[E.RGB_INTEGER]=n.RGB16UI,i[E.RG_INTEGER]=n.RG16UI,i[E.RED_INTEGER]=n.R16UI,i[E.DEPTH_COMPONENT]=n.DEPTH_COMPONENT16,i),e[k.SHORT]=((a={})[E.RGBA_INTEGER]=n.RGBA16I,a[E.RGB_INTEGER]=n.RGB16I,a[E.RG_INTEGER]=n.RG16I,a[E.RED_INTEGER]=n.R16I,a),e[k.UNSIGNED_INT]=((s={})[E.RGBA_INTEGER]=n.RGBA32UI,s[E.RGB_INTEGER]=n.RGB32UI,s[E.RG_INTEGER]=n.RG32UI,s[E.RED_INTEGER]=n.R32UI,s[E.DEPTH_COMPONENT]=n.DEPTH_COMPONENT24,s),e[k.INT]=((u={})[E.RGBA_INTEGER]=n.RGBA32I,u[E.RGB_INTEGER]=n.RGB32I,u[E.RG_INTEGER]=n.RG32I,u[E.RED_INTEGER]=n.R32I,u),e[k.FLOAT]=((d={})[E.RGBA]=n.RGBA32F,d[E.RGB]=n.RGB32F,d[E.RG]=n.RG32F,d[E.RED]=n.R32F,d[E.DEPTH_COMPONENT]=n.DEPTH_COMPONENT32F,d),e[k.HALF_FLOAT]=((v={})[E.RGBA]=n.RGBA16F,v[E.RGB]=n.RGB16F,v[E.RG]=n.RG16F,v[E.RED]=n.R16F,v),e[k.UNSIGNED_SHORT_5_6_5]=((m={})[E.RGB]=n.RGB565,m),e[k.UNSIGNED_SHORT_4_4_4_4]=((x={})[E.RGBA]=n.RGBA4,x),e[k.UNSIGNED_SHORT_5_5_5_1]=((b={})[E.RGBA]=n.RGB5_A1,b),e[k.UNSIGNED_INT_2_10_10_10_REV]=((S={})[E.RGBA]=n.RGB10_A2,S[E.RGBA_INTEGER]=n.RGB10_A2UI,S),e[k.UNSIGNED_INT_10F_11F_11F_REV]=((A={})[E.RGB]=n.R11F_G11F_B10F,A),e[k.UNSIGNED_INT_5_9_9_9_REV]=((M={})[E.RGB]=n.RGB9_E5,M),e[k.UNSIGNED_INT_24_8]=((F={})[E.DEPTH_STENCIL]=n.DEPTH24_STENCIL8,F),e[k.FLOAT_32_UNSIGNED_INT_24_8_REV]=(($={})[E.DEPTH_STENCIL]=n.DEPTH32F_STENCIL8,$),Pt=e):((mt={})[k.UNSIGNED_BYTE]=((At={})[E.RGBA]=n.RGBA,At[E.RGB]=n.RGB,At[E.ALPHA]=n.ALPHA,At[E.LUMINANCE]=n.LUMINANCE,At[E.LUMINANCE_ALPHA]=n.LUMINANCE_ALPHA,At),mt[k.UNSIGNED_SHORT_5_6_5]=((Gt={})[E.RGB]=n.RGB,Gt),mt[k.UNSIGNED_SHORT_4_4_4_4]=((vt={})[E.RGBA]=n.RGBA,vt),mt[k.UNSIGNED_SHORT_5_5_5_1]=((Ct={})[E.RGBA]=n.RGBA,Ct),Pt=mt),Pt}(e);var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(var r=0;r<t;r++)this.boundTextures[r]=null;this.emptyTextures={};var i=new zs(e.createTexture());for(e.bindTexture(e.TEXTURE_2D,i.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=i,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new zs(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture),r=0;r<6;r++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);for(e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR),r=0;r<this.boundTextures.length;r++)this.bind(null,r)},n.prototype.bind=function(e,t){void 0===t&&(t=0);var r=this.gl;if((e=null==e?void 0:e.castToBaseTexture())&&e.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;var i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(e.target,i.texture)),i.dirtyId!==e.dirtyId?(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),this.updateTexture(e)):i.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[t]=null},n.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture},n.prototype.unbind=function(e){var r=this.gl,i=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var a=0;a<i.length;a++)i[a]===this.unknownTexture&&this.bind(null,a)}for(a=0;a<i.length;a++)i[a]===e&&(this.currentLocation!==a&&(r.activeTexture(r.TEXTURE0+a),this.currentLocation=a),r.bindTexture(e.target,this.emptyTextures[e.target].texture),i[a]=null)},n.prototype.ensureSamplerType=function(e){var t=this,r=t.boundTextures,a=t.CONTEXT_UID;if(t.hasIntegerTextures)for(var s=e-1;s>=0;--s){var u=r[s];u&&u._glTextures[a].samplerType!==G.FLOAT&&this.renderer.texture.unbind(u)}},n.prototype.initTexture=function(e){var t=new zs(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t},n.prototype.initTextureType=function(e,t){var r,i;t.internalFormat=null!==(i=null===(r=this.internalFormats[e.type])||void 0===r?void 0:r[e.format])&&void 0!==i?i:e.format,t.type=2===this.webGLVersion&&e.type===k.HALF_FLOAT?this.gl.HALF_FLOAT:e.type},n.prototype.updateTexture=function(e){var t=e._glTextures[this.CONTEXT_UID];if(t){var r=this.renderer;if(this.initTextureType(e,t),e.resource&&e.resource.upload(r,e,t))t.samplerType!==G.FLOAT&&(this.hasIntegerTextures=!0);else{var i=e.realWidth,a=e.realHeight,s=r.gl;(t.width!==i||t.height!==a||t.dirtyId<0)&&(t.width=i,t.height=a,s.texImage2D(e.target,0,t.internalFormat,i,a,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}},n.prototype.destroyTexture=function(e,t){var r=this.gl;if((e=e.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(e),r.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){var i=this.managedTextures.indexOf(e);-1!==i&&Bn(this.managedTextures,i,1)}},n.prototype.updateTextureStyle=function(e){var t=e._glTextures[this.CONTEXT_UID];!t||(t.mipmap=!!(e.mipmap!==ct.POW2&&2===this.webGLVersion||e.isPowerOfTwo)&&e.mipmap>=1,t.wrapMode=2===this.webGLVersion||e.isPowerOfTwo?e.wrapMode:it.CLAMP,e.resource&&e.resource.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)},n.prototype.setStyle=function(e,t){var r=this.gl;if(t.mipmap&&e.mipmap!==ct.ON_MANUAL&&r.generateMipmap(e.target),r.texParameteri(e.target,r.TEXTURE_WRAP_S,t.wrapMode),r.texParameteri(e.target,r.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===Y.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);var i=this.renderer.context.extensions.anisotropicFiltering;if(i&&e.anisotropicLevel>0&&e.scaleMode===Y.LINEAR){var a=Math.min(e.anisotropicLevel,r.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,a)}}else r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===Y.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(e.target,r.TEXTURE_MAG_FILTER,e.scaleMode===Y.LINEAR?r.LINEAR:r.NEAREST)},n.prototype.destroy=function(){this.renderer=null},n}(),mu={__proto__:null,FilterSystem:Yl,BatchSystem:Zl,ContextSystem:Vl,FramebufferSystem:Wl,GeometrySystem:Jl,MaskSystem:ou,ScissorSystem:uu,StencilSystem:hu,ProjectionSystem:cu,RenderTextureSystem:fu,ShaderSystem:pu,StateSystem:vu,TextureGCSystem:_u,TextureSystem:gu},Vs=new ze,ac=function(n){function e(t,r){void 0===t&&(t=Zt.UNKNOWN);var i=n.call(this)||this;return r=Object.assign({},L.RENDER_OPTIONS,r),i.options=r,i.type=t,i.screen=new Ce(0,0,r.width,r.height),i.view=r.view||L.ADAPTER.createCanvas(),i.resolution=r.resolution||L.RESOLUTION,i.useContextAlpha=r.useContextAlpha,i.autoDensity=!!r.autoDensity,i.preserveDrawingBuffer=r.preserveDrawingBuffer,i.clearBeforeRender=r.clearBeforeRender,i._backgroundColor=0,i._backgroundColorRgba=[0,0,0,1],i._backgroundColorString="#000000",i.backgroundColor=r.backgroundColor||i._backgroundColor,i.backgroundAlpha=r.backgroundAlpha,void 0!==r.transparent&&($e("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),i.useContextAlpha=r.transparent,i.backgroundAlpha=r.transparent?0:1),i._lastObjectRendered=null,i.plugins={},i}return Tt(e,n),e.prototype.initPlugins=function(t){for(var r in t)this.plugins[r]=new t[r](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,r){this.view.width=Math.round(t*this.resolution),this.view.height=Math.round(r*this.resolution);var i=this.view.width/this.resolution,a=this.view.height/this.resolution;this.screen.width=i,this.screen.height=a,this.autoDensity&&(this.view.style.width=i+"px",this.view.style.height=a+"px"),this.emit("resize",i,a)},e.prototype.generateTexture=function(t,r,i,a){void 0===r&&(r={}),"number"==typeof r&&($e("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),r={scaleMode:r,resolution:i,region:a});var s=r.region,u=function Ht(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}(r,["region"]);0===(a=s||t.getLocalBounds(null,!0)).width&&(a.width=1),0===a.height&&(a.height=1);var d=Dr.create(Bt({width:a.width,height:a.height},u));return Vs.tx=-a.x,Vs.ty=-a.y,this.render(t,{renderTexture:d,clear:!1,transform:Vs,skipUpdateTransform:!!t.parent}),d},e.prototype.destroy=function(t){for(var r in this.plugins)this.plugins[r].destroy(),this.plugins[r]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var i=this;i.plugins=null,i.type=Zt.UNKNOWN,i.view=null,i.screen=null,i._tempDisplayObjectParent=null,i.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=Ri(t),Zr(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),e}(nt),sc=function n(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},lc=function(){function n(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}return n.prototype.destroy=function(){this.renderer=null},n.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},n.prototype.bind=function(e){var r=this.gl,a=e._glBuffers[this.CONTEXT_UID]||this.createGLBuffer(e);r.bindBuffer(e.type,a.buffer)},n.prototype.bindBufferBase=function(e,t){var i=this.gl;if(this.boundBufferBases[t]!==e){var s=e._glBuffers[this.CONTEXT_UID]||this.createGLBuffer(e);this.boundBufferBases[t]=e,i.bindBufferBase(i.UNIFORM_BUFFER,t,s.buffer)}},n.prototype.bindBufferRange=function(e,t,r){var a=this.gl;r=r||0;var u=e._glBuffers[this.CONTEXT_UID]||this.createGLBuffer(e);a.bindBufferRange(a.UNIFORM_BUFFER,t||0,u.buffer,256*r,256)},n.prototype.update=function(e){var r=this.gl,a=e._glBuffers[this.CONTEXT_UID];if(e._updateID!==a.updateID)if(a.updateID=e._updateID,r.bindBuffer(e.type,a.buffer),a.byteLength>=e.data.byteLength)r.bufferSubData(e.type,0,e.data);else{var s=e.static?r.STATIC_DRAW:r.DYNAMIC_DRAW;a.byteLength=e.data.byteLength,r.bufferData(e.type,e.data,s)}},n.prototype.dispose=function(e,t){if(this.managedBuffers[e.id]){delete this.managedBuffers[e.id];var r=e._glBuffers[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this),r&&(t||i.deleteBuffer(r.buffer),delete e._glBuffers[this.CONTEXT_UID])}},n.prototype.disposeAll=function(e){for(var t=Object.keys(this.managedBuffers),r=0;r<t.length;r++)this.dispose(this.managedBuffers[t[r]],e)},n.prototype.createGLBuffer=function(e){var r=this.CONTEXT_UID;return e._glBuffers[r]=new sc(this.gl.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[r]},n}(),Ws=function(n){function e(t){var r=n.call(this,Zt.WEBGL,t)||this;return t=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new O("destroy"),contextChange:new O("contextChange"),reset:new O("reset"),update:new O("update"),postrender:new O("postrender"),prerender:new O("prerender"),resize:new O("resize")},r.runners.contextChange.add(r),r.globalUniforms=new Hi({projectionMatrix:new ze},!0),r.addSystem(ou,"mask").addSystem(Vl,"context").addSystem(vu,"state").addSystem(pu,"shader").addSystem(gu,"texture").addSystem(lc,"buffer").addSystem(Jl,"geometry").addSystem(Wl,"framebuffer").addSystem(uu,"scissor").addSystem(hu,"stencil").addSystem(cu,"projection").addSystem(_u,"textureGC").addSystem(Yl,"filter").addSystem(fu,"renderTexture").addSystem(Zl,"batch"),r.initPlugins(e.__plugins),r.multisample=void 0,t.context?r.context.initFromContext(t.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:t.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,Fr(2===r.context.webGLVersion?"WebGL 2":"WebGL 1"),r.resize(r.options.width,r.options.height),r}return Tt(e,n),e.create=function(t){if(Or())return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.contextChange=function(){var r,t=this.gl;if(1===this.context.webGLVersion){var i=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),r=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,i)}else i=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),r=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,i);this.multisample=r>=Qt.HIGH?Qt.HIGH:r>=Qt.MEDIUM?Qt.MEDIUM:r>=Qt.LOW?Qt.LOW:Qt.NONE},e.prototype.addSystem=function(t,r){var i=new t(this);if(this[r])throw new Error('Whoops! The name "'+r+'" is already in use');for(var a in this[r]=i,this.runners)this.runners[a].add(i);return this},e.prototype.render=function(t,r){var i,a,s,u;if(r&&(r instanceof Dr?($e("6.0.0","Renderer#render arguments changed, use options instead."),i=r,a=arguments[2],s=arguments[3],u=arguments[4]):(i=r.renderTexture,a=r.clear,s=r.transform,u=r.skipUpdateTransform)),this.renderingToScreen=!i,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=s,!this.context.isLost){if(i||(this._lastObjectRendered=t),!u){var d=t.enableTempParent();t.updateTransform(),t.disableTempParent(d)}this.renderTexture.bind(i),this.batch.currentRenderer.start(),(void 0!==a?a:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),i&&i.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.generateTexture=function(t,r,i,a){void 0===r&&(r={});var s=n.prototype.generateTexture.call(this,t,r,i,a);return this.framebuffer.blit(),s},e.prototype.resize=function(t,r){n.prototype.resize.call(this,t,r),this.runners.resize.emit(this.screen.height,this.screen.width)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(t){for(var r in this.runners.destroy.emit(),this.runners)this.runners[r].destroy();n.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return $e("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(t,r){$e("6.5.0","Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."),P.add({name:t,type:y.RendererPlugin,ref:r})},e.__plugins={},e}(ac);P.handleByMap(y.RendererPlugin,Ws.__plugins);var yu="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",Js=function n(){this.texArray=null,this.blend=0,this.type=X.TRIANGLES,this.start=0,this.size=0,this.data=null},$s=function(){function n(){this.elements=[],this.ids=[],this.count=0}return n.prototype.clear=function(){for(var e=0;e<this.count;e++)this.elements[e]=null;this.count=0},n}(),Qs=function(){function n(e){this.rawBinaryData="number"==typeof e?new ArrayBuffer(e):e instanceof Uint8Array?e.buffer:e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(n.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),n.prototype.view=function(e){return this[e+"View"]},n.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},n.sizeOf=function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(e+" isn't a valid view type")}},n}(),dc=function(n){function e(t){var r=n.call(this,t)||this;return r.shaderGenerator=null,r.geometryClass=null,r.vertexSize=null,r.state=Xi.for2d(),r.size=4*L.SPRITE_BATCH_SIZE,r._vertexCount=0,r._indexCount=0,r._bufferedElements=[],r._bufferedTextures=[],r._bufferSize=0,r._shader=null,r._packedGeometries=[],r._packedGeometryPoolSize=2,r._flushId=0,r._aBuffers={},r._iBuffers={},r.MAX_TEXTURES=1,r.renderer.on("prerender",r.onPrerender,r),t.runners.contextChange.add(r),r._dcIndex=0,r._aIndex=0,r._iIndex=0,r._attributeBuffer=null,r._indexBuffer=null,r._tempBoundTextures=[],r}return Tt(e,n),e.prototype.contextChange=function(){var t=this.renderer.gl;L.PREFER_ENV===te.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),L.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function Ih(n,e){if(0===n)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var t=e.createShader(e.FRAGMENT_SHADER);;){var r=Mh.replace(/%forloop%/gi,Rh(n));if(e.shaderSource(t,r),e.compileShader(t),e.getShaderParameter(t,e.COMPILE_STATUS))break;n=n/2|0}return n}(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,r=e._textureArrayPool,i=this.size/4,a=Math.floor(i/this.MAX_TEXTURES)+1;t.length<i;)t.push(new Js);for(;r.length<a;)r.push(new $s);for(var s=0;s<this.MAX_TEXTURES;s++)this._tempBoundTextures[s]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){!t._texture.valid||(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var r=this._bufferedTextures,i=this.MAX_TEXTURES,a=e._textureArrayPool,s=this.renderer.batch,u=this._tempBoundTextures,d=this.renderer.textureGC.count,v=++Et._globalBatch,m=0,x=a[0],b=0;s.copyBoundTextures(u,i);for(var S=0;S<this._bufferSize;++S){var A=r[S];r[S]=null,A._batchEnabled!==v&&(x.count>=i&&(s.boundArray(x,u,v,i),this.buildDrawCalls(x,b,S),b=S,x=a[++m],++v),A._batchEnabled=v,A.touched=d,x.elements[x.count++]=A)}for(x.count>0&&(s.boundArray(x,u,v,i),this.buildDrawCalls(x,b,this._bufferSize),++m,++v),S=0;S<u.length;S++)u[S]=null;Et._globalBatch=v},e.prototype.buildDrawCalls=function(t,r,i){var a=this,s=a._bufferedElements,u=a._attributeBuffer,d=a._indexBuffer,v=a.vertexSize,m=e._drawCallPool,x=this._dcIndex,b=this._aIndex,S=this._iIndex,A=m[x];A.start=this._iIndex,A.texArray=t;for(var M=r;M<i;++M){var F=s[M],mt=To[F._texture.baseTexture.alphaMode?1:0][F.blendMode];s[M]=null,r<M&&A.blend!==mt&&(A.size=S-A.start,r=M,(A=m[++x]).texArray=t,A.start=S),this.packInterleavedGeometry(F,u,d,b,S),b+=F.vertexData.length/2*v,S+=F.indices.length,A.blend=mt}r<i&&(A.size=S-A.start,++x),this._dcIndex=x,this._aIndex=b,this._iIndex=S},e.prototype.bindAndClearTexArray=function(t){for(var r=this.renderer.texture,i=0;i<t.count;i++)r.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this,r=t._packedGeometries,i=t._attributeBuffer,a=t._indexBuffer;L.CAN_UPLOAD_SAME_BUFFER?(r[this._flushId]._buffer.update(i.rawBinaryData),r[this._flushId]._indexBuffer.update(a),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,r[this._flushId]=new this.geometryClass),r[this._flushId]._buffer.update(i.rawBinaryData),r[this._flushId]._indexBuffer.update(a),this.renderer.geometry.bind(r[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,r=this.renderer,i=r.gl,a=r.state,s=e._drawCallPool,u=null,d=0;d<t;d++){var v=s[d],m=v.texArray,x=v.type,b=v.size,S=v.start,A=v.blend;u!==m&&(u=m,this.bindAndClearTexArray(m)),this.state.blendMode=A,a.set(this.state),i.drawElements(x,b,i.UNSIGNED_SHORT,2*S)}},e.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),L.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),n.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var r=Bi(Math.ceil(t/8)),i=va(r),a=8*r;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var s=this._aBuffers[a];return s||(this._aBuffers[a]=s=new Qs(a*this.vertexSize*4)),s},e.prototype.getIndexBuffer=function(t){var r=Bi(Math.ceil(t/12)),i=va(r),a=12*r;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var s=this._iBuffers[i];return s||(this._iBuffers[i]=s=new Uint16Array(a)),s},e.prototype.packInterleavedGeometry=function(t,r,i,a,s){for(var u=r.uint32View,d=r.float32View,v=a/this.vertexSize,m=t.uvs,x=t.indices,b=t.vertexData,S=t._texture.baseTexture._batchLocation,A=Math.min(t.worldAlpha,1),M=A<1&&t._texture.baseTexture.alphaMode?wo(t._tintRGB,A):t._tintRGB+(255*A<<24),F=0;F<b.length;F+=2)d[a++]=b[F],d[a++]=b[F+1],d[a++]=m[F],d[a++]=m[F+1],u[a++]=M,d[a++]=S;for(F=0;F<x.length;F++)i[s++]=v+x[F]},e._drawCallPool=[],e._textureArrayPool=[],e}(ls),pc=function(){function n(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},t.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(t.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return n.prototype.generateShader=function(e){if(!this.programCache[e]){for(var t=new Int32Array(e),r=0;r<e;r++)t[r]=r;this.defaultGroupCache[e]=Hi.from({uSamplers:t},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+e)).replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new wa(this.vertexSrc,i)}var a={tint:new Float32Array([1,1,1,1]),translationMatrix:new ze,default:this.defaultGroupCache[e]};return new ui(this.programCache[e],a)},n.prototype.generateSampleSrc=function(e){var t="";t+="\n",t+="\n";for(var r=0;r<e;r++)r>0&&(t+="\nelse "),r<e-1&&(t+="if(vTextureId < "+r+".5)"),t+="\n{",t+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",t+="\n}";return(t+="\n")+"\n"},n}(),bu=function(n){function e(t){void 0===t&&(t=!1);var r=n.call(this)||this;return r._buffer=new cr(null,t,!1),r._indexBuffer=new cr(null,t,!0),r.addAttribute("aVertexPosition",r._buffer,2,!1,k.FLOAT).addAttribute("aTextureCoord",r._buffer,2,!1,k.FLOAT).addAttribute("aColor",r._buffer,4,!0,k.UNSIGNED_BYTE).addAttribute("aTextureId",r._buffer,1,!0,k.FLOAT).addIndex(r._indexBuffer),r}return Tt(e,n),e}(xa),xu="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",Cu="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",vc=function(){function n(){}return n.create=function(e){var t=Object.assign({vertex:xu,fragment:Cu,geometryClass:bu,vertexSize:6},e),r=t.vertex,i=t.fragment,a=t.vertexSize,s=t.geometryClass;return function(u){function d(v){var m=u.call(this,v)||this;return m.shaderGenerator=new pc(r,i),m.geometryClass=s,m.vertexSize=a,m}return Tt(d,u),d}(dc)},Object.defineProperty(n,"defaultVertexSrc",{get:function(){return xu},enumerable:!1,configurable:!0}),Object.defineProperty(n,"defaultFragmentTemplate",{get:function(){return Cu},enumerable:!1,configurable:!0}),n}(),Tu=vc.create();Object.assign(Tu,{extension:{name:"batch",type:y.RendererPlugin}});var _c={},gc=function(n){Object.defineProperty(_c,n,{get:function(){return $e("6.0.0","PIXI.systems."+n+" has moved to PIXI."+n),nr[n]}})};for(var qs in nr)gc(qs);var mc={},yc=function(n){Object.defineProperty(mc,n,{get:function(){return $e("6.0.0","PIXI.resources."+n+" has moved to PIXI."+n),mu[n]}})};for(var qs in mu)yc(qs);l.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1});var Ec=function(){function n(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(pr.tablet||pr.phone)&&this.createTouchHook();var t=document.createElement("div");t.style.width="100px",t.style.height="100px",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.zIndex=2..toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(n.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),n.prototype.createTouchHook=function(){var e=this,t=document.createElement("button");t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.zIndex=2..toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",function(){e._isMobileAccessibility=!0,e.activate(),e.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t},n.prototype.destroyTouchHook=function(){!this._hookDiv||(document.body.removeChild(this._hookDiv),this._hookDiv=null)},n.prototype.activate=function(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),null===(e=this.renderer.view.parentNode)||void 0===e||e.appendChild(this.div))},n.prototype.deactivate=function(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),null===(e=this.div.parentNode)||void 0===e||e.removeChild(this.div))},n.prototype.updateAccessibleObjects=function(e){if(e.visible&&e.accessibleChildren){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);var t=e.children;if(t)for(var r=0;r<t.length;r++)this.updateAccessibleObjects(t[r])}},n.prototype.update=function(){var e=performance.now();if(!(pr.android.device&&e<this.androidUpdateCount)&&(this.androidUpdateCount=e+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),i=t.top,u=this.renderer,d=u.width,v=u.height,m=u.resolution,x=t.width/d*m,b=t.height/v*m,S=this.div;S.style.left=t.left+"px",S.style.top=i+"px",S.style.width=d+"px",S.style.height=v+"px";for(var A=0;A<this.children.length;A++){var M=this.children[A];if(M.renderId!==this.renderId)M._accessibleActive=!1,Bn(this.children,A,1),this.div.removeChild(M._accessibleDiv),this.pool.push(M._accessibleDiv),M._accessibleDiv=null,A--;else{S=M._accessibleDiv;var F=M.hitArea,$=M.worldTransform;M.hitArea?(S.style.left=($.tx+F.x*$.a)*x+"px",S.style.top=($.ty+F.y*$.d)*b+"px",S.style.width=F.width*$.a*x+"px",S.style.height=F.height*$.d*b+"px"):(F=M.getBounds(),this.capHitArea(F),S.style.left=F.x*x+"px",S.style.top=F.y*b+"px",S.style.width=F.width*x+"px",S.style.height=F.height*b+"px",S.title!==M.accessibleTitle&&null!==M.accessibleTitle&&(S.title=M.accessibleTitle),S.getAttribute("aria-label")!==M.accessibleHint&&null!==M.accessibleHint&&S.setAttribute("aria-label",M.accessibleHint)),(M.accessibleTitle!==S.title||M.tabIndex!==S.tabIndex)&&(S.title=M.accessibleTitle,S.tabIndex=M.tabIndex,this.debug&&this.updateDebugHTML(S))}}this.renderId++}},n.prototype.updateDebugHTML=function(e){e.innerHTML="type: "+e.type+"</br> title : "+e.title+"</br> tabIndex: "+e.tabIndex},n.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);var t=this.renderer,r=t.width,i=t.height;e.x+e.width>r&&(e.width=r-e.x),e.y+e.height>i&&(e.height=i-e.y)},n.prototype.addChild=function(e){var t=this.pool.pop();t||((t=document.createElement("button")).style.width="100px",t.style.height="100px",t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=2..toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&null!==e.accessibleTitle?t.title=e.accessibleTitle:(!e.accessibleHint||null===e.accessibleHint)&&(t.title="displayObject "+e.tabIndex),e.accessibleHint&&null!==e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},n.prototype._onClick=function(e){var t=this.renderer.plugins.interaction,r=e.target.displayObject,i=t.eventData;t.dispatchEvent(r,"click",i),t.dispatchEvent(r,"pointertap",i),t.dispatchEvent(r,"tap",i)},n.prototype._onFocus=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive");var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseover",t.eventData)},n.prototype._onFocusOut=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite");var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseout",t.eventData)},n.prototype._onKeyDown=function(e){9===e.keyCode&&this.activate()},n.prototype._onMouseMove=function(e){0===e.movementX&&0===e.movementY||this.deactivate()},n.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},n.extension={name:"accessibility",type:[y.RendererPlugin,y.CanvasRendererPlugin]},n}(),Pu=function(){function n(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new Oe,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(n.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),n.prototype.getLocalPosition=function(e,t,r){return e.worldTransform.applyInverse(r||this.global,t)},n.prototype.copyEvent=function(e){"isPrimary"in e&&e.isPrimary&&(this.isPrimary=!0),this.button="button"in e&&e.button;var t="buttons"in e&&e.buttons;this.buttons=Number.isInteger(t)?t:"which"in e&&e.which,this.width="width"in e&&e.width,this.height="height"in e&&e.height,this.tiltX="tiltX"in e&&e.tiltX,this.tiltY="tiltY"in e&&e.tiltY,this.pointerType="pointerType"in e&&e.pointerType,this.pressure="pressure"in e&&e.pressure,this.rotationAngle="rotationAngle"in e&&e.rotationAngle,this.twist="twist"in e&&e.twist||0,this.tangentialPressure="tangentialPressure"in e&&e.tangentialPressure||0},n.prototype.reset=function(){this.isPrimary=!1},n}(),Ks=function(n,e){return(Ks=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)},Ac=function(){function n(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return n.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},n.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},n}(),tl=function(){function n(e){this._pointerId=e,this._flags=n.FLAGS.NONE}return n.prototype._doSet=function(e,t){this._flags=t?this._flags|e:this._flags&~e},Object.defineProperty(n.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"flags",{get:function(){return this._flags},set:function(e){this._flags=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"none",{get:function(){return this._flags===n.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"over",{get:function(){return 0!=(this._flags&n.FLAGS.OVER)},set:function(e){this._doSet(n.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rightDown",{get:function(){return 0!=(this._flags&n.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(n.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"leftDown",{get:function(){return 0!=(this._flags&n.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(n.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),n.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),n}(),Mc=function(){function n(){this._tempPoint=new Oe}return n.prototype.recursiveFindHit=function(e,t,r,i,a){var s;if(!t||!t.visible)return!1;var u=e.data.global,d=!1,v=a=t.interactive||a,m=!0;if(t.hitArea)i&&(t.worldTransform.applyInverse(u,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?d=!0:(i=!1,m=!1)),v=!1;else if(t._mask&&i){var x=t._mask.isMaskData?t._mask.maskObject:t._mask;x&&!(null===(s=x.containsPoint)||void 0===s?void 0:s.call(x,u))&&(i=!1)}if(m&&t.interactiveChildren&&t.children)for(var b=t.children,S=b.length-1;S>=0;S--){var A=b[S],M=this.recursiveFindHit(e,A,r,i,v);if(M){if(!A.parent)continue;v=!1,M&&(e.target&&(i=!1),d=!0)}}return a&&(i&&!e.target&&!t.hitArea&&t.containsPoint&&t.containsPoint(u)&&(d=!0),t.interactive&&(d&&!e.target&&(e.target=t),r&&r(e,t,!!d))),d},n.prototype.findHit=function(e,t,r,i){this.recursiveFindHit(e,t,r,i,!1)},n}(),Rc={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(n){n?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};l.mixin(Rc);var vs={target:null,data:{global:null}},Ic=function(n){function e(t,r){var i=n.call(this)||this;return r=r||{},i.renderer=t,i.autoPreventDefault=void 0===r.autoPreventDefault||r.autoPreventDefault,i.interactionFrequency=r.interactionFrequency||10,i.mouse=new Pu,i.mouse.identifier=1,i.mouse.global.set(-999999),i.activeInteractionData={},i.activeInteractionData[1]=i.mouse,i.interactionDataPool=[],i.eventData=new Ac,i.interactionDOMElement=null,i.moveWhenInside=!1,i.eventsAdded=!1,i.tickerAdded=!1,i.mouseOverRenderer=!("PointerEvent"in globalThis),i.supportsTouchEvents="ontouchstart"in globalThis,i.supportsPointerEvents=!!globalThis.PointerEvent,i.onPointerUp=i.onPointerUp.bind(i),i.processPointerUp=i.processPointerUp.bind(i),i.onPointerCancel=i.onPointerCancel.bind(i),i.processPointerCancel=i.processPointerCancel.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.processPointerDown=i.processPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.processPointerMove=i.processPointerMove.bind(i),i.onPointerOut=i.onPointerOut.bind(i),i.processPointerOverOut=i.processPointerOverOut.bind(i),i.onPointerOver=i.onPointerOver.bind(i),i.cursorStyles={default:"inherit",pointer:"pointer"},i.currentCursorMode=null,i.cursor=null,i.resolution=1,i.delayedEvents=[],i.search=new Mc,i._tempDisplayObject=new h,i._eventListenerOptions={capture:!0,passive:!1},i._useSystemTicker=void 0===r.useSystemTicker||r.useSystemTicker,i.setTargetElement(i.renderer.view,i.renderer.resolution),i}return function Oc(n,e){function t(){this.constructor=n}Ks(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,n),Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,r){return vs.target=null,vs.data.global=t,r||(r=this.lastObjectRendered),this.processInteractive(vs,r,null,!0),vs.target},e.prototype.setTargetElement=function(t,r){void 0===r&&(r=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=r,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(q.system.add(this.tickerUpdate,this,B.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){!this.tickerAdded||(q.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove)return void(this._didMove=!1);for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var r=this.activeInteractionData[t];if(r.originalEvent&&"touch"!==r.pointerType){var i=this.configureInteractionEventForDOMEvent(this.eventData,r.originalEvent,r);this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){t=t||"default";var r=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(r=!1),this.currentCursorMode!==t){this.currentCursorMode=t;var i=this.cursorStyles[t];if(i)switch(typeof i){case"string":r&&(this.interactionDOMElement.style.cursor=i);break;case"function":i(t);break;case"object":r&&Object.assign(this.interactionDOMElement.style,i)}else r&&"string"==typeof t&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,r,i){(!i.stopPropagationHint||t===i.stopsPropagatingAt)&&(i.currentTarget=t,i.type=r,t.emit(r,i),t[r]&&t[r](i))},e.prototype.delayDispatchEvent=function(t,r,i){this.delayedEvents.push({displayObject:t,eventString:r,eventData:i})},e.prototype.mapPositionToPoint=function(t,r,i){var a;a=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var s=1/this.resolution;t.x=this.interactionDOMElement.width/a.width*(r-a.left)*s,t.y=this.interactionDOMElement.height/a.height*(i-a.top)*s},e.prototype.processInteractive=function(t,r,i,a){var s=this.search.findHit(t,r,i,a),u=this.delayedEvents;if(!u.length)return s;t.stopPropagationHint=!1;var d=u.length;this.delayedEvents=[];for(var v=0;v<d;v++){var m=u[v],x=m.displayObject,b=m.eventString,S=m.eventData;S.stopsPropagatingAt===x&&(S.stopPropagationHint=!0),this.dispatchEvent(x,b,S)}return s},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var r=this.normalizeToPointerData(t);this.autoPreventDefault&&r[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var a=r.length,s=0;s<a;s++){var u=r[s],d=this.getInteractionDataForPointerId(u),v=this.configureInteractionEventForDOMEvent(this.eventData,u,d);v.data.originalEvent=t,this.processInteractive(v,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",v),"touch"===u.pointerType?this.emit("touchstart",v):"mouse"!==u.pointerType&&"pen"!==u.pointerType||this.emit(2===u.button?"rightdown":"mousedown",this.eventData)}}},e.prototype.processPointerDown=function(t,r,i){var a=t.data,s=t.data.identifier;if(i)if(r.trackedPointers[s]||(r.trackedPointers[s]=new tl(s)),this.dispatchEvent(r,"pointerdown",t),"touch"===a.pointerType)this.dispatchEvent(r,"touchstart",t);else if("mouse"===a.pointerType||"pen"===a.pointerType){var u=2===a.button;u?r.trackedPointers[s].rightDown=!0:r.trackedPointers[s].leftDown=!0,this.dispatchEvent(r,u?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,r,i){var a=this.normalizeToPointerData(t),s=a.length,u=t.target;t.composedPath&&t.composedPath().length>0&&(u=t.composedPath()[0]);for(var d=u!==this.interactionDOMElement?"outside":"",v=0;v<s;v++){var m=a[v],x=this.getInteractionDataForPointerId(m),b=this.configureInteractionEventForDOMEvent(this.eventData,m,x);b.data.originalEvent=t,this.processInteractive(b,this.lastObjectRendered,i,r||!d),this.emit(r?"pointercancel":"pointerup"+d,b),"mouse"===m.pointerType||"pen"===m.pointerType?this.emit(2===m.button?"rightup"+d:"mouseup"+d,b):"touch"===m.pointerType&&(this.emit(r?"touchcancel":"touchend"+d,b),this.releaseInteractionDataForPointerId(m.pointerId))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,r){var i=t.data,a=t.data.identifier;void 0!==r.trackedPointers[a]&&(delete r.trackedPointers[a],this.dispatchEvent(r,"pointercancel",t),"touch"===i.pointerType&&this.dispatchEvent(r,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,r,i){var a=t.data,s=t.data.identifier,u=r.trackedPointers[s],d="touch"===a.pointerType,v="mouse"===a.pointerType||"pen"===a.pointerType,m=!1;if(v){var x=2===a.button,b=tl.FLAGS,A=void 0!==u&&u.flags&(x?b.RIGHT_DOWN:b.LEFT_DOWN);i?(this.dispatchEvent(r,x?"rightup":"mouseup",t),A&&(this.dispatchEvent(r,x?"rightclick":"click",t),m=!0)):A&&this.dispatchEvent(r,x?"rightupoutside":"mouseupoutside",t),u&&(x?u.rightDown=!1:u.leftDown=!1)}i?(this.dispatchEvent(r,"pointerup",t),d&&this.dispatchEvent(r,"touchend",t),u&&((!v||m)&&this.dispatchEvent(r,"pointertap",t),d&&(this.dispatchEvent(r,"tap",t),u.over=!1))):u&&(this.dispatchEvent(r,"pointerupoutside",t),d&&this.dispatchEvent(r,"touchendoutside",t)),u&&u.none&&delete r.trackedPointers[s]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var r=this.normalizeToPointerData(t);("mouse"===r[0].pointerType||"pen"===r[0].pointerType)&&(this._didMove=!0,this.cursor=null);for(var i=r.length,a=0;a<i;a++){var s=r[a],u=this.getInteractionDataForPointerId(s),d=this.configureInteractionEventForDOMEvent(this.eventData,s,u);d.data.originalEvent=t,this.processInteractive(d,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",d),"touch"===s.pointerType&&this.emit("touchmove",d),("mouse"===s.pointerType||"pen"===s.pointerType)&&this.emit("mousemove",d)}"mouse"===r[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,r,i){var a=t.data,s="touch"===a.pointerType,u="mouse"===a.pointerType||"pen"===a.pointerType;u&&this.processPointerOverOut(t,r,i),(!this.moveWhenInside||i)&&(this.dispatchEvent(r,"pointermove",t),s&&this.dispatchEvent(r,"touchmove",t),u&&this.dispatchEvent(r,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var i=this.normalizeToPointerData(t)[0];"mouse"===i.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var a=this.getInteractionDataForPointerId(i),s=this.configureInteractionEventForDOMEvent(this.eventData,i,a);s.data.originalEvent=i,this.processInteractive(s,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",s),"mouse"===i.pointerType||"pen"===i.pointerType?this.emit("mouseout",s):this.releaseInteractionDataForPointerId(a.identifier)}},e.prototype.processPointerOverOut=function(t,r,i){var a=t.data,s=t.data.identifier,u="mouse"===a.pointerType||"pen"===a.pointerType,d=r.trackedPointers[s];i&&!d&&(d=r.trackedPointers[s]=new tl(s)),void 0!==d&&(i&&this.mouseOverRenderer?(d.over||(d.over=!0,this.delayDispatchEvent(r,"pointerover",t),u&&this.delayDispatchEvent(r,"mouseover",t)),u&&null===this.cursor&&(this.cursor=r.cursor)):d.over&&(d.over=!1,this.dispatchEvent(r,"pointerout",this.eventData),u&&this.dispatchEvent(r,"mouseout",t),d.none&&delete r.trackedPointers[s]))},e.prototype.onPointerOver=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var i=this.normalizeToPointerData(t)[0],a=this.getInteractionDataForPointerId(i),s=this.configureInteractionEventForDOMEvent(this.eventData,i,a);s.data.originalEvent=i,"mouse"===i.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",s),("mouse"===i.pointerType||"pen"===i.pointerType)&&this.emit("mouseover",s)}},e.prototype.getInteractionDataForPointerId=function(t){var i,r=t.pointerId;return 1===r||"mouse"===t.pointerType?i=this.mouse:this.activeInteractionData[r]?i=this.activeInteractionData[r]:((i=this.interactionDataPool.pop()||new Pu).identifier=r,this.activeInteractionData[r]=i),i.copyEvent(t),i},e.prototype.releaseInteractionDataForPointerId=function(t){var r=this.activeInteractionData[t];r&&(delete this.activeInteractionData[t],r.reset(),this.interactionDataPool.push(r))},e.prototype.configureInteractionEventForDOMEvent=function(t,r,i){return t.data=i,this.mapPositionToPoint(i.global,r.clientX,r.clientY),"touch"===r.pointerType&&(r.globalX=i.global.x,r.globalY=i.global.y),i.originalEvent=r,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var r=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,a=t.changedTouches.length;i<a;i++){var s=t.changedTouches[i];void 0===s.button&&(s.button=t.touches.length?1:0),void 0===s.buttons&&(s.buttons=t.touches.length?1:0),void 0===s.isPrimary&&(s.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===s.width&&(s.width=s.radiusX||1),void 0===s.height&&(s.height=s.radiusY||1),void 0===s.tiltX&&(s.tiltX=0),void 0===s.tiltY&&(s.tiltY=0),void 0===s.pointerType&&(s.pointerType="touch"),void 0===s.pointerId&&(s.pointerId=s.identifier||0),void 0===s.pressure&&(s.pressure=s.force||.5),void 0===s.twist&&(s.twist=0),void 0===s.tangentialPressure&&(s.tangentialPressure=0),void 0===s.layerX&&(s.layerX=s.offsetX=s.clientX),void 0===s.layerY&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,r.push(s)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&!(this.supportsPointerEvents&&t instanceof globalThis.PointerEvent)){var u=t;void 0===u.isPrimary&&(u.isPrimary=!0),void 0===u.width&&(u.width=1),void 0===u.height&&(u.height=1),void 0===u.tiltX&&(u.tiltX=0),void 0===u.tiltY&&(u.tiltY=0),void 0===u.pointerType&&(u.pointerType="mouse"),void 0===u.pointerId&&(u.pointerId=1),void 0===u.pressure&&(u.pressure=.5),void 0===u.twist&&(u.twist=0),void 0===u.tangentialPressure&&(u.tangentialPressure=0),u.isNormalized=!0,r.push(u)}else r.push(t);return r},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e.extension={name:"interaction",type:[y.RendererPlugin,y.CanvasRendererPlugin]},e}(nt),Bc=new Ce,Fc=function(){function n(e){this.renderer=e}return n.prototype.image=function(e,t,r){var i=new Image;return i.src=this.base64(e,t,r),i},n.prototype.base64=function(e,t,r){return this.canvas(e).toDataURL(t,r)},n.prototype.canvas=function(e,t){var r=this._rawPixels(e,t),i=r.pixels,a=r.width,s=r.height,u=r.flipY,d=new gn(a,s,1),v=d.context.getImageData(0,0,a,s);if(n.arrayPostDivide(i,v.data),d.context.putImageData(v,0,0),u){var m=new gn(d.width,d.height,1);m.context.scale(1,-1),m.context.drawImage(d.canvas,0,-s),d.destroy(),d=m}return d.canvas},n.prototype.pixels=function(e,t){var r=this._rawPixels(e,t).pixels;return n.arrayPostDivide(r,r),r},n.prototype._rawPixels=function(e,t){var i,s,r=this.renderer,a=!1,u=!1;if(e)if(e instanceof Dr)s=e;else{var d=r.context.webGLVersion>=2?r.multisample:Qt.NONE;if(s=this.renderer.generateTexture(e,{multisample:d}),d!==Qt.NONE){var v=Dr.create({width:s.width,height:s.height});r.framebuffer.bind(s.framebuffer),r.framebuffer.blit(v.framebuffer),r.framebuffer.bind(null),s.destroy(!0),s=v}u=!0}s?(i=s.baseTexture.resolution,t=null!=t?t:s.frame,a=!1,r.renderTexture.bind(s)):(i=r.resolution,t||((t=Bc).width=r.width,t.height=r.height),a=!0,r.renderTexture.bind(null));var m=Math.round(t.width*i),x=Math.round(t.height*i),b=new Uint8Array(4*m*x),S=r.gl;return S.readPixels(Math.round(t.x*i),Math.round(t.y*i),m,x,S.RGBA,S.UNSIGNED_BYTE,b),u&&s.destroy(!0),{pixels:b,width:m,height:x,flipY:a}},n.prototype.destroy=function(){this.renderer=null},n.arrayPostDivide=function(e,t){for(var r=0;r<e.length;r+=4){var i=t[r+3]=e[r+3];0!==i?(t[r]=Math.round(Math.min(255*e[r]/i,255)),t[r+1]=Math.round(Math.min(255*e[r+1]/i,255)),t[r+2]=Math.round(Math.min(255*e[r+2]/i,255))):(t[r]=e[r],t[r+1]=e[r+1],t[r+2]=e[r+2])}},n.extension={name:"extract",type:y.RendererPlugin},n}(),_s=function(){function n(e,t,r){void 0===t&&(t=!1),this._fn=e,this._once=t,this._thisArg=r,this._next=this._prev=this._owner=null}return n.prototype.detach=function(){return null!==this._owner&&(this._owner.detach(this),!0)},n}();function Eu(n,e){return n._head?(n._tail._next=e,e._prev=n._tail,n._tail=e):(n._head=e,n._tail=e),e._owner=n,e}var Jn=function(){function n(){this._head=this._tail=void 0}return n.prototype.handlers=function(e){void 0===e&&(e=!1);var t=this._head;if(e)return!!t;for(var r=[];t;)r.push(t),t=t._next;return r},n.prototype.has=function(e){if(!(e instanceof _s))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return e._owner===this},n.prototype.dispatch=function(){for(var e=arguments,t=[],r=0;r<arguments.length;r++)t[r]=e[r];var i=this._head;if(!i)return!1;for(;i;)i._once&&this.detach(i),i._fn.apply(i._thisArg,t),i=i._next;return!0},n.prototype.add=function(e,t){if(void 0===t&&(t=null),"function"!=typeof e)throw new Error("MiniSignal#add(): First arg must be a Function.");return Eu(this,new _s(e,!1,t))},n.prototype.once=function(e,t){if(void 0===t&&(t=null),"function"!=typeof e)throw new Error("MiniSignal#once(): First arg must be a Function.");return Eu(this,new _s(e,!0,t))},n.prototype.detach=function(e){if(!(e instanceof _s))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return e._owner!==this||(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,null===e._next&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null),this},n.prototype.detachAll=function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this},n}();function Ou(n,e){for(var t={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=t.parser[(e=e||{}).strictMode?"strict":"loose"].exec(n),i={},a=14;a--;)i[t.key[a]]=r[a]||"";return i[t.q.name]={},i[t.key[12]].replace(t.q.parser,function(s,u,d){u&&(i[t.q.name][u]=d)}),i}var el,gs=null;function Mu(){}function Ru(n,e,t){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(n[e]=t)}function rl(n){return n.toString().replace("object ","")}var n,e,Qe=function(){function n(e,t,r){if(this._dequeue=Mu,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,"string"!=typeof e||"string"!=typeof t)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(n.STATUS_FLAGS.DATA_URL,0===t.indexOf("data:")),this.name=e,this.url=t,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=n.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=Mu,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Jn,this.onProgress=new Jn,this.onComplete=new Jn,this.onAfterMiddleware=new Jn}return n.setExtensionLoadType=function(e,t){Ru(n._loadTypeMap,e,t)},n.setExtensionXhrType=function(e,t){Ru(n._xhrTypeMap,e,t)},Object.defineProperty(n.prototype,"isDataUrl",{get:function(){return this._hasFlag(n.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isComplete",{get:function(){return this._hasFlag(n.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isLoading",{get:function(){return this._hasFlag(n.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),n.prototype.complete=function(){this._clearEvents(),this._finish()},n.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=n.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},n.prototype.load=function(e){var t=this;if(!this.isLoading){if(this.isComplete)return void(e&&setTimeout(function(){return e(t)},1));switch(e&&this.onComplete.once(e),this._setFlag(n.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(!1===this.crossOrigin||"string"!=typeof this.crossOrigin)&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case n.LOAD_TYPE.IMAGE:this.type=n.TYPE.IMAGE,this._loadElement("image");break;case n.LOAD_TYPE.AUDIO:this.type=n.TYPE.AUDIO,this._loadSourceElement("audio");break;case n.LOAD_TYPE.VIDEO:this.type=n.TYPE.VIDEO,this._loadSourceElement("video");break;default:void 0===el&&(el=!(!globalThis.XDomainRequest||"withCredentials"in new XMLHttpRequest)),el&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},n.prototype._hasFlag=function(e){return 0!=(this._flags&e)},n.prototype._setFlag=function(e,t){this._flags=t?this._flags|e:this._flags&~e},n.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},n.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(n.STATUS_FLAGS.COMPLETE,!0),this._setFlag(n.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},n.prototype._loadElement=function(e){this.data=this.metadata.loadElement?this.metadata.loadElement:"image"===e&&void 0!==globalThis.Image?new Image:document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},n.prototype._loadSourceElement=function(e){if(this.data=this.metadata.loadElement?this.metadata.loadElement:"audio"===e&&void 0!==globalThis.Audio?new Audio:document.createElement(e),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=this.metadata.mimeType,r=0;r<this.url.length;++r)this.data.appendChild(this._createSource(e,this.url[r],Array.isArray(t)?t[r]:t));else t=this.metadata.mimeType,this.data.appendChild(this._createSource(e,this.url,Array.isArray(t)?t[0]:t));this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+e)},n.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;"use-credentials"===this.crossOrigin&&(e.withCredentials=!0),e.open("GET",this.url,!0),e.timeout=this.timeout,e.responseType=this.xhrType===n.XHR_RESPONSE_TYPE.JSON||this.xhrType===n.XHR_RESPONSE_TYPE.DOCUMENT?n.XHR_RESPONSE_TYPE.TEXT:this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},n.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new globalThis.XDomainRequest;e.timeout=this.timeout||5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXhrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},n.prototype._createSource=function(e,t,r){r||(r=e+"/"+this._getExtension(t));var i=document.createElement("source");return i.src=t,i.type=r,i},n.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},n.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},n.prototype._onTimeout=function(){this.abort("Load timed out.")},n.prototype._xhrOnError=function(){var e=this.xhr;this.abort(rl(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},n.prototype._xhrOnTimeout=function(){this.abort(rl(this.xhr)+" Request timed out.")},n.prototype._xhrOnAbort=function(){this.abort(rl(this.xhr)+" Request was aborted by the user.")},n.prototype._xhrOnLoad=function(){var e=this.xhr,t="",r=void 0===e.status?200:e.status;if((""===e.responseType||"text"===e.responseType||void 0===e.responseType)&&(t=e.responseText),0===r&&(t.length>0||e.responseType===n.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2==(r/100|0)){if(this.xhrType===n.XHR_RESPONSE_TYPE.TEXT)this.data=t,this.type=n.TYPE.TEXT;else if(this.xhrType===n.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(t),this.type=n.TYPE.JSON}catch(u){return void this.abort("Error trying to parse loaded json: "+u)}else if(this.xhrType===n.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var a=new DOMParser;this.data=a.parseFromString(t,"text/xml")}else{var s=document.createElement("div");s.innerHTML=t,this.data=s}this.type=n.TYPE.XML}catch(u){return void this.abort("Error trying to parse loaded xml: "+u)}else this.data=e.response||t;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},n.prototype._determineCrossOrigin=function(e,t){if(0===e.indexOf("data:"))return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";t=t||globalThis.location,gs||(gs=document.createElement("a")),gs.href=e;var r=Ou(gs.href,{strictMode:!0});return r.host!==t.hostname||(r.port||""!==t.port)&&r.port!==t.port||(r.protocol?r.protocol+":":"")!==t.protocol?"anonymous":""},n.prototype._determineXhrType=function(){return n._xhrTypeMap[this.extension]||n.XHR_RESPONSE_TYPE.TEXT},n.prototype._determineLoadType=function(){return n._loadTypeMap[this.extension]||n.LOAD_TYPE.XHR},n.prototype._getExtension=function(e){void 0===e&&(e=this.url);var t="";if(this.isDataUrl){var r=e.indexOf("/");t=e.substring(r+1,e.indexOf(";",r))}else{var i=e.indexOf("?"),a=e.indexOf("#"),s=Math.min(i>-1?i:e.length,a>-1?a:e.length);t=(e=e.substring(0,s)).substring(e.lastIndexOf(".")+1)}return t.toLowerCase()},n.prototype._getMimeFromXhrType=function(e){switch(e){case n.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case n.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case n.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case n.XHR_RESPONSE_TYPE.JSON:return"application/json";default:return"text/plain"}},n}();function Yi(){}function Gc(n){return function(){for(var t=arguments,r=[],i=0;i<arguments.length;i++)r[i]=t[i];if(null===n)throw new Error("Callback was already called.");var a=n;n=null,a.apply(this,r)}}(e=(n=Qe||(Qe={})).STATUS_FLAGS||(n.STATUS_FLAGS={}))[e.NONE=0]="NONE",e[e.DATA_URL=1]="DATA_URL",e[e.COMPLETE=2]="COMPLETE",e[e.LOADING=4]="LOADING",function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.JSON=1]="JSON",e[e.XML=2]="XML",e[e.IMAGE=3]="IMAGE",e[e.AUDIO=4]="AUDIO",e[e.VIDEO=5]="VIDEO",e[e.TEXT=6]="TEXT"}(n.TYPE||(n.TYPE={})),function(e){e[e.XHR=1]="XHR",e[e.IMAGE=2]="IMAGE",e[e.AUDIO=3]="AUDIO",e[e.VIDEO=4]="VIDEO"}(n.LOAD_TYPE||(n.LOAD_TYPE={})),function(e){e.DEFAULT="text",e.BUFFER="arraybuffer",e.BLOB="blob",e.DOCUMENT="document",e.JSON="json",e.TEXT="text"}(n.XHR_RESPONSE_TYPE||(n.XHR_RESPONSE_TYPE={})),n._loadTypeMap={gif:n.LOAD_TYPE.IMAGE,png:n.LOAD_TYPE.IMAGE,bmp:n.LOAD_TYPE.IMAGE,jpg:n.LOAD_TYPE.IMAGE,jpeg:n.LOAD_TYPE.IMAGE,tif:n.LOAD_TYPE.IMAGE,tiff:n.LOAD_TYPE.IMAGE,webp:n.LOAD_TYPE.IMAGE,tga:n.LOAD_TYPE.IMAGE,avif:n.LOAD_TYPE.IMAGE,svg:n.LOAD_TYPE.IMAGE,"svg+xml":n.LOAD_TYPE.IMAGE,mp3:n.LOAD_TYPE.AUDIO,ogg:n.LOAD_TYPE.AUDIO,wav:n.LOAD_TYPE.AUDIO,mp4:n.LOAD_TYPE.VIDEO,webm:n.LOAD_TYPE.VIDEO},n._xhrTypeMap={xhtml:n.XHR_RESPONSE_TYPE.DOCUMENT,html:n.XHR_RESPONSE_TYPE.DOCUMENT,htm:n.XHR_RESPONSE_TYPE.DOCUMENT,xml:n.XHR_RESPONSE_TYPE.DOCUMENT,tmx:n.XHR_RESPONSE_TYPE.DOCUMENT,svg:n.XHR_RESPONSE_TYPE.DOCUMENT,tsx:n.XHR_RESPONSE_TYPE.DOCUMENT,gif:n.XHR_RESPONSE_TYPE.BLOB,png:n.XHR_RESPONSE_TYPE.BLOB,bmp:n.XHR_RESPONSE_TYPE.BLOB,jpg:n.XHR_RESPONSE_TYPE.BLOB,jpeg:n.XHR_RESPONSE_TYPE.BLOB,tif:n.XHR_RESPONSE_TYPE.BLOB,tiff:n.XHR_RESPONSE_TYPE.BLOB,webp:n.XHR_RESPONSE_TYPE.BLOB,tga:n.XHR_RESPONSE_TYPE.BLOB,avif:n.XHR_RESPONSE_TYPE.BLOB,json:n.XHR_RESPONSE_TYPE.JSON,text:n.XHR_RESPONSE_TYPE.TEXT,txt:n.XHR_RESPONSE_TYPE.TEXT,ttf:n.XHR_RESPONSE_TYPE.BUFFER,otf:n.XHR_RESPONSE_TYPE.BUFFER},n.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var Hc=function n(e,t){this.data=e,this.callback=t},nl=function(){function n(e,t){var r=this;if(void 0===t&&(t=1),this.workers=0,this.saturated=Yi,this.unsaturated=Yi,this.empty=Yi,this.drain=Yi,this.error=Yi,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(i,a,s){if(s&&"function"!=typeof s)throw new Error("task callback must be a function");if(r.started=!0,null==i&&r.idle())setTimeout(function(){return r.drain()},1);else{var u=new Hc(i,"function"==typeof s?s:Yi);a?r._tasks.unshift(u):r._tasks.push(u),setTimeout(r.process,1)}},this.process=function(){for(;!r.paused&&r.workers<r.concurrency&&r._tasks.length;){var i=r._tasks.shift();0===r._tasks.length&&r.empty(),r.workers+=1,r.workers===r.concurrency&&r.saturated(),r._worker(i.data,Gc(r._next(i)))}},this._worker=e,0===t)throw new Error("Concurrency must not be zero");this.concurrency=t,this.buffer=t/4}return n.prototype._next=function(e){var t=this;return function(){for(var r=arguments,i=[],a=0;a<arguments.length;a++)i[a]=r[a];t.workers-=1,e.callback.apply(e,i),null!=i[0]&&t.error(i[0],e.data),t.workers<=t.concurrency-t.buffer&&t.unsaturated(),t.idle()&&t.drain(),t.process()}},n.prototype.push=function(e,t){this._insert(e,!1,t)},n.prototype.kill=function(){this.workers=0,this.drain=Yi,this.started=!1,this._tasks=[]},n.prototype.unshift=function(e,t){this._insert(e,!0,t)},n.prototype.length=function(){return this._tasks.length},n.prototype.running=function(){return this.workers},n.prototype.idle=function(){return this._tasks.length+this.workers===0},n.prototype.pause=function(){!0!==this.paused&&(this.paused=!0)},n.prototype.resume=function(){if(!1!==this.paused){this.paused=!1;for(var e=1;e<=this.concurrency;e++)this.process()}},n.eachSeries=function(e,t,r,i){var a=0,s=e.length;!function u(d){d||a===s?r&&r(d):i?setTimeout(function(){t(e[a++],u)},1):t(e[a++],u)}()},n.queue=function(e,t){return new n(e,t)},n}(),Xc=/(#[\w-]+)?$/,Pa=function(){function n(e,t){var r=this;void 0===e&&(e=""),void 0===t&&(t=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(d,v){return r._loadResource(d,v)},this.resources={},this.baseUrl=e,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(d,v){return r._loadResource(d,v)},this._queue=nl.queue(this._boundLoadResource,t),this._queue.pause(),this.resources={},this.onProgress=new Jn,this.onError=new Jn,this.onLoad=new Jn,this.onStart=new Jn,this.onComplete=new Jn;for(var i=0;i<n._plugins.length;++i){var a=n._plugins[i],s=a.pre,u=a.use;s&&this.pre(s),u&&this.use(u)}this._protected=!1}return n.prototype._add=function(e,t,r,i){if(this.loading&&(!r||!r.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(t=this._prepareUrl(t),this.resources[e]=new Qe(e,t,r),"function"==typeof i&&this.resources[e].onAfterMiddleware.once(i),this.loading){for(var a=r.parentResource,s=[],u=0;u<a.children.length;++u)a.children[u].isComplete||s.push(a.children[u]);var v=a.progressChunk*(s.length+1)/(s.length+2);for(a.children.push(this.resources[e]),a.progressChunk=v,u=0;u<s.length;++u)s[u].progressChunk=v;this.resources[e].progressChunk=v}return this._queue.push(this.resources[e]),this},n.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},n.prototype.use=function(e){return this._afterMiddleware.push(e),this},n.prototype.reset=function(){for(var e in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var t=this.resources[e];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort("loader reset")}return this.resources={},this},n.prototype.load=function(e){if($e("6.5.0","@pixi/loaders is being replaced with @pixi/assets in the next major release."),"function"==typeof e&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var r=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=r;this._onStart(),this._queue.resume()}return this},Object.defineProperty(n.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e},enumerable:!1,configurable:!0}),n.prototype._prepareUrl=function(e){var r,t=Ou(e,{strictMode:!0});if(r=t.protocol||!t.path||0===e.indexOf("//")?e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==e.charAt(0)?this.baseUrl+"/"+e:this.baseUrl+e,this.defaultQueryString){var i=Xc.exec(r)[0];-1!==(r=r.slice(0,r.length-i.length)).indexOf("?")?r+="&"+this.defaultQueryString:r+="?"+this.defaultQueryString,r+=i}return r},n.prototype._loadResource=function(e,t){var r=this;e._dequeue=t,nl.eachSeries(this._beforeMiddleware,function(i,a){i.call(r,e,function(){a(e.isComplete?{}:null)})},function(){e.isComplete?r._onLoad(e):(e._onLoadBinding=e.onComplete.once(r._onLoad,r),e.load())},!0)},n.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},n.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},n.prototype._onLoad=function(e){var t=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),nl.eachSeries(this._afterMiddleware,function(r,i){r.call(t,e,i)},function(){e.onAfterMiddleware.dispatch(e),t.progress=Math.min(100,t.progress+e.progressChunk),t.onProgress.dispatch(t,e),e.error?t.onError.dispatch(e.error,t,e):t.onLoad.dispatch(t,e),t._resourcesParsing.splice(t._resourcesParsing.indexOf(e),1),t._queue.idle()&&0===t._resourcesParsing.length&&t._onComplete()},!0)},n.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(n,"shared",{get:function(){var e=n._shared;return e||((e=new n)._protected=!0,n._shared=e),e},enumerable:!1,configurable:!0}),n.registerPlugin=function(e){return $e("6.5.0","Loader.registerPlugin() is deprecated, use extensions.add() instead."),P.add({type:y.Loader,ref:e}),n},n._plugins=[],n}();P.handleByList(y.Loader,Pa._plugins),Pa.prototype.add=function(e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;++a)this.add(e[a]);return this}if("object"==typeof e&&(r=e,i=t||r.callback||r.onComplete,t=r.url,e=r.name||r.key||r.url),"string"!=typeof t&&(i=r,r=t,t=e),"string"!=typeof t)throw new Error("No url passed to add resource to loader.");return"function"==typeof r&&(i=r,r=null),this._add(e,t,r,i)};var jc=function(){function n(){}return n.init=function(e){e=Object.assign({sharedLoader:!1},e),this.loader=e.sharedLoader?Pa.shared:new Pa},n.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},n.extension=y.Application,n}(),Yc=function(){function n(){}return n.add=function(){Qe.setExtensionLoadType("svg",Qe.LOAD_TYPE.XHR),Qe.setExtensionXhrType("svg",Qe.XHR_RESPONSE_TYPE.TEXT)},n.use=function(e,t){!e.data||e.type!==Qe.TYPE.IMAGE&&"svg"!==e.extension?t():he.fromLoader(e.data,e.url,e.name,e.metadata).then(function(u){e.texture=u,t()}).catch(t)},n.extension=y.Loader,n}();function Vc(n,e){if(n.data){if(n.xhr&&n.xhrType===Qe.XHR_RESPONSE_TYPE.BLOB)if(self.Blob&&"string"!=typeof n.data){if(0===n.data.type.indexOf("image")){var r=globalThis.URL||globalThis.webkitURL,i=r.createObjectURL(n.data);return n.blob=n.data,n.data=new Image,n.data.src=i,n.type=Qe.TYPE.IMAGE,void(n.data.onload=function(){r.revokeObjectURL(i),n.data.onload=null,e()})}}else{var t=n.xhr.getResponseHeader("content-type");if(t&&0===t.indexOf("image"))return n.data=new Image,n.data.src="data:"+t+";base64,"+function zc(n){for(var e="",t=0;t<n.length;){for(var r=[0,0,0],i=[0,0,0,0],a=0;a<r.length;++a)r[a]=t<n.length?255&n.charCodeAt(t++):0;switch(i[0]=r[0]>>2,i[1]=(3&r[0])<<4|r[1]>>4,i[2]=(15&r[1])<<2|r[2]>>6,i[3]=63&r[2],t-(n.length-1)){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64}for(a=0;a<i.length;++a)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(i[a])}return e}(n.xhr.responseText),n.type=Qe.TYPE.IMAGE,void(n.data.onload=function(){n.data.onload=null,e()})}e()}else e()}var Wc=function(){function n(){}return n.extension=y.Loader,n.use=Vc,n}();P.add(Yc,Wc);var Fe,ge=(()=>(function(n){n[n.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",n[n.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",n[n.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",n[n.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",n[n.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",n[n.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",n[n.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",n[n.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",n[n.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",n[n.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",n[n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",n[n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",n[n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",n[n.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",n[n.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",n[n.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",n[n.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",n[n.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR"}(ge||(ge={})),ge))(),ms=((Fe={})[ge.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,Fe[ge.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,Fe[ge.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,Fe[ge.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,Fe[ge.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,Fe[ge.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,Fe[ge.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,Fe[ge.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,Fe[ge.COMPRESSED_R11_EAC]=.5,Fe[ge.COMPRESSED_SIGNED_R11_EAC]=.5,Fe[ge.COMPRESSED_RG11_EAC]=1,Fe[ge.COMPRESSED_SIGNED_RG11_EAC]=1,Fe[ge.COMPRESSED_RGB8_ETC2]=.5,Fe[ge.COMPRESSED_RGBA8_ETC2_EAC]=1,Fe[ge.COMPRESSED_SRGB8_ETC2]=.5,Fe[ge.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,Fe[ge.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,Fe[ge.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,Fe[ge.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,Fe[ge.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,Fe[ge.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,Fe[ge.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,Fe[ge.COMPRESSED_RGB_ETC1_WEBGL]=.5,Fe[ge.COMPRESSED_RGB_ATC_WEBGL]=.5,Fe[ge.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,Fe[ge.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,Fe[ge.COMPRESSED_RGBA_ASTC_4x4_KHR]=1,Fe),ol=function(n,e){return(ol=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)};function Iu(n,e){function t(){this.constructor=n}ol(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var Qc=function(n){function e(t,r){void 0===r&&(r={width:1,height:1,autoLoad:!0});var a,s,i=this;return"string"==typeof t?(a=t,s=new Uint8Array):(a=null,s=t),(i=n.call(this,s,r)||this).origin=a,i.buffer=s?new Qs(s):null,i.origin&&!1!==r.autoLoad&&i.load(),s&&s.length&&(i.loaded=!0,i.onBlobLoaded(i.buffer.rawBinaryData)),i}return Iu(e,n),e.prototype.onBlobLoaded=function(t){},e.prototype.load=function(){return function Jc(n,e,t,r){return new(t||(t=Promise))(function(a,s){function u(m){try{v(r.next(m))}catch(x){s(x)}}function d(m){try{v(r.throw(m))}catch(x){s(x)}}function v(m){m.done?a(m.value):function i(a){return a instanceof t?a:new t(function(s){s(a)})}(m.value).then(u,d)}v((r=r.apply(n,e||[])).next())})}(this,void 0,Promise,function(){var i;return function $c(n,e){var r,i,a,s,t={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(v){return function(m){return function d(v){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=2&v[0]?i.return:v[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,v[1])).done)return a;switch(i=0,a&&(v=[2&v[0],a.value]),v[0]){case 0:case 1:a=v;break;case 4:return t.label++,{value:v[1],done:!1};case 5:t.label++,i=v[1],v=[0];continue;case 7:v=t.ops.pop(),t.trys.pop();continue;default:if(!(a=(a=t.trys).length>0&&a[a.length-1])&&(6===v[0]||2===v[0])){t=0;continue}if(3===v[0]&&(!a||v[1]>a[0]&&v[1]<a[3])){t.label=v[1];break}if(6===v[0]&&t.label<a[1]){t.label=a[1],a=v;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(v);break}a[2]&&t.ops.pop(),t.trys.pop();continue}v=e.call(n,t)}catch(m){v=[6,m],i=0}finally{r=a=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}([v,m])}}}(this,function(a){switch(a.label){case 0:return[4,fetch(this.origin)];case 1:return[4,a.sent().blob()];case 2:return[4,a.sent().arrayBuffer()];case 3:return i=a.sent(),this.data=new Uint32Array(i),this.buffer=new Qs(i),this.loaded=!0,this.onBlobLoaded(i),this.update(),[2,this]}})})},e}(Rt),al=function(n){function e(t,r){var i=n.call(this,t,r)||this;return i.format=r.format,i.levels=r.levels||1,i._width=r.width,i._height=r.height,i._extension=e._formatToExtension(i.format),(r.levelBuffers||i.buffer)&&(i._levelBuffers=r.levelBuffers||e._createLevelBuffers(t instanceof Uint8Array?t:i.buffer.uint8View,i.format,i.levels,4,4,i.width,i.height)),i}return Iu(e,n),e.prototype.upload=function(t,r,i){var a=t.gl;if(!t.context.extensions[this._extension])throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var u=0,d=this.levels;u<d;u++){var v=this._levelBuffers[u];a.compressedTexImage2D(a.TEXTURE_2D,v.levelID,this.format,v.levelWidth,v.levelHeight,0,v.levelBuffer)}return!0},e.prototype.onBlobLoaded=function(){this._levelBuffers=e._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},e._formatToExtension=function(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},e._createLevelBuffers=function(t,r,i,a,s,u,d){for(var v=new Array(i),m=t.byteOffset,x=u,b=d,S=x+a-1&~(a-1),A=b+s-1&~(s-1),M=S*A*ms[r],F=0;F<i;F++)v[F]={levelID:F,levelWidth:i>1?x:S,levelHeight:i>1?b:A,levelBuffer:new Uint8Array(t.buffer,m,M)},m+=M,M=(S=(x=x>>1||1)+a-1&~(a-1))*(A=(b=b>>1||1)+s-1&~(s-1))*ms[r];return v},e}(Qc),qc=function(){function n(){}return n.use=function(e,t){var r=e.data;if(e.type===Qe.TYPE.JSON&&r&&r.cacheID&&r.textures){for(var a=r.textures,s=void 0,u=void 0,d=0,v=a.length;d<v;d++){var m=a[d],x=m.src,b=m.format;if(b||(u=x),n.textureFormats[b]){s=x;break}}if(!(s=s||u))return void t(new Error("Cannot load compressed-textures in "+e.url+", make sure you provide a fallback"));if(s===e.url)return void t(new Error("URL of compressed texture cannot be the same as the manifest's URL"));var S={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},A=xe.resolve(e.url.replace(this.baseUrl,""),s);this.add(r.cacheID,A,S,function(F){if(F.error)t(F.error);else{var $=F.texture,At=F.textures;Object.assign(e,{texture:void 0===$?null:$,textures:void 0===At?{}:At}),t()}})}else t()},Object.defineProperty(n,"textureExtensions",{get:function(){if(!n._textureExtensions){var t=L.ADAPTER.createCanvas().getContext("webgl");if(!t)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var r={s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};n._textureExtensions=r}return n._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(n,"textureFormats",{get:function(){if(!n._textureFormats){var e=n.textureExtensions;for(var t in n._textureFormats={},e){var r=e[t];!r||Object.assign(n._textureFormats,Object.getPrototypeOf(r))}}return n._textureFormats},enumerable:!1,configurable:!0}),n.extension=y.Loader,n}();function Bu(n,e,t){var r={textures:{},texture:null};return e?(e.map(function(a){return new he(new Et(a,Object.assign({mipmap:ct.OFF,alphaMode:St.NO_PREMULTIPLIED_ALPHA},t)))}).forEach(function(a,s){var u=a.baseTexture,d=n+"-"+(s+1);Et.addToCache(u,d),he.addToCache(a,d),0===s&&(Et.addToCache(u,n),he.addToCache(a,n),r.texture=a),r.textures[d]=a}),r):r}var Ea,bn,ci,$n,Oa,on=(()=>(function(n){n[n.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",n[n.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",n[n.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",n[n.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",n[n.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",n[n.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",n[n.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",n[n.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",n[n.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",n[n.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",n[n.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",n[n.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",n[n.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",n[n.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",n[n.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",n[n.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",n[n.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",n[n.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",n[n.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",n[n.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",n[n.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",n[n.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",n[n.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",n[n.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",n[n.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",n[n.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",n[n.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",n[n.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",n[n.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",n[n.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",n[n.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",n[n.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",n[n.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",n[n.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",n[n.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",n[n.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",n[n.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",n[n.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",n[n.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",n[n.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",n[n.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",n[n.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",n[n.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",n[n.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",n[n.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",n[n.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",n[n.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",n[n.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",n[n.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",n[n.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",n[n.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",n[n.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",n[n.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",n[n.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",n[n.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",n[n.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",n[n.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",n[n.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",n[n.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",n[n.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",n[n.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",n[n.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",n[n.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",n[n.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",n[n.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",n[n.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",n[n.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",n[n.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",n[n.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",n[n.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",n[n.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",n[n.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",n[n.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",n[n.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",n[n.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",n[n.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",n[n.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",n[n.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",n[n.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",n[n.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",n[n.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",n[n.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",n[n.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",n[n.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",n[n.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",n[n.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",n[n.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",n[n.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",n[n.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",n[n.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",n[n.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",n[n.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",n[n.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",n[n.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",n[n.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",n[n.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",n[n.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",n[n.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",n[n.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",n[n.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",n[n.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",n[n.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",n[n.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",n[n.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",n[n.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",n[n.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",n[n.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",n[n.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",n[n.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",n[n.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",n[n.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",n[n.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",n[n.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",n[n.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",n[n.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",n[n.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",n[n.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",n[n.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",n[n.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",n[n.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",n[n.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",n[n.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"}(on||(on={})),on))(),Cs=(()=>(function(n){n[n.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",n[n.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",n[n.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"}(Cs||(Cs={})),Cs))(),pf=((Ea={})[827611204]=ge.COMPRESSED_RGBA_S3TC_DXT1_EXT,Ea[861165636]=ge.COMPRESSED_RGBA_S3TC_DXT3_EXT,Ea[894720068]=ge.COMPRESSED_RGBA_S3TC_DXT5_EXT,Ea),vf=((bn={})[on.DXGI_FORMAT_BC1_TYPELESS]=ge.COMPRESSED_RGBA_S3TC_DXT1_EXT,bn[on.DXGI_FORMAT_BC1_UNORM]=ge.COMPRESSED_RGBA_S3TC_DXT1_EXT,bn[on.DXGI_FORMAT_BC2_TYPELESS]=ge.COMPRESSED_RGBA_S3TC_DXT3_EXT,bn[on.DXGI_FORMAT_BC2_UNORM]=ge.COMPRESSED_RGBA_S3TC_DXT3_EXT,bn[on.DXGI_FORMAT_BC3_TYPELESS]=ge.COMPRESSED_RGBA_S3TC_DXT5_EXT,bn[on.DXGI_FORMAT_BC3_UNORM]=ge.COMPRESSED_RGBA_S3TC_DXT5_EXT,bn[on.DXGI_FORMAT_BC1_UNORM_SRGB]=ge.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,bn[on.DXGI_FORMAT_BC2_UNORM_SRGB]=ge.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,bn[on.DXGI_FORMAT_BC3_UNORM_SRGB]=ge.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,bn),Fu=[171,75,84,88,32,49,49,187,13,10,26,10],Nu=((ci={})[k.UNSIGNED_BYTE]=1,ci[k.UNSIGNED_SHORT]=2,ci[k.INT]=4,ci[k.UNSIGNED_INT]=4,ci[k.FLOAT]=4,ci[k.HALF_FLOAT]=8,ci),mf=(($n={})[E.RGBA]=4,$n[E.RGB]=3,$n[E.RG]=2,$n[E.RED]=1,$n[E.LUMINANCE]=1,$n[E.LUMINANCE_ALPHA]=2,$n[E.ALPHA]=1,$n),yf=((Oa={})[k.UNSIGNED_SHORT_4_4_4_4]=2,Oa[k.UNSIGNED_SHORT_5_5_5_1]=2,Oa[k.UNSIGNED_SHORT_5_6_5]=2,Oa);function Cf(n){switch(n){case E.RGBA:return E.RGBA_INTEGER;case E.RGB:return E.RGB_INTEGER;case E.RG:return E.RG_INTEGER;case E.RED:return E.RED_INTEGER;default:return n}}Qe.setExtensionXhrType("dds",Qe.XHR_RESPONSE_TYPE.BUFFER);var wf=function(){function n(){}return n.use=function(e,t){if("dds"===e.extension&&e.data)try{Object.assign(e,Bu(e.name||e.url,function _f(n){var e=new Uint32Array(n);if(542327876!==e[0])throw new Error("Invalid DDS file magic word");var r=new Uint32Array(n,0,124/Uint32Array.BYTES_PER_ELEMENT),i=r[3],a=r[4],s=r[7],u=new Uint32Array(n,19*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),d=u[1];if(4&d){var v=u[2];if(808540228!==v){var m=pf[v],b=new Uint8Array(n,128);return[new al(b,{format:m,width:a,height:i,levels:s})]}var M=new Uint32Array(e.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),F=M[0],$=M[1],mt=M[2],At=M[3],Gt=vf[F];if(void 0===Gt)throw new Error("DDSParser cannot parse texture data with DXGI format "+F);if(4===mt)throw new Error("DDSParser does not support cubemap textures");if($===Cs.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");var vt=new Array;if(1===At)vt.push(new Uint8Array(n,148));else{for(var Pt=ms[Gt],oe=0,Nt=a,kt=i,le=0;le<s;le++)oe+=Math.max(1,Nt+3&-4)*Math.max(1,kt+3&-4)*Pt,Nt>>>=1,kt>>>=1;var ae=148;for(le=0;le<At;le++)vt.push(new Uint8Array(n,ae,oe)),ae+=oe}return vt.map(function(se){return new al(se,{format:Gt,width:a,height:i,levels:s})})}throw 64&d?new Error("DDSParser does not support uncompressed texture data."):512&d?new Error("DDSParser does not supported YUV uncompressed texture data."):131072&d?new Error("DDSParser does not support single-channel (lumninance) texture data!"):2&d?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}(e.data),e.metadata))}catch(r){return void t(r)}t()},n.extension=y.Loader,n}();Qe.setExtensionXhrType("ktx",Qe.XHR_RESPONSE_TYPE.BUFFER);var Sf=function(){function n(){}return n.use=function(e,t){if("ktx"===e.extension&&e.data)try{var r=e.name||e.url,i=function bf(n,e,t){void 0===t&&(t=!1);var r=new DataView(e);if(!function xf(n,e){for(var t=0;t<Fu.length;t++)if(e.getUint8(t)!==Fu[t])return console.error(n+" is not a valid *.ktx file!"),!1;return!0}(n,r))return null;var i=67305985===r.getUint32(12,!0),a=r.getUint32(16,i),s=r.getUint32(24,i),u=r.getUint32(28,i),d=r.getUint32(36,i),v=r.getUint32(40,i)||1,m=r.getUint32(44,i)||1,x=r.getUint32(48,i)||1,b=r.getUint32(52,i),S=r.getUint32(56,i),A=r.getUint32(60,i);if(0===v||1!==m)throw new Error("Only 2D textures are supported");if(1!==b)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==x)throw new Error("WebGL does not support array textures");var vt,$=d+3&-4,mt=v+3&-4,At=new Array(x),Gt=d*v;if(0===a&&(Gt=$*mt),void 0===(vt=0!==a?Nu[a]?Nu[a]*mf[s]:yf[a]:ms[u]))throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var Ct=t?function Tf(n,e,t){for(var r=new Map,i=0;i<e;){var a=n.getUint32(64+i,t),s=64+i+4,u=3-(a+3)%4;if(0===a||a>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var d=0;d<a&&0!==n.getUint8(s+d);d++);if(-1===d){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var v=(new TextDecoder).decode(new Uint8Array(n.buffer,s,d)),m=new DataView(n.buffer,s+d+1,a-d-1);r.set(v,m),i+=4+a+u}return r}(r,A,i):null,oe=Gt*vt,Nt=d,kt=v,le=$,pe=mt,Pe=64+A,ir=0;ir<S;ir++){for(var ae=r.getUint32(Pe,i),se=Pe+4,we=0;we<x;we++){var Pr=At[we];Pr||(Pr=At[we]=new Array(S)),Pr[ir]={levelID:ir,levelWidth:S>1||0!==a?Nt:le,levelHeight:S>1||0!==a?kt:pe,levelBuffer:new Uint8Array(e,se,oe)},se+=oe}Pe=(Pe+=ae+4)%4!=0?Pe+4-Pe%4:Pe,oe=(le=(Nt=Nt>>1||1)+4-1&-4)*(pe=(kt=kt>>1||1)+4-1&-4)*vt}return 0!==a?{uncompressed:At.map(function(Re){var lr=Re[0].levelBuffer,de=!1;return a===k.FLOAT?lr=new Float32Array(Re[0].levelBuffer.buffer,Re[0].levelBuffer.byteOffset,Re[0].levelBuffer.byteLength/4):a===k.UNSIGNED_INT?(de=!0,lr=new Uint32Array(Re[0].levelBuffer.buffer,Re[0].levelBuffer.byteOffset,Re[0].levelBuffer.byteLength/4)):a===k.INT&&(de=!0,lr=new Int32Array(Re[0].levelBuffer.buffer,Re[0].levelBuffer.byteOffset,Re[0].levelBuffer.byteLength/4)),{resource:new Rt(lr,{width:Re[0].levelWidth,height:Re[0].levelHeight}),type:a,format:de?Cf(s):s}}),kvData:Ct}:{compressed:At.map(function(Re){return new al(null,{format:u,width:d,height:v,levels:S,levelBuffers:Re})}),kvData:Ct}}(r,e.data,this.loadKeyValueData),a=i.compressed,s=i.uncompressed,u=i.kvData;if(a){var d=Bu(r,a,e.metadata);if(u&&d.textures)for(var v in d.textures)d.textures[v].baseTexture.ktxKeyValueData=u;Object.assign(e,d)}else if(s){var m={};s.forEach(function(x,b){var S=new he(new Et(x.resource,{mipmap:ct.OFF,alphaMode:St.NO_PREMULTIPLIED_ALPHA,type:x.type,format:x.format})),A=r+"-"+(b+1);u&&(S.baseTexture.ktxKeyValueData=u),Et.addToCache(S.baseTexture,A),he.addToCache(S,A),0===b&&(m[r]=S,Et.addToCache(S.baseTexture,r),he.addToCache(S,r)),m[A]=S}),Object.assign(e,{textures:m})}}catch(x){return void t(x)}t()},n.extension=y.Loader,n.loadKeyValueData=!1,n}(),ul=function(n,e){return(ul=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)};function Uu(n,e){function t(){this.constructor=n}ul(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}!function(n){function e(t,r,i,a){void 0===t&&(t=1500),void 0===i&&(i=16384),void 0===a&&(a=!1);var s=n.call(this)||this;return i>16384&&(i=16384),s._properties=[!1,!0,!1,!1,!1],s._maxSize=t,s._batchSize=i,s._buffers=null,s._bufferUpdateIDs=[],s._updateID=0,s.interactiveChildren=!1,s.blendMode=I.NORMAL,s.autoResize=a,s.roundPixels=!0,s.baseTexture=null,s.setProperties(r),s._tint=0,s.tintRgb=new Float32Array(4),s.tint=16777215,s}Uu(e,n),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,Zr(t,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(t){var r=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return r.onChildrenChange(0)})),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var r=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<r;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[r]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(t){n.prototype.destroy.call(this,t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}(f);var ku=function(){function n(e,t,r){this.geometry=new xa,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<e.length;++i){var a=e[i];a={attributeName:a.attributeName,size:a.size,uploadFunction:a.uploadFunction,type:a.type||k.FLOAT,offset:a.offset},t[i]?this.dynamicProperties.push(a):this.staticProperties.push(a)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return n.prototype.initBuffers=function(){var e=this.geometry,t=0;this.indexBuffer=new cr(ts(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(var r=0;r<this.dynamicProperties.length;++r)(i=this.dynamicProperties[r]).offset=t,t+=i.size,this.dynamicStride+=i.size;var a=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(a),this.dynamicDataUint32=new Uint32Array(a),this.dynamicBuffer=new cr(this.dynamicData,!1,!1);var s=0;for(this.staticStride=0,r=0;r<this.staticProperties.length;++r)(i=this.staticProperties[r]).offset=s,s+=i.size,this.staticStride+=i.size;var u=new ArrayBuffer(this.size*this.staticStride*4*4);for(this.staticData=new Float32Array(u),this.staticDataUint32=new Uint32Array(u),this.staticBuffer=new cr(this.staticData,!0,!1),r=0;r<this.dynamicProperties.length;++r)e.addAttribute((i=this.dynamicProperties[r]).attributeName,this.dynamicBuffer,0,i.type===k.UNSIGNED_BYTE,i.type,4*this.dynamicStride,4*i.offset);for(r=0;r<this.staticProperties.length;++r){var i;e.addAttribute((i=this.staticProperties[r]).attributeName,this.staticBuffer,0,i.type===k.UNSIGNED_BYTE,i.type,4*this.staticStride,4*i.offset)}},n.prototype.uploadDynamic=function(e,t,r){for(var i=0;i<this.dynamicProperties.length;i++){var a=this.dynamicProperties[i];a.uploadFunction(e,t,r,a.type===k.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,a.offset)}this.dynamicBuffer._updateID++},n.prototype.uploadStatic=function(e,t,r){for(var i=0;i<this.staticProperties.length;i++){var a=this.staticProperties[i];a.uploadFunction(e,t,r,a.type===k.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,a.offset)}this.staticBuffer._updateID++},n.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},n}(),Of=function(n){function e(t){var r=n.call(this,t)||this;return r.shader=null,r.properties=null,r.tempMatrix=new ze,r.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:r.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:r.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:r.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:r.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:k.UNSIGNED_BYTE,uploadFunction:r.uploadTint,offset:0}],r.shader=ui.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),r.state=Xi.for2d(),r}return Uu(e,n),e.prototype.render=function(t){var r=t.children,i=t._maxSize,a=t._batchSize,s=this.renderer,u=r.length;if(0!==u){u>i&&!t.autoResize&&(u=i);var d=t._buffers;d||(d=t._buffers=this.generateBuffers(t));var v=r[0]._texture.baseTexture,m=v.alphaMode>0;this.state.blendMode=da(t.blendMode,m),s.state.set(this.state);var x=s.gl,b=t.worldTransform.copyTo(this.tempMatrix);b.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=b.toArray(!0),this.shader.uniforms.uColor=Ka(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,m),this.shader.uniforms.uSampler=v,this.renderer.shader.bind(this.shader);for(var S=!1,A=0,M=0;A<u;A+=a,M+=1){var F=u-A;F>a&&(F=a),M>=d.length&&d.push(this._generateOneMoreBuffer(t));var $=d[M];$.uploadDynamic(r,A,F),(S=S||$._updateID<(t._bufferUpdateIDs[M]||0))&&($._updateID=t._updateID,$.uploadStatic(r,A,F)),s.geometry.bind($.geometry),x.drawElements(x.TRIANGLES,6*F,x.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var r=[],i=t._maxSize,a=t._batchSize,s=t._properties,u=0;u<i;u+=a)r.push(new ku(this.properties,s,a));return r},e.prototype._generateOneMoreBuffer=function(t){return new ku(this.properties,t._properties,t._batchSize)},e.prototype.uploadVertices=function(t,r,i,a,s,u){for(var d=0,v=0,m=0,x=0,b=0;b<i;++b){var S=t[r+b],A=S._texture,M=S.scale.x,F=S.scale.y,$=A.trim,mt=A.orig;$?(d=(v=$.x-S.anchor.x*mt.width)+$.width,m=(x=$.y-S.anchor.y*mt.height)+$.height):(d=mt.width*(1-S.anchor.x),v=mt.width*-S.anchor.x,m=mt.height*(1-S.anchor.y),x=mt.height*-S.anchor.y),a[u]=v*M,a[u+1]=x*F,a[u+s]=d*M,a[u+s+1]=x*F,a[u+2*s]=d*M,a[u+2*s+1]=m*F,a[u+3*s]=v*M,a[u+3*s+1]=m*F,u+=4*s}},e.prototype.uploadPosition=function(t,r,i,a,s,u){for(var d=0;d<i;d++){var v=t[r+d].position;a[u]=v.x,a[u+1]=v.y,a[u+s]=v.x,a[u+s+1]=v.y,a[u+2*s]=v.x,a[u+2*s+1]=v.y,a[u+3*s]=v.x,a[u+3*s+1]=v.y,u+=4*s}},e.prototype.uploadRotation=function(t,r,i,a,s,u){for(var d=0;d<i;d++){var v=t[r+d].rotation;a[u]=v,a[u+s]=v,a[u+2*s]=v,a[u+3*s]=v,u+=4*s}},e.prototype.uploadUvs=function(t,r,i,a,s,u){for(var d=0;d<i;++d){var v=t[r+d]._texture._uvs;v?(a[u]=v.x0,a[u+1]=v.y0,a[u+s]=v.x1,a[u+s+1]=v.y1,a[u+2*s]=v.x2,a[u+2*s+1]=v.y2,a[u+3*s]=v.x3,a[u+3*s+1]=v.y3,u+=4*s):(a[u]=0,a[u+1]=0,a[u+s]=0,a[u+s+1]=0,a[u+2*s]=0,a[u+2*s+1]=0,a[u+3*s]=0,a[u+3*s+1]=0,u+=4*s)}},e.prototype.uploadTint=function(t,r,i,a,s,u){for(var d=0;d<i;++d){var v=t[r+d],x=v.alpha,b=x<1&&v._texture.baseTexture.alphaMode>0?wo(v._tintRGB,x):v._tintRGB+(255*x<<24);a[u]=b,a[u+s]=b,a[u+2*s]=b,a[u+3*s]=b,u+=4*s}},e.prototype.destroy=function(){n.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e.extension={name:"particle",type:y.RendererPlugin},e}(ls),Nn=(()=>(function(n){n.MITER="miter",n.BEVEL="bevel",n.ROUND="round"}(Nn||(Nn={})),Nn))(),Qn=(()=>(function(n){n.BUTT="butt",n.ROUND="round",n.SQUARE="square"}(Qn||(Qn={})),Qn))(),Aa={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(n,e){if(void 0===e&&(e=20),!this.adaptive||!n||isNaN(n))return e;var t=Math.ceil(n/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}},Lu=function(){function n(){this.color=16777215,this.alpha=1,this.texture=he.WHITE,this.matrix=null,this.visible=!1,this.reset()}return n.prototype.clone=function(){var e=new n;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},n.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=he.WHITE,this.matrix=null,this.visible=!1},n.prototype.destroy=function(){this.texture=null,this.matrix=null},n}(),hl=function(n,e){return(hl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)};function cl(n,e){function t(){this.constructor=n}hl(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}function Gu(n,e){var t,r;void 0===e&&(e=!1);var i=n.length;if(!(i<6)){for(var a=0,s=0,u=n[i-2],d=n[i-1];s<i;s+=2){var v=n[s],m=n[s+1];a+=(v-u)*(m+d),u=v,d=m}if(!e&&a>0||e&&a<=0){var x=i/2;for(s=x+x%2;s<i;s+=2){var b=i-s-2,S=i-s-1,A=s,M=s+1;n[b]=(t=[n[A],n[b]])[0],n[A]=t[1],n[S]=(r=[n[M],n[S]])[0],n[M]=r[1]}}}}var fl={build:function(n){n.points=n.shape.points.slice()},triangulate:function(n,e){var t=n.points,r=n.holes,i=e.points,a=e.indices;if(t.length>=6){Gu(t,!1);for(var s=[],u=0;u<r.length;u++){var d=r[u];Gu(d.points,!0),s.push(t.length/2),t=t.concat(d.points)}var v=ve(t,s,2);if(!v)return;var m=i.length/2;for(u=0;u<v.length;u+=3)a.push(v[u]+m),a.push(v[u+1]+m),a.push(v[u+2]+m);for(u=0;u<t.length;u++)i.push(t[u])}}},Ma={build:function(n){var t,r,i,a,s,u,e=n.points;if(n.type===je.CIRC){var d=n.shape;t=d.x,r=d.y,s=u=d.radius,i=a=0}else if(n.type===je.ELIP){var v=n.shape;t=v.x,r=v.y,s=v.width,u=v.height,i=a=0}else{var m=n.shape,x=m.width/2,b=m.height/2;t=m.x+x,r=m.y+b,i=x-(s=u=Math.max(0,Math.min(m.radius,Math.min(x,b)))),a=b-u}if(s>=0&&u>=0&&i>=0&&a>=0){var S=Math.ceil(2.3*Math.sqrt(s+u)),A=8*S+(i?4:0)+(a?4:0);if(e.length=A,0!==A){if(0===S)return e.length=8,e[0]=e[6]=t+i,e[1]=e[3]=r+a,e[2]=e[4]=t-i,void(e[5]=e[7]=r-a);var At,Gt,vt,M=0,F=4*S+(i?2:0)+2,$=F,mt=A,Ct=t-(At=i+s),Pt=r+(Gt=a);if(e[M++]=vt=t+At,e[M++]=Pt,e[--F]=Pt,e[--F]=Ct,a){var oe=r-Gt;e[$++]=Ct,e[$++]=oe,e[--mt]=oe,e[--mt]=vt}for(var Nt=1;Nt<S;Nt++){var kt=Math.PI/2*(Nt/S);Ct=t-(At=i+Math.cos(kt)*s),Pt=r+(Gt=a+Math.sin(kt)*u),oe=r-Gt,e[M++]=vt=t+At,e[M++]=Pt,e[--F]=Pt,e[--F]=Ct,e[$++]=Ct,e[$++]=oe,e[--mt]=oe,e[--mt]=vt}Ct=t-(At=i),Pt=r+(Gt=a+u),oe=r-Gt,e[M++]=vt=t+At,e[M++]=Pt,e[--mt]=oe,e[--mt]=vt,i&&(e[M++]=Ct,e[M++]=Pt,e[--mt]=oe,e[--mt]=Ct)}}else e.length=0},triangulate:function(n,e){var t=n.points,r=e.points,i=e.indices;if(0!==t.length){var u,d,a=r.length/2,s=a;if(n.type!==je.RREC){var v=n.shape;u=v.x,d=v.y}else{var m=n.shape;u=m.x+m.width/2,d=m.y+m.height/2}var x=n.matrix;r.push(n.matrix?x.a*u+x.c*d+x.tx:u,n.matrix?x.b*u+x.d*d+x.ty:d),a++,r.push(t[0],t[1]);for(var b=2;b<t.length;b+=2)r.push(t[b],t[b+1]),i.push(a++,s,a);i.push(s+1,s,a)}}};function Mo(n,e,t){return n+(e-n)*t}function Ts(n,e,t,r,i,a,s){void 0===s&&(s=[]);for(var d=s,v=0,m=0,x=0,b=0,S=0,A=0,M=0,F=0;M<=20;++M)v=Mo(n,t,F=M/20),m=Mo(e,r,F),x=Mo(t,i,F),b=Mo(r,a,F),S=Mo(v,x,F),A=Mo(m,b,F),(0!==M||d[d.length-2]!==S||d[d.length-1]!==A)&&d.push(S,A);return d}var Xu={build:function(n){if(Ia.nextRoundedRectBehavior)Ma.build(n);else{var e=n.shape,t=n.points,r=e.x,i=e.y,a=e.width,s=e.height,u=Math.max(0,Math.min(e.radius,Math.min(a,s)/2));t.length=0,u?(Ts(r,i+u,r,i,r+u,i,t),Ts(r+a-u,i,r+a,i,r+a,i+u,t),Ts(r+a,i+s-u,r+a,i+s,r+a-u,i+s,t),Ts(r+u,i+s,r,i+s,r,i+s-u,t)):t.push(r,i,r+a,i,r+a,i+s,r,i+s)}},triangulate:function(n,e){if(Ia.nextRoundedRectBehavior)Ma.triangulate(n,e);else{for(var t=n.points,r=e.points,i=e.indices,a=r.length/2,s=ve(t,null,2),u=0,d=s.length;u<d;u+=3)i.push(s[u]+a),i.push(s[u+1]+a),i.push(s[u+2]+a);for(u=0,d=t.length;u<d;u++)r.push(t[u],t[++u])}}};function ju(n,e,t,r,i,a,s,u){var b,S;s?(b=r,S=-t):(b=-r,S=t);var F=n+t*a+b,$=e+r*a+S;return u.push(n-t*i+b,e-r*i+S),u.push(F,$),2}function Zi(n,e,t,r,i,a,s,u){var d=t-n,v=r-e,m=Math.atan2(d,v),x=Math.atan2(i-n,a-e);u&&m<x?m+=2*Math.PI:!u&&m>x&&(x+=2*Math.PI);var b=m,S=x-m,A=Math.abs(S),M=Math.sqrt(d*d+v*v),F=1+(15*A*Math.sqrt(M)/Math.PI>>0),$=S/F;if(b+=$,u){s.push(n,e),s.push(t,r);for(var mt=1,At=b;mt<F;mt++,At+=$)s.push(n,e),s.push(n+Math.sin(At)*M,e+Math.cos(At)*M);s.push(n,e),s.push(i,a)}else{for(s.push(t,r),s.push(n,e),mt=1,At=b;mt<F;mt++,At+=$)s.push(n+Math.sin(At)*M,e+Math.cos(At)*M),s.push(n,e);s.push(i,a),s.push(n,e)}return 2*F}function dl(n,e){n.lineStyle.native?function Mf(n,e){var t=0,r=n.shape,i=n.points||r.points,a=r.type!==je.POLY||r.closeStroke;if(0!==i.length){var s=e.points,u=e.indices,d=i.length/2,v=s.length/2,m=v;for(s.push(i[0],i[1]),t=1;t<d;t++)s.push(i[2*t],i[2*t+1]),u.push(m,m+1),m++;a&&u.push(m,v)}}(n,e):function Af(n,e){var t=n.shape,r=n.points||t.points.slice(),i=e.closePointEps;if(0!==r.length){var a=n.lineStyle,s=new Oe(r[0],r[1]),u=new Oe(r[r.length-2],r[r.length-1]),d=t.type!==je.POLY||t.closeStroke,v=Math.abs(s.x-u.x)<i&&Math.abs(s.y-u.y)<i;if(d){r=r.slice(),v&&(r.pop(),r.pop(),u.set(r[r.length-2],r[r.length-1]));var m=.5*(s.x+u.x),x=.5*(u.y+s.y);r.unshift(m,x),r.push(m,x)}var b=e.points,S=r.length/2,A=r.length,M=b.length/2,F=a.width/2,$=F*F,mt=a.miterLimit*a.miterLimit,At=r[0],Gt=r[1],vt=r[2],Ct=r[3],Pt=0,oe=0,Nt=-(Gt-Ct),kt=At-vt,le=0,pe=0,Pe=Math.sqrt(Nt*Nt+kt*kt);Nt/=Pe,kt/=Pe,Nt*=F,kt*=F;var ir=a.alignment,ae=2*(1-ir),se=2*ir;d||(a.cap===Qn.ROUND?A+=Zi(At-Nt*(ae-se)*.5,Gt-kt*(ae-se)*.5,At-Nt*ae,Gt-kt*ae,At+Nt*se,Gt+kt*se,b,!0)+2:a.cap===Qn.SQUARE&&(A+=ju(At,Gt,Nt,kt,ae,se,!0,b))),b.push(At-Nt*ae,Gt-kt*ae),b.push(At+Nt*se,Gt+kt*se);for(var we=1;we<S-1;++we){Pt=r[2*(we+1)],oe=r[2*(we+1)+1],Nt=-((Gt=r[2*(we-1)+1])-(Ct=r[2*we+1])),kt=(At=r[2*(we-1)])-(vt=r[2*we]),Nt/=Pe=Math.sqrt(Nt*Nt+kt*kt),kt/=Pe,Nt*=F,kt*=F,le=-(Ct-oe),pe=vt-Pt,le/=Pe=Math.sqrt(le*le+pe*pe),pe/=Pe,le*=F,pe*=F;var Pr=vt-At,Re=Gt-Ct,lr=vt-Pt,de=oe-Ct,Rs=Pr*lr+Re*de,di=Re*lr-de*Pr,qn=di<0;if(Math.abs(di)<.001*Math.abs(Rs))b.push(vt-Nt*ae,Ct-kt*ae),b.push(vt+Nt*se,Ct+kt*se),Rs>=0&&(A+=a.join===Nn.ROUND?Zi(vt,Ct,vt-Nt*ae,Ct-kt*ae,vt-le*ae,Ct-pe*ae,b,!1)+4:2,b.push(vt-le*se,Ct-pe*se),b.push(vt+le*ae,Ct+pe*ae));else{var Ua=(-Nt+At)*(-kt+Ct)-(-Nt+vt)*(-kt+Gt),Fo=(-le+Pt)*(-pe+Ct)-(-le+vt)*(-pe+oe),kn=(Pr*Fo-lr*Ua)/di,No=(de*Ua-Re*Fo)/di,Uo=(kn-vt)*(kn-vt)+(No-Ct)*(No-Ct),Cn=vt+(kn-vt)*ae,Tn=Ct+(No-Ct)*ae,an=vt-(kn-vt)*se,sn=Ct-(No-Ct)*se,Wi=qn?ae:se;Uo<=Math.min(Pr*Pr+Re*Re,lr*lr+de*de)+Wi*Wi*$?a.join===Nn.BEVEL||Uo/$>mt?(qn?(b.push(Cn,Tn),b.push(vt+Nt*se,Ct+kt*se),b.push(Cn,Tn),b.push(vt+le*se,Ct+pe*se)):(b.push(vt-Nt*ae,Ct-kt*ae),b.push(an,sn),b.push(vt-le*ae,Ct-pe*ae),b.push(an,sn)),A+=2):a.join===Nn.ROUND?qn?(b.push(Cn,Tn),b.push(vt+Nt*se,Ct+kt*se),A+=Zi(vt,Ct,vt+Nt*se,Ct+kt*se,vt+le*se,Ct+pe*se,b,!0)+4,b.push(Cn,Tn),b.push(vt+le*se,Ct+pe*se)):(b.push(vt-Nt*ae,Ct-kt*ae),b.push(an,sn),A+=Zi(vt,Ct,vt-Nt*ae,Ct-kt*ae,vt-le*ae,Ct-pe*ae,b,!1)+4,b.push(vt-le*ae,Ct-pe*ae),b.push(an,sn)):(b.push(Cn,Tn),b.push(an,sn)):(b.push(vt-Nt*ae,Ct-kt*ae),b.push(vt+Nt*se,Ct+kt*se),a.join===Nn.ROUND?A+=qn?Zi(vt,Ct,vt+Nt*se,Ct+kt*se,vt+le*se,Ct+pe*se,b,!0)+2:Zi(vt,Ct,vt-Nt*ae,Ct-kt*ae,vt-le*ae,Ct-pe*ae,b,!1)+2:a.join===Nn.MITER&&Uo/$<=mt&&(qn?(b.push(an,sn),b.push(an,sn)):(b.push(Cn,Tn),b.push(Cn,Tn)),A+=2),b.push(vt-le*ae,Ct-pe*ae),b.push(vt+le*se,Ct+pe*se),A+=2)}}Nt=-((Gt=r[2*(S-2)+1])-(Ct=r[2*(S-1)+1])),kt=(At=r[2*(S-2)])-(vt=r[2*(S-1)]),Nt/=Pe=Math.sqrt(Nt*Nt+kt*kt),kt/=Pe,b.push(vt-(Nt*=F)*ae,Ct-(kt*=F)*ae),b.push(vt+Nt*se,Ct+kt*se),d||(a.cap===Qn.ROUND?A+=Zi(vt-Nt*(ae-se)*.5,Ct-kt*(ae-se)*.5,vt-Nt*ae,Ct-kt*ae,vt+Nt*se,Ct+kt*se,b,!1)+2:a.cap===Qn.SQUARE&&(A+=ju(vt,Ct,Nt,kt,ae,se,!1,b)));var Gn=e.indices,ko=Aa.epsilon*Aa.epsilon;for(we=M;we<A+M-2;++we)At=b[2*we],Gt=b[2*we+1],vt=b[2*(we+1)],Ct=b[2*(we+1)+1],Pt=b[2*(we+2)],oe=b[2*(we+2)+1],!(Math.abs(At*(Ct-oe)+vt*(oe-Gt)+Pt*(Gt-Ct))<ko)&&Gn.push(we,we+1,we+2)}}(n,e)}var zi,pl=function(){function n(){}return n.curveTo=function(e,t,r,i,a,s){var v=s[s.length-1]-t,m=s[s.length-2]-e,x=i-t,b=r-e,S=Math.abs(v*b-m*x);if(S<1e-8||0===a)return(s[s.length-2]!==e||s[s.length-1]!==t)&&s.push(e,t),null;var A=v*v+m*m,M=x*x+b*b,F=v*x+m*b,$=a*Math.sqrt(A)/S,mt=a*Math.sqrt(M)/S,At=$*F/A,Gt=mt*F/M,vt=$*b+mt*m,Ct=$*x+mt*v,Nt=b*($+Gt),kt=x*($+Gt);return{cx:vt+e,cy:Ct+t,radius:a,startAngle:Math.atan2(v*(mt+At)-Ct,m*(mt+At)-vt),endAngle:Math.atan2(kt-Ct,Nt-vt),anticlockwise:m*x>b*v}},n.arc=function(e,t,r,i,a,s,u,d,v){for(var m=u-s,x=Aa._segmentsCount(Math.abs(m)*a,40*Math.ceil(Math.abs(m)/Ni)),b=m/(2*x),S=2*b,A=Math.cos(b),M=Math.sin(b),F=x-1,$=F%1/F,mt=0;mt<=F;++mt){var Gt=b+s+S*(mt+$*mt),vt=Math.cos(Gt),Ct=-Math.sin(Gt);v.push((A*vt+M*Ct)*a+r,(A*-Ct+M*vt)*a+i)}},n}(),Yu=function(){function n(){}return n.curveLength=function(e,t,r,i,a,s,u,d){for(var m=0,x=0,b=0,S=0,A=0,M=0,F=0,$=0,mt=0,At=0,Gt=0,vt=e,Ct=t,Pt=1;Pt<=10;++Pt)At=vt-($=(F=(M=(A=1-(x=Pt/10))*A)*A)*e+3*M*x*r+3*A*(b=x*x)*a+(S=b*x)*u),Gt=Ct-(mt=F*t+3*M*x*i+3*A*b*s+S*d),vt=$,Ct=mt,m+=Math.sqrt(At*At+Gt*Gt);return m},n.curveTo=function(e,t,r,i,a,s,u){var d=u[u.length-2],v=u[u.length-1];u.length-=2;var m=Aa._segmentsCount(n.curveLength(d,v,e,t,r,i,a,s)),x=0,b=0,S=0,A=0,M=0;u.push(d,v);for(var F=1,$=0;F<=m;++F)u.push((S=(b=(x=1-($=F/m))*x)*x)*d+3*b*$*e+3*x*(A=$*$)*r+(M=A*$)*a,S*v+3*b*$*t+3*x*A*i+M*s)},n}(),Zu=function(){function n(){}return n.curveLength=function(e,t,r,i,a,s){var u=e-2*r+a,d=t-2*i+s,v=2*r-2*e,m=2*i-2*t,x=4*(u*u+d*d),b=4*(u*v+d*m),S=v*v+m*m,A=2*Math.sqrt(x+b+S),M=Math.sqrt(x),F=2*x*M,$=2*Math.sqrt(S),mt=b/M;return(F*A+M*b*(A-$)+(4*S*x-b*b)*Math.log((2*M+mt+A)/(mt+$)))/(4*F)},n.curveTo=function(e,t,r,i,a){for(var s=a[a.length-2],u=a[a.length-1],d=Aa._segmentsCount(n.curveLength(s,u,e,t,r,i)),v=0,m=0,x=1;x<=d;++x){var b=x/d;a.push((v=s+(e-s)*b)+(e+(r-e)*b-v)*b,(m=u+(t-u)*b)+(t+(i-t)*b-m)*b)}},n}(),zu=function(){function n(){this.reset()}return n.prototype.begin=function(e,t,r){this.reset(),this.style=e,this.start=t,this.attribStart=r},n.prototype.end=function(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start},n.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},n}(),ws=((zi={})[je.POLY]=fl,zi[je.CIRC]=Ma,zi[je.ELIP]=Ma,zi[je.RECT]={build:function(n){var e=n.shape,t=e.x,r=e.y,i=e.width,a=e.height,s=n.points;s.length=0,s.push(t,r,t+i,r,t+i,r+a,t,r+a)},triangulate:function(n,e){var t=n.points,r=e.points,i=r.length/2;r.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},zi[je.RREC]=Xu,zi),vl=[],Ra=[],Vu=function(){function n(e,t,r,i){void 0===t&&(t=null),void 0===r&&(r=null),void 0===i&&(i=null),this.points=[],this.holes=[],this.shape=e,this.lineStyle=r,this.fillStyle=t,this.matrix=i,this.type=e.type}return n.prototype.clone=function(){return new n(this.shape,this.fillStyle,this.lineStyle,this.matrix)},n.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},n}(),Ro=new Oe,Rf=function(n){function e(){var t=n.call(this)||this;return t.closePointEps=1e-4,t.boundsPadding=0,t.uvsFloat32=null,t.indicesUint16=null,t.batchable=!1,t.points=[],t.colors=[],t.uvs=[],t.indices=[],t.textureIds=[],t.graphicsData=[],t.drawCalls=[],t.batchDirty=-1,t.batches=[],t.dirty=0,t.cacheDirty=-1,t.clearDirty=0,t.shapeIndex=0,t._bounds=new Li,t.boundsDirty=-1,t}return cl(e,n),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),Ra.push(this.drawCalls[t]);for(this.drawCalls.length=0,t=0;t<this.batches.length;t++){var r=this.batches[t];r.reset(),vl.push(r)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,r,i,a){void 0===r&&(r=null),void 0===i&&(i=null),void 0===a&&(a=null);var s=new Vu(t,r,i,a);return this.graphicsData.push(s),this.dirty++,this},e.prototype.drawHole=function(t,r){if(void 0===r&&(r=null),!this.graphicsData.length)return null;var i=new Vu(t,null,null,r),a=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=a.lineStyle,a.holes.push(i),this.dirty++,this},e.prototype.destroy=function(){n.prototype.destroy.call(this);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var r=this.graphicsData,i=0;i<r.length;++i){var a=r[i];if(a.fillStyle.visible&&a.shape&&(a.matrix?a.matrix.applyInverse(t,Ro):Ro.copyFrom(t),a.shape.contains(Ro.x,Ro.y))){var s=!1;if(a.holes)for(var u=0;u<a.holes.length;u++)if(a.holes[u].shape.contains(Ro.x,Ro.y)){s=!0;break}if(!s)return!0}}return!1},e.prototype.updateBatches=function(){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var t=this.uvs,r=this.graphicsData,i=null,a=null;this.batches.length>0&&(a=(i=this.batches[this.batches.length-1]).style);for(var s=this.shapeIndex;s<r.length;s++){this.shapeIndex++;var u=r[s],d=u.fillStyle,v=u.lineStyle;ws[u.type].build(u),u.matrix&&this.transformPoints(u.points,u.matrix),(d.visible||v.visible)&&this.processHoles(u.holes);for(var x=0;x<2;x++){var b=0===x?d:v;if(b.visible){var A=this.indices.length,M=this.points.length/2;b.texture.baseTexture.wrapMode=it.REPEAT,0===x?this.processFill(u):this.processLine(u);var F=this.points.length/2-M;0!==F&&(i&&!this._compareStyles(a,b)&&(i.end(A,M),i=null),i||((i=vl.pop()||new zu).begin(b,A,M),this.batches.push(i),a=b),this.addUvs(this.points,t,b.texture,M,F,b.matrix))}}}var mt=this.points.length/2;if(i&&i.end(this.indices.length,mt),0===this.batches.length)return void(this.batchable=!0);var At=mt>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&At===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=At?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}}else this.batchable=!0},e.prototype._compareStyles=function(t,r){return!(!t||!r||t.texture.baseTexture!==r.texture.baseTexture||t.color+t.alpha!==r.color+r.alpha||!!t.native!=!!r.native)},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,r=this.graphicsData.length;t<r;t++){var i=this.graphicsData[t],a=i.fillStyle,s=i.lineStyle;if(a&&!a.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,r=0,i=t.length;r<i;r++)for(var a=t[r],s=0;s<a.size;s++){var u=a.start+s;this.indicesUint16[u]=this.indicesUint16[u]-a.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var t=this.batches,r=0;r<t.length;r++)if(t[r].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE},e.prototype.buildDrawCalls=function(){for(var t=++Et._globalBatch,r=0;r<this.drawCalls.length;r++)this.drawCalls[r].texArray.clear(),Ra.push(this.drawCalls[r]);this.drawCalls.length=0;var i=this.colors,a=this.textureIds,s=Ra.pop();s||((s=new Js).texArray=new $s),s.texArray.count=0,s.start=0,s.size=0,s.type=X.TRIANGLES;var u=0,d=null,v=0,m=!1,x=X.TRIANGLES,b=0;for(this.drawCalls.push(s),r=0;r<this.batches.length;r++){var S=this.batches[r],M=S.style,F=M.texture.baseTexture;m!==!!M.native&&(x=(m=!!M.native)?X.LINES:X.TRIANGLES,d=null,u=8,t++),d!==F&&(d=F,F._batchEnabled!==t&&(8===u&&(t++,u=0,s.size>0&&((s=Ra.pop())||((s=new Js).texArray=new $s),this.drawCalls.push(s)),s.start=b,s.size=0,s.texArray.count=0,s.type=x),F.touched=1,F._batchEnabled=t,F._batchLocation=u,F.wrapMode=it.REPEAT,s.texArray.elements[s.texArray.count++]=F,u++)),s.size+=S.size,b+=S.size,v=F._batchLocation,this.addColors(i,M.color,M.alpha,S.attribSize,S.attribStart),this.addTextureIds(a,v,S.attribSize,S.attribStart)}Et._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,r=this.uvs,i=this.colors,a=this.textureIds,s=new ArrayBuffer(3*t.length*4),u=new Float32Array(s),d=new Uint32Array(s),v=0,m=0;m<t.length/2;m++)u[v++]=t[2*m],u[v++]=t[2*m+1],u[v++]=r[2*m],u[v++]=r[2*m+1],d[v++]=i[m],u[v++]=a[m];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){t.holes.length?fl.triangulate(t,this):ws[t.type].triangulate(t,this)},e.prototype.processLine=function(t){dl(t,this);for(var r=0;r<t.holes.length;r++)dl(t.holes[r],this)},e.prototype.processHoles=function(t){for(var r=0;r<t.length;r++){var i=t[r];ws[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,r){for(var i=0;i<t.length/2;i++){var a=t[2*i],s=t[2*i+1];t[2*i]=r.a*a+r.c*s+r.tx,t[2*i+1]=r.b*a+r.d*s+r.ty}},e.prototype.addColors=function(t,r,i,a,s){void 0===s&&(s=0);var d=wo((r>>16)+(65280&r)+((255&r)<<16),i);t.length=Math.max(t.length,s+a);for(var v=0;v<a;v++)t[s+v]=d},e.prototype.addTextureIds=function(t,r,i,a){void 0===a&&(a=0),t.length=Math.max(t.length,a+i);for(var s=0;s<i;s++)t[a+s]=r},e.prototype.addUvs=function(t,r,i,a,s,u){void 0===u&&(u=null);for(var d=0,v=r.length,m=i.frame;d<s;){var x=t[2*(a+d)],b=t[2*(a+d)+1];if(u){var S=u.a*x+u.c*b+u.tx;b=u.b*x+u.d*b+u.ty,x=S}d++,r.push(x/m.width,b/m.height)}var A=i.baseTexture;(m.width<A.width||m.height<A.height)&&this.adjustUvs(r,i,v,s)},e.prototype.adjustUvs=function(t,r,i,a){for(var s=r.baseTexture,u=1e-6,d=i+2*a,v=r.frame,m=v.width/s.width,x=v.height/s.height,b=v.x/v.width,S=v.y/v.height,A=Math.floor(t[i]+u),M=Math.floor(t[i+1]+u),F=i+2;F<d;F+=2)A=Math.min(A,Math.floor(t[F]+u)),M=Math.min(M,Math.floor(t[F+1]+u));for(b-=A,S-=M,F=i;F<d;F+=2)t[F]=(t[F]+b)*m,t[F+1]=(t[F+1]+S)*x},e.BATCHABLE_SIZE=100,e}(bu),If=function(n){function e(){var t=null!==n&&n.apply(this,arguments)||this;return t.width=0,t.alignment=.5,t.native=!1,t.cap=Qn.BUTT,t.join=Nn.MITER,t.miterLimit=10,t}return cl(e,n),e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},e.prototype.reset=function(){n.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(Lu),Bf=new Float32Array(3),_l={},Ia=function(n){function e(t){void 0===t&&(t=null);var r=n.call(this)||this;return r.shader=null,r.pluginName="batch",r.currentPath=null,r.batches=[],r.batchTint=-1,r.batchDirty=-1,r.vertexData=null,r._fillStyle=new Lu,r._lineStyle=new If,r._matrix=null,r._holeMode=!1,r.state=Xi.for2d(),r._geometry=t||new Rf,r._geometry.refCount++,r._transformID=-1,r.tint=16777215,r.blendMode=I.NORMAL,r}return cl(e,n),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(t,r,i,a,s){return void 0===t&&(t=null),void 0===r&&(r=0),void 0===i&&(i=1),void 0===a&&(a=.5),void 0===s&&(s=!1),"number"==typeof t&&(t={width:t,color:r,alpha:i,alignment:a,native:s}),this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){t=Object.assign({width:0,texture:he.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Qn.BUTT,join:Nn.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var r=t.width>0&&t.alpha>0;return r?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:r},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,r=this.currentPath.points.length;r>2&&(this.drawShape(this.currentPath),this.currentPath=new oi,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[r-2],t[r-1]))}else this.currentPath=new oi,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,r){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=r,this},e.prototype.lineTo=function(t,r){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points;return(i[i.length-2]!==t||i[i.length-1]!==r)&&i.push(t,r),this},e.prototype._initCurve=function(t,r){void 0===t&&(t=0),void 0===r&&(r=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,r]):this.moveTo(t,r)},e.prototype.quadraticCurveTo=function(t,r,i,a){this._initCurve();var s=this.currentPath.points;return 0===s.length&&this.moveTo(0,0),Zu.curveTo(t,r,i,a,s),this},e.prototype.bezierCurveTo=function(t,r,i,a,s,u){return this._initCurve(),Yu.curveTo(t,r,i,a,s,u,this.currentPath.points),this},e.prototype.arcTo=function(t,r,i,a,s){this._initCurve(t,r);var d=pl.curveTo(t,r,i,a,s,this.currentPath.points);return d&&this.arc(d.cx,d.cy,d.radius,d.startAngle,d.endAngle,d.anticlockwise),this},e.prototype.arc=function(t,r,i,a,s,u){if(void 0===u&&(u=!1),a===s)return this;if(!u&&s<=a?s+=Ni:u&&a<=s&&(a+=Ni),0==s-a)return this;var v=t+Math.cos(a)*i,m=r+Math.sin(a)*i,x=this._geometry.closePointEps,b=this.currentPath?this.currentPath.points:null;if(b){var S=Math.abs(b[b.length-2]-v),A=Math.abs(b[b.length-1]-m);S<x&&A<x||b.push(v,m)}else this.moveTo(v,m),b=this.currentPath.points;return pl.arc(v,m,t,r,i,a,s,u,b),this},e.prototype.beginFill=function(t,r){return void 0===t&&(t=0),void 0===r&&(r=1),this.beginTextureFill({texture:he.WHITE,color:t,alpha:r})},e.prototype.beginTextureFill=function(t){t=Object.assign({texture:he.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var r=t.alpha>0;return r?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:r},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,r,i,a){return this.drawShape(new Ce(t,r,i,a))},e.prototype.drawRoundedRect=function(t,r,i,a,s){return this.drawShape(new ki(t,r,i,a,s))},e.prototype.drawCircle=function(t,r,i){return this.drawShape(new ns(t,r,i))},e.prototype.drawEllipse=function(t,r,i,a){return this.drawShape(new ya(t,r,i,a))},e.prototype.drawPolygon=function(){for(var t=arguments,r=[],i=0;i<arguments.length;i++)r[i]=t[i];var a,s=!0,u=r[0];u.points?(s=u.closeStroke,a=u.points):a=Array.isArray(r[0])?r[0]:r;var d=new oi(a);return d.closeStroke=s,this.drawShape(d),this},e.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return!(1!==t.length||t[0].shape.type!==je.RECT||t[0].matrix||t[0].holes.length||t[0].lineStyle.visible&&t[0].lineStyle.width)},e.prototype._render=function(t){this.finishPoly();var r=this._geometry;r.updateBatches(),r.batchable?(this.batchDirty!==r.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this._geometry,r=this.blendMode,i=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(t.points);for(var a=0;a<i;a++){var s=t.batches[a],u=s.style.color,d=new Float32Array(this.vertexData.buffer,4*s.attribStart*2,2*s.attribSize),v=new Float32Array(t.uvsFloat32.buffer,4*s.attribStart*2,2*s.attribSize),x={vertexData:d,blendMode:r,indices:new Uint16Array(t.indicesUint16.buffer,2*s.start,s.size),uvs:v,_batchRGB:Zr(u),_tintRGB:u,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[a]=x}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var r=0,i=this.batches.length;r<i;r++){var a=this.batches[r];a.worldAlpha=this.worldAlpha*a.alpha,t.plugins[this.pluginName].render(a)}}},e.prototype._renderDirect=function(t){var r=this._resolveDirectShader(t),i=this._geometry,a=this.tint,s=this.worldAlpha,u=r.uniforms,d=i.drawCalls;u.translationMatrix=this.transform.worldTransform,u.tint[0]=(a>>16&255)/255*s,u.tint[1]=(a>>8&255)/255*s,u.tint[2]=(255&a)/255*s,u.tint[3]=s,t.shader.bind(r),t.geometry.bind(i,r),t.state.set(this.state);for(var v=0,m=d.length;v<m;v++)this._renderDrawCallDirect(t,i.drawCalls[v])},e.prototype._renderDrawCallDirect=function(t,r){for(var i=r.texArray,a=r.type,s=r.size,u=r.start,d=i.count,v=0;v<d;v++)t.texture.bind(i.elements[v],v);t.geometry.draw(a,s,u)},e.prototype._resolveDirectShader=function(t){var r=this.shader,i=this.pluginName;if(!r){if(!_l[i]){for(var a=t.plugins[i].MAX_TEXTURES,s=new Int32Array(a),u=0;u<a;u++)s[u]=u;var d={tint:new Float32Array([1,1,1,1]),translationMatrix:new ze,default:Hi.from({uSamplers:s},!0)};_l[i]=new ui(t.plugins[i]._shader.program,d)}r=_l[i]}return r},e.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var r=t.bounds;this._bounds.addFrame(this.transform,r.minX,r.minY,r.maxX,r.maxY)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=Zr(this.tint,Bf),r=0;r<this.batches.length;r++){var i=this.batches[r],a=i._batchRGB,v=(t[0]*a[0]*255<<16)+(t[1]*a[1]*255<<8)+(0|t[2]*a[2]*255);i._tintRGB=(v>>16)+(65280&v)+((255&v)<<16)}}},e.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var r=this.transform.worldTransform,i=r.a,a=r.b,s=r.c,u=r.d,d=r.tx,v=r.ty,m=this._geometry.points,x=this.vertexData,b=0,S=0;S<m.length;S+=2){var A=m[S],M=m[S+1];x[b++]=i*A+s*M+d,x[b++]=u*M+a*A+v}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(t){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,n.prototype.destroy.call(this,t)},e.nextRoundedRectBehavior=!1,e._TEMP_POINT=new Oe,e}(f),gl=function(n,e){return(gl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)},Ba=new Oe,Ff=new Uint16Array([0,1,2,0,2,3]),Io=function(n){function e(t){var r=n.call(this)||this;return r._anchor=new yn(r._onAnchorUpdate,r,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),r._texture=null,r._width=0,r._height=0,r._tint=null,r._tintRGB=null,r.tint=16777215,r.blendMode=I.NORMAL,r._cachedTint=16777215,r.uvs=null,r.texture=t||he.EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.indices=Ff,r.pluginName="batch",r.isSprite=!0,r._roundPixels=L.ROUND_PIXELS,r}return function Df(n,e){function t(){this.constructor=n}gl(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,n),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Dn(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Dn(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var r=this.transform.worldTransform,i=r.a,a=r.b,s=r.c,u=r.d,d=r.tx,v=r.ty,m=this.vertexData,x=t.trim,b=t.orig,S=this._anchor,A=0,M=0,F=0,$=0;if(x?(A=(M=x.x-S._x*b.width)+x.width,F=($=x.y-S._y*b.height)+x.height):(A=(M=-S._x*b.width)+b.width,F=($=-S._y*b.height)+b.height),m[0]=i*M+s*$+d,m[1]=u*$+a*M+v,m[2]=i*A+s*$+d,m[3]=u*$+a*A+v,m[4]=i*A+s*F+d,m[5]=u*F+a*A+v,m[6]=i*M+s*F+d,m[7]=u*F+a*M+v,this._roundPixels)for(var mt=L.RESOLUTION,At=0;At<m.length;++At)m[At]=Math.round((m[At]*mt|0)/mt)}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var r=this.vertexTrimmedData,i=this._texture.orig,a=this._anchor,s=this.transform.worldTransform,u=s.a,d=s.b,v=s.c,m=s.d,x=s.tx,b=s.ty,S=-a._x*i.width,A=S+i.width,M=-a._y*i.height,F=M+i.height;r[0]=u*S+v*M+x,r[1]=m*M+d*S+b,r[2]=u*A+v*M+x,r[3]=m*M+d*A+b,r[4]=u*A+v*F+x,r[5]=m*F+d*A+b,r[6]=u*S+v*F+x,r[7]=m*F+d*S+b},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,r=this._texture.orig;!t||t.width===r.width&&t.height===r.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._localBounds||(this._localBounds=new Li),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Ce),t=this._localBoundsRect),this._localBounds.getRectangle(t)):n.prototype.getLocalBounds.call(this,t)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Ba);var r=this._texture.orig.width,i=this._texture.orig.height,a=-r*this.anchor.x,s=0;return Ba.x>=a&&Ba.x<a+r&&Ba.y>=(s=-i*this.anchor.y)&&Ba.y<s+i},e.prototype.destroy=function(t){n.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,("boolean"==typeof t?t:t&&t.texture)&&this._texture.destroy(!!("boolean"==typeof t?t:t&&t.baseTexture)),this._texture=null},e.from=function(t,r){return new e(t instanceof he?t:he.from(t,r))},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var r=Dn(this.scale.x)||1;this.scale.x=r*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var r=Dn(this.scale.y)||1;this.scale.y=r*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||he.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(f),ml=function(n,e){return(ml=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)},Bo=(()=>(function(n){n[n.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",n[n.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(Bo||(Bo={})),Bo))(),yl={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Bo.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},Uf=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Vi=function(){function n(e){this.styleID=0,this.reset(),xl(this,e,e)}return n.prototype.clone=function(){var e={};return xl(e,this,yl),new n(e)},n.prototype.reset=function(){xl(this,yl,yl)},Object.defineProperty(n.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"breakWords",{get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(e){var t=bl(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fill",{get:function(){return this._fill},set:function(e){var t=bl(e);this._fill!==t&&(this._fill=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(e){(function kf(n,e){if(!Array.isArray(n)||!Array.isArray(e)||n.length!==e.length)return!1;for(var t=0;t<n.length;++t)if(n[t]!==e[t])return!1;return!0})(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"leading",{get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"padding",{get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stroke",{get:function(){return this._stroke},set:function(e){var t=bl(e);this._stroke!==t&&(this._stroke=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"trim",{get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)},enumerable:!1,configurable:!0}),n.prototype.toFontString=function(){var e="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var r=t.length-1;r>=0;r--){var i=t[r].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&Uf.indexOf(i)<0&&(i='"'+i+'"'),t[r]=i}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+t.join(",")},n}();function Wu(n){return"number"==typeof n?Ri(n):("string"==typeof n&&0===n.indexOf("0x")&&(n=n.replace("0x","#")),n)}function bl(n){if(Array.isArray(n)){for(var e=0;e<n.length;++e)n[e]=Wu(n[e]);return n}return Wu(n)}function xl(n,e,t){for(var r in t)n[r]=Array.isArray(e[r])?e[r].slice():e[r]}var Ss={willReadFrequently:!0},Un=function(){function n(e,t,r,i,a,s,u,d,v){this.text=e,this.style=t,this.width=r,this.height=i,this.lines=a,this.lineWidths=s,this.lineHeight=u,this.maxLineWidth=d,this.fontProperties=v}return n.measureText=function(e,t,r,i){void 0===i&&(i=n._canvas),r=null==r?t.wordWrap:r;var a=t.toFontString(),s=n.measureFont(a);0===s.fontSize&&(s.fontSize=t.fontSize,s.ascent=t.fontSize);var u=i.getContext("2d",Ss);u.font=a;for(var v=(r?n.wordWrap(e,t,i):e).split(/(?:\r\n|\r|\n)/),m=new Array(v.length),x=0,b=0;b<v.length;b++){var S=u.measureText(v[b]).width+(v[b].length-1)*t.letterSpacing;m[b]=S,x=Math.max(x,S)}var A=x+t.strokeThickness;t.dropShadow&&(A+=t.dropShadowDistance);var M=t.lineHeight||s.fontSize+t.strokeThickness,F=Math.max(M,s.fontSize+t.strokeThickness)+(v.length-1)*(M+t.leading);return t.dropShadow&&(F+=t.dropShadowDistance),new n(e,t,A,F,v,m,M+t.leading,x,s)},n.wordWrap=function(e,t,r){void 0===r&&(r=n._canvas);for(var i=r.getContext("2d",Ss),a=0,s="",u="",d=Object.create(null),v=t.letterSpacing,m=t.whiteSpace,x=n.collapseSpaces(m),b=n.collapseNewlines(m),S=!x,A=t.wordWrapWidth+v,M=n.tokenize(e),F=0;F<M.length;F++){var $=M[F];if(n.isNewline($)){if(!b){u+=n.addLine(s),S=!x,s="",a=0;continue}$=" "}if(x){var mt=n.isBreakingSpace($),At=n.isBreakingSpace(s[s.length-1]);if(mt&&At)continue}var Gt=n.getFromCache($,v,d,i);if(Gt>A)if(""!==s&&(u+=n.addLine(s),s="",a=0),n.canBreakWords($,t.breakWords))for(var vt=n.wordWrapSplit($),Ct=0;Ct<vt.length;Ct++){for(var Pt=vt[Ct],oe=1;vt[Ct+oe];){var Nt=vt[Ct+oe];if(n.canBreakChars(Pt[Pt.length-1],Nt,$,Ct,t.breakWords))break;Pt+=Nt,oe++}Ct+=Pt.length-1;var le=n.getFromCache(Pt,v,d,i);le+a>A&&(u+=n.addLine(s),S=!1,s="",a=0),s+=Pt,a+=le}else s.length>0&&(u+=n.addLine(s),s="",a=0),u+=n.addLine($,!(F===M.length-1)),S=!1,s="",a=0;else Gt+a>A&&(S=!1,u+=n.addLine(s),s="",a=0),(s.length>0||!n.isBreakingSpace($)||S)&&(s+=$,a+=Gt)}return u+n.addLine(s,!1)},n.addLine=function(e,t){return void 0===t&&(t=!0),e=n.trimRight(e),t?e+"\n":e},n.getFromCache=function(e,t,r,i){var a=r[e];if("number"!=typeof a){var s=e.length*t;a=i.measureText(e).width+s,r[e]=a}return a},n.collapseSpaces=function(e){return"normal"===e||"pre-line"===e},n.collapseNewlines=function(e){return"normal"===e},n.trimRight=function(e){if("string"!=typeof e)return"";for(var t=e.length-1;t>=0&&n.isBreakingSpace(e[t]);t--)e=e.slice(0,-1);return e},n.isNewline=function(e){return"string"==typeof e&&n._newlines.indexOf(e.charCodeAt(0))>=0},n.isBreakingSpace=function(e,t){return"string"==typeof e&&n._breakingSpaces.indexOf(e.charCodeAt(0))>=0},n.tokenize=function(e){var t=[],r="";if("string"!=typeof e)return t;for(var i=0;i<e.length;i++){var a=e[i];n.isBreakingSpace(a,e[i+1])||n.isNewline(a)?(""!==r&&(t.push(r),r=""),t.push(a)):r+=a}return""!==r&&t.push(r),t},n.canBreakWords=function(e,t){return t},n.canBreakChars=function(e,t,r,i,a){return!0},n.wordWrapSplit=function(e){return e.split("")},n.measureFont=function(e){if(n._fonts[e])return n._fonts[e];var t={ascent:0,descent:0,fontSize:0},r=n._canvas,i=n._context;i.font=e;var a=n.METRICS_STRING+n.BASELINE_SYMBOL,s=Math.ceil(i.measureText(a).width),u=Math.ceil(i.measureText(n.BASELINE_SYMBOL).width),d=Math.ceil(n.HEIGHT_MULTIPLIER*u);u=u*n.BASELINE_MULTIPLIER|0,r.width=s,r.height=d,i.fillStyle="#f00",i.fillRect(0,0,s,d),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(a,0,u);var v=i.getImageData(0,0,s,d).data,m=v.length,x=4*s,b=0,S=0,A=!1;for(b=0;b<u;++b){for(var M=0;M<x;M+=4)if(255!==v[S+M]){A=!0;break}if(A)break;S+=x}for(t.ascent=u-b,S=m-x,A=!1,b=d;b>u;--b){for(M=0;M<x;M+=4)if(255!==v[S+M]){A=!0;break}if(A)break;S-=x}return t.descent=b-u,t.fontSize=t.ascent+t.descent,n._fonts[e]=t,t},n.clearMetrics=function(e){void 0===e&&(e=""),e?delete n._fonts[e]:n._fonts={}},Object.defineProperty(n,"_canvas",{get:function(){if(!n.__canvas){var e=void 0;try{var t=new OffscreenCanvas(0,0),r=t.getContext("2d",Ss);if(r&&r.measureText)return n.__canvas=t,t;e=L.ADAPTER.createCanvas()}catch(i){e=L.ADAPTER.createCanvas()}e.width=e.height=10,n.__canvas=e}return n.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(n,"_context",{get:function(){return n.__context||(n.__context=n._canvas.getContext("2d",Ss)),n.__context},enumerable:!1,configurable:!0}),n}();Un._fonts={},Un.METRICS_STRING="|\xc9q\xc5",Un.BASELINE_SYMBOL="M",Un.BASELINE_MULTIPLIER=1.4,Un.HEIGHT_MULTIPLIER=2,Un._newlines=[10,13],Un._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var Lf={texture:!0,children:!1,baseTexture:!0},Cl=function(n){function e(t,r,i){var a=this,s=!1;i||(i=L.ADAPTER.createCanvas(),s=!0),i.width=3,i.height=3;var u=he.from(i);return u.orig=new Ce,u.trim=new Ce,(a=n.call(this,u)||this)._ownCanvas=s,a.canvas=i,a.context=i.getContext("2d",{willReadFrequently:!0}),a._resolution=L.RESOLUTION,a._autoResolution=!0,a._text=null,a._style=null,a._styleListener=null,a._font="",a.text=t,a.style=r,a.localStyleID=-1,a}return function Nf(n,e){function t(){this.constructor=n}ml(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,n),e.prototype.updateText=function(t){var r=this._style;if(this.localStyleID!==r.styleID&&(this.dirty=!0,this.localStyleID=r.styleID),this.dirty||!t){this._font=this._style.toFontString();var i=this.context,a=Un.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),u=a.height,d=a.lines,v=a.lineHeight,m=a.lineWidths,x=a.maxLineWidth,b=a.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,a.width)+2*r.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,u)+2*r.padding)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=r.strokeThickness,i.textBaseline=r.textBaseline,i.lineJoin=r.lineJoin,i.miterLimit=r.miterLimit;for(var S,A,M=r.dropShadow?2:1,F=0;F<M;++F){var $=r.dropShadow&&0===F,mt=$?Math.ceil(Math.max(1,u)+2*r.padding):0,At=mt*this._resolution;if($){i.fillStyle="black",i.strokeStyle="black";var Gt=r.dropShadowColor,vt=Zr("number"==typeof Gt?Gt:Ii(Gt)),Ct=r.dropShadowBlur*this._resolution,Pt=r.dropShadowDistance*this._resolution;i.shadowColor="rgba("+255*vt[0]+","+255*vt[1]+","+255*vt[2]+","+r.dropShadowAlpha+")",i.shadowBlur=Ct,i.shadowOffsetX=Math.cos(r.dropShadowAngle)*Pt,i.shadowOffsetY=Math.sin(r.dropShadowAngle)*Pt+At}else i.fillStyle=this._generateFillStyle(r,d,a),i.strokeStyle=r.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;var oe=(v-b.fontSize)/2;(!e.nextLineHeightBehavior||v-b.fontSize<0)&&(oe=0);for(var Nt=0;Nt<d.length;Nt++)S=r.strokeThickness/2,A=r.strokeThickness/2+Nt*v+b.ascent+oe,"right"===r.align?S+=x-m[Nt]:"center"===r.align&&(S+=(x-m[Nt])/2),r.stroke&&r.strokeThickness&&this.drawLetterSpacing(d[Nt],S+r.padding,A+r.padding-mt,!0),r.fill&&this.drawLetterSpacing(d[Nt],S+r.padding,A+r.padding-mt)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,r,i,a){void 0===a&&(a=!1);var u=this._style.letterSpacing,d=e.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(0===u||d)return d&&(this.context.letterSpacing=u,this.context.textLetterSpacing=u),void(a?this.context.strokeText(t,r,i):this.context.fillText(t,r,i));for(var v=r,m=Array.from?Array.from(t):t.split(""),x=this.context.measureText(t).width,b=0,S=0;S<m.length;++S){var A=m[S];a?this.context.strokeText(A,v,i):this.context.fillText(A,v,i);for(var M="",F=S+1;F<m.length;++F)M+=m[F];v+=x-(b=this.context.measureText(M).width)+u,x=b}},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var r=mn(t);r.data&&(t.width=r.width,t.height=r.height,this.context.putImageData(r.data,0,0))}var i=this._texture,a=this._style,s=a.trim?0:a.padding,u=i.baseTexture;i.trim.width=i._frame.width=t.width/this._resolution,i.trim.height=i._frame.height=t.height/this._resolution,i.trim.x=-s,i.trim.y=-s,i.orig.width=i._frame.width-2*s,i.orig.height=i._frame.height-2*s,this._onTextureUpdate(),u.setRealSize(t.width,t.height,this._resolution),i.updateUvs(),this.dirty=!1},e.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),n.prototype._render.call(this,t)},e.prototype.updateTransform=function(){this.updateText(!0),n.prototype.updateTransform.call(this)},e.prototype.getBounds=function(t,r){return this.updateText(!0),-1===this._textureID&&(t=!1),n.prototype.getBounds.call(this,t,r)},e.prototype.getLocalBounds=function(t){return this.updateText(!0),n.prototype.getLocalBounds.call(this,t)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(t,r,i){var a=t.fill;if(!Array.isArray(a))return a;if(1===a.length)return a[0];var s,u=t.dropShadow?t.dropShadowDistance:0,d=t.padding||0,v=this.canvas.width/this._resolution-u-2*d,m=this.canvas.height/this._resolution-u-2*d,x=a.slice(),b=t.fillGradientStops.slice();if(!b.length)for(var S=x.length+1,A=1;A<S;++A)b.push(A/S);if(x.unshift(a[0]),b.unshift(0),x.push(a[a.length-1]),b.push(1),t.fillGradientType===Bo.LINEAR_VERTICAL){s=this.context.createLinearGradient(v/2,d,v/2,m+d);var M=i.fontProperties.fontSize+t.strokeThickness;for(A=0;A<r.length;A++){var F=i.lineHeight*(A-1)+M,$=i.lineHeight*A,mt=$;A>0&&F>$&&(mt=($+F)/2);var At=$+M,Gt=i.lineHeight*(A+1),vt=At;A+1<r.length&&Gt<At&&(vt=(At+Gt)/2);for(var Ct=(vt-mt)/m,Pt=0;Pt<x.length;Pt++){var Nt=Math.min(1,Math.max(0,mt/m+("number"==typeof b[Pt]?b[Pt]:Pt/x.length)*Ct));Nt=Number(Nt.toFixed(5)),s.addColorStop(Nt,x[Pt])}}}else{s=this.context.createLinearGradient(d,m/2,v+d,m/2);var kt=x.length+1,le=1;for(A=0;A<x.length;A++)s.addColorStop("number"==typeof b[A]?b[A]:le/kt,x[A]),le++}return s},e.prototype.destroy=function(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},Lf,t),n.prototype.destroy.call(this,t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var r=Dn(this.scale.x)||1;this.scale.x=r*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var r=Dn(this.scale.y)||1;this.scale.y=r*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){this._style=(t=t||{})instanceof Vi?t:new Vi(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.nextLineHeightBehavior=!1,e.experimentalLetterSpacing=!1,e}(Io);L.UPLOADS_PER_FRAME=4;var Tl=function(n,e){return(Tl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)},Hf=function(){function n(e){this.maxItemsPerFrame=e,this.itemsLeft=0}return n.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},n.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},n}();function Xf(n,e){var t=!1;if(n&&n._textures&&n._textures.length)for(var r=0;r<n._textures.length;r++)if(n._textures[r]instanceof he){var i=n._textures[r].baseTexture;-1===e.indexOf(i)&&(e.push(i),t=!0)}return t}function jf(n,e){if(n.baseTexture instanceof Et){var t=n.baseTexture;return-1===e.indexOf(t)&&e.push(t),!0}return!1}function Yf(n,e){if(n._texture&&n._texture instanceof he){var t=n._texture.baseTexture;return-1===e.indexOf(t)&&e.push(t),!0}return!1}function Zf(n,e){return e instanceof Cl&&(e.updateText(!0),!0)}function zf(n,e){if(e instanceof Vi){var t=e.toFontString();return Un.measureFont(t),!0}return!1}function Vf(n,e){if(n instanceof Cl){-1===e.indexOf(n.style)&&e.push(n.style),-1===e.indexOf(n)&&e.push(n);var t=n._texture.baseTexture;return-1===e.indexOf(t)&&e.push(t),!0}return!1}function Wf(n,e){return n instanceof Vi&&(-1===e.indexOf(n)&&e.push(n),!0)}var Jf=function(){function n(e){var t=this;this.limiter=new Hf(L.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){!t.queue||t.prepareItems()},this.registerFindHook(Vf),this.registerFindHook(Wf),this.registerFindHook(Xf),this.registerFindHook(jf),this.registerFindHook(Yf),this.registerUploadHook(Zf),this.registerUploadHook(zf)}return n.prototype.upload=function(e,t){var r=this;return"function"==typeof e&&(t=e,e=null),t&&$e("6.5.0","BasePrepare.upload callback is deprecated, use the return Promise instead."),new Promise(function(i){e&&r.add(e);var a=function(){null==t||t(),i()};r.queue.length?(r.completes.push(a),r.ticking||(r.ticking=!0,q.system.addOnce(r.tick,r,B.UTILITY))):a()})},n.prototype.tick=function(){setTimeout(this.delayedTick,0)},n.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],t=!1;if(e&&!e._destroyed)for(var r=0,i=this.uploadHooks.length;r<i;r++)if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)q.system.addOnce(this.tick,this,B.UTILITY);else{this.ticking=!1;var a=this.completes.slice(0);for(this.completes.length=0,r=0,i=a.length;r<i;r++)a[r]()}},n.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},n.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},n.prototype.add=function(e){for(var t=0,r=this.addHooks.length;t<r&&!this.addHooks[t](e,this.queue);t++);if(e instanceof f)for(t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this},n.prototype.destroy=function(){this.ticking&&q.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},n}();function Ju(n,e){return e instanceof Et&&(e._glTextures[n.CONTEXT_UID]||n.texture.bind(e),!0)}function $f(n,e){if(!(e instanceof Ia))return!1;var t=e.geometry;e.finishPoly(),t.updateBatches();for(var r=t.batches,i=0;i<r.length;i++){var a=r[i].style.texture;a&&Ju(n,a.baseTexture)}return t.batchable||n.geometry.bind(t,e._resolveDirectShader(n)),!0}function Qf(n,e){return n instanceof Ia&&(e.push(n),!0)}var qf=function(n){function e(t){var r=n.call(this,t)||this;return r.uploadHookHelper=r.renderer,r.registerFindHook(Qf),r.registerUploadHook(Ju),r.registerUploadHook($f),r}return function Gf(n,e){function t(){this.constructor=n}Tl(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,n),e.extension={name:"prepare",type:y.RendererPlugin},e}(Jf),Kf=(function(){function n(e){this.maxMilliseconds=e,this.frameStart=0}n.prototype.beginFrame=function(){this.frameStart=Date.now()},n.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds}}(),function(){function n(e,t,r){void 0===r&&(r=null),this.linkedSheets=[],this._texture=e instanceof he?e:null,this.baseTexture=e instanceof Et?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;var i=this.baseTexture.resource;this.resolution=this._updateResolution(r||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return n.prototype._updateResolution=function(e){void 0===e&&(e=null);var t=this.data.meta.scale,r=Fi(e,null);return null===r&&(r=void 0!==t?parseFloat(t):1),1!==r&&this.baseTexture.setResolution(r),r},n.prototype.parse=function(e){var t=this;return e&&$e("6.5.0","Spritesheet.parse callback is deprecated, use the return Promise instead."),new Promise(function(r){t._callback=function(i){null==e||e(i),r(i)},t._batchIndex=0,t._frameKeys.length<=n.BATCH_SIZE?(t._processFrames(0),t._processAnimations(),t._parseComplete()):t._nextBatch()})},n.prototype._processFrames=function(e){for(var t=e,r=n.BATCH_SIZE;t-e<r&&t<this._frameKeys.length;){var i=this._frameKeys[t],a=this._frames[i],s=a.frame;if(s){var u,d=null,v=!1!==a.trimmed&&a.sourceSize?a.sourceSize:a.frame,m=new Ce(0,0,Math.floor(v.w)/this.resolution,Math.floor(v.h)/this.resolution);u=a.rotated?new Ce(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):new Ce(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),!1!==a.trimmed&&a.spriteSourceSize&&(d=new Ce(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[i]=new he(this.baseTexture,u,m,d,a.rotated?2:0,a.anchor),he.addToCache(this.textures[i],i)}t++}},n.prototype._processAnimations=function(){var e=this.data.animations||{};for(var t in e){this.animations[t]=[];for(var r=0;r<e[t].length;r++)this.animations[t].push(this.textures[e[t][r]])}},n.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},n.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*n.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*n.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},n.prototype.destroy=function(e){var t;for(var r in void 0===e&&(e=!1),this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(null===(t=this._texture)||void 0===t||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]},n.BATCH_SIZE=1e3,n}()),td=function(){function n(){}return n.use=function(e,t){var r,i,a=this,s=e.name+"_image";if(e.data&&e.type===Qe.TYPE.JSON&&e.data.frames&&!a.resources[s]){var u=null===(i=null===(r=e.data)||void 0===r?void 0:r.meta)||void 0===i?void 0:i.related_multi_packs;if(Array.isArray(u))for(var d=function(A){if("string"!=typeof A)return"continue";var M=A.replace(".json",""),F=xe.resolve(e.url.replace(a.baseUrl,""),A);if(a.resources[M]||Object.values(a.resources).some(function(mt){return xe.format(xe.parse(mt.url))===F}))return"continue";a.add(M,F,{crossOrigin:e.crossOrigin,loadType:Qe.LOAD_TYPE.XHR,xhrType:Qe.XHR_RESPONSE_TYPE.JSON,parentResource:e,metadata:e.metadata})},v=0,m=u;v<m.length;v++)d(m[v]);var b={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},S=n.getResourcePath(e,a.baseUrl);a.add(s,S,b,function(M){if(M.error)t(M.error);else{var F=new Kf(M.texture,e.data,e.url);F.parse().then(function(){e.spritesheet=F,e.textures=F.textures,t()})}})}else t()},n.getResourcePath=function(e,t){return e.isDataUrl?e.data.meta.image:xe.resolve(e.url.replace(t,""),e.data.meta.image)},n.extension=y.Loader,n}(),wl=function(n,e){return(wl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)};function $u(n,e){function t(){this.constructor=n}wl(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var Da=new Oe,Qu=(function(n){function e(t,r,i){void 0===r&&(r=100),void 0===i&&(i=100);var a=n.call(this,t)||this;return a.tileTransform=new ba,a._width=r,a._height=i,a.uvMatrix=a.texture.uvMatrix||new Zs(t),a.pluginName="tilingSprite",a.uvRespectAnchor=!1,a}$u(e,n),Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var r=this._texture;!r||!r.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){this._bounds.addFrame(this.transform,this._width*-this._anchor._x,this._height*-this._anchor._y,this._width*(1-this._anchor._x),this._height*(1-this._anchor._y))},e.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Ce),t=this._localBoundsRect),this._bounds.getRectangle(t)):n.prototype.getLocalBounds.call(this,t)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Da);var r=this._width,i=this._height,a=-r*this.anchor._x;if(Da.x>=a&&Da.x<a+r){var s=-i*this.anchor._y;if(Da.y>=s&&Da.y<s+i)return!0}return!1},e.prototype.destroy=function(t){n.prototype.destroy.call(this,t),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,r){return new e(t instanceof he?t:he.from(t,r),r.width,r.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0})}(Io),"#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n"),Ps=new ze,od=function(n){function e(t){var r=n.call(this,t)||this;return t.runners.contextChange.add(r),r.quad=new jl,r.state=Xi.for2d(),r}return $u(e,n),e.prototype.contextChange=function(){var t=this.renderer,r={globals:t.globalUniforms};this.simpleShader=ui.from(Qu,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",r),this.shader=t.context.webGLVersion>1?ui.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",r):ui.from(Qu,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",r)},e.prototype.render=function(t){var r=this.renderer,i=this.quad,a=i.vertices;a[0]=a[6]=t._width*-t.anchor.x,a[1]=a[3]=t._height*-t.anchor.y,a[2]=a[4]=t._width*(1-t.anchor.x),a[5]=a[7]=t._height*(1-t.anchor.y);var s=t.uvRespectAnchor?t.anchor.x:0,u=t.uvRespectAnchor?t.anchor.y:0;(a=i.uvs)[0]=a[6]=-s,a[1]=a[3]=-u,a[2]=a[4]=1-s,a[5]=a[7]=1-u,i.invalidate();var d=t._texture,v=d.baseTexture,m=v.alphaMode>0,x=t.tileTransform.localTransform,b=t.uvMatrix,S=v.isPowerOfTwo&&d.frame.width===v.width&&d.frame.height===v.height;S&&(v._glTextures[r.CONTEXT_UID]?S=v.wrapMode!==it.CLAMP:v.wrapMode===it.CLAMP&&(v.wrapMode=it.REPEAT));var A=S?this.simpleShader:this.shader,M=d.width,F=d.height,$=t._width,mt=t._height;Ps.set(x.a*M/$,x.b*M/mt,x.c*F/$,x.d*F/mt,x.tx/$,x.ty/mt),Ps.invert(),S?Ps.prepend(b.mapCoord):(A.uniforms.uMapCoord=b.mapCoord.toArray(!0),A.uniforms.uClampFrame=b.uClampFrame,A.uniforms.uClampOffset=b.uClampOffset),A.uniforms.uTransform=Ps.toArray(!0),A.uniforms.uColor=pa(t.tint,t.worldAlpha,A.uniforms.uColor,m),A.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),A.uniforms.uSampler=d,r.shader.bind(A),r.geometry.bind(i),this.state.blendMode=da(t.blendMode,m),r.state.set(this.state),r.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e.extension={name:"tilingSprite",type:y.RendererPlugin},e}(ls),Sl=function(n,e){return(Sl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)};function Pl(n,e){function t(){this.constructor=n}Sl(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var ad=function(){function n(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return n.prototype.update=function(e){if(e||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}},n}(),El=new Oe,qu=new oi,Fa=function(n){function e(t,r,i,a){void 0===a&&(a=X.TRIANGLES);var s=n.call(this)||this;return s.geometry=t,s.shader=r,s.state=i||Xi.for2d(),s.drawMode=a,s.start=0,s.size=0,s.uvs=null,s.indices=null,s.vertexData=new Float32Array(1),s.vertexDirty=-1,s._transformID=-1,s._roundPixels=L.ROUND_PIXELS,s.batchUvs=null,s}return Pl(e,n),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},set:function(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){this.shader.batchable&&this.drawMode===X.TRIANGLES&&this.geometry.buffers[0].data.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var r=this.shader;r.alpha=this.worldAlpha,r.update&&r.update(),t.batch.flush(),r.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(r),t.state.set(this.state),t.geometry.bind(this.geometry,r),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var r=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=r.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;var a=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[a]),t.plugins[a].render(this)},e.prototype.calculateVertices=function(){var r=this.geometry.buffers[0],i=r.data,a=r._updateID;if(a!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==i.length&&(this.vertexData=new Float32Array(i.length));for(var s=this.transform.worldTransform,u=s.a,d=s.b,v=s.c,m=s.d,x=s.tx,b=s.ty,S=this.vertexData,A=0;A<S.length/2;A++){var M=i[2*A],F=i[2*A+1];S[2*A]=u*M+v*F+x,S[2*A+1]=d*M+m*F+b}if(this._roundPixels){var $=L.RESOLUTION;for(A=0;A<S.length;++A)S[A]=Math.round((S[A]*$|0)/$)}this.vertexDirty=a}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1],r=this.shader;r.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new ad(t,r.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,El);for(var r=this.geometry.getBuffer("aVertexPosition").data,i=qu.points,a=this.geometry.getIndex().data,s=a.length,u=4===this.drawMode?3:1,d=0;d+2<s;d+=u){var v=2*a[d],m=2*a[d+1],x=2*a[d+2];if(i[0]=r[v],i[1]=r[v+1],i[2]=r[m],i[3]=r[m+1],i[4]=r[x],i[5]=r[x+1],qu.contains(El.x,El.y))return!0}return!1},e.prototype.destroy=function(t){n.prototype.destroy.call(this,t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(f),Na=function(n){function e(t,r){var i=this,a={uSampler:t,alpha:1,uTextureMatrix:ze.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r)).uniforms&&Object.assign(a,r.uniforms),(i=n.call(this,r.program||wa.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),a)||this)._colorDirty=!1,i.uvMatrix=new Zs(t),i.batchable=void 0===r.program,i.pluginName=r.pluginName,i.tint=r.tint,i.alpha=r.alpha,i}return Pl(e,n),Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){this._colorDirty&&(this._colorDirty=!1,pa(this._tint,this._alpha,this.uniforms.uColor,this.texture.baseTexture.alphaMode)),this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(ui),Es=function(n){function e(t,r,i){var a=n.call(this)||this,s=new cr(t),u=new cr(r,!0),d=new cr(i,!0,!0);return a.addAttribute("aVertexPosition",s,2,!1,k.FLOAT).addAttribute("aTextureCoord",u,2,!1,k.FLOAT).addIndex(d),a._updateId=-1,a}return Pl(e,n),Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(xa),Ol=function(n,e){return(Ol=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)},Os=function n(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]},hd=function(){function n(){}return n.test=function(e){return"string"==typeof e&&0===e.indexOf("info face=")},n.parse=function(e){var t=e.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var i in t){var a=t[i].match(/^[a-z]+/gm)[0],s=t[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),u={};for(var d in s){var v=s[d].split("="),m=v[0],x=v[1].replace(/"/gm,""),b=parseFloat(x),S=isNaN(b)?x:b;u[m]=S}r[a].push(u)}var A=new Os;return r.info.forEach(function(M){return A.info.push({face:M.face,size:parseInt(M.size,10)})}),r.common.forEach(function(M){return A.common.push({lineHeight:parseInt(M.lineHeight,10)})}),r.page.forEach(function(M){return A.page.push({id:parseInt(M.id,10),file:M.file})}),r.char.forEach(function(M){return A.char.push({id:parseInt(M.id,10),page:parseInt(M.page,10),x:parseInt(M.x,10),y:parseInt(M.y,10),width:parseInt(M.width,10),height:parseInt(M.height,10),xoffset:parseInt(M.xoffset,10),yoffset:parseInt(M.yoffset,10),xadvance:parseInt(M.xadvance,10)})}),r.kerning.forEach(function(M){return A.kerning.push({first:parseInt(M.first,10),second:parseInt(M.second,10),amount:parseInt(M.amount,10)})}),r.distanceField.forEach(function(M){return A.distanceField.push({distanceRange:parseInt(M.distanceRange,10),fieldType:M.fieldType})}),A},n}(),Al=function(){function n(){}return n.test=function(e){return e instanceof XMLDocument&&e.getElementsByTagName("page").length&&null!==e.getElementsByTagName("info")[0].getAttribute("face")},n.parse=function(e){for(var t=new Os,r=e.getElementsByTagName("info"),i=e.getElementsByTagName("common"),a=e.getElementsByTagName("page"),s=e.getElementsByTagName("char"),u=e.getElementsByTagName("kerning"),d=e.getElementsByTagName("distanceField"),v=0;v<r.length;v++)t.info.push({face:r[v].getAttribute("face"),size:parseInt(r[v].getAttribute("size"),10)});for(v=0;v<i.length;v++)t.common.push({lineHeight:parseInt(i[v].getAttribute("lineHeight"),10)});for(v=0;v<a.length;v++)t.page.push({id:parseInt(a[v].getAttribute("id"),10)||0,file:a[v].getAttribute("file")});for(v=0;v<s.length;v++){var m=s[v];t.char.push({id:parseInt(m.getAttribute("id"),10),page:parseInt(m.getAttribute("page"),10)||0,x:parseInt(m.getAttribute("x"),10),y:parseInt(m.getAttribute("y"),10),width:parseInt(m.getAttribute("width"),10),height:parseInt(m.getAttribute("height"),10),xoffset:parseInt(m.getAttribute("xoffset"),10),yoffset:parseInt(m.getAttribute("yoffset"),10),xadvance:parseInt(m.getAttribute("xadvance"),10)})}for(v=0;v<u.length;v++)t.kerning.push({first:parseInt(u[v].getAttribute("first"),10),second:parseInt(u[v].getAttribute("second"),10),amount:parseInt(u[v].getAttribute("amount"),10)});for(v=0;v<d.length;v++)t.distanceField.push({fieldType:d[v].getAttribute("fieldType"),distanceRange:parseInt(d[v].getAttribute("distanceRange"),10)});return t},n}(),cd=function(){function n(){}return n.test=function(e){if("string"==typeof e&&e.indexOf("<font>")>-1){var t=(new globalThis.DOMParser).parseFromString(e,"text/xml");return Al.test(t)}return!1},n.parse=function(e){var t=(new globalThis.DOMParser).parseFromString(e,"text/xml");return Al.parse(t)},n}(),Ml=[hd,Al,cd];function Ku(n){for(var e=0;e<Ml.length;e++)if(Ml[e].test(n))return Ml[e];return null}function dd(n,e,t,r,i,a,s){var u=t.text,d=t.fontProperties;e.translate(r,i),e.scale(a,a);var v=s.strokeThickness/2,m=-s.strokeThickness/2;if(e.font=s.toFontString(),e.lineWidth=s.strokeThickness,e.textBaseline=s.textBaseline,e.lineJoin=s.lineJoin,e.miterLimit=s.miterLimit,e.fillStyle=function fd(n,e,t,r,i,a){var s=t.fill;if(!Array.isArray(s))return s;if(1===s.length)return s[0];var u,d=t.dropShadow?t.dropShadowDistance:0,v=t.padding||0,m=n.width/r-d-2*v,x=n.height/r-d-2*v,b=s.slice(),S=t.fillGradientStops.slice();if(!S.length)for(var A=b.length+1,M=1;M<A;++M)S.push(M/A);if(b.unshift(s[0]),S.unshift(0),b.push(s[s.length-1]),S.push(1),t.fillGradientType===Bo.LINEAR_VERTICAL){u=e.createLinearGradient(m/2,v,m/2,x+v);var F=0,mt=(a.fontProperties.fontSize+t.strokeThickness)/x;for(M=0;M<i.length;M++)for(var At=a.lineHeight*M,Gt=0;Gt<b.length;Gt++){var Pt=Math.max(F,At/x+("number"==typeof S[Gt]?S[Gt]:Gt/b.length)*mt);Pt=Math.min(Pt,1),u.addColorStop(Pt,b[Gt]),F=Pt}}else{u=e.createLinearGradient(v,x/2,m+v,x/2);var oe=b.length+1,Nt=1;for(M=0;M<b.length;M++)u.addColorStop("number"==typeof S[M]?S[M]:Nt/oe,b[M]),Nt++}return u}(n,e,s,a,[u],t),e.strokeStyle=s.stroke,s.dropShadow){var x=s.dropShadowColor,b=Zr("number"==typeof x?x:Ii(x)),S=s.dropShadowBlur*a,A=s.dropShadowDistance*a;e.shadowColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+s.dropShadowAlpha+")",e.shadowBlur=S,e.shadowOffsetX=Math.cos(s.dropShadowAngle)*A,e.shadowOffsetY=Math.sin(s.dropShadowAngle)*A}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;s.stroke&&s.strokeThickness&&e.strokeText(u,v,m+t.lineHeight-d.descent),s.fill&&e.fillText(u,v,m+t.lineHeight-d.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function th(n){return Array.from?Array.from(n):n.split("")}function As(n){return n.codePointAt?n.codePointAt(0):n.charCodeAt(0)}var fi=function(){function n(e,t,r){var i,a,s=e.info[0],u=e.common[0],v=e.distanceField[0],m=Fi(e.page[0].file),x={};this._ownsTextures=r,this.font=s.face,this.size=s.size,this.lineHeight=u.lineHeight/m,this.chars={},this.pageTextures=x;for(var b=0;b<e.page.length;b++){var S=e.page[b];x[A=S.id]=t instanceof Array?t[b]:t[S.file],(null==v?void 0:v.fieldType)&&"none"!==v.fieldType&&(x[A].baseTexture.alphaMode=St.NO_PREMULTIPLIED_ALPHA,x[A].baseTexture.mipmap=ct.OFF)}for(b=0;b<e.char.length;b++){var F=e.char[b],A=F.id,$=F.page,mt=e.char[b],At=mt.x,Gt=mt.y,vt=mt.width,Ct=mt.height,Pt=mt.xoffset,oe=mt.yoffset,Nt=mt.xadvance;Pt/=m,oe/=m,Nt/=m;var kt=new Ce((At/=m)+x[$].frame.x/m,(Gt/=m)+x[$].frame.y/m,vt/=m,Ct/=m);this.chars[A]={xOffset:Pt,yOffset:oe,xAdvance:Nt,kerning:{},texture:new he(x[$].baseTexture,kt),page:$}}for(b=0;b<e.kerning.length;b++){var le=e.kerning[b],pe=le.first,Pe=le.second,ir=le.amount;pe/=m,ir/=m,this.chars[Pe/=m]&&(this.chars[Pe].kerning[pe]=ir)}this.distanceFieldRange=null==v?void 0:v.distanceRange,this.distanceFieldType=null!==(a=null===(i=null==v?void 0:v.fieldType)||void 0===i?void 0:i.toLowerCase())&&void 0!==a?a:"none"}return n.prototype.destroy=function(){for(var e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(var e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null},n.install=function(e,t,r){var i;if(e instanceof Os)i=e;else{var a=Ku(e);if(!a)throw new Error("Unrecognized data format for font.");i=a.parse(e)}t instanceof he&&(t=[t]);var s=new n(i,t,r);return n.available[s.font]=s,s},n.uninstall=function(e){var t=n.available[e];if(!t)throw new Error("No font found named '"+e+"'");t.destroy(),delete n.available[e]},n.from=function(e,t,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},n.defaultOptions,r),s=i.padding,u=i.resolution,d=i.textureWidth,v=i.textureHeight,m=function pd(n){"string"==typeof n&&(n=[n]);for(var e=[],t=0,r=n.length;t<r;t++){var i=n[t];if(Array.isArray(i)){if(2!==i.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+i.length+".");var a=i[0].charCodeAt(0),s=i[1].charCodeAt(0);if(s<a)throw new Error("[BitmapFont]: Invalid character range.");for(var u=a,d=s;u<=d;u++)e.push(String.fromCharCode(u))}else e.push.apply(e,th(i))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(i.chars),x=t instanceof Vi?t:new Vi(t),b=d,S=new Os;S.info[0]={face:x.fontFamily,size:x.fontSize},S.common[0]={lineHeight:x.fontSize};for(var F,$,mt,A=0,M=0,At=0,Gt=[],vt=0;vt<m.length;vt++){F||((F=L.ADAPTER.createCanvas()).width=d,F.height=v,$=F.getContext("2d"),mt=new Et(F,{resolution:u}),Gt.push(new he(mt)),S.page.push({id:Gt.length-1,file:""}));var Ct=m[vt],Pt=Un.measureText(Ct,x,!1,F),oe=Pt.width,Nt=Math.ceil(Pt.height),kt=Math.ceil(("italic"===x.fontStyle?2:1)*oe);if(M>=v-Nt*u){if(0===M)throw new Error("[BitmapFont] textureHeight "+v+"px is too small (fontFamily: '"+x.fontFamily+"', fontSize: "+x.fontSize+"px, char: '"+Ct+"')");--vt,F=null,$=null,mt=null,M=0,A=0,At=0}else if(At=Math.max(Nt+Pt.fontProperties.descent,At),kt*u+A>=b){if(0===A)throw new Error("[BitmapFont] textureWidth "+d+"px is too small (fontFamily: '"+x.fontFamily+"', fontSize: "+x.fontSize+"px, char: '"+Ct+"')");--vt,M+=At*u,M=Math.ceil(M),A=0,At=0}else{dd(F,$,Pt,A,M,u,x);var le=As(Pt.text);S.char.push({id:le,page:Gt.length-1,x:A/u,y:M/u,width:kt,height:Nt,xoffset:0,yoffset:0,xadvance:Math.ceil(oe-(x.dropShadow?x.dropShadowDistance:0)-(x.stroke?x.strokeThickness:0))}),A+=(kt+2*s)*u,A=Math.ceil(A)}}if(!(null==r?void 0:r.skipKerning)){vt=0;for(var pe=m.length;vt<pe;vt++)for(var Pe=m[vt],ir=0;ir<pe;ir++){var ae=m[ir],se=$.measureText(Pe).width,we=$.measureText(ae).width,Re=$.measureText(Pe+ae).width-(se+we);Re&&S.kerning.push({first:As(Pe),second:As(ae),amount:Re})}}var lr=new n(S,Gt,!0);return void 0!==n.available[e]&&n.uninstall(e),n.available[e]=lr,lr},n.ALPHA=[["a","z"],["A","Z"]," "],n.NUMERIC=[["0","9"]],n.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],n.ASCII=[[" ","~"]],n.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:n.ALPHANUMERIC},n.available={},n}(),eh=[],rh=[],nh=[],gd=(function(n){function e(t,r){void 0===r&&(r={});var i=n.call(this)||this;i._tint=16777215;var a=Object.assign({},e.styleDefaults,r),s=a.align,u=a.tint,d=a.maxWidth,v=a.letterSpacing,m=a.fontName,x=a.fontSize;if(!fi.available[m])throw new Error('Missing BitmapFont "'+m+'"');return i._activePagesMeshData=[],i._textWidth=0,i._textHeight=0,i._align=s,i._tint=u,i._font=void 0,i._fontName=m,i._fontSize=x,i.text=t,i._maxWidth=d,i._maxLineHeight=0,i._letterSpacing=v,i._anchor=new yn(function(){i.dirty=!0},i,0,0),i._roundPixels=L.ROUND_PIXELS,i.dirty=!0,i._resolution=L.RESOLUTION,i._autoResolution=!0,i._textureCache={},i}(function ud(n,e){function t(){this.constructor=n}Ol(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)})(e,n),e.prototype.updateText=function(){for(var t,r=fi.available[this._fontName],i=this.fontSize,a=i/r.size,s=new Oe,u=[],d=[],v=[],x=th(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),b=this._maxWidth*r.size/i,S="none"===r.distanceFieldType?eh:rh,A=null,M=0,F=0,$=0,mt=-1,At=0,Gt=0,vt=0,Ct=0,Pt=0;Pt<x.length;Pt++){var Nt=As(oe=x[Pt]);if(/(?:\s)/.test(oe)&&(mt=Pt,At=M,Ct++),"\r"!==oe&&"\n"!==oe){var kt=r.chars[Nt];if(kt){A&&kt.kerning[A]&&(s.x+=kt.kerning[A]);var le=nh.pop()||{texture:he.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Oe};le.texture=kt.texture,le.line=$,le.charCode=Nt,le.position.x=s.x+kt.xOffset+this._letterSpacing/2,le.position.y=s.y+kt.yOffset,le.prevSpaces=Ct,u.push(le),M=le.position.x+Math.max(kt.xAdvance-kt.xOffset,kt.texture.orig.width),s.x+=kt.xAdvance+this._letterSpacing,vt=Math.max(vt,kt.yOffset+kt.texture.height),A=Nt,-1!==mt&&b>0&&s.x>b&&(Bn(u,1+mt-++Gt,1+Pt-mt),Pt=mt,mt=-1,d.push(At),v.push(u.length>0?u[u.length-1].prevSpaces:0),F=Math.max(F,At),$++,s.x=0,s.y+=r.lineHeight,A=null,Ct=0)}}else d.push(M),v.push(-1),F=Math.max(F,M),++$,++Gt,s.x=0,s.y+=r.lineHeight,A=null,Ct=0}var pe=x[x.length-1];"\r"!==pe&&"\n"!==pe&&(/(?:\s)/.test(pe)&&(M=At),d.push(M),F=Math.max(F,M),v.push(-1));var Pe=[];for(Pt=0;Pt<=$;Pt++){var ir=0;"right"===this._align?ir=F-d[Pt]:"center"===this._align?ir=(F-d[Pt])/2:"justify"===this._align&&(ir=v[Pt]<0?0:(F-d[Pt])/v[Pt]),Pe.push(ir)}var ae=u.length,se={},we=[],Pr=this._activePagesMeshData;for(S.push.apply(S,Pr),Pt=0;Pt<ae;Pt++){var lr=(Re=u[Pt].texture).baseTexture.uid;if(!se[lr]){if(!(de=S.pop())){var Rs=new Es,di=void 0,qn=void 0;"none"===r.distanceFieldType?(di=new Na(he.EMPTY),qn=I.NORMAL):(di=new Na(he.EMPTY,{program:wa.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n  if (median < 0.01) {\r\n    alpha = 0.0;\r\n  } else if (median > 0.99) {\r\n    alpha = 1.0;\r\n  }\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),uniforms:{uFWidth:0}}),qn=I.NORMAL_NPM);var Ua=new Fa(Rs,di);Ua.blendMode=qn,de={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:Ua,vertices:null,uvs:null,indices:null}}de.index=0,de.indexCount=0,de.vertexCount=0,de.uvsCount=0,de.total=0;var Fo=this._textureCache;Fo[lr]=Fo[lr]||new he(Re.baseTexture),de.mesh.texture=Fo[lr],de.mesh.tint=this._tint,we.push(de),se[lr]=de}se[lr].total++}for(Pt=0;Pt<Pr.length;Pt++)-1===we.indexOf(Pr[Pt])&&this.removeChild(Pr[Pt].mesh);for(Pt=0;Pt<we.length;Pt++)we[Pt].mesh.parent!==this&&this.addChild(we[Pt].mesh);for(var Pt in this._activePagesMeshData=we,se){var kn=(de=se[Pt]).total;if(!((null===(t=de.indices)||void 0===t?void 0:t.length)>6*kn)||de.vertices.length<2*Fa.BATCHABLE_SIZE)de.vertices=new Float32Array(8*kn),de.uvs=new Float32Array(8*kn),de.indices=new Uint16Array(6*kn);else for(var Uo=de.vertices,Cn=4*de.total*2;Cn<Uo.length;Cn++)Uo[Cn]=0;de.mesh.size=6*kn}for(Pt=0;Pt<ae;Pt++){var oe,Tn=(oe=u[Pt]).position.x+Pe[oe.line]*("justify"===this._align?oe.prevSpaces:1);this._roundPixels&&(Tn=Math.round(Tn));var Re,an=Tn*a,sn=oe.position.y*a,Ge=se[(Re=oe.texture).baseTexture.uid],Wi=Re.frame,Ln=Re._uvs,Ie=Ge.index++;Ge.indices[6*Ie+0]=0+4*Ie,Ge.indices[6*Ie+1]=1+4*Ie,Ge.indices[6*Ie+2]=2+4*Ie,Ge.indices[6*Ie+3]=0+4*Ie,Ge.indices[6*Ie+4]=2+4*Ie,Ge.indices[6*Ie+5]=3+4*Ie,Ge.vertices[8*Ie+0]=an,Ge.vertices[8*Ie+1]=sn,Ge.vertices[8*Ie+2]=an+Wi.width*a,Ge.vertices[8*Ie+3]=sn,Ge.vertices[8*Ie+4]=an+Wi.width*a,Ge.vertices[8*Ie+5]=sn+Wi.height*a,Ge.vertices[8*Ie+6]=an,Ge.vertices[8*Ie+7]=sn+Wi.height*a,Ge.uvs[8*Ie+0]=Ln.x0,Ge.uvs[8*Ie+1]=Ln.y0,Ge.uvs[8*Ie+2]=Ln.x1,Ge.uvs[8*Ie+3]=Ln.y1,Ge.uvs[8*Ie+4]=Ln.x2,Ge.uvs[8*Ie+5]=Ln.y2,Ge.uvs[8*Ie+6]=Ln.x3,Ge.uvs[8*Ie+7]=Ln.y3}for(var Pt in this._textWidth=F*a,this._textHeight=(s.y+r.lineHeight)*a,se){var de=se[Pt];if(0!==this.anchor.x||0!==this.anchor.y)for(var Gn=0,ko=this._textWidth*this.anchor.x,Is=this._textHeight*this.anchor.y,sh=0;sh<de.total;sh++)de.vertices[Gn++]-=ko,de.vertices[Gn++]-=Is,de.vertices[Gn++]-=ko,de.vertices[Gn++]-=Is,de.vertices[Gn++]-=ko,de.vertices[Gn++]-=Is,de.vertices[Gn++]-=ko,de.vertices[Gn++]-=Is;this._maxLineHeight=vt*a;var lh=de.mesh.geometry.getBuffer("aVertexPosition"),uh=de.mesh.geometry.getBuffer("aTextureCoord"),hh=de.mesh.geometry.getIndex();lh.data=de.vertices,uh.data=de.uvs,hh.data=de.indices,lh.update(),uh.update(),hh.update()}for(Pt=0;Pt<u.length;Pt++)nh.push(u[Pt]);this._font=r,this.dirty=!1},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);var r=fi.available[this._fontName],i=r.distanceFieldRange,s=r.size;if("none"!==r.distanceFieldType)for(var u=this.worldTransform,d=u.a,v=u.b,m=u.c,x=u.d,b=Math.sqrt(d*d+v*v),S=Math.sqrt(m*m+x*x),A=(Math.abs(b)+Math.abs(S))/2,M=this.fontSize/s,F=0,$=this._activePagesMeshData;F<$.length;F++)$[F].mesh.shader.uniforms.uFWidth=A*i*M*this._resolution;n.prototype._render.call(this,t)},e.prototype.getLocalBounds=function(){return this.validate(),n.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){var t=fi.available[this._fontName];if(!t)throw new Error('Missing BitmapFont "'+this._fontName+'"');this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var r=0;r<this._activePagesMeshData.length;r++)this._activePagesMeshData[r].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!fi.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){var t;return null!==(t=this._fontSize)&&void 0!==t?t:fi.available[this._fontName].size},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.prototype.destroy=function(t){var r=this._textureCache,a="none"===fi.available[this._fontName].distanceFieldType?eh:rh;a.push.apply(a,this._activePagesMeshData);for(var s=0,u=this._activePagesMeshData;s<u.length;s++)this.removeChild(u[s].mesh);for(var v in this._activePagesMeshData=[],a.filter(function(x){return r[x.mesh.texture.baseTexture.uid]}).forEach(function(x){x.mesh.texture=he.EMPTY}),r)r[v].destroy(),delete r[v];this._font=null,this._textureCache=null,n.prototype.destroy.call(this,t)},e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0}}(f),function(){function n(){}return n.add=function(){Qe.setExtensionXhrType("fnt",Qe.XHR_RESPONSE_TYPE.TEXT)},n.use=function(e,t){var r=Ku(e.data);if(r)for(var i=n.getBaseUrl(this,e),a=r.parse(e.data),s={},u=function(M){s[M.metadata.pageFile]=M.texture,Object.keys(s).length===a.page.length&&(e.bitmapFont=fi.install(a,s,!0),t())},d=0;d<a.page.length;++d){var v=a.page[d].file,m=i+v,x=!1;for(var b in this.resources){var S=this.resources[b];if(S.url===m){S.metadata.pageFile=v,S.texture?u(S):S.onAfterMiddleware.add(u),x=!0;break}}if(!x){var A={crossOrigin:e.crossOrigin,loadType:Qe.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:v},e.metadata.imageMetadata),parentResource:e};this.add(m,A,u)}}else t()},n.getBaseUrl=function(e,t){var r=t.isDataUrl?"":n.dirname(t.url);return t.isDataUrl&&("."===r&&(r=""),e.baseUrl&&r&&"/"===e.baseUrl.charAt(e.baseUrl.length-1)&&(r+="/")),(r=r.replace(e.baseUrl,""))&&"/"!==r.charAt(r.length-1)&&(r+="/"),r},n.dirname=function(e){var t=e.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return t===e?".":""===t?"/":t},n.extension=y.Loader,n}()),Rl=function(n,e){return(Rl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)},bd=function(n){function e(t){void 0===t&&(t=1);var r=n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return r.alpha=t,r}return function md(n,e){function t(){this.constructor=n}Rl(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,n),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(hi),Il=function(n,e){return(Il=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)};function ih(n,e){function t(){this.constructor=n}Il(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var Td={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},wd=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n"),Bl=function(n){function e(t,r,i,a,s){void 0===r&&(r=8),void 0===i&&(i=4),void 0===a&&(a=L.FILTER_RESOLUTION),void 0===s&&(s=5);var u=this,d=function Cd(n,e){var a,t=Math.ceil(n/2),r="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",i="";a=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<n;s++){var u=a.replace("%index%",s.toString());i+=u=u.replace("%sampleIndex%",s-(t-1)+".0"),i+="\n"}return(r=r.replace("%blur%",i)).replace("%size%",n.toString())}(s,t),v=function Sd(n){for(var s,e=Td[n],t=e.length,r=wd,i="",u=0;u<n;u++){var d="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",u.toString());s=u,u>=t&&(s=n-u-1),i+=d=d.replace("%value%",e[s].toString()),i+="\n"}return(r=r.replace("%blur%",i)).replace("%size%",n.toString())}(s);return(u=n.call(this,d,v)||this).horizontal=t,u.resolution=a,u._quality=0,u.quality=i,u.blur=r,u}return ih(e,n),e.prototype.apply=function(t,r,i,a){if(this.uniforms.strength=i?this.horizontal?1/i.width*(i.width/r.width):1/i.height*(i.height/r.height):this.horizontal?1/t.renderer.width*(t.renderer.width/r.width):1/t.renderer.height*(t.renderer.height/r.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,r,i,a);else{var s=t.getFilterTexture(),u=t.renderer,d=r,v=s;this.state.blend=!1,t.applyFilter(this,d,v,gt.CLEAR);for(var m=1;m<this.passes-1;m++){t.bindAndClear(d,gt.BLIT),this.uniforms.uSampler=v;var x=v;v=d,d=x,u.shader.bind(this),u.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,v,i,a),t.returnFilterTexture(s)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),e}(hi),Pd=function(n){function e(t,r,i,a){void 0===t&&(t=8),void 0===r&&(r=4),void 0===i&&(i=L.FILTER_RESOLUTION),void 0===a&&(a=5);var s=n.call(this)||this;return s.blurXFilter=new Bl(!0,t,r,i,a),s.blurYFilter=new Bl(!1,t,r,i,a),s.resolution=i,s.quality=r,s.blur=t,s.repeatEdgePixels=!1,s}return ih(e,n),e.prototype.apply=function(t,r,i,a){var s=Math.abs(this.blurXFilter.strength),u=Math.abs(this.blurYFilter.strength);if(s&&u){var d=t.getFilterTexture();this.blurXFilter.apply(t,r,d,gt.CLEAR),this.blurYFilter.apply(t,d,i,a),t.returnFilterTexture(d)}else u?this.blurYFilter.apply(t,r,i,a):this.blurXFilter.apply(t,r,i,a)},e.prototype.updatePadding=function(){this.padding=this._repeatEdgePixels?0:2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0}),e}(hi),Dl=function(n,e){return(Dl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)},Fl=function(n){function e(){var t=this,r={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(t=n.call(this,yu,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",r)||this).alpha=1,t}return function Ed(n,e){function t(){this.constructor=n}Dl(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,n),e.prototype._loadMatrix=function(t,r){void 0===r&&(r=!1);var i=t;r&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i},e.prototype._multiply=function(t,r,i){return t[0]=r[0]*i[0]+r[1]*i[5]+r[2]*i[10]+r[3]*i[15],t[1]=r[0]*i[1]+r[1]*i[6]+r[2]*i[11]+r[3]*i[16],t[2]=r[0]*i[2]+r[1]*i[7]+r[2]*i[12]+r[3]*i[17],t[3]=r[0]*i[3]+r[1]*i[8]+r[2]*i[13]+r[3]*i[18],t[4]=r[0]*i[4]+r[1]*i[9]+r[2]*i[14]+r[3]*i[19]+r[4],t[5]=r[5]*i[0]+r[6]*i[5]+r[7]*i[10]+r[8]*i[15],t[6]=r[5]*i[1]+r[6]*i[6]+r[7]*i[11]+r[8]*i[16],t[7]=r[5]*i[2]+r[6]*i[7]+r[7]*i[12]+r[8]*i[17],t[8]=r[5]*i[3]+r[6]*i[8]+r[7]*i[13]+r[8]*i[18],t[9]=r[5]*i[4]+r[6]*i[9]+r[7]*i[14]+r[8]*i[19]+r[9],t[10]=r[10]*i[0]+r[11]*i[5]+r[12]*i[10]+r[13]*i[15],t[11]=r[10]*i[1]+r[11]*i[6]+r[12]*i[11]+r[13]*i[16],t[12]=r[10]*i[2]+r[11]*i[7]+r[12]*i[12]+r[13]*i[17],t[13]=r[10]*i[3]+r[11]*i[8]+r[12]*i[13]+r[13]*i[18],t[14]=r[10]*i[4]+r[11]*i[9]+r[12]*i[14]+r[13]*i[19]+r[14],t[15]=r[15]*i[0]+r[16]*i[5]+r[17]*i[10]+r[18]*i[15],t[16]=r[15]*i[1]+r[16]*i[6]+r[17]*i[11]+r[18]*i[16],t[17]=r[15]*i[2]+r[16]*i[7]+r[17]*i[12]+r[18]*i[17],t[18]=r[15]*i[3]+r[16]*i[8]+r[17]*i[13]+r[18]*i[18],t[19]=r[15]*i[4]+r[16]*i[9]+r[17]*i[14]+r[18]*i[19]+r[19],t},e.prototype._colorMatrix=function(t){var r=new Float32Array(t);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r},e.prototype.brightness=function(t,r){this._loadMatrix([t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0],r)},e.prototype.tint=function(t,r){this._loadMatrix([(t>>16&255)/255,0,0,0,0,0,(t>>8&255)/255,0,0,0,0,0,(255&t)/255,0,0,0,0,0,1,0],r)},e.prototype.greyscale=function(t,r){this._loadMatrix([t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0],r)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,r){t=(t||0)/180*Math.PI;var i=Math.cos(t),a=Math.sin(t),u=1/3,d=(0,Math.sqrt)(u);this._loadMatrix([i+(1-i)*u,u*(1-i)-d*a,u*(1-i)+d*a,0,0,u*(1-i)+d*a,i+u*(1-i),u*(1-i)-d*a,0,0,u*(1-i)-d*a,u*(1-i)+d*a,i+u*(1-i),0,0,0,0,0,1,0],r)},e.prototype.contrast=function(t,r){var i=(t||0)+1,a=-.5*(i-1);this._loadMatrix([i,0,0,0,a,0,i,0,0,a,0,0,i,0,a,0,0,0,1,0],r)},e.prototype.saturate=function(t,r){void 0===t&&(t=0);var i=2*t/3+1,a=-.5*(i-1);this._loadMatrix([i,a,a,0,0,a,i,a,0,0,a,a,i,0,0,0,0,0,1,0],r)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,r,i,a,s){var u=((i=i||16770432)>>16&255)/255,d=(i>>8&255)/255,v=(255&i)/255,m=((a=a||3375104)>>16&255)/255,x=(a>>8&255)/255,b=(255&a)/255;this._loadMatrix([.3,.59,.11,0,0,u,d,v,t=t||.2,0,m,x,b,r=r||.15,0,u-m,d-x,v-b,0,0],s)},e.prototype.night=function(t,r){this._loadMatrix([-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0],r)},e.prototype.predator=function(t,r){this._loadMatrix([11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0],r)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(hi);Fl.prototype.grayscale=Fl.prototype.greyscale;var Nl=function(n,e){return(Nl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)},Id=function(n){function e(t,r){var i=this,a=new ze;return t.renderable=!1,(i=n.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:t._texture,filterMatrix:a,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=t,i.maskMatrix=a,null==r&&(r=20),i.scale=new Oe(r,r),i}return function Ad(n,e){function t(){this.constructor=n}Nl(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,n),e.prototype.apply=function(t,r,i,a){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var s=this.maskSprite.worldTransform,u=Math.sqrt(s.a*s.a+s.b*s.b),d=Math.sqrt(s.c*s.c+s.d*s.d);0!==u&&0!==d&&(this.uniforms.rotation[0]=s.a/u,this.uniforms.rotation[1]=s.b/u,this.uniforms.rotation[2]=s.c/d,this.uniforms.rotation[3]=s.d/d),t.applyFilter(this,r,i,a)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),e}(hi),Ul=function(n,e){return(Ul=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)},Nd=function(n){function e(){return n.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}return function Bd(n,e){function t(){this.constructor=n}Ul(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,n),e}(hi),kl=function(n,e){return(kl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)},Ld=function(n){function e(t,r){void 0===t&&(t=.5),void 0===r&&(r=Math.random());var i=n.call(this,yu,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return i.noise=t,i.seed=r,i}return function Ud(n,e){function t(){this.constructor=n}kl(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,n),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),e}(hi),oh=new ze;l.prototype._cacheAsBitmap=!1,l.prototype._cacheData=null,l.prototype._cacheAsBitmapResolution=null,l.prototype._cacheAsBitmapMultisample=Qt.NONE;var Gd=function n(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(l.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(n){n!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=n,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(n){n!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=n,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(n){var e;this._cacheAsBitmap!==n&&(this._cacheAsBitmap=n,n?(this._cacheData||(this._cacheData=new Gd),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),l.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))},l.prototype._initCachedDisplayObject=function(e){var t;if(!this._cacheData||!this._cacheData.sprite){var r=this.alpha;this.alpha=1,e.batch.flush();var i=this.getLocalBounds(null,!0).clone();this.filters&&this.filters.length&&i.pad(this.filters[0].padding),i.ceil(L.RESOLUTION);var s=e.renderTexture.current,u=e.renderTexture.sourceFrame.clone(),d=e.renderTexture.destinationFrame.clone(),v=e.projection.transform,m=Dr.create({width:i.width,height:i.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:null!==(t=this.cacheAsBitmapMultisample)&&void 0!==t?t:e.multisample}),x="cacheAsBitmap_"+hr();this._cacheData.textureCacheId=x,Et.addToCache(m.baseTexture,x),he.addToCache(m,x);var b=this.transform.localTransform.copyTo(oh).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:m,clear:!0,transform:b,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=v,e.renderTexture.bind(s,u,d),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;var S=new Io(m);S.transform.worldTransform=this.transform.worldTransform,S.anchor.x=-i.x/i.width,S.anchor.y=-i.y/i.height,S.alpha=r,S._bounds=this._bounds,this._cacheData.sprite=S,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=S.containsPoint.bind(S)}},l.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))},l.prototype._initCachedDisplayObjectCanvas=function(e){if(!this._cacheData||!this._cacheData.sprite){var t=this.getLocalBounds(null,!0),r=this.alpha;this.alpha=1;var i=e.context,a=e._projTransform;t.ceil(L.RESOLUTION);var s=Dr.create({width:t.width,height:t.height}),u="cacheAsBitmap_"+hr();this._cacheData.textureCacheId=u,Et.addToCache(s.baseTexture,u),he.addToCache(s,u);var d=oh;this.transform.localTransform.copyTo(d),d.invert(),d.tx-=t.x,d.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:s,clear:!0,transform:d,skipUpdateTransform:!1}),e.context=i,e._projTransform=a,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;var v=new Io(s);v.transform.worldTransform=this.transform.worldTransform,v.anchor.x=-t.x/t.width,v.anchor.y=-t.y/t.height,v.alpha=r,v._bounds=this._bounds,this._cacheData.sprite=v,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=v.containsPoint.bind(v)}},l.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},l.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},l.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Et.removeFromCache(this._cacheData.textureCacheId),he.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},l.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)},l.prototype.name=null,f.prototype.getChildByName=function(e,t){for(var r=0,i=this.children.length;r<i;r++)if(this.children[r].name===e)return this.children[r];if(t)for(r=0,i=this.children.length;r<i;r++){var a=this.children[r];if(a.getChildByName){var s=a.getChildByName(e,!0);if(s)return s}}return null},l.prototype.getGlobalPosition=function(e,t){return void 0===e&&(e=new Oe),void 0===t&&(t=!1),this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e};var Hd=function(){function n(){}return n.init=function(e){var t=this;Object.defineProperty(this,"resizeTo",{set:function(r){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=r,r&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){!t._resizeTo||(t.cancelResize(),t._resizeId=requestAnimationFrame(function(){return t.resize()}))},this.cancelResize=function(){t._resizeId&&(cancelAnimationFrame(t._resizeId),t._resizeId=null)},this.resize=function(){if(t._resizeTo){var r,i;if(t.cancelResize(),t._resizeTo===globalThis.window)r=globalThis.innerWidth,i=globalThis.innerHeight;else{var a=t._resizeTo;r=a.clientWidth,i=a.clientHeight}t.renderer.resize(r,i)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null},n.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},n.extension=y.Application,n}(),ah=function(){function n(e){var t=this;this.stage=new f,e=Object.assign({forceCanvas:!1},e),this.renderer=function uc(n){return Ws.create(n)}(e),n._plugins.forEach(function(r){r.init.call(t,e)})}return n.registerPlugin=function(e){$e("6.5.0","Application.registerPlugin() is deprecated, use extensions.add()"),P.add({type:y.Application,ref:e})},n.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(n.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),n.prototype.destroy=function(e,t){var r=this,i=n._plugins.slice(0);i.reverse(),i.forEach(function(a){a.destroy.call(r)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null},n._plugins=[],n}();P.handleByList(y.Application,ah._plugins),P.add(Hd);var Ll=function(n,e){return(Ll=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)};function Do(n,e){function t(){this.constructor=n}Ll(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var Xd=function(n){function e(t,r,i,a){void 0===t&&(t=100),void 0===r&&(r=100),void 0===i&&(i=10),void 0===a&&(a=10);var s=n.call(this)||this;return s.segWidth=i,s.segHeight=a,s.width=t,s.height=r,s.build(),s}return Do(e,n),e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,r=[],i=[],a=[],s=this.segWidth-1,u=this.segHeight-1,d=this.width/s,v=this.height/u,m=0;m<t;m++){var x=m%this.segWidth,b=m/this.segWidth|0;r.push(x*d,b*v),i.push(x/s,b/u)}var S=s*u;for(m=0;m<S;m++){var A=m%s,M=m/s|0,$=M*this.segWidth+A+1,mt=(M+1)*this.segWidth+A;a.push(M*this.segWidth+A,$,mt,$,(M+1)*this.segWidth+A+1,mt)}this.buffers[0].data=new Float32Array(r),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(a),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(Es),jd=function(n){function e(t,r,i){void 0===t&&(t=200),void 0===i&&(i=0);var a=n.call(this,new Float32Array(4*r.length),new Float32Array(4*r.length),new Uint16Array(6*(r.length-1)))||this;return a.points=r,a._width=t,a.textureScale=i,a.build(),a}return Do(e,n),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var t=this.points;if(t){var r=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),a=this.getIndex();if(!(t.length<1)){r.data.length/4!==t.length&&(r.data=new Float32Array(4*t.length),i.data=new Float32Array(4*t.length),a.data=new Uint16Array(6*(t.length-1)));var s=i.data,u=a.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;for(var d=0,v=t[0],m=this._width*this.textureScale,x=t.length,b=0;b<x;b++){var S=4*b;if(this.textureScale>0){var A=v.x-t[b].x,M=v.y-t[b].y,F=Math.sqrt(A*A+M*M);v=t[b],d+=F/m}else d=b/(x-1);s[S]=d,s[S+1]=0,s[S+2]=d,s[S+3]=1}var $=0;for(b=0;b<x-1;b++)u[$++]=S=2*b,u[$++]=S+1,u[$++]=S+2,u[$++]=S+2,u[$++]=S+1,u[$++]=S+3;i.update(),a.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var i,r=t[0],a=0,s=0,u=this.buffers[0].data,d=t.length,v=0;v<d;v++){var m=t[v],x=4*v;s=-((i=v<t.length-1?t[v+1]:m).x-r.x),a=i.y-r.y;var b=Math.sqrt(a*a+s*s),S=this.textureScale>0?this.textureScale*this._width/2:this._width/2;a/=b,s/=b,s*=S,u[x]=m.x+(a*=S),u[x+1]=m.y+s,u[x+2]=m.x-a,u[x+3]=m.y-s,r=m}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(Es),Yd=(function(n){function e(t,r,i){void 0===i&&(i=0);var a=this,s=new jd(t.height,r,i),u=new Na(t);return i>0&&(t.baseTexture.wrapMode=it.REPEAT),(a=n.call(this,s,u)||this).autoUpdate=!0,a}Do(e,n),e.prototype._render=function(t){var r=this.geometry;(this.autoUpdate||r._width!==this.shader.texture.height)&&(r._width=this.shader.texture.height,r.update()),n.prototype._render.call(this,t)}}(Fa),function(n){function e(t,r,i){var a=this,s=new Xd(t.width,t.height,r,i),u=new Na(he.WHITE);return(a=n.call(this,s,u)||this).texture=t,a.autoResize=!0,a}return Do(e,n),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry,r=this.shader.texture;this.autoResize&&(t.width!==r.width||t.height!==r.height)&&(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),n.prototype._render.call(this,t)},e.prototype.destroy=function(t){this.shader.texture.off("update",this.textureUpdated,this),n.prototype.destroy.call(this,t)},e}(Fa)),Gl=(function(n){function e(t,r,i,a,s){void 0===t&&(t=he.EMPTY);var u=this,d=new Es(r,i,a);d.getBuffer("aVertexPosition").static=!1;var v=new Na(t);return(u=n.call(this,d,v,null,s)||this).autoUpdate=!0,u}Do(e,n),Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),n.prototype._render.call(this,t)}}(Fa),function(n){function e(t,r,i,a,s){void 0===r&&(r=10),void 0===i&&(i=10),void 0===a&&(a=10),void 0===s&&(s=10);var u=n.call(this,he.WHITE,4,4)||this;return u._origWidth=t.orig.width,u._origHeight=t.orig.height,u._width=u._origWidth,u._height=u._origHeight,u._leftWidth=r,u._rightWidth=a,u._topHeight=i,u._bottomHeight=s,u.texture=t,u}Do(e,n),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,r=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*r,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*r,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,r=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*r,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*r,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,i=this._topHeight+this._bottomHeight;return Math.min(this._width>t?1:this._width/t,this._height>i?1:this._height/i)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var t=this.texture,r=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var i=1/this._origWidth,a=1/this._origHeight;r[0]=r[8]=r[16]=r[24]=0,r[1]=r[3]=r[5]=r[7]=0,r[6]=r[14]=r[22]=r[30]=1,r[25]=r[27]=r[29]=r[31]=1,r[2]=r[10]=r[18]=r[26]=i*this._leftWidth,r[4]=r[12]=r[20]=r[28]=1-i*this._rightWidth,r[9]=r[11]=r[13]=r[15]=a*this._topHeight,r[17]=r[19]=r[21]=r[23]=1-a*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}(Yd),function(n,e){return(Gl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])})(n,e)}),zd=function(n){function e(t,r){void 0===r&&(r=!0);var i=n.call(this,t[0]instanceof he?t[0]:t[0].texture)||this;return i._textures=null,i._durations=null,i._autoUpdate=r,i._isConnectedToTicker=!1,i.animationSpeed=1,i.loop=!0,i.updateAnchor=!1,i.onComplete=null,i.onFrameChange=null,i.onLoop=null,i._currentTime=0,i._playing=!1,i._previousFrame=null,i.textures=t,i}return function Zd(n,e){function t(){this.constructor=n}Gl(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,n),e.prototype.stop=function(){!this._playing||(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(q.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(q.shared.add(this.update,this,B.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(t){this.stop();var r=this.currentFrame;this._currentTime=t,r!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var r=this.currentFrame;this._currentTime=t,r!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){if(this._playing){var r=this.animationSpeed*t,i=this.currentFrame;if(null!==this._durations){var a=this._currentTime%1*this._durations[this.currentFrame];for(a+=r/60*1e3;a<0;)this._currentTime--,a+=this._durations[this.currentFrame];var s=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);a>=this._durations[this.currentFrame];)a-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=a/this._durations[this.currentFrame]}else this._currentTime+=r;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i||this.animationSpeed<0&&this.currentFrame>i)&&this.onLoop(),this.updateTexture())}},e.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(t){this.stop(),n.prototype.destroy.call(this,t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var r=[],i=0;i<t.length;++i)r.push(he.from(t[i]));return new e(r)},e.fromImages=function(t){for(var r=[],i=0;i<t.length;++i)r.push(he.from(t[i]));return new e(r)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof he)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var r=0;r<t.length;r++)this._textures.push(t[r].texture),this._durations.push(t[r].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(q.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(q.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),e}(Io);P.add(Ec,Fc,Ic,Of,qf,Tu,od,gd,qc,wf,Sf,td,ot,jc);var Vd={AlphaFilter:bd,BlurFilter:Pd,BlurFilterPass:Bl,ColorMatrixFilter:Fl,DisplacementFilter:Id,FXAAFilter:Nd,NoiseFilter:Ld}}}]);